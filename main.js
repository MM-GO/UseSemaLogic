/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  DebugLevel: () => DebugLevel,
  Default_profile: () => Default_profile,
  SemaLogicPluginComm: () => SemaLogicPluginComm2,
  default: () => SemaLogicPlugin,
  mygSID: () => mygSID
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/view.ts
var import_obsidian3 = require("obsidian");

// src/const.ts
var API_Defaults = {
  http: "http://",
  https: "https://",
  Base_URL: "service.semalogic.ddns.net",
  Port: "443",
  rules_parse: "/rules/parse",
  reset: "/reset",
  Version: "/APIVersion",
  PostDialect: "/dialect/define",
  RemoveDialect: "/dialect/remove",
  GetAPI: "/APIVersion",
  SID: "12345678",
  ShowContext: true,
  useUserPasswortforHTTP: true,
  HttpUser: "User",
  HttpPassword: "Password",
  viewheader: "SVG",
  AspUrl: "ASP-Service-URL.com/",
  AspEndpoint: "/plans/count",
  useUserPasswortforHTTPSL: true,
  HttpUserSL: "User",
  HttpPasswordSL: "Password"
};
var Value_Defaults = {
  updateInterval: 500
};
var semaLogicCommand = {
  command_start: "SemaLogic(",
  command_end: ")",
  showHelp: "show help",
  showVersion: "show version",
  getDialectwTemplate: "template",
  useDialect: "use ???dialectName???",
  define: "define",
  showParse: "show as",
  showFilter: "for",
  transfer: "transfer",
  transferEndpoint: "to endpoint",
  transferParam: "with param"
};
var semaLogicHelp = [
  [semaLogicCommand.command_start + "???" + semaLogicCommand.command_end, "You can define what SemaLogic should do for you by replacing ??? with one of the following SemaLogic commands:"],
  [semaLogicCommand.command_start + semaLogicCommand.showHelp + semaLogicCommand.command_end, "Show this help information"],
  [semaLogicCommand.command_start + semaLogicCommand.showVersion + semaLogicCommand.command_end, "Show the version of the SemaLogic-Service"],
  [semaLogicCommand.command_start + semaLogicCommand.define + semaLogicCommand.command_end, "After this inlinecommand and a space line comes e.g. a table that should be interpreted by SemaLogic (table, NTable, ZTable) with optional headerinterpretation- Expected format:\n(|Symbol||Level(n+1)|\n|---|---|\n|Level(1)|Level(n)|Value|)"],
  [`${semaLogicCommand.command_start + semaLogicCommand.showParse} %1 ${semaLogicCommand.showFilter} %2 ${semaLogicCommand.command_end}`, "show as - shows an output directly to the reading view ( with %1 you have to set the output type: 1|1 {picture, syemalogic, asp} and with %2 you could filter for an symbol by symbolname)"],
  [`${semaLogicCommand.command_start + semaLogicCommand.transfer} %1 ${semaLogicCommand.transferEndpoint} %2 ${semaLogicCommand.transferParam} %3 ${semaLogicCommand.command_end}`, "transfer - shows an (currently only) asp output directly to the asp.view from SemaLogicView ( with %1 you have to set the output type: 1|1 {asp} and with %2 you could set the endpoint and wuth %3 you could set queryparameter)"]
];
var Rstypes_Semalogic = 0;
var Rstypes_Picture = 3;
var Rstypes_ASP = 6;
var Rstypes_SemanticTree = 8;
var Rstypes_KnowledgeGraph = 9;
var RulesettypesCommands = [
  ["SemaLogic", "SemaLogic"],
  ["technical", "SemaLogic"],
  ["semalogic", "SemaLogic"],
  ["Picture (SVG)", "SVG"],
  ["picture", "SVG"],
  ["SVG", "SVG"],
  ["ASP", "ASP.json"],
  ["asp", "ASP.json"],
  ["SemanticTree", "SemanticTree"],
  ["KnwoledgeGraph", "KnowledgeGraph"]
];
var DebugLevelNames = [
  "DebugLevel_Off",
  "DebugLevel_Error",
  "DebugLevel_Current_Dev",
  "DebugLevel_Important",
  "DebugLevel_Informative",
  "DebugLevel_Chatty",
  "DebugLevel_All"
];
var DebugLevMap = {
  "DebugLevel_Off": 0,
  "DebugLevel_Error": 1,
  "DebugLevel_Current_Dev": 2,
  "DebugLevel_Important": 3,
  "DebugLevel_Informative": 4,
  "DebugLevel_Chatty": 5,
  "DebugLevel_All": 6
};
var slTexts = {
  "HeaderSL": "SemaLogic.View",
  "HeaderTV": "Transfer.View"
};

// src/utils.ts
var import_obsidian = require("obsidian");
var import_obsidian2 = require("obsidian");
var searchForSemaLogicCommands = (el) => {
  for (let i = 0; i < el.childNodes.length; i++) {
    const child = el.childNodes[i];
    if (isSemaLogicCommand(child)) {
      return true;
    }
  }
  return false;
};
var isSemaLogicCommand = (n) => {
  var _a;
  return n.nodeType === Node.TEXT_NODE && Boolean((_a = n.textContent) == null ? void 0 : _a.startsWith(semaLogicCommand.command_start));
};
var replaceWithEmptyNode = (containerEl) => {
  const results = [];
  return results;
};
async function replaceWithCommandNode(containerEl, settings) {
  var _a, _b;
  let results = [];
  let found = false;
  let semaLogicCom = (_b = containerEl.textContent) == null ? void 0 : _b.substring(semaLogicCommand.command_start.length, (_a = containerEl.textContent) == null ? void 0 : _a.indexOf(semaLogicCommand.command_end)).toLowerCase();
  if (!found && (semaLogicCom == null ? void 0 : semaLogicCom.toString().substring(0, semaLogicCommand.showHelp.length)) == semaLogicCommand.showHelp) {
    results = await showHelp();
    found = true;
  }
  if (!found && (semaLogicCom == null ? void 0 : semaLogicCom.toString().substring(0, semaLogicCommand.showVersion.length)) == semaLogicCommand.showVersion) {
    results = await showVersion(settings);
    found = true;
  }
  if (!found && (semaLogicCom == null ? void 0 : semaLogicCom.toString().substring(0, semaLogicCommand.showParse.length)) == semaLogicCommand.showParse) {
    let rulesettype = "";
    let filter = "";
    for (let rule in RulesettypesCommands) {
      if (semaLogicCom.contains(RulesettypesCommands[rule][0])) {
        rulesettype = RulesettypesCommands[rule][1];
        const findfor = semaLogicCom.indexOf(semaLogicCommand.showFilter);
        if (findfor > 0) {
          filter = semaLogicCom.substring(findfor + semaLogicCommand.showFilter.length);
          filter = filter.trim();
        }
        found = true;
        break;
      }
    }
    if (!found) {
      results = await showHelp();
      found = true;
    }
    if (rulesettype != "") {
      results = await showParseWithFilter(filter, rulesettype, settings);
    }
    found = true;
  }
  if (!found) {
    results = replaceWithEmptyNode(containerEl);
  }
  return results;
}
var SemaLogicRenderedElement = class extends import_obsidian.MarkdownRenderChild {
  constructor({ containerEl, set }) {
    super(containerEl);
    this.mysettings = set;
  }
  async onload() {
    this.containerEl.setChildrenInPlace(
      await replaceWithCommandNode(this.containerEl, this.mysettings)
    );
  }
};
async function showHelp() {
  let results = [];
  let buildcontainerEl;
  slconsolelog(DebugLevMap.DebugLevel_Informative, void 0, semaLogicCommand.showHelp);
  buildcontainerEl = createEl("table");
  let body = buildcontainerEl.createEl("body");
  let row = body.createEl("tr");
  row.createEl("td", { text: "SemaLogic-Commands-Help" });
  row.createEl("td", { text: "Description" });
  for (let i = 0; i < semaLogicHelp.length; i++) {
    const row2 = body.createEl("tr");
    row2.createEl("td", { text: semaLogicHelp[i][0] });
    row2.createEl("td", { text: semaLogicHelp[i][1] });
  }
  results.push(buildcontainerEl);
  return results;
}
async function showVersion(settings) {
  let results = [];
  let buildcontainerEl;
  let versiontext = "";
  slconsolelog(DebugLevMap.DebugLevel_Informative, void 0, semaLogicCommand.showVersion);
  const version = await semaLogicGetVersion(settings).then(function(resultBuffer) {
    versiontext = resultBuffer;
  }).catch(
    function(resultBuffer) {
      versiontext = resultBuffer;
    }
  );
  slconsolelog(DebugLevMap.DebugLevel_High, void 0, `JSON-Text in Processor:${versiontext}`);
  buildcontainerEl = createEl("table");
  const table = buildcontainerEl.createEl("table");
  const body = buildcontainerEl.createEl("body");
  const row = body.createEl("tr");
  row.createEl("td", { text: versiontext });
  results.push(buildcontainerEl);
  return results;
}
function sethttps(https) {
  let str;
  if (https) {
    str = API_Defaults.https;
  } else {
    str = API_Defaults.http;
  }
  return str;
}
function getHostPort(settings) {
  let adress = sethttps(settings.mySLSettings[settings.mySetting].myUseHttpsSL);
  adress = adress + settings.mySLSettings[settings.mySetting].myBaseURL;
  if (settings.mySLSettings[settings.mySetting].myPort != "") {
    adress = adress + ":" + settings.mySLSettings[settings.mySetting].myPort;
  }
  slconsolelog(DebugLevMap.DebugLevel_High, void 0, "getting SemaLogic-Adress: " + adress);
  return adress;
}
function getHostAspPort(settings, parsedCommands) {
  let adress;
  if (parsedCommands.outputformat == RulesettypesCommands[Rstypes_ASP][1]) {
    adress = sethttps(settings.mySLSettings[settings.mySetting].myUseHttps);
    adress = adress + settings.mySLSettings[settings.mySetting].myAspUrl;
    if (parsedCommands.endpoint != void 0) {
      if (parsedCommands.endpoint.indexOf("http") >= 0) {
        adress = parsedCommands.endpoint;
      } else {
        adress = adress + "/" + parsedCommands.endpoint;
      }
    }
  } else {
    adress = parsedCommands.endpoint;
  }
  if (parsedCommands.param != void 0 && parsedCommands.param != "") {
    adress = adress + "?" + parsedCommands.param;
  }
  slconsolelog(DebugLevMap.DebugLevel_High, void 0, "getting asp-Adress: " + adress);
  return adress;
}
async function semaLogicGetVersion(settings) {
  slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Start semaLogicGetVersion");
  const myVersion = '{"version":"0","versiontext":"Text"}';
  let myJson = JSON.parse(myVersion);
  let jsonVersion = "";
  let vAPI_URL_Version = getHostPort(settings) + API_Defaults.Version;
  slconsolelog(DebugLevMap.DebugLevel_Important, void 0, vAPI_URL_Version);
  let options;
  if (settings.mySLSettings[settings.mySetting].myUseHttpsSL && settings.mySLSettings[settings.mySetting].myUserSL != "") {
    options = {
      url: vAPI_URL_Version,
      method: "GET",
      headers: {
        "content-type": "application/json",
        "Authorization": "Basic " + btoa(settings.mySLSettings[settings.mySetting].myUserSL + ":" + settings.mySLSettings[settings.mySetting].myPasswordSL)
      }
    };
  } else {
    options = {
      url: vAPI_URL_Version,
      method: "GET"
    };
  }
  let response;
  try {
    response = await (0, import_obsidian2.requestUrl)(options);
    myJson = JSON.parse(response.text);
    slconsolelog(DebugLevMap.DebugLevel_All, void 0, myJson.version);
    jsonVersion = myJson.version;
    slconsolelog(DebugLevMap.DebugLevel_All, void 0, `JSON-Text in Request:${jsonVersion}`);
    return jsonVersion;
  } catch (e) {
    slconsolelog(DebugLevMap.DebugLevel_Error, void 0, "Error: Catch of APIVersion" + e.toString());
    throw new Error();
  }
}
async function semaLogicPing(settings, lastUpdate) {
  let starttime = Date.now();
  slconsolelog(DebugLevMap.DebugLevel_Informative, void 0, "GetVersionPing at ", Date.now(), "  for ", getHostPort(settings));
  await semaLogicGetVersion(settings).then(function(resultBuffer) {
    slconsolelog(DebugLevMap.DebugLevel_Informative, void 0, "SemaLogic GetVersionPing started at:", starttime, " Endtime: ", Date.now());
  }).catch(
    function(e) {
      if (starttime < lastUpdate) {
        slconsolelog(DebugLevMap.DebugLevel_Important, void 0, `There is no connection to SemaLogicService APIVersion`);
        slconsolelog(DebugLevMap.DebugLevel_Important, void 0, getHostPort(settings));
        app.workspace.iterateAllLeaves((leaf) => {
          let slView = leaf.view.getViewType();
          if (slView == SemaLogicViewType) {
            const container = leaf.view.containerEl.children[1];
            container.empty();
            container.createEl("h3", { text: "SemaLogic_Error" });
            container.createEl("b", { text: "There is no connection to SemaLogicService -> APIVersion" });
            container.createEl("b", { text: getHostPort(settings) });
            return false;
          }
        });
      } else {
        slconsolelog(DebugLevMap.DebugLevel_High, void 0, "SemaLogic GetVersionPing failed and not used started:", starttime, " Endtime: ", Date.now());
      }
    }
  );
  return true;
}
async function showParseWithFilter(filter, rulessettype, settings) {
  let results = [];
  let buildcontainerEl;
  let vAPI_URL = getHostPort(settings) + API_Defaults.rules_parse + "?sid=" + mygSID;
  slconsolelog(DebugLevMap.DebugLevel_Important, void 0, vAPI_URL);
  let bodytext = "";
  let activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
  if (activeView == void 0) {
    slconsolelog(DebugLevMap.DebugLevel_High, void 0, "Do not find an active view");
    return results;
  }
  let dialectID = "default";
  let codeblock = false;
  let newCodeblock = false;
  if (activeView != null) {
    for (let i = 0; i < activeView.editor.lineCount(); i++) {
      slconsolelog(DebugLevMap.DebugLevel_All, void 0, i, ";", activeView.editor.getLine(i));
      slconsolelog(DebugLevMap.DebugLevel_All, void 0, "Substring:", activeView.editor.getLine(i).substring(0, 2));
      if (activeView.editor.getLine(i).substring(0, 3) == "```") {
        if (!codeblock) {
          codeblock = true;
          newCodeblock = true;
        } else {
          newCodeblock = false;
        }
      }
      slconsolelog(DebugLevMap.DebugLevel_Informative, void 0, "Current line is Codeblock", codeblock);
      if (!codeblock && !newCodeblock) {
        switch (activeView.editor.getLine(i)) {
          default:
            bodytext = bodytext.concat(activeView.editor.getLine(i) + "\n");
        }
      } else {
        switch (activeView.editor.getLine(i).substring(0, semaLogicCommand.useDialect.length)) {
          case semaLogicCommand.useDialect: {
            dialectID = activeView.editor.getLine(i).substring(semaLogicCommand.useDialect.length, activeView.editor.getLine(i).length - 1);
            dialectID = dialectID.trim();
            break;
          }
          default: {
          }
        }
      }
      if (i < activeView.editor.lineCount()) {
        if (activeView.editor.getLine(i).substring(0, 3) == "```") {
          if (codeblock && !newCodeblock) {
            codeblock = false;
          } else {
            newCodeblock = false;
          }
        }
      }
    }
  }
  if (bodytext == "") {
    bodytext = "";
  }
  if (dialectID == "") {
    dialectID = "default";
  }
  let result = "";
  let optionsParse;
  if (filter != "") {
    let jsonwoFilter = {
      "text": [
        {
          "textID": "fly",
          "dialectID": dialectID,
          "rules": bodytext
        }
      ],
      "filter": {
        "dialectID": "default",
        "symbols": [
          {
            "symbol": filter
          }
        ]
      },
      "persistency": false,
      "rulesettype": rulessettype
    };
    optionsParse = {
      url: vAPI_URL,
      method: "POST",
      headers: {
        "content-type": "application/json"
      },
      body: JSON.stringify(jsonwoFilter)
    };
  } else {
    let jsontestwthFilter = {
      "text": [
        {
          "textID": "fly",
          "dialectID": dialectID,
          "rules": bodytext
        }
      ],
      "filter": {},
      "persistency": false,
      "rulesettype": rulessettype
    };
    optionsParse = {
      url: vAPI_URL,
      method: "POST",
      headers: {
        "content-type": "application/json"
      },
      body: JSON.stringify(jsontestwthFilter)
    };
  }
  let res;
  slconsolelog(DebugLevMap.DebugLevel_Chatty, void 0, `Context: ${dialectID}, Bodytext: ${bodytext}`);
  slconsolelog(DebugLevMap.DebugLevel_Important, void 0, optionsParse);
  try {
    const responseParse = await (0, import_obsidian2.requestUrl)(optionsParse);
    const remJson = responseParse.text;
    slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "SemaLogic: Parse with http-status " + responseParse.status.toString());
    if (responseParse.status == 200) {
      let resulthttp = responseParse.text;
      const fragment = new Range().createContextualFragment(resulthttp);
      buildcontainerEl = createEl("p");
      buildcontainerEl.appendChild(fragment);
      results.push(buildcontainerEl);
      slconsolelog(DebugLevMap.DebugLevel_Important, void 0, `Parseresult:${resulthttp}`);
      return results;
    }
  } catch (e) {
    slconsolelog(DebugLevMap.DebugLevel_Error, void 0, `Catcherror of removing context ${vAPI_URL}`);
    slconsolelog(DebugLevMap.DebugLevel_Error, void 0, e.toString());
    throw e;
  }
  return results;
}
function slconsolelog(DebugValue, slview, message, ...optionalParams) {
  if (DebugLevel >= DebugValue) {
    if (slview != void 0) {
      if (slview.getViewType() == SemaLogicViewType) {
        if (slview.getDebugInline() == true) {
          let logMessages = JSON.stringify(message);
          slview.appendDebugContent(logMessages);
        } else {
          console.log(message, ...optionalParams);
        }
      }
    } else {
      console.log(message, ...optionalParams);
    }
  }
}

// src/view_utils.ts
var ViewUtils = class {
  getContent(contentEl, outPutFormat) {
    let content;
    if (contentEl.textContent == null) {
      content = "";
    } else {
      content = contentEl.textContent;
    }
    content = this.cleanContent(content, outPutFormat);
    content = this.cleanCommands(content);
    return content;
  }
  cleanContent(content, outPutFormat) {
    if (outPutFormat == RulesettypesCommands[Rstypes_ASP][1]) {
      const firstJSONBracket = content.indexOf("{");
      content = content.substring(firstJSONBracket, content.length);
    }
    if (outPutFormat == RulesettypesCommands[Rstypes_Semalogic][1]) {
      const headerString = "Semalogic Output";
      const firstheaderString = content.indexOf(headerString);
      content = content.substring(firstheaderString + headerString.length, content.length);
    }
    return content;
  }
  cleanCommands(content) {
    let contentCleaned = [];
    let contentArray = content.split("\n");
    contentArray.forEach((element) => {
      let row = element.trim();
      row = row.toLowerCase();
      slconsolelog(DebugLevMap.DebugLevel_Chatty, void 0, "Row before:" + row);
      row = row.replaceAll(" ", "");
      slconsolelog(DebugLevMap.DebugLevel_Chatty, void 0, "Row after:" + row);
      if (row.indexOf(semaLogicCommand.command_start.toLowerCase()) != 0) {
        contentCleaned.push(element);
      } else {
        slconsolelog(DebugLevMap.DebugLevel_Chatty, void 0, "Index Define:" + row.indexOf(semaLogicCommand.define).toString());
        slconsolelog(DebugLevMap.DebugLevel_Chatty, void 0, "Length Start:" + semaLogicCommand.command_start.length.toString());
        if (row.indexOf(semaLogicCommand.define) == semaLogicCommand.command_start.length) {
          contentCleaned.push(element);
        }
      }
    });
    content = "";
    contentCleaned.forEach((element) => {
      content = content + element + "\n";
    });
    return content;
  }
};

// src/view.ts
var SemaLogicViewType = "SemaLogicService";
var SemaLogicView2 = class extends import_obsidian3.ItemView {
  constructor(leaf) {
    super(leaf);
    this.scaleRatio = 100;
    this.view_utils = new ViewUtils();
    this.debugInline = false;
    this.debugContent = [];
  }
  getOutPutFormat() {
    return this.dropdownButton.getValue();
  }
  getDebugInline() {
    return this.debugInline;
  }
  getContent() {
    return this.view_utils.getContent(this.contentEl, this.getOutPutFormat());
  }
  appendDebugContent(text) {
    this.debugContent.push(text);
  }
  copyToCb() {
    const blobcontentText = (cont) => `${cont}`;
    let data = new ClipboardItem({
      "text/plain": new Blob([blobcontentText(this.currResult)], {
        type: "text/plain"
      })
    });
    navigator.clipboard.write([data]).then(() => {
      alert("successfully copied");
    }).catch(() => {
      alert("something went wrong");
    });
  }
  setComm(comm) {
    if (this.slComm != comm) {
      this.slComm = comm;
      this.setNewInitial(this.slComm.slPlugin.settings.mySLSettings[this.slComm.slPlugin.settings.mySetting].myOutputFormat);
    }
  }
  getViewType() {
    return SemaLogicViewType;
  }
  getDisplayText() {
    return SemaLogicViewType;
  }
  onload() {
    this.navigation = true;
    this.contentEl.contentEditable = "true";
    this.debugInline == false;
  }
  getDebugButtonText() {
    if (this.debugInline == true) {
      return "InlineDebug is on";
    } else {
      return "InlineDebug is off";
    }
  }
  createDropDownButtonForOutPutFormat(container, dropDownValue) {
    this.dropdownButton = new import_obsidian3.DropdownComponent(container).addOption(RulesettypesCommands[Rstypes_Semalogic][1], RulesettypesCommands[Rstypes_Semalogic][0]).addOption(RulesettypesCommands[Rstypes_ASP][1], RulesettypesCommands[Rstypes_ASP][0]).addOption(RulesettypesCommands[Rstypes_Picture][1], RulesettypesCommands[Rstypes_Picture][0]).addOption(RulesettypesCommands[Rstypes_SemanticTree][1], RulesettypesCommands[Rstypes_SemanticTree][0]).addOption(RulesettypesCommands[Rstypes_KnowledgeGraph][1], RulesettypesCommands[Rstypes_KnowledgeGraph][0]).setValue(dropDownValue).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_Informative, this.slComm.slview, "Set ViewOutputFormat: " + value);
      this.slComm.slPlugin.updateOutstanding = true;
      dropDownValue = value;
      this.dropdownButton.setValue(value);
      this.getSemaLogicParse(this.slComm.slPlugin.settings, this.apiURL, this.dialectID, this.bodytext, false, value);
    });
    return container;
  }
  createCopyToClipboardButton(container) {
    this.copyButton = new import_obsidian3.ButtonComponent(container).setButtonText("Copy to Clipboard").onClick((mouse_event) => {
      this.copyToCb();
    });
    return container;
  }
  createDebugButton(container) {
    if (DebugLevel != DebugLevMap.DebugLevel_Off) {
      this.debugButton = new import_obsidian3.ButtonComponent(container).setButtonText(this.getDebugButtonText()).onClick((mouse_event) => {
        if (this.debugInline == true) {
          this.debugInline = false;
          this.debugContent = [];
        } else {
          this.debugInline = true;
        }
        if (this.slComm.slview != void 0) {
          slconsolelog(DebugLevMap.DebugLevel_Informative, this.slComm.slview, "Set InlineDebugging: " + this.debugInline);
        }
        this.updateView();
      });
    }
    return container;
  }
  createScaleButtons(container) {
    this.zoomIn = new import_obsidian3.ButtonComponent(container).setButtonText("-").onClick((mouse_event) => {
      this.scaleRatio = this.scaleRatio / 2;
      if (this.zoomRatio != null) {
        this.zoomRatio.setButtonText(String(this.scaleRatio));
      }
      slconsolelog(DebugLevMap.DebugLevel_Informative, this.slComm.slview, "Set ScaleRatio to: " + this.scaleRatio);
      this.updateView();
    });
    this.zoomRatio = new import_obsidian3.ButtonComponent(container).setButtonText(String(this.scaleRatio)).onClick((mouse_event) => {
      slconsolelog(DebugLevMap.DebugLevel_Informative, this.slComm.slview, "ScaleRatio := " + this.scaleRatio);
    });
    this.zoomOut = new import_obsidian3.ButtonComponent(container).setButtonText("+").onClick((mouse_event) => {
      this.scaleRatio = this.scaleRatio * 2;
      this.zoomRatio.setButtonText(String(this.scaleRatio));
      slconsolelog(DebugLevMap.DebugLevel_Informative, this.slComm.slview, "Set ScaleRatio to: " + this.scaleRatio);
      this.updateView();
    });
    return container;
  }
  checkContainerContent() {
    if (this.containerEl.children != void 0) {
      if (this.containerEl.children[1].textContent == slTexts["HeaderSL"]) {
        return true;
      } else {
        return false;
      }
    } else {
      return false;
    }
  }
  deleteContainerContent() {
    if (this.containerEl.children != void 0) {
      for (let i = 0; i < this.containerEl.children.length; i++) {
        if (this.containerEl.children[i].nodeName == "p") {
          while (this.containerEl.children[i] != void 0) {
            this.containerEl.children[i].empty;
          }
        }
      }
    }
  }
  setNewInitial(dropDownValue) {
    let container = this.contentEl;
    if (!this.checkContainerContent()) {
      container.empty();
      container.createEl("h4", { text: slTexts["HeaderSL"] });
      container = this.createDropDownButtonForOutPutFormat(container, dropDownValue);
      container = this.createCopyToClipboardButton(container);
      container = this.createDebugButton(container);
      if (dropDownValue == RulesettypesCommands[Rstypes_Picture][1]) {
        container = this.createScaleButtons(container);
      }
      container.createEl("p");
    } else {
      this.deleteContainerContent();
    }
  }
  async onOpen() {
    this.setNewInitial(RulesettypesCommands[Rstypes_Semalogic][1]);
  }
  async onClose() {
  }
  showError(fragment) {
    this.contentEl.appendChild(fragment);
  }
  onunload() {
    if (this.slComm.slPlugin != void 0) {
      this.slComm.slPlugin.activated = false;
      this.slComm.slPlugin.myStatus.setText("SemaLogic is off");
    }
  }
  createSemaLogicRequestBody(dialectID, bodytext, outPutFormat) {
    slconsolelog(DebugLevMap.DebugLevel_Important, this.slComm.slview, "Context: " + dialectID + " Bodytext: " + bodytext);
    let semaLogicJsonRequestBody = {
      "text": [
        {
          "textID": "ParsingOnTheFly",
          "dialectID": dialectID,
          "rules": bodytext
        }
      ],
      "filter": {},
      "persistency": false,
      "rulesettype": outPutFormat
    };
    return semaLogicJsonRequestBody;
  }
  createSemaLogicRequest(settings, vAPI_URL, semaLogicJsonRequestBody) {
    let request = {
      url: vAPI_URL,
      method: "POST",
      headers: {
        "content-type": "application/json"
      },
      body: JSON.stringify(semaLogicJsonRequestBody)
    };
    if (settings.mySLSettings[settings.mySetting].myUseHttpsSL && settings.mySLSettings[settings.mySetting].myUserSL != "") {
      request = {
        url: vAPI_URL,
        method: "POST",
        headers: {
          "content-type": "application/json",
          "Authorization": "Basic " + btoa(settings.mySLSettings[settings.mySetting].myUserSL + ":" + settings.mySLSettings[settings.mySetting].myPasswordSL)
        },
        body: JSON.stringify(semaLogicJsonRequestBody)
      };
    }
    slconsolelog(DebugLevMap.DebugLevel_Important, this.slComm.slview, "Parsingsstring");
    slconsolelog(DebugLevMap.DebugLevel_Important, this.slComm.slview, request);
    return request;
  }
  getRequestEmbed(content) {
    if (this.getOutPutFormat() == RulesettypesCommands[Rstypes_Picture][1]) {
      let viewBoxString;
      const beginVB = content.indexOf("viewBox");
      if (beginVB > 0) {
        const endVB = content.indexOf('"', content.indexOf('"', beginVB) + 1);
        viewBoxString = content.substring(beginVB, endVB + 1);
      } else {
        viewBoxString = 'viewBox = "0 0 16 9"';
      }
      content = content.replace("<body>", "");
      content = content.replace("</body>", "");
      let header;
      header = "<svg  " + viewBoxString + ' width = "' + String(this.scaleRatio) + '%" xmlns = "http://www.w3.org/2000/svg" >\n';
      header = header + content;
      header = header + "</svg>";
      return header;
    } else {
      return content;
    }
  }
  getCurrResult() {
    return this.getRequestEmbed(this.currResult);
  }
  getCurrHTML() {
    let responseContent = this.contentEl.createEl("div");
    if (this.debugInline == true) {
      this.debugContent.forEach((value) => {
        const textline = responseContent.createEl("span", { text: value + "\n", cls: "debuginline" });
      });
    } else {
      if (this.getOutPutFormat() == RulesettypesCommands[Rstypes_ASP][1]) {
        let resulttextarray = this.getCurrResult().split("\n");
        resulttextarray.forEach((value) => {
          const textline = responseContent.createEl("span", { text: value + "\n", cls: "debuginline" });
        });
      } else {
        responseContent.createEl("p", { text: " " });
        responseContent.insertAdjacentHTML("afterend", this.getCurrResult());
      }
    }
  }
  updateView() {
    this.setNewInitial(this.getOutPutFormat());
    this.getCurrHTML();
  }
  async getSemaLogicParse(settings, vAPI_URL, dialectID, bodytext, parseOnTheFly, parsingFormat) {
    this.bodytext = bodytext;
    this.apiURL = vAPI_URL;
    this.dialectID = dialectID;
    let outPutFormat;
    let resulthttp;
    if (parsingFormat !== void 0) {
      outPutFormat = parsingFormat;
    } else {
      outPutFormat = this.getOutPutFormat();
    }
    let semaLogicJsonRequestBody = this.createSemaLogicRequestBody(dialectID, bodytext, outPutFormat);
    let semaLogicRequest = this.createSemaLogicRequest(settings, vAPI_URL, semaLogicJsonRequestBody);
    try {
      const response = await (0, import_obsidian3.requestUrl)(semaLogicRequest);
      slconsolelog(DebugLevMap.DebugLevel_High, this.slComm.slview, "SemaLogic: Parse with http-status " + response.status.toString());
      if (response.status == 200) {
        resulthttp = response.text;
        slconsolelog(DebugLevMap.DebugLevel_Chatty, this.slComm.slview, `Parseresult:${resulthttp}`);
        if (this.debugInline == false && parseOnTheFly == false) {
          this.currResult = resulthttp;
        }
        if (!parseOnTheFly) {
          this.updateView();
        }
      }
      if (this.slComm.slaspview != void 0) {
      }
      return new Promise((resolve) => {
        resolve(resulthttp);
      });
    } catch (e) {
      slconsolelog(DebugLevMap.DebugLevel_High, this.slComm.slview, `Catcherror of removing context ${vAPI_URL}`);
      slconsolelog(DebugLevMap.DebugLevel_High, this.slComm.slview, e.toString());
      let text = new DocumentFragment();
      text.createEl("p");
      let textfragment = new Range().createContextualFragment(e.toString());
      text.appendChild(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment("See for information about the error-code of http: https://de.wikipedia.org/wiki/HTTP-Statuscode ");
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(semaLogicRequest.url);
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(String(semaLogicRequest.body));
      text.append(textfragment);
      this.showError(text);
      throw e;
    }
  }
};

// src/view_asp.ts
var import_obsidian4 = require("obsidian");
var ASPViewType = "TransferService";
var ASPView = class extends import_obsidian4.ItemView {
  constructor(leaf) {
    super(leaf);
    this.LastRequestTime = 0;
    this.navigation = true;
    this.setNewASPInitial(true);
  }
  setComm(comm) {
    this.slComm = comm;
    this.setNewASPInitial(false);
  }
  getViewType() {
    return ASPViewType;
  }
  getDisplayText() {
    return ASPViewType;
  }
  onload() {
    this.navigation = true;
    this.contentEl.contentEditable = "true";
  }
  checkASPContainerContent() {
    var _a;
    if (this.containerEl.children != void 0) {
      if (((_a = this.containerEl.children[1].textContent) == null ? void 0 : _a.substring(0, slTexts["HeaderTV"].length)) == slTexts["HeaderTV"]) {
        return true;
      } else {
        return false;
      }
    } else {
      return false;
    }
  }
  deleteASPContainerContent() {
    if (this.containerEl.children != void 0) {
      for (let i = 0; i < this.containerEl.children.length; i++) {
        if (this.containerEl.children[i].nodeName == "p") {
          while (this.containerEl.children[i] != void 0) {
            this.containerEl.children[i].empty;
          }
        }
      }
    }
  }
  setNewASPInitial(now) {
    let container = this.contentEl;
    if (now || !this.checkASPContainerContent()) {
      container.empty();
      container.createEl("h4", { text: slTexts["HeaderTV"] });
      container.createEl("p");
    } else {
    }
  }
  async onOpen() {
  }
  async onClose() {
  }
  showError(fragment) {
    this.contentEl.appendChild(fragment);
  }
  onunload() {
    if (this.slComm != void 0) {
      this.slComm.slPlugin.activated = false;
      this.slComm.slPlugin.myStatus.setText("Transfer is off");
    }
  }
  createRequest(comm, settings, apiUrl, method, contentType, withBasicAuth, body) {
    let request;
    let myHeader = {};
    contentType = contentType.toLowerCase();
    method = method.toUpperCase();
    switch (contentType.toLowerCase()) {
      case "json": {
        myHeader["Content-Type"] = "application/json";
        break;
      }
      case "asp": {
        myHeader["Content-Type"] = "application/json";
        break;
      }
      case "asp.json": {
        myHeader["Content-Type"] = "application/json";
        break;
      }
      case "text": {
        myHeader["Content-Type"] = "text/plain";
        break;
      }
      default: {
        myHeader["Content-Type"] = contentType;
        break;
      }
    }
    if (withBasicAuth) {
      myHeader["Authorization"] = "Basic " + btoa(settings.mySLSettings[settings.mySetting].myUser + ":" + settings.mySLSettings[settings.mySetting].myPassword);
    }
    request = {
      url: apiUrl,
      method,
      headers: myHeader,
      body
    };
    slconsolelog(DebugLevMap.DebugLevel_Important, this.slComm.slview, request);
    return request;
  }
  getASPCommands(slComm, settings) {
    let parseCommands;
    parseCommands = {
      commands: [{
        outputformat: "ASP.json",
        endpoint: settings.mySLSettings[settings.mySetting].myAspEndpoint,
        param: ""
      }]
    };
    let parseInitial = true;
    if (slComm.slview != null) {
      const editortext = slComm.slUsedMDView.editor.getRange({ line: 0, ch: 0 }, { line: slComm.slUsedMDView.editor.lastLine() + 1, ch: slComm.slUsedMDView.editor.lastLine.length });
      const rows = editortext.split("\n").filter((row) => row.length > 0);
      let myStrResult;
      let transferString;
      let endpointString = "";
      let paramString;
      rows.forEach((row) => {
        if (row.substring(0, semaLogicCommand.command_start.length) == semaLogicCommand.command_start) {
          const transfer = row.indexOf(semaLogicCommand.transfer);
          const endpoint = row.indexOf(semaLogicCommand.transferEndpoint);
          let param = row.indexOf(semaLogicCommand.transferParam);
          const endCommand = row.lastIndexOf(semaLogicCommand.command_end);
          if (param < 0) {
            param = endCommand;
          }
          if (transfer <= 0) {
          } else {
            transferString = row.substring(transfer + semaLogicCommand.transfer.length + 1, endpoint);
            transferString = transferString.trimEnd();
            if (endpoint > 0) {
              endpointString = row.substring(endpoint + 1 + semaLogicCommand.transferEndpoint.length, param);
              endpointString = endpointString.trimEnd();
            }
            if (param > 0 && param != endCommand) {
              paramString = row.substring(param + 1 + semaLogicCommand.transferParam.length, endCommand);
              paramString = paramString.trimEnd();
            }
            let paramParsedCommand = {
              outputformat: transferString,
              endpoint: endpointString,
              param: paramString
            };
            if (parseInitial) {
              parseInitial = false;
              parseCommands.commands[0] = paramParsedCommand;
            } else {
              parseCommands.commands.push(paramParsedCommand);
            }
          }
        }
      });
    }
    return parseCommands;
  }
  async aspParse(slComm, settings, aspJsonParsedSemaLogic, RequestTime) {
    slconsolelog(DebugLevMap.DebugLevel_Current_Dev, this.slComm.slview, "Start Transfer_Parse");
    let vAPI_URL = "";
    const parseCommands = this.getASPCommands(slComm, settings);
    parseCommands.commands.forEach((parseCommands2) => {
      if (parseCommands2.outputformat == RulesettypesCommands[Rstypes_ASP][1] || parseCommands2.outputformat == RulesettypesCommands[Rstypes_ASP][0]) {
        vAPI_URL = getHostAspPort(settings, parseCommands2);
      } else {
        vAPI_URL = parseCommands2.endpoint;
        if (parseCommands2.param != void 0) {
          if (parseCommands2.param.length > 0) {
            vAPI_URL = vAPI_URL + "?" + parseCommands2.param;
          }
        }
        slconsolelog(DebugLevMap.DebugLevel_Current_Dev, this.slComm.slview, "Transfer URL: ", vAPI_URL);
      }
      let optionsParse = this.createRequest(this.slComm, settings, vAPI_URL, "POST", "json", true, aspJsonParsedSemaLogic);
      this.Resp(optionsParse, vAPI_URL, RequestTime);
    });
  }
  async Resp(optionsParse, vAPI_URL, RequestTime) {
    try {
      slconsolelog(DebugLevMap.DebugLevel_Important, this.slComm.slview, "ASP: want to parse ", optionsParse);
      const responseParse = await (0, import_obsidian4.requestUrl)(optionsParse);
      const remJson = responseParse.text;
      slconsolelog(DebugLevMap.DebugLevel_Important, this.slComm.slview, "ASP: Parse with http-status " + responseParse.status.toString());
      if (responseParse.status == 200) {
        if (this.slComm.slaspview.LastRequestTime == RequestTime) {
          let resulthttp = responseParse.text;
          this.setNewASPInitial(true);
          this.contentEl.createEl("br");
          this.contentEl.createEl("span", "---------------------------------------------------------");
          this.contentEl.createEl("br");
          resulthttp = resulthttp.replaceAll("[", "[\n");
          resulthttp = resulthttp.replaceAll("]", "\n]");
          resulthttp = resulthttp.replaceAll(",", ",\n");
          let resulthttpArray = resulthttp.split("\n");
          resulthttpArray.forEach((element) => {
            this.contentEl.append(element);
            this.contentEl.createEl("br");
          });
          slconsolelog(DebugLevMap.DebugLevel_Chatty, this.slComm.slview, `ASP-Parseresult:${resulthttp}`);
        } else {
          slconsolelog(DebugLevMap.DebugLevel_Current_Dev, this.slComm.slview, `Old_ASP-Request: ${RequestTime} vs ${this.slComm.slaspview.LastRequestTime}`);
        }
      }
    } catch (e) {
      slconsolelog(DebugLevMap.DebugLevel_Error, this.slComm.slview, `Catcherror of removing context ${vAPI_URL}`);
      slconsolelog(DebugLevMap.DebugLevel_Error, this.slComm.slview, e.toString());
      let text = new DocumentFragment();
      text.createEl("p");
      let textfragment = new Range().createContextualFragment(e.toString());
      text.appendChild(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment("See for information about the error-code of http: https://de.wikipedia.org/wiki/HTTP-Statuscode ");
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(optionsParse.url);
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(String(optionsParse.body));
      text.append(textfragment);
      this.contentEl.empty();
      this.contentEl.createEl("br");
      this.contentEl.append(text);
    }
  }
};

// main.ts
var import_view3 = require("@codemirror/view");
var DebugLevel = 0;
var mygSID = String(Math.round(Math.random() * 99999999999));
var Default_profile = {
  mySLSettings: [
    {
      myPort: API_Defaults.Port,
      myOutputFormat: "SemaLogic",
      myBaseURL: API_Defaults.Base_URL,
      myGetAPI: API_Defaults.GetAPI,
      mySID: API_Defaults.SID,
      myContext: API_Defaults.ShowContext,
      myUseHttps: API_Defaults.useUserPasswortforHTTP,
      myUser: API_Defaults.HttpUser,
      myPassword: API_Defaults.HttpPassword,
      myUpdateInterval: Value_Defaults.updateInterval,
      myAspUrl: API_Defaults.AspUrl,
      myAspEndpoint: API_Defaults.AspEndpoint,
      myUseHttpsSL: API_Defaults.useUserPasswortforHTTPSL,
      myUserSL: API_Defaults.HttpUserSL,
      myPasswordSL: API_Defaults.HttpPasswordSL
    },
    {
      myPort: API_Defaults.Port,
      myOutputFormat: "SemaLogic",
      myBaseURL: API_Defaults.Base_URL,
      myGetAPI: API_Defaults.GetAPI,
      mySID: API_Defaults.SID,
      myContext: API_Defaults.ShowContext,
      myUseHttps: API_Defaults.useUserPasswortforHTTP,
      myUser: API_Defaults.HttpUser,
      myPassword: API_Defaults.HttpPassword,
      myUpdateInterval: Value_Defaults.updateInterval,
      myAspUrl: API_Defaults.AspUrl,
      myAspEndpoint: API_Defaults.AspEndpoint,
      myUseHttpsSL: API_Defaults.useUserPasswortforHTTPSL,
      myUserSL: API_Defaults.HttpUserSL,
      myPasswordSL: API_Defaults.HttpPasswordSL
    },
    {
      myPort: API_Defaults.Port,
      myOutputFormat: "SemaLogic",
      myBaseURL: API_Defaults.Base_URL,
      myGetAPI: API_Defaults.GetAPI,
      mySID: API_Defaults.SID,
      myContext: API_Defaults.ShowContext,
      myUseHttps: API_Defaults.useUserPasswortforHTTP,
      myUser: API_Defaults.HttpUser,
      myPassword: API_Defaults.HttpPassword,
      myUpdateInterval: Value_Defaults.updateInterval,
      myAspUrl: API_Defaults.AspUrl,
      myAspEndpoint: API_Defaults.AspEndpoint,
      myUseHttpsSL: API_Defaults.useUserPasswortforHTTPSL,
      myUserSL: API_Defaults.HttpUserSL,
      myPasswordSL: API_Defaults.HttpPasswordSL
    }
  ],
  mySetting: 0,
  myDebugLevel: 0
};
var SemaLogicSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for SemaLogic:" });
    new import_obsidian5.Setting(containerEl).setName("General DebugLevel").setDesc("You can set a DebugLevel for Developmentinformation").addDropdown((dropDown) => dropDown.addOption("0", DebugLevelNames[0]).addOption("1", DebugLevelNames[1]).addOption("2", DebugLevelNames[2]).addOption("3", DebugLevelNames[3]).addOption("4", DebugLevelNames[4]).addOption("5", DebugLevelNames[5]).setValue(String(this.plugin.settings.myDebugLevel)).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_High, void 0, "Set DebugLevel: " + DebugLevelNames[parseInt(value)]);
      this.plugin.settings.myDebugLevel = parseInt(value);
      DebugLevel = parseInt(value);
      await this.plugin.saveSettings();
      this.display();
    }));
    new import_obsidian5.Setting(containerEl).setName("Change your setting profile").setDesc("You can define different profiles for your SemaLogicService").addDropdown((dropDown) => dropDown.addOption("0", "Profile 1").addOption("1", "Profile 2").addOption("2", "Profile 3").setValue(this.plugin.settings.mySetting.toString()).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_High, void 0, "Set Profile: " + value);
      this.plugin.settings.mySetting = parseInt(value);
      this.display();
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Standard updateinterval").addText((setting) => setting.setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUpdateInterval.toString()).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set Update Interval: " + value);
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUpdateInterval = parseInt(value);
      window.clearInterval(this.plugin.interval);
      this.plugin.registerInterval(
        this.plugin.interval = window.setInterval(this.plugin.handleUpdate, this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUpdateInterval)
      );
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("BaseUrl").setDesc("BaseURL for reaching SemaLogicService").addText((text) => text.setPlaceholder(API_Defaults.Base_URL).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myBaseURL).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set BaseURL: " + value);
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myBaseURL = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Path to Get-API-Endpoints").setDesc("Path to Get-API for more Information about the Endpoints of used APIs").addText((text) => text.setPlaceholder(API_Defaults.GetAPI).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myGetAPI).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set to Get-API-Endpoint: " + value);
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myGetAPI = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Port SemaLogic").setDesc("Enter the Port").addText((text) => text.setPlaceholder(API_Defaults.Port).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPort).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set to Port: " + value);
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPort = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("OutputFormat").setDesc("Here you can set the outputformat for SemaLogic, which could be get from SemaLogicService").addDropdown((dropDown) => dropDown.addOption(RulesettypesCommands[Rstypes_Semalogic][1], RulesettypesCommands[Rstypes_Semalogic][0]).addOption(RulesettypesCommands[Rstypes_ASP][1], RulesettypesCommands[Rstypes_ASP][0]).addOption(RulesettypesCommands[Rstypes_Picture][1], RulesettypesCommands[Rstypes_Picture][0]).addOption(RulesettypesCommands[Rstypes_SemanticTree][1], RulesettypesCommands[Rstypes_SemanticTree][0]).addOption(RulesettypesCommands[Rstypes_KnowledgeGraph][1], RulesettypesCommands[Rstypes_KnowledgeGraph][0]).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myOutputFormat).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set Outputformat: " + value);
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myOutputFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Secure HTTP-Request SemaLogic").setDesc("If you has to use User/Password for http-request to the semalogic service").addToggle((setting) => setting.setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttpsSL).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set UserPasswordRequest: " + value);
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttpsSL = value;
      await this.plugin.saveSettings();
      this.display();
    }));
    if (this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttpsSL) {
      new import_obsidian5.Setting(containerEl).setName("HTTP-Request-User").setDesc("User to reach transfer service").addText((text) => text.setPlaceholder(API_Defaults.HttpUserSL).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUserSL).onChange(async (value) => {
        slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set HTTP-Request-User...");
        this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUserSL = value;
        await this.plugin.saveSettings();
      }));
      new import_obsidian5.Setting(containerEl).setName("HTTP-Request-Password").setDesc("Password to reach transfer service").addText((text) => text.setPlaceholder(API_Defaults.HttpPasswordSL).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPasswordSL).onChange(async (value) => {
        slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set HTTP-Request-Password...");
        this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPasswordSL = value;
        await this.plugin.saveSettings();
      }));
    }
    new import_obsidian5.Setting(containerEl).setName("Show Context in Reading View").addToggle((setting) => setting.setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myContext).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set Context of Reading View: " + value);
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myContext = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h1", { text: "_______________________________" });
    containerEl.createEl("h2", { text: "Settings for Transfer/ASP-View:" });
    new import_obsidian5.Setting(containerEl).setName("BaseUrl for Transfer/ASP").setDesc("BaseURL for reaching Transfer/ASP-Service").addText((text) => text.setPlaceholder(API_Defaults.AspUrl).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspUrl).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set Transfer/ASP-BaseURL: " + value);
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Path to Get-Transfer/ASP-StandardAPI-Endpoint").setDesc("Path to Transfer/ASP-Standard-API ").addText((text) => text.setPlaceholder(API_Defaults.AspEndpoint).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspEndpoint).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set to Transfer/ASP-Standard-API-Endpoint: " + value);
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspEndpoint = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Secure HTTP-Request").setDesc("If you has to use User/Password for http-request to the transfer service").addToggle((setting) => setting.setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttps).onChange(async (value) => {
      slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set UserPasswordRequest: " + value);
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttps = value;
      await this.plugin.saveSettings();
      this.display();
    }));
    if (this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttps) {
      new import_obsidian5.Setting(containerEl).setName("HTTP-Request-User").setDesc("User to reach transfer service").addText((text) => text.setPlaceholder(API_Defaults.HttpUser).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUser).onChange(async (value) => {
        slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set HTTP-Request-User...");
        this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUser = value;
        await this.plugin.saveSettings();
      }));
      new import_obsidian5.Setting(containerEl).setName("HTTP-Request-Password").setDesc("Password to reach transfer service").addText((text) => text.setPlaceholder(API_Defaults.HttpPassword).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPassword).onChange(async (value) => {
        slconsolelog(DebugLevMap.DebugLevel_Important, void 0, "Set HTTP-Request-Password...");
        this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPassword = value;
        await this.plugin.saveSettings();
      }));
    }
  }
};
var SemaLogicPluginComm2 = class {
  constructor() {
    this.activatedASP = false;
  }
  setSlView(view) {
    this.slview = view;
  }
  setSLClass(slclass) {
    this.slPlugin = slclass;
  }
  add(a, b) {
    return a + b;
  }
};
var SemaLogicPlugin = class extends import_obsidian5.Plugin {
  constructor() {
    super(...arguments);
    this.activated = false;
    this.updating = false;
    this.lastUpdate = 0;
    this.updateOutstanding = false;
    this.updateTransferOutstanding = false;
    this.updateOutstandingSetting = false;
    this.waitingForResponse = false;
    this.UpdateProcessing = false;
    this.view_utils = new ViewUtils();
    this.handleUpdate = (update) => {
      if (this.statusSL) {
        const text = "Updatetime/" + String(Date.now()) + "/" + String(this.lastUpdate) + "/" + String(Date.now() - this.lastUpdate) + "/" + String(this.updateOutstanding) + "/" + String(this.waitingForResponse);
        slconsolelog(DebugLevMap.DebugLevel_Current_Dev, this.slComm.slview, text);
        if (update == null) {
        } else {
          if (update.view) {
            if (!update.docChanged && !update.focusChanged) {
              return;
            } else {
              if (this.UpdateProcessing == false) {
                slconsolelog(DebugLevMap.DebugLevel_Current_Dev, this.slComm.slview, "Start Update docChanged, focuschanged, UpdProc  " + String(update.docChanged) + "/" + String(update.focusChanged) + "/" + String(this.UpdateProcessing));
                this.semaLogicUpdate();
              }
            }
          }
        }
        if (Date.now() - this.lastUpdate > this.settings.mySLSettings[this.settings.mySetting].myUpdateInterval && (this.updateOutstanding == true || this.updateTransferOutstanding == true) && this.waitingForResponse == false) {
          slconsolelog(DebugLevMap.DebugLevel_Current_Dev, this.slComm.slview, "Start Update PARSING");
          this.lastUpdate = Date.now();
          this.semaLogicUpdate();
        } else if (Date.now() - this.lastUpdate > this.settings.mySLSettings[this.settings.mySetting].myUpdateInterval && this.updateOutstanding == true && this.waitingForResponse == false) {
          semaLogicPing(this.settings, this.lastUpdate);
        }
      }
    };
  }
  getContextFromLine(mydialectID) {
    mydialectID = mydialectID.replace("SemaLogicContext\u2261", "SemaLogicDialect\u2261");
    let re = /\t/gi;
    mydialectID = mydialectID.replace(re, "");
    re = /\n/gi;
    mydialectID = mydialectID.replace(re, "");
    return { mydialectID };
  }
  getActiveView() {
    const activeView = app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
    if (activeView === null) {
      if (this.lastactiveView === null) {
        slconsolelog(DebugLevMap.DebugLevel_High, this.slComm.slview, "ActiveView could not be defined through SemaLogic");
        return;
      } else {
        return this.lastactiveView;
      }
    }
    this.lastactiveView = activeView;
    slconsolelog(DebugLevMap.DebugLevel_Important, this.slComm.slview, this.lastactiveView.getDisplayText());
    return this.lastactiveView;
  }
  setViews() {
    this.slComm.activatedASP = false;
    this.app.workspace.iterateAllLeaves((leaf) => {
      switch (leaf.view.getViewType()) {
        case SemaLogicViewType: {
          this.slComm.slview = leaf.view;
          this.slComm.slview.setComm(this.slComm);
          this.slComm.slview.slComm.setSlView(this.slComm.slview);
          this.slComm.slview.slComm.slPlugin = this.slComm.slPlugin;
          this.activated = true;
          this.statusSL = true;
          break;
        }
        case ASPViewType: {
          this.slComm.slaspview = leaf.view;
          this.slComm.slaspview.setComm(this.slComm);
          this.slComm.slaspview.slComm.setSlView(this.slComm.slview);
          this.slComm.slaspview.slComm.slPlugin = this.slComm.slPlugin;
          this.slComm.activatedASP = true;
          this.statusTransfer = true;
          break;
        }
      }
    });
    this.getActiveView();
  }
  async onload() {
    this.registerMarkdownPostProcessor((element, context) => {
      slconsolelog(DebugLevMap.DebugLevel_Chatty, void 0, element);
      slconsolelog(DebugLevMap.DebugLevel_Chatty, void 0, context);
      element.querySelectorAll("p").forEach((el) => {
        if (searchForSemaLogicCommands(el)) {
          let set = this.settings;
          context.addChild(new SemaLogicRenderedElement({ containerEl: el, set }));
        }
      });
    });
    this.addSettingTab(new SemaLogicSettingTab(this.app, this));
    await this.loadSettings();
    DebugLevel = this.settings.myDebugLevel;
    this.myStatus = this.addStatusBarItem();
    this.slComm = new SemaLogicPluginComm2();
    this.slComm.setSLClass(this);
    this.activateView();
    await this.semaLogicReset();
    this.setViews();
    this.addRibbonIcon("book", "On/Off SemaLogic.View", () => {
      this.setViews();
      if (this.activated == false) {
        this.statusSL = true;
        if (!this.activated) {
          this.activateView();
        }
      } else {
        this.statusSL = false;
        this.deactivateView();
      }
    });
    this.addRibbonIcon("dice", "On/Off Transfer.View", () => {
      this.setViews();
      if (this.slComm != void 0) {
        if (this.slComm.activatedASP == false) {
          this.activateASPView();
        } else {
          this.deactivateASPView();
        }
      }
    });
    if (this.statusSL) {
      this.semaLogicReset();
      this.slComm.slview.setNewInitial(this.settings.mySLSettings[this.settings.mySetting].myOutputFormat);
      this.semaLogicParse();
    }
    this.registerInterval(
      this.interval = window.setInterval(this.handleUpdate, this.settings.mySLSettings[this.settings.mySetting].myUpdateInterval)
    );
    this.registerEditorExtension([import_view3.EditorView.updateListener.of(this.handleUpdate)]);
  }
  async semaLogicParse() {
    this.setViews();
    slconsolelog(DebugLevMap.DebugLevel_, this.slComm.slview, "Start SemaLogicParse");
    let results = [];
    this.lastUpdate = Date.now();
    await semaLogicPing(this.settings, this.lastUpdate);
    let vAPI_URL = getHostPort(this.settings) + API_Defaults.rules_parse + "?sid=" + mygSID;
    slconsolelog(DebugLevMap.DebugLevel_Important, this.slComm.slview, vAPI_URL);
    let bodytext = "";
    let activeView = this.getActiveView();
    if (activeView != void 0) {
      this.slComm.slUsedMDView = activeView;
    }
    let dialectID = "default";
    let codeblock = false;
    let newCodeblock = false;
    if (activeView != null) {
      slconsolelog(DebugLevMap.DebugLevel_Chatty, this.slComm.slview, "ActiveView is not NULL");
      for (let i = 0; i < activeView.editor.lineCount(); i++) {
        slconsolelog(DebugLevMap.DebugLevel_All, this.slComm.slview, i, ";", activeView.editor.getLine(i));
        slconsolelog(DebugLevMap.DebugLevel_All, this.slComm.slview, "Substring:", activeView.editor.getLine(i).substring(0, 2));
        if (activeView.editor.getLine(i).substring(0, 3) == "```") {
          if (!codeblock) {
            codeblock = true;
            newCodeblock = true;
            slconsolelog(DebugLevMap.DebugLevel_Chatty, this.slComm.slview, "Current line is Codeblock: " + i.toString(), codeblock);
          } else {
            newCodeblock = false;
          }
        }
        if (!codeblock && !newCodeblock) {
          bodytext = bodytext.concat(activeView.editor.getLine(i) + "\n");
        } else {
          switch (activeView.editor.getLine(i).substring(0, semaLogicCommand.useDialect.length)) {
            case semaLogicCommand.useDialect: {
              dialectID = activeView.editor.getLine(i).substring(semaLogicCommand.useDialect.length, activeView.editor.getLine(i).length - 1);
              dialectID = dialectID.trim();
              break;
            }
            default: {
            }
          }
        }
        if (i < activeView.editor.lineCount()) {
          if (activeView.editor.getLine(i).substring(0, 3) == "```") {
            if (codeblock && !newCodeblock) {
              codeblock = false;
            } else {
              newCodeblock = false;
            }
          }
        }
      }
    }
    bodytext = this.view_utils.cleanCommands(bodytext);
    if (dialectID == "") {
      dialectID = "default";
    }
    slconsolelog(DebugLevMap.DebugLevel_Chatty, void 0, "Parsingresult for SemaLogicView");
    const responseForSemaLogic = this.slComm.slview.getSemaLogicParse(this.settings, vAPI_URL, dialectID, bodytext, false);
    responseForSemaLogic.then((value) => {
      slconsolelog(DebugLevMap.DebugLevel_Chatty, void 0, value);
    });
    if (this.slComm.activatedASP) {
      if (Date.now() - this.slComm.slaspview.LastRequestTime >= this.settings.mySLSettings[this.settings.mySetting].myUpdateInterval) {
        this.slComm.slaspview.LastRequestTime = Date.now();
        slconsolelog(DebugLevMap.DebugLevel_Current_Dev, this.slComm.slview, `Set-Requesttime: ${this.slComm.slaspview.LastRequestTime}`);
        this.updateTransferOutstanding = false;
        let outputFormat = RulesettypesCommands[Rstypes_ASP][1];
        const responseForASP = this.slComm.slview.getSemaLogicParse(this.settings, vAPI_URL, dialectID, bodytext, true, outputFormat);
        responseForASP.then((value) => {
          slconsolelog(DebugLevMap.DebugLevel_Chatty, this.slComm.slview, value);
          const aspPromise = this.slComm.slaspview.aspParse(this.slComm, this.settings, value, this.slComm.slaspview.LastRequestTime);
          aspPromise.then((value2) => {
            if (value2 != void 0) {
              slconsolelog(DebugLevMap.DebugLevel_Current_Dev, this.slComm.slview, value2);
            }
          });
        });
      } else {
        this.updateTransferOutstanding = true;
      }
    }
    return results;
  }
  async activateASPView() {
    if (this.slComm.slaspview == void 0) {
      this.registerView(
        ASPViewType,
        (leaf2) => new ASPView(leaf2)
      );
    }
    const leaf = this.GetAspLeaf();
    if (leaf != void 0) {
      leaf.setViewState({
        type: ASPViewType,
        active: false
      });
      await this.semaLogicReset();
      this.app.workspace.revealLeaf(leaf);
    } else {
      slconsolelog(DebugLevMap.DebugLevel_Chatty, void 0, "ASP-Leaf not created");
    }
    this.setViews();
    this.handlePing();
    this.statusTransfer = true;
    this.semaLogicUpdate();
    this.myStatus.setText("ASP is on");
  }
  async activateView() {
    if (this.slComm.slview == void 0) {
      this.registerView(
        SemaLogicViewType,
        (leaf2) => new SemaLogicView2(leaf2)
      );
    }
    const leaf = this.GetSemaLogicLeaf();
    if (leaf != void 0) {
      leaf.setViewState({
        type: SemaLogicViewType,
        active: false
      });
      await this.semaLogicReset();
      this.app.workspace.revealLeaf(leaf);
    } else {
      slconsolelog(DebugLevMap.DebugLevel_Chatty, void 0, "SemaLogic-Leaf not created");
    }
    this.setViews();
    this.handlePing();
    this.semaLogicUpdate();
    this.myStatus.setText("SemaLogic is on");
  }
  async deactivateASPView() {
    this.app.workspace.detachLeavesOfType(ASPViewType);
    this.slComm.activatedASP = false;
    this.statusTransfer = true;
    this.myStatus.setText("ASP is off");
  }
  async deactivateView() {
    this.app.workspace.detachLeavesOfType(SemaLogicViewType);
    this.activated = false;
    this.slComm.slview.unload();
    this.myStatus.setText("SemaLogic is off");
  }
  GetAspLeaf() {
    let found = false;
    let slv = void 0;
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (!found) {
        switch (leaf.view.getViewType()) {
          case ASPViewType: {
            found = true;
            slv = leaf;
          }
        }
      }
    });
    if (!found) {
      slconsolelog(DebugLevMap.DebugLevel_All, void 0, "Split");
      slv = this.app.workspace.getLeaf("split");
      slconsolelog(DebugLevMap.DebugLevel_All, void 0, slv);
    }
    return slv;
  }
  GetSemaLogicLeaf() {
    let found = false;
    let slv = void 0;
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (!found) {
        switch (leaf.view.getViewType()) {
          case SemaLogicViewType: {
            found = true;
            slv = leaf;
          }
        }
      }
    });
    if (!found) {
      slconsolelog(DebugLevMap.DebugLevel_All, void 0, "Split");
      slv = this.app.workspace.getLeaf("split");
      slconsolelog(DebugLevMap.DebugLevel_All, void 0, slv);
    }
    return slv;
  }
  async onunload() {
    this.app.workspace.detachLeavesOfType(ASPViewType);
  }
  async loadSettings() {
    this.settings = Object.assign({}, Default_profile, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    if (this.slComm.slview != void 0) {
      this.slComm.slview.setNewInitial(this.settings.mySLSettings[this.settings.mySetting].myOutputFormat);
    }
    this.updateOutstanding = true;
  }
  handlePing() {
    semaLogicPing(this.settings, this.lastUpdate);
  }
  semaLogicUpdate(setView) {
    this.waitingForResponse = true;
    this.UpdateProcessing = true;
    if (setView == true || setView == void 0) {
      this.setViews();
    }
    slconsolelog(DebugLevMap.DebugLevel_Chatty, this.slComm.slview, "Start SemaLogicUpdate");
    this.setViews();
    let activeView = this.getActiveView();
    this.semaLogicParse();
    if (!this.updating) {
      this.updating = true;
      if (activeView != null) {
        const editortext = activeView.editor.getRange({ line: 0, ch: 0 }, { line: activeView.editor.lastLine(), ch: activeView.editor.lastLine.length });
        const addChar = " ";
        let cursor = activeView.editor.getCursor();
        for (let i = 0; i < activeView.editor.lastLine(); i++) {
          if (activeView.editor.getLine(i).substring(0, semaLogicCommand.command_start.length) == semaLogicCommand.command_start) {
            if (activeView.editor.getLine(i).substring(activeView.editor.getLine(i).length - 1, activeView.editor.getLine(i).length) == semaLogicCommand.command_end) {
              activeView.editor.setLine(i, activeView.editor.getLine(i).substring(0, activeView.editor.getLine(i).length) + addChar);
            } else {
              if (activeView.editor.getLine(i).substring(activeView.editor.getLine(i).length - 1, activeView.editor.getLine(i).length) == addChar) {
                activeView.editor.setLine(i, activeView.editor.getLine(i).substring(0, activeView.editor.getLine(i).length - 1));
              }
            }
          }
        }
        activeView.editor.setCursor(cursor);
      }
      this.updating = false;
    }
    this.UpdateProcessing = false;
    this.waitingForResponse = false;
  }
  getSemaLogicText() {
    if (this.slComm.slview.contentEl.textContent == null) {
      return "";
    } else {
      return this.slComm.slview.getContent();
    }
  }
  async semaLogicReset() {
    let vAPI_URL_Reset = getHostPort(this.settings) + API_Defaults.reset + "?sid=" + mygSID;
    let optionsReset;
    if (this.settings.mySLSettings[this.settings.mySetting].myUseHttpsSL && this.settings.mySLSettings[this.settings.mySetting].myUserSL != "") {
      optionsReset = {
        url: vAPI_URL_Reset,
        method: "POST",
        headers: {
          "content-type": "text/plain",
          "Authorization": "Basic " + btoa(this.settings.mySLSettings[this.settings.mySetting].myUserSL + ":" + this.settings.mySLSettings[this.settings.mySetting].myPasswordSL)
        }
      };
    } else {
      optionsReset = {
        url: vAPI_URL_Reset,
        method: "POST",
        headers: {
          "content-type": "text/plain"
        }
      };
    }
    slconsolelog(DebugLevMap.DebugLevel_Important, this.slComm.slview, optionsReset);
    try {
      const responseReset = await (0, import_obsidian5.requestUrl)(optionsReset);
      slconsolelog(DebugLevMap.DebugLevel_Informative, this.slComm.slview, `SemaLogic: Reset with http-status ${responseReset.status.toString()}`);
    } catch (e) {
      slconsolelog(DebugLevMap.DebugLevel_Error, this.slComm.slview, `Catcherror by reset ${vAPI_URL_Reset}`);
      slconsolelog(DebugLevMap.DebugLevel_Error, this.slComm.slview, e.toString());
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvdmlldy50cyIsICJzcmMvY29uc3QudHMiLCAic3JjL3V0aWxzLnRzIiwgInNyYy92aWV3X3V0aWxzLnRzIiwgInNyYy92aWV3X2FzcC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBNYXJrZG93blZpZXcsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgcmVxdWVzdFVybCwgU2V0dGluZywgV29ya3NwYWNlTGVhZiwgcmVuZGVyUmVzdWx0cywgUmVxdWVzdFVybFBhcmFtLCBSZXF1ZXN0VXJsUmVzcG9uc2UsIFJlcXVlc3RVcmxSZXNwb25zZVByb21pc2UsIEJ1dHRvbkNvbXBvbmVudCwgTWFya2Rvd25SZW5kZXJDaGlsZCwgTWFya2Rvd25QcmV2aWV3VmlldywgVmlldyB9XHJcblx0ZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBTZW1hTG9naWNWaWV3LCBTZW1hTG9naWNWaWV3VHlwZSB9IGZyb20gXCIuL3NyYy92aWV3XCI7XHJcbmltcG9ydCB7IEFTUFZpZXcsIEFTUFZpZXdUeXBlIH0gZnJvbSBcIi4vc3JjL3ZpZXdfYXNwXCI7XHJcbmltcG9ydCB7IFZpZXdVcGRhdGUsIEVkaXRvclZpZXcgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xyXG5pbXBvcnQgeyBTZW1hTG9naWNSZW5kZXJlZEVsZW1lbnQsIHNlYXJjaEZvclNlbWFMb2dpY0NvbW1hbmRzLCBnZXRIb3N0UG9ydCwgc2VtYUxvZ2ljUGluZywgc2xjb25zb2xlbG9nIH0gZnJvbSBcIi4vc3JjL3V0aWxzXCI7XHJcbmltcG9ydCB7IEFQSV9EZWZhdWx0cywgVmFsdWVfRGVmYXVsdHMsIHNlbWFMb2dpY0NvbW1hbmQsIFJ1bGVzZXR0eXBlc0NvbW1hbmRzLCBSc3R5cGVzX1NlbWFsb2dpYywgUnN0eXBlc19QaWN0dXJlLCBSc3R5cGVzX0FTUCwgRGVidWdMZXZNYXAsIERlYnVnTGV2ZWxOYW1lcywgUnN0eXBlc19Lbm93bGVkZ2VHcmFwaCwgUnN0eXBlc19TZW1hbnRpY1RyZWUgfSBmcm9tIFwiLi9zcmMvY29uc3RcIlxyXG5pbXBvcnQgeyBWaWV3VXRpbHMgfSBmcm9tICdzcmMvdmlld191dGlscyc7XHJcbi8vaW1wb3J0IHsgUnN0eXBlc19TZW1hbnRpY1RyZWUgfSBmcm9tICdzcmMvY29uc3Qgb25seSBmb3IgVVAnO1xyXG5cclxuZXhwb3J0IHZhciBEZWJ1Z0xldmVsID0gMDtcclxuXHJcbmV4cG9ydCB2YXIgbXlnU0lEID0gU3RyaW5nKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDk5OTk5OTk5OTk5KSlcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU0xTZXR0aW5nIHtcclxuXHRteVBvcnQ6IHN0cmluZztcclxuXHRteU91dHB1dEZvcm1hdDogc3RyaW5nO1xyXG5cdG15QmFzZVVSTDogc3RyaW5nO1xyXG5cdG15R2V0QVBJOiBzdHJpbmc7XHJcblx0bXlTSUQ6IHN0cmluZztcclxuXHRteUNvbnRleHQ6IGJvb2xlYW47XHJcblx0bXlVcGRhdGVJbnRlcnZhbDogbnVtYmVyO1xyXG5cdG15VXNlSHR0cHM6IGJvb2xlYW4sXHJcblx0bXlVc2VyOiBzdHJpbmcsXHJcblx0bXlQYXNzd29yZDogc3RyaW5nLFxyXG5cdG15QXNwVXJsOiBzdHJpbmcsXHJcblx0bXlBc3BFbmRwb2ludDogc3RyaW5nLFxyXG5cdG15VXNlSHR0cHNTTDogYm9vbGVhbixcclxuXHRteVVzZXJTTDogc3RyaW5nLFxyXG5cdG15UGFzc3dvcmRTTDogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3Mge1xyXG5cdG15U0xTZXR0aW5nczogU0xTZXR0aW5nW107XHJcblx0bXlTZXR0aW5nOiBudW1iZXI7XHJcblx0bXlEZWJ1Z0xldmVsOiBudW1iZXI7XHJcbn1cclxuZXhwb3J0IGNvbnN0IERlZmF1bHRfcHJvZmlsZTogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0bXlTTFNldHRpbmdzOiBbe1xyXG5cdFx0bXlQb3J0OiBBUElfRGVmYXVsdHMuUG9ydCxcclxuXHRcdG15T3V0cHV0Rm9ybWF0OiAnU2VtYUxvZ2ljJyxcclxuXHRcdG15QmFzZVVSTDogQVBJX0RlZmF1bHRzLkJhc2VfVVJMLFxyXG5cdFx0bXlHZXRBUEk6IEFQSV9EZWZhdWx0cy5HZXRBUEksXHJcblx0XHRteVNJRDogQVBJX0RlZmF1bHRzLlNJRCxcclxuXHRcdG15Q29udGV4dDogQVBJX0RlZmF1bHRzLlNob3dDb250ZXh0LFxyXG5cdFx0bXlVc2VIdHRwczogQVBJX0RlZmF1bHRzLnVzZVVzZXJQYXNzd29ydGZvckhUVFAsXHJcblx0XHRteVVzZXI6IEFQSV9EZWZhdWx0cy5IdHRwVXNlcixcclxuXHRcdG15UGFzc3dvcmQ6IEFQSV9EZWZhdWx0cy5IdHRwUGFzc3dvcmQsXHJcblx0XHRteVVwZGF0ZUludGVydmFsOiBWYWx1ZV9EZWZhdWx0cy51cGRhdGVJbnRlcnZhbCxcclxuXHRcdG15QXNwVXJsOiBBUElfRGVmYXVsdHMuQXNwVXJsLFxyXG5cdFx0bXlBc3BFbmRwb2ludDogQVBJX0RlZmF1bHRzLkFzcEVuZHBvaW50LFxyXG5cdFx0bXlVc2VIdHRwc1NMOiBBUElfRGVmYXVsdHMudXNlVXNlclBhc3N3b3J0Zm9ySFRUUFNMLFxyXG5cdFx0bXlVc2VyU0w6IEFQSV9EZWZhdWx0cy5IdHRwVXNlclNMLFxyXG5cdFx0bXlQYXNzd29yZFNMOiBBUElfRGVmYXVsdHMuSHR0cFBhc3N3b3JkU0xcclxuXHR9LFxyXG5cdHtcclxuXHRcdG15UG9ydDogQVBJX0RlZmF1bHRzLlBvcnQsXHJcblx0XHRteU91dHB1dEZvcm1hdDogJ1NlbWFMb2dpYycsXHJcblx0XHRteUJhc2VVUkw6IEFQSV9EZWZhdWx0cy5CYXNlX1VSTCxcclxuXHRcdG15R2V0QVBJOiBBUElfRGVmYXVsdHMuR2V0QVBJLFxyXG5cdFx0bXlTSUQ6IEFQSV9EZWZhdWx0cy5TSUQsXHJcblx0XHRteUNvbnRleHQ6IEFQSV9EZWZhdWx0cy5TaG93Q29udGV4dCxcclxuXHRcdG15VXNlSHR0cHM6IEFQSV9EZWZhdWx0cy51c2VVc2VyUGFzc3dvcnRmb3JIVFRQLFxyXG5cdFx0bXlVc2VyOiBBUElfRGVmYXVsdHMuSHR0cFVzZXIsXHJcblx0XHRteVBhc3N3b3JkOiBBUElfRGVmYXVsdHMuSHR0cFBhc3N3b3JkLFxyXG5cdFx0bXlVcGRhdGVJbnRlcnZhbDogVmFsdWVfRGVmYXVsdHMudXBkYXRlSW50ZXJ2YWwsXHJcblx0XHRteUFzcFVybDogQVBJX0RlZmF1bHRzLkFzcFVybCxcclxuXHRcdG15QXNwRW5kcG9pbnQ6IEFQSV9EZWZhdWx0cy5Bc3BFbmRwb2ludCxcclxuXHRcdG15VXNlSHR0cHNTTDogQVBJX0RlZmF1bHRzLnVzZVVzZXJQYXNzd29ydGZvckhUVFBTTCxcclxuXHRcdG15VXNlclNMOiBBUElfRGVmYXVsdHMuSHR0cFVzZXJTTCxcclxuXHRcdG15UGFzc3dvcmRTTDogQVBJX0RlZmF1bHRzLkh0dHBQYXNzd29yZFNMXHJcblx0fSxcclxuXHR7XHJcblx0XHRteVBvcnQ6IEFQSV9EZWZhdWx0cy5Qb3J0LFxyXG5cdFx0bXlPdXRwdXRGb3JtYXQ6ICdTZW1hTG9naWMnLFxyXG5cdFx0bXlCYXNlVVJMOiBBUElfRGVmYXVsdHMuQmFzZV9VUkwsXHJcblx0XHRteUdldEFQSTogQVBJX0RlZmF1bHRzLkdldEFQSSxcclxuXHRcdG15U0lEOiBBUElfRGVmYXVsdHMuU0lELFxyXG5cdFx0bXlDb250ZXh0OiBBUElfRGVmYXVsdHMuU2hvd0NvbnRleHQsXHJcblx0XHRteVVzZUh0dHBzOiBBUElfRGVmYXVsdHMudXNlVXNlclBhc3N3b3J0Zm9ySFRUUCxcclxuXHRcdG15VXNlcjogQVBJX0RlZmF1bHRzLkh0dHBVc2VyLFxyXG5cdFx0bXlQYXNzd29yZDogQVBJX0RlZmF1bHRzLkh0dHBQYXNzd29yZCxcclxuXHRcdG15VXBkYXRlSW50ZXJ2YWw6IFZhbHVlX0RlZmF1bHRzLnVwZGF0ZUludGVydmFsLFxyXG5cdFx0bXlBc3BVcmw6IEFQSV9EZWZhdWx0cy5Bc3BVcmwsXHJcblx0XHRteUFzcEVuZHBvaW50OiBBUElfRGVmYXVsdHMuQXNwRW5kcG9pbnQsXHJcblx0XHRteVVzZUh0dHBzU0w6IEFQSV9EZWZhdWx0cy51c2VVc2VyUGFzc3dvcnRmb3JIVFRQU0wsXHJcblx0XHRteVVzZXJTTDogQVBJX0RlZmF1bHRzLkh0dHBVc2VyU0wsXHJcblx0XHRteVBhc3N3b3JkU0w6IEFQSV9EZWZhdWx0cy5IdHRwUGFzc3dvcmRTTFxyXG5cdH0sXHJcblx0XSxcclxuXHRteVNldHRpbmc6IDAsXHJcblx0bXlEZWJ1Z0xldmVsOiAwLFxyXG59XHJcblxyXG5cclxuY29uc3QgZ2V0RGVidWdMZXZlbCA9IChEZWJ1Z0xldmVsTmFtZTogc3RyaW5nKTogbnVtYmVyID0+IHtcclxuXHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHksIHVuZGVmaW5lZCwgJ0dldCBmb3IgRGVidWdMZXZlbE5hbWUnLCBEZWJ1Z0xldmVsTmFtZSlcclxuXHREZWJ1Z0xldmVsTmFtZXMuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XHJcblx0XHRpZiAodmFsdWUgPT0gRGVidWdMZXZlbE5hbWUpIHtcclxuXHRcdFx0c2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5LCB1bmRlZmluZWQsICdGaW5kIERlYnVnTGV2ZWxJbmRleCcsIGluZGV4KVxyXG5cdFx0XHRyZXR1cm4gaW5kZXhcclxuXHRcdH1cclxuXHR9KTtcclxuXHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoLCB1bmRlZmluZWQsICdObyBGaW5kaW5nIGZvciBEZWJ1Z0xldmVsTmFtZScsIERlYnVnTGV2ZWxOYW1lKVxyXG5cdHJldHVybiAwXHJcbn1cclxuXHJcbi8vIFNldHRpbmdzIGZvciBTZW1hTG9naWNcclxuY2xhc3MgU2VtYUxvZ2ljU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogU2VtYUxvZ2ljUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTZW1hTG9naWNQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHJcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHQvLyBIZWFkbGluZSBmb3IgU2V0dGluZ3NUYWJcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1NldHRpbmdzIGZvciBTZW1hTG9naWM6JyB9KTtcclxuXHJcblx0XHQvLyBHZW5lcmFsIERlYnVnIExldmVsXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0dlbmVyYWwgRGVidWdMZXZlbCcpXHJcblx0XHRcdC5zZXREZXNjKCdZb3UgY2FuIHNldCBhIERlYnVnTGV2ZWwgZm9yIERldmVsb3BtZW50aW5mb3JtYXRpb24nKVxyXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcERvd24gPT4gZHJvcERvd25cclxuXHRcdFx0XHQuYWRkT3B0aW9uKCcwJywgRGVidWdMZXZlbE5hbWVzWzBdKVxyXG5cdFx0XHRcdC5hZGRPcHRpb24oJzEnLCBEZWJ1Z0xldmVsTmFtZXNbMV0pXHJcblx0XHRcdFx0LmFkZE9wdGlvbignMicsIERlYnVnTGV2ZWxOYW1lc1syXSlcclxuXHRcdFx0XHQuYWRkT3B0aW9uKCczJywgRGVidWdMZXZlbE5hbWVzWzNdKVxyXG5cdFx0XHRcdC5hZGRPcHRpb24oJzQnLCBEZWJ1Z0xldmVsTmFtZXNbNF0pXHJcblx0XHRcdFx0LmFkZE9wdGlvbignNScsIERlYnVnTGV2ZWxOYW1lc1s1XSlcclxuXHRcdFx0XHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCkpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0c2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCwgdW5kZWZpbmVkLCAnU2V0IERlYnVnTGV2ZWw6ICcgKyBEZWJ1Z0xldmVsTmFtZXNbcGFyc2VJbnQodmFsdWUpXSlcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA9IHBhcnNlSW50KHZhbHVlKTtcclxuXHRcdFx0XHRcdERlYnVnTGV2ZWwgPSBwYXJzZUludCh2YWx1ZSlcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0dGhpcy5kaXNwbGF5KClcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0Ly8gRGlzcGxheSBTZXR0aW5ncyBmb3IgU2VtYUxvZ2ljXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0NoYW5nZSB5b3VyIHNldHRpbmcgcHJvZmlsZScpXHJcblx0XHRcdC5zZXREZXNjKCdZb3UgY2FuIGRlZmluZSBkaWZmZXJlbnQgcHJvZmlsZXMgZm9yIHlvdXIgU2VtYUxvZ2ljU2VydmljZScpXHJcblx0XHRcdC5hZGREcm9wZG93bihkcm9wRG93biA9PiBkcm9wRG93blxyXG5cdFx0XHRcdC5hZGRPcHRpb24oJzAnLCAnUHJvZmlsZSAxJylcclxuXHRcdFx0XHQuYWRkT3B0aW9uKCcxJywgJ1Byb2ZpbGUgMicpXHJcblx0XHRcdFx0LmFkZE9wdGlvbignMicsICdQcm9maWxlIDMnKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmcudG9TdHJpbmcoKSlcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoLCB1bmRlZmluZWQsICdTZXQgUHJvZmlsZTogJyArIHZhbHVlKVxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nID0gcGFyc2VJbnQodmFsdWUpO1xyXG5cdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cclxuXHRcdC8vIFNob3cgU3RhbmRhcmRVcGRhdGVJbnRlcnZhbFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdTdGFuZGFyZCB1cGRhdGVpbnRlcnZhbCcpXHJcblx0XHRcdC8vLnNldERlc2MoJ1NldCBzdGFuZGFyZCB1cGRhdGVpbnRlcnZhbCcpXHJcblx0XHRcdC5hZGRUZXh0KHNldHRpbmcgPT4gc2V0dGluZ1xyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVwZGF0ZUludGVydmFsLnRvU3RyaW5nKCkpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0c2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50LCB1bmRlZmluZWQsICdTZXQgVXBkYXRlIEludGVydmFsOiAnICsgdmFsdWUpXHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVwZGF0ZUludGVydmFsID0gcGFyc2VJbnQodmFsdWUpO1xyXG5cdFx0XHRcdFx0d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5wbHVnaW4uaW50ZXJ2YWwpXHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckludGVydmFsKFxyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5pbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCh0aGlzLnBsdWdpbi5oYW5kbGVVcGRhdGUsIHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15VXBkYXRlSW50ZXJ2YWwpXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcclxuXHRcdFx0XHRcdC8vdGhpcy5kaXNwbGF5KClcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cclxuXHRcdC8vIEJhc2VVUkwgXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0Jhc2VVcmwnKVxyXG5cdFx0XHQuc2V0RGVzYygnQmFzZVVSTCBmb3IgcmVhY2hpbmcgU2VtYUxvZ2ljU2VydmljZScpXHJcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihBUElfRGVmYXVsdHMuQmFzZV9VUkwpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15QmFzZVVSTClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHVuZGVmaW5lZCwgJ1NldCBCYXNlVVJMOiAnICsgdmFsdWUpXHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teUJhc2VVUkwgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1BhdGggdG8gR2V0LUFQSS1FbmRwb2ludHMnKVxyXG5cdFx0XHQuc2V0RGVzYygnUGF0aCB0byBHZXQtQVBJIGZvciBtb3JlIEluZm9ybWF0aW9uIGFib3V0IHRoZSBFbmRwb2ludHMgb2YgdXNlZCBBUElzJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5HZXRBUEkpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15R2V0QVBJKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdW5kZWZpbmVkLCAnU2V0IHRvIEdldC1BUEktRW5kcG9pbnQ6ICcgKyB2YWx1ZSlcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15R2V0QVBJID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdC8vdGhpcy5kaXNwbGF5KClcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cclxuXHRcdC8vIFBvcnQgZm9yIHJlYWNoaW5nIFNlbWFMb2dpYyB3aXRoIFN0YW5kYXJkcGFyYW1ldGVyXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1BvcnQgU2VtYUxvZ2ljJylcclxuXHRcdFx0LnNldERlc2MoJ0VudGVyIHRoZSBQb3J0JylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5Qb3J0KVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVBvcnQpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0c2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50LCB1bmRlZmluZWQsICdTZXQgdG8gUG9ydDogJyArIHZhbHVlKVxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlQb3J0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0Ly8gT3V0cHV0Rm9ybWF0cyBcclxuXHRcdC8vIFRvRG86IEdldCBmcm9tIEFQSSB3aGljaCBPdXRwdXRGb3JtYXRzIGFyZSBwb3NzaWJsZVx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnT3V0cHV0Rm9ybWF0JylcclxuXHRcdFx0LnNldERlc2MoJ0hlcmUgeW91IGNhbiBzZXQgdGhlIG91dHB1dGZvcm1hdCBmb3IgU2VtYUxvZ2ljLCB3aGljaCBjb3VsZCBiZSBnZXQgZnJvbSBTZW1hTG9naWNTZXJ2aWNlJylcclxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3BEb3duID0+IGRyb3BEb3duXHJcblx0XHRcdFx0LmFkZE9wdGlvbihSdWxlc2V0dHlwZXNDb21tYW5kc1tSc3R5cGVzX1NlbWFsb2dpY11bMV0sIFJ1bGVzZXR0eXBlc0NvbW1hbmRzW1JzdHlwZXNfU2VtYWxvZ2ljXVswXSlcclxuXHRcdFx0XHQuYWRkT3B0aW9uKFJ1bGVzZXR0eXBlc0NvbW1hbmRzW1JzdHlwZXNfQVNQXVsxXSwgUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19BU1BdWzBdKVxyXG5cdFx0XHRcdC5hZGRPcHRpb24oUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19QaWN0dXJlXVsxXSwgUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19QaWN0dXJlXVswXSlcclxuXHRcdFx0XHQuYWRkT3B0aW9uKFJ1bGVzZXR0eXBlc0NvbW1hbmRzW1JzdHlwZXNfU2VtYW50aWNUcmVlXVsxXSwgUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19TZW1hbnRpY1RyZWVdWzBdKVxyXG5cdFx0XHRcdC5hZGRPcHRpb24oUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19Lbm93bGVkZ2VHcmFwaF1bMV0sIFJ1bGVzZXR0eXBlc0NvbW1hbmRzW1JzdHlwZXNfS25vd2xlZGdlR3JhcGhdWzBdKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teU91dHB1dEZvcm1hdClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHVuZGVmaW5lZCwgJ1NldCBPdXRwdXRmb3JtYXQ6ICcgKyB2YWx1ZSlcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15T3V0cHV0Rm9ybWF0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0LyogU0lEIGlzIG5vdCBuZWVkZWQgZm9yIG9uLXRoZS1mbHktc29sdmluZyBpbiBvYnNpZGlhblxyXG5cdFx0XHRcdC8vIFNJRC1JbmZvcm1hdGlvblxyXG5cdFx0XHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHRcdFx0LnNldE5hbWUoJ1NJRCcpXHJcblx0XHRcdFx0XHQuc2V0RGVzYygnU2VtYUxvZ2ljIFNlc3Npb25JRCcpXHJcblx0XHRcdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5TSUQpXHJcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVNJRClcclxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdW5kZWZpbmVkLCAnU2V0IFNJRDogJyArIHZhbHVlKVxyXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15U0lEID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHRcdH0pKTtcclxuXHRcdCovXHJcblxyXG5cdFx0Ly8gRm9yIEhUVFAtUmVxdWVzdCB3aXRoIFVzZXIvUGFzc3dvcmQgZm9yIHRyYW5zZmVyIHZpZXdcdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1NlY3VyZSBIVFRQLVJlcXVlc3QgU2VtYUxvZ2ljJylcclxuXHRcdFx0LnNldERlc2MoJ0lmIHlvdSBoYXMgdG8gdXNlIFVzZXIvUGFzc3dvcmQgZm9yIGh0dHAtcmVxdWVzdCB0byB0aGUgc2VtYWxvZ2ljIHNlcnZpY2UnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHNldHRpbmcgPT4gc2V0dGluZ1xyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzU0wpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0c2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50LCB1bmRlZmluZWQsICdTZXQgVXNlclBhc3N3b3JkUmVxdWVzdDogJyArIHZhbHVlKVxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlVc2VIdHRwc1NMID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxyXG5cdFx0XHRcdFx0dGhpcy5kaXNwbGF5KClcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15VXNlSHR0cHNTTCkge1xyXG5cdFx0XHQvLyBSZXF1ZXN0LVVzZXJcclxuXHRcdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUoJ0hUVFAtUmVxdWVzdC1Vc2VyJylcclxuXHRcdFx0XHQuc2V0RGVzYygnVXNlciB0byByZWFjaCB0cmFuc2ZlciBzZXJ2aWNlJylcclxuXHRcdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihBUElfRGVmYXVsdHMuSHR0cFVzZXJTTClcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZXJTTClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0c2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50LCB1bmRlZmluZWQsICdTZXQgSFRUUC1SZXF1ZXN0LVVzZXIuLi4nKVxyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZXJTTCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHJcblx0XHRcdC8vIFJlcXVlc3QtUGFzc3dvcmRcclxuXHRcdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUoJ0hUVFAtUmVxdWVzdC1QYXNzd29yZCcpXHJcblx0XHRcdFx0LnNldERlc2MoJ1Bhc3N3b3JkIHRvIHJlYWNoIHRyYW5zZmVyIHNlcnZpY2UnKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5IdHRwUGFzc3dvcmRTTClcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVBhc3N3b3JkU0wpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdW5kZWZpbmVkLCAnU2V0IEhUVFAtUmVxdWVzdC1QYXNzd29yZC4uLicpXHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15UGFzc3dvcmRTTCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH1cclxuXHJcblxyXG5cdFx0Ly8gU2hvdyBEaWFsZWN0IGluIFJlYWRpbmcgVmlld1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdTaG93IENvbnRleHQgaW4gUmVhZGluZyBWaWV3JylcclxuXHRcdFx0Ly8uc2V0RGVzYygnU2hvdyBDb250ZXh0IGluIFJlYWRpbmcgVmlldycpXHJcblx0XHRcdC5hZGRUb2dnbGUoc2V0dGluZyA9PiBzZXR0aW5nXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15Q29udGV4dClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHVuZGVmaW5lZCwgJ1NldCBDb250ZXh0IG9mIFJlYWRpbmcgVmlldzogJyArIHZhbHVlKVxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlDb250ZXh0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxyXG5cdFx0XHRcdFx0Ly90aGlzLmRpc3BsYXkoKVxyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHQvLyBIZWFkbGluZSBmb3IgU2V0dGluZ3NUYWJcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMScsIHsgdGV4dDogJ19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18nIH0pO1xyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnU2V0dGluZ3MgZm9yIFRyYW5zZmVyL0FTUC1WaWV3OicgfSk7XHJcblxyXG5cdFx0Ly8gQVNQQmFzZVVSTCBcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnQmFzZVVybCBmb3IgVHJhbnNmZXIvQVNQJylcclxuXHRcdFx0LnNldERlc2MoJ0Jhc2VVUkwgZm9yIHJlYWNoaW5nIFRyYW5zZmVyL0FTUC1TZXJ2aWNlJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5Bc3BVcmwpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15QXNwVXJsKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdW5kZWZpbmVkLCAnU2V0IFRyYW5zZmVyL0FTUC1CYXNlVVJMOiAnICsgdmFsdWUpXHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teUFzcFVybCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdC8vIFN0YW5kYXJkIEFTUEVuZHBvaW50XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1BhdGggdG8gR2V0LVRyYW5zZmVyL0FTUC1TdGFuZGFyZEFQSS1FbmRwb2ludCcpXHJcblx0XHRcdC5zZXREZXNjKCdQYXRoIHRvIFRyYW5zZmVyL0FTUC1TdGFuZGFyZC1BUEkgJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5Bc3BFbmRwb2ludClcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlBc3BFbmRwb2ludClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHVuZGVmaW5lZCwgJ1NldCB0byBUcmFuc2Zlci9BU1AtU3RhbmRhcmQtQVBJLUVuZHBvaW50OiAnICsgdmFsdWUpXHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teUFzcEVuZHBvaW50ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0Ly8gRm9yIEhUVFAtUmVxdWVzdCB3aXRoIFVzZXIvUGFzc3dvcmQgZm9yIHRyYW5zZmVyIHZpZXdcdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1NlY3VyZSBIVFRQLVJlcXVlc3QnKVxyXG5cdFx0XHQuc2V0RGVzYygnSWYgeW91IGhhcyB0byB1c2UgVXNlci9QYXNzd29yZCBmb3IgaHR0cC1yZXF1ZXN0IHRvIHRoZSB0cmFuc2ZlciBzZXJ2aWNlJylcclxuXHRcdFx0LmFkZFRvZ2dsZShzZXR0aW5nID0+IHNldHRpbmdcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlVc2VIdHRwcylcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHVuZGVmaW5lZCwgJ1NldCBVc2VyUGFzc3dvcmRSZXF1ZXN0OiAnICsgdmFsdWUpXHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxyXG5cdFx0XHRcdFx0dGhpcy5kaXNwbGF5KClcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzKSB7XHJcblx0XHRcdC8vIFJlcXVlc3QtVXNlclxyXG5cdFx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgnSFRUUC1SZXF1ZXN0LVVzZXInKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdVc2VyIHRvIHJlYWNoIHRyYW5zZmVyIHNlcnZpY2UnKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5IdHRwVXNlcilcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZXIpXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdW5kZWZpbmVkLCAnU2V0IEhUVFAtUmVxdWVzdC1Vc2VyLi4uJylcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlVc2VyID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdFx0Ly8gUmVxdWVzdC1QYXNzd29yZFxyXG5cdFx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgnSFRUUC1SZXF1ZXN0LVBhc3N3b3JkJylcclxuXHRcdFx0XHQuc2V0RGVzYygnUGFzc3dvcmQgdG8gcmVhY2ggdHJhbnNmZXIgc2VydmljZScpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoQVBJX0RlZmF1bHRzLkh0dHBQYXNzd29yZClcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVBhc3N3b3JkKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHVuZGVmaW5lZCwgJ1NldCBIVFRQLVJlcXVlc3QtUGFzc3dvcmQuLi4nKVxyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVBhc3N3b3JkID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0fVxyXG5cclxuXHJcblx0fVxyXG59XHJcblxyXG4vLyBDb21tdW5pY2F0aW9uQ2xhc3MgZm9yIGludGVyYWN0aW9uIGJldHdlZW4gU0x2aWV3IGFuZCBlZGl0b3Igd2luZG93XHJcbmV4cG9ydCBjbGFzcyBTZW1hTG9naWNQbHVnaW5Db21tIHtcclxuXHRzbHZpZXc6IFNlbWFMb2dpY1ZpZXdcclxuXHRzbFBsdWdpbjogU2VtYUxvZ2ljUGx1Z2luXHJcblx0c2xhc3B2aWV3OiBBU1BWaWV3XHJcblx0YWN0aXZhdGVkQVNQOiBib29sZWFuID0gZmFsc2U7XHJcblx0c2xVc2VkTURWaWV3OiBNYXJrZG93blZpZXdcclxuXHJcblx0c2V0U2xWaWV3KHZpZXc6IFNlbWFMb2dpY1ZpZXcpIHtcclxuXHRcdHRoaXMuc2x2aWV3ID0gdmlld1xyXG5cdH1cclxuXHJcblx0c2V0U0xDbGFzcyhzbGNsYXNzOiBTZW1hTG9naWNQbHVnaW4pIHtcclxuXHRcdHRoaXMuc2xQbHVnaW4gPSBzbGNsYXNzXHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYWRkKGE6IG51bWJlciwgYjogbnVtYmVyKTogbnVtYmVyIHtcclxuXHRcdHJldHVybiBhICsgYlxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VtYUxvZ2ljUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3M7XHJcblx0c2VtYUxvZ2ljVmlldzogU2VtYUxvZ2ljVmlldztcclxuXHRteVN0YXR1czogSFRNTEVsZW1lbnQ7XHJcblx0c3RhdHVzVHJhbnNmZXI6IGJvb2xlYW5cclxuXHRzdGF0dXNTTDogYm9vbGVhbjtcclxuXHJcblx0YWN0aXZhdGVkOiBib29sZWFuID0gZmFsc2U7XHJcblx0dXBkYXRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRsYXN0VXBkYXRlOiBudW1iZXIgPSAwO1xyXG5cdHVwZGF0ZU91dHN0YW5kaW5nOiBib29sZWFuID0gZmFsc2U7XHJcblx0dXBkYXRlVHJhbnNmZXJPdXRzdGFuZGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHVwZGF0ZU91dHN0YW5kaW5nU2V0dGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHdhaXRpbmdGb3JSZXNwb25zZSA9IGZhbHNlO1xyXG5cdFVwZGF0ZVByb2Nlc3Npbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRzbENvbW06IFNlbWFMb2dpY1BsdWdpbkNvbW07XHJcblx0bGFzdGFjdGl2ZVZpZXc6IE1hcmtkb3duVmlldztcclxuXHR2aWV3X3V0aWxzID0gbmV3IFZpZXdVdGlsc1xyXG5cdGludGVydmFsOiBudW1iZXJcclxuXHJcblx0Ly8gRHVlIHRvIGNoYW5nZSBpbiBTcHJpbnQgMS8yMDIzIHRvIGlubGluZSBkaWFsZWN0cywgZGV0ZWN0aW9uIG9mIGNvbnRleHRzIHdpbGwgYmUgbmVlZGVkIGluIGxhdGVyIHNwcmludHMgXHJcblx0cHJpdmF0ZSBnZXRDb250ZXh0RnJvbUxpbmUobXlkaWFsZWN0SUQ6IHN0cmluZykge1xyXG5cdFx0Ly8gVG9EbzogUmVwbGFjZSB2b24gVG9rb25zIC0gYmlzIGRpZSBuZXVlIFNlbWFMb2dpY1ZlcnNpb24gYnpnbC4gZGVyIENvbnRleHRlIHZlcmZcdTAwRkNnYmFyIGlzdFxyXG5cdFx0bXlkaWFsZWN0SUQgPSBteWRpYWxlY3RJRC5yZXBsYWNlKCdTZW1hTG9naWNDb250ZXh0XHUyMjYxJywgJ1NlbWFMb2dpY0RpYWxlY3RcdTIyNjEnKTtcclxuXHRcdC8vbXlkaWFsZWN0SUQgPSBteWRpYWxlY3RJRC5yZXBsYWNlKFwiZGlhbGVjdDo9XCIsIFwiXCIpO1xyXG5cdFx0bGV0IHJlID0gL1xcdC9naTtcclxuXHRcdG15ZGlhbGVjdElEID0gbXlkaWFsZWN0SUQucmVwbGFjZShyZSwgXCJcIik7XHJcblx0XHRyZSA9IC9cXG4vZ2k7XHJcblx0XHRteWRpYWxlY3RJRCA9IG15ZGlhbGVjdElELnJlcGxhY2UocmUsIFwiXCIpO1xyXG5cdFx0cmV0dXJuIHsgbXlkaWFsZWN0SUQgfTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0QWN0aXZlVmlldygpOiBNYXJrZG93blZpZXcgfCB1bmRlZmluZWQge1xyXG5cdFx0Y29uc3QgYWN0aXZlVmlldyA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0aWYgKGFjdGl2ZVZpZXcgPT09IG51bGwpIHtcclxuXHRcdFx0aWYgKHRoaXMubGFzdGFjdGl2ZVZpZXcgPT09IG51bGwpIHtcclxuXHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoLCB0aGlzLnNsQ29tbS5zbHZpZXcsIFwiQWN0aXZlVmlldyBjb3VsZCBub3QgYmUgZGVmaW5lZCB0aHJvdWdoIFNlbWFMb2dpY1wiKVxyXG5cdFx0XHRcdHJldHVyblxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmxhc3RhY3RpdmVWaWV3O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR0aGlzLmxhc3RhY3RpdmVWaWV3ID0gYWN0aXZlVmlld1xyXG5cdFx0c2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50LCB0aGlzLnNsQ29tbS5zbHZpZXcsIHRoaXMubGFzdGFjdGl2ZVZpZXcuZ2V0RGlzcGxheVRleHQoKSlcclxuXHRcdHJldHVybiB0aGlzLmxhc3RhY3RpdmVWaWV3XHJcblx0fVxyXG5cclxuXHRzZXRWaWV3cygpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2xDb21tLmFjdGl2YXRlZEFTUCA9IGZhbHNlXHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRzd2l0Y2ggKGxlYWYudmlldy5nZXRWaWV3VHlwZSgpKSB7XHJcblx0XHRcdFx0Y2FzZSBTZW1hTG9naWNWaWV3VHlwZToge1xyXG5cdFx0XHRcdFx0dGhpcy5zbENvbW0uc2x2aWV3ID0gKGxlYWYudmlldyBhcyBTZW1hTG9naWNWaWV3KVxyXG5cdFx0XHRcdFx0dGhpcy5zbENvbW0uc2x2aWV3LnNldENvbW0odGhpcy5zbENvbW0pXHJcblx0XHRcdFx0XHR0aGlzLnNsQ29tbS5zbHZpZXcuc2xDb21tLnNldFNsVmlldyh0aGlzLnNsQ29tbS5zbHZpZXcpXHJcblx0XHRcdFx0XHR0aGlzLnNsQ29tbS5zbHZpZXcuc2xDb21tLnNsUGx1Z2luID0gdGhpcy5zbENvbW0uc2xQbHVnaW5cclxuXHRcdFx0XHRcdHRoaXMuYWN0aXZhdGVkID0gdHJ1ZVxyXG5cdFx0XHRcdFx0dGhpcy5zdGF0dXNTTCA9IHRydWVcclxuXHRcdFx0XHRcdGJyZWFrXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhc2UgQVNQVmlld1R5cGU6IHtcclxuXHRcdFx0XHRcdHRoaXMuc2xDb21tLnNsYXNwdmlldyA9IChsZWFmLnZpZXcgYXMgQVNQVmlldylcclxuXHRcdFx0XHRcdHRoaXMuc2xDb21tLnNsYXNwdmlldy5zZXRDb21tKHRoaXMuc2xDb21tKVxyXG5cdFx0XHRcdFx0dGhpcy5zbENvbW0uc2xhc3B2aWV3LnNsQ29tbS5zZXRTbFZpZXcodGhpcy5zbENvbW0uc2x2aWV3KVxyXG5cdFx0XHRcdFx0dGhpcy5zbENvbW0uc2xhc3B2aWV3LnNsQ29tbS5zbFBsdWdpbiA9IHRoaXMuc2xDb21tLnNsUGx1Z2luXHJcblx0XHRcdFx0XHR0aGlzLnNsQ29tbS5hY3RpdmF0ZWRBU1AgPSB0cnVlXHJcblx0XHRcdFx0XHR0aGlzLnN0YXR1c1RyYW5zZmVyID0gdHJ1ZVxyXG5cclxuXHRcdFx0XHRcdGJyZWFrXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0dGhpcy5nZXRBY3RpdmVWaWV3KClcclxuXHRcdC8vdGhpcy5zZW1hTG9naWNVcGRhdGUoZmFsc2UpXHJcblx0fVxyXG5cclxuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKChlbGVtZW50LCBjb250ZXh0KSA9PiB7XHJcblx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSwgdW5kZWZpbmVkLCBlbGVtZW50KVxyXG5cdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHksIHVuZGVmaW5lZCwgY29udGV4dClcclxuXHRcdFx0ZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwicFwiKS5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdFx0XHRcdGlmIChzZWFyY2hGb3JTZW1hTG9naWNDb21tYW5kcyhlbCkpIHtcclxuXHRcdFx0XHRcdGxldCBzZXQgPSB0aGlzLnNldHRpbmdzXHJcblx0XHRcdFx0XHRjb250ZXh0LmFkZENoaWxkKG5ldyBTZW1hTG9naWNSZW5kZXJlZEVsZW1lbnQoeyBjb250YWluZXJFbDogZWwgYXMgSFRNTEVsZW1lbnQsIHNldCB9KSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pXHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2VtYUxvZ2ljU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdERlYnVnTGV2ZWwgPSB0aGlzLnNldHRpbmdzLm15RGVidWdMZXZlbFxyXG5cclxuXHRcdC8vIFRoaXMgYWRkcyBhIHN0YXR1cyBiYXIgZm9yIGluZm9ybWF0aW9uc1xyXG5cdFx0dGhpcy5teVN0YXR1cyA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpXHJcblxyXG5cdFx0dGhpcy5zbENvbW0gPSBuZXcgU2VtYUxvZ2ljUGx1Z2luQ29tbVxyXG5cdFx0dGhpcy5zbENvbW0uc2V0U0xDbGFzcyh0aGlzKVxyXG5cclxuXHRcdHRoaXMuYWN0aXZhdGVWaWV3KCk7XHJcblx0XHQvLyBDbGVhciBTZW1hTG9naWMgdG8gc3RhcnQgd2l0aCBhIGNsZWFyIHNlcnZpY2VcclxuXHRcdGF3YWl0IHRoaXMuc2VtYUxvZ2ljUmVzZXQoKTtcclxuXHRcdHRoaXMuc2V0Vmlld3MoKVxyXG5cclxuXHRcdC8vIGFkZCBhbiBSaWJib25JY29uIHRvIGFjdGl2Y2F0ZSBhbmQgZGVhY3RpdmF0ZSB0aGUgU2VtYUxvZ2ljVmlld1xyXG5cdFx0dGhpcy5hZGRSaWJib25JY29uKFwiYm9va1wiLCBcIk9uL09mZiBTZW1hTG9naWMuVmlld1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0Vmlld3MoKVxyXG5cdFx0XHRpZiAodGhpcy5hY3RpdmF0ZWQgPT0gZmFsc2UpIHtcclxuXHRcdFx0XHR0aGlzLnN0YXR1c1NMID0gdHJ1ZVxyXG5cdFx0XHRcdGlmICghdGhpcy5hY3RpdmF0ZWQpIHtcclxuXHRcdFx0XHRcdHRoaXMuYWN0aXZhdGVWaWV3KClcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5zdGF0dXNTTCA9IGZhbHNlXHJcblx0XHRcdFx0dGhpcy5kZWFjdGl2YXRlVmlldygpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSk7XHJcblx0XHQvLyBhZGQgYW4gUmliYm9uSWNvbiB0byBhY3RpdmNhdGUgYW5kIGRlYWN0aXZhdGUgdGhlIFNlbWFMb2dpY1ZpZXdcclxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcImRpY2VcIiwgXCJPbi9PZmYgVHJhbnNmZXIuVmlld1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0Vmlld3MoKVxyXG5cdFx0XHRpZiAodGhpcy5zbENvbW0gIT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2xDb21tLmFjdGl2YXRlZEFTUCA9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0dGhpcy5hY3RpdmF0ZUFTUFZpZXcoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5kZWFjdGl2YXRlQVNQVmlldygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRpZiAodGhpcy5zdGF0dXNTTCkge1xyXG5cdFx0XHR0aGlzLnNlbWFMb2dpY1Jlc2V0KCk7XHJcblx0XHRcdC8vIERlZmF1bHQgaXMgdGhhdCBTZW1hTG9naWNWaWV3IGlzIGFjdGl2YXRlZCBidXQgaXQgY2FuIGJlIGRlYWN0aXZhdGVkIGJ5IGNsaWNrIG9uIFJpYmJvbiBJY29uXHJcblx0XHRcdHRoaXMuc2xDb21tLnNsdmlldy5zZXROZXdJbml0aWFsKHRoaXMuc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2V0dGluZ3MubXlTZXR0aW5nXS5teU91dHB1dEZvcm1hdCk7XHJcblx0XHRcdHRoaXMuc2VtYUxvZ2ljUGFyc2UoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMucmVnaXN0ZXJJbnRlcnZhbChcclxuXHRcdFx0dGhpcy5pbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCh0aGlzLmhhbmRsZVVwZGF0ZSwgdGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15VXBkYXRlSW50ZXJ2YWwpXHJcblx0XHQpO1xyXG5cdFx0dGhpcy5yZWdpc3RlckVkaXRvckV4dGVuc2lvbihbRWRpdG9yVmlldy51cGRhdGVMaXN0ZW5lci5vZih0aGlzLmhhbmRsZVVwZGF0ZSldKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNlbWFMb2dpY1BhcnNlKCk6IFByb21pc2U8Tm9kZVtdPiB7XHJcblxyXG5cdFx0dGhpcy5zZXRWaWV3cygpO1xyXG5cclxuXHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsXywgdGhpcy5zbENvbW0uc2x2aWV3LCAnU3RhcnQgU2VtYUxvZ2ljUGFyc2UnKVxyXG5cdFx0bGV0IHJlc3VsdHM6IE5vZGVbXSA9IFtdO1xyXG5cclxuXHRcdHRoaXMubGFzdFVwZGF0ZSA9IERhdGUubm93KClcclxuXHRcdGF3YWl0IHNlbWFMb2dpY1BpbmcodGhpcy5zZXR0aW5ncywgdGhpcy5sYXN0VXBkYXRlKVxyXG5cclxuXHRcdC8vIGxldCB2QVBJX1VSTCA9IGdldEhvc3RQb3J0KHRoaXMuc2V0dGluZ3MpICsgQVBJX0RlZmF1bHRzLnJ1bGVzX3BhcnNlICsgXCI/c2lkPVwiICsgdGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15U0lEO1xyXG5cdFx0bGV0IHZBUElfVVJMID0gZ2V0SG9zdFBvcnQodGhpcy5zZXR0aW5ncykgKyBBUElfRGVmYXVsdHMucnVsZXNfcGFyc2UgKyBcIj9zaWQ9XCIgKyBteWdTSUQ7XHJcblx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHRoaXMuc2xDb21tLnNsdmlldywgdkFQSV9VUkwpXHJcblxyXG5cdFx0bGV0IGJvZHl0ZXh0OiBzdHJpbmcgPSBcIlwiO1xyXG5cdFx0bGV0IGFjdGl2ZVZpZXcgPSB0aGlzLmdldEFjdGl2ZVZpZXcoKVxyXG5cdFx0aWYgKGFjdGl2ZVZpZXcgIT0gdW5kZWZpbmVkKSB7IHRoaXMuc2xDb21tLnNsVXNlZE1EVmlldyA9IGFjdGl2ZVZpZXcgfVxyXG5cclxuXHRcdGxldCBkaWFsZWN0SUQ6IHN0cmluZyA9IFwiZGVmYXVsdFwiXHJcblx0XHRsZXQgY29kZWJsb2NrOiBib29sZWFuID0gZmFsc2U7XHJcblx0XHRsZXQgbmV3Q29kZWJsb2NrOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG5cdFx0aWYgKGFjdGl2ZVZpZXcgIT0gbnVsbCkge1xyXG5cdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHksIHRoaXMuc2xDb21tLnNsdmlldywgJ0FjdGl2ZVZpZXcgaXMgbm90IE5VTEwnKVxyXG5cclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhY3RpdmVWaWV3LmVkaXRvci5saW5lQ291bnQoKTsgaSsrKSB7XHJcblx0XHRcdFx0c2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQWxsLCB0aGlzLnNsQ29tbS5zbHZpZXcsIGksICc7JywgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKSlcclxuXHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9BbGwsIHRoaXMuc2xDb21tLnNsdmlldywgJ1N1YnN0cmluZzonLCBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZygwLCAyKSk7XHJcblx0XHRcdFx0aWYgKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIDMpID09IFwiYGBgXCIpIHtcclxuXHRcdFx0XHRcdGlmICghY29kZWJsb2NrKSB7XHJcblx0XHRcdFx0XHRcdGNvZGVibG9jayA9IHRydWVcclxuXHRcdFx0XHRcdFx0bmV3Q29kZWJsb2NrID0gdHJ1ZVxyXG5cdFx0XHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHksIHRoaXMuc2xDb21tLnNsdmlldywgJ0N1cnJlbnQgbGluZSBpcyBDb2RlYmxvY2s6ICcgKyBpLnRvU3RyaW5nKCksIGNvZGVibG9jaylcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdG5ld0NvZGVibG9jayA9IGZhbHNlXHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoKCFjb2RlYmxvY2spICYmICghbmV3Q29kZWJsb2NrKSkge1xyXG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaW5saW5lIFN0YXRlbWVudHNcclxuXHRcdFx0XHRcdGJvZHl0ZXh0ID0gYm9keXRleHQuY29uY2F0KGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkgKyAnXFxuJylcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHQvLyBQclx1MDBGQ2ZlIGF1ZiB6dSB2ZXJ3ZW5kZW5kZW4gRGlhbGVjdFxyXG5cdFx0XHRcdFx0c3dpdGNoIChhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZygwLCBzZW1hTG9naWNDb21tYW5kLnVzZURpYWxlY3QubGVuZ3RoKSkge1xyXG5cdFx0XHRcdFx0XHRjYXNlIHNlbWFMb2dpY0NvbW1hbmQudXNlRGlhbGVjdDoge1xyXG5cdFx0XHRcdFx0XHRcdGRpYWxlY3RJRCA9IGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKHNlbWFMb2dpY0NvbW1hbmQudXNlRGlhbGVjdC5sZW5ndGgsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkubGVuZ3RoIC0gMSlcclxuXHRcdFx0XHRcdFx0XHRkaWFsZWN0SUQgPSBkaWFsZWN0SUQudHJpbSgpO1xyXG5cdFx0XHRcdFx0XHRcdGJyZWFrXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0ZGVmYXVsdDogeyB9XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoaSA8IGFjdGl2ZVZpZXcuZWRpdG9yLmxpbmVDb3VudCgpKSB7XHJcblx0XHRcdFx0XHRpZiAoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoMCwgMykgPT0gXCJgYGBcIikge1xyXG5cdFx0XHRcdFx0XHRpZiAoKGNvZGVibG9jaykgJiYgKCFuZXdDb2RlYmxvY2spKSB7IGNvZGVibG9jayA9IGZhbHNlIH0gZWxzZSB7IG5ld0NvZGVibG9jayA9IGZhbHNlIH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblxyXG5cdFx0Ym9keXRleHQgPSB0aGlzLnZpZXdfdXRpbHMuY2xlYW5Db21tYW5kcyhib2R5dGV4dClcclxuXHRcdGlmIChkaWFsZWN0SUQgPT0gXCJcIikgeyBkaWFsZWN0SUQgPSBcImRlZmF1bHRcIiB9XHJcblxyXG5cdFx0c2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5LCB1bmRlZmluZWQsIFwiUGFyc2luZ3Jlc3VsdCBmb3IgU2VtYUxvZ2ljVmlld1wiKVxyXG5cdFx0Y29uc3QgcmVzcG9uc2VGb3JTZW1hTG9naWMgPSB0aGlzLnNsQ29tbS5zbHZpZXcuZ2V0U2VtYUxvZ2ljUGFyc2UodGhpcy5zZXR0aW5ncywgdkFQSV9VUkwsIGRpYWxlY3RJRCwgYm9keXRleHQsIGZhbHNlKVxyXG5cdFx0cmVzcG9uc2VGb3JTZW1hTG9naWMudGhlbih2YWx1ZSA9PiB7XHJcblx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSwgdW5kZWZpbmVkLCB2YWx1ZSlcclxuXHRcdH0pXHJcblxyXG5cdFx0Ly9zbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldiwgdGhpcy5zbENvbW0uc2x2aWV3LCAnQ2hlY2s6IFVwZGF0ZUFTUE91dHN0YW5kaW5nID0gZmFsc2U6JyArIHRoaXMudXBkYXRlVHJhbnNmZXJPdXRzdGFuZGluZylcclxuXHRcdGlmICh0aGlzLnNsQ29tbS5hY3RpdmF0ZWRBU1ApIHtcclxuXHRcdFx0aWYgKERhdGUubm93KCkgLSB0aGlzLnNsQ29tbS5zbGFzcHZpZXcuTGFzdFJlcXVlc3RUaW1lID49IHRoaXMuc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2V0dGluZ3MubXlTZXR0aW5nXS5teVVwZGF0ZUludGVydmFsKSB7XHJcblx0XHRcdFx0Ly90aGlzLnNsQ29tbS5zbGFzcHZpZXcuY29udGVudEVsLmVtcHR5XHJcblx0XHRcdFx0dGhpcy5zbENvbW0uc2xhc3B2aWV3Lkxhc3RSZXF1ZXN0VGltZSA9IERhdGUubm93KClcclxuXHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldiwgdGhpcy5zbENvbW0uc2x2aWV3LCBgU2V0LVJlcXVlc3R0aW1lOiAke3RoaXMuc2xDb21tLnNsYXNwdmlldy5MYXN0UmVxdWVzdFRpbWV9YClcclxuXHJcblx0XHRcdFx0Ly9zbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHksIHRoaXMuc2xDb21tLnNsdmlldywgXCJQYXJzaW5ncmVzdWx0IGZvciBPblRoZUZseSBUcmFuc2Zlci52aWV3IGluIFNlbWFMb2dpY1wiKVxyXG5cdFx0XHRcdC8vY29uc3QgcGFyc2VDb21tYW5kcyA9IHRoaXMuc2xDb21tLnNsYXNwdmlldy5nZXRBU1BDb21tYW5kcyh0aGlzLnNsQ29tbSwgdGhpcy5zZXR0aW5ncylcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZVRyYW5zZmVyT3V0c3RhbmRpbmcgPSBmYWxzZVxyXG5cdFx0XHRcdC8vcGFyc2VDb21tYW5kcy5jb21tYW5kcy5mb3JFYWNoKGNvbW1hbmQgPT4ge1xyXG5cdFx0XHRcdGxldCBvdXRwdXRGb3JtYXQ6IHN0cmluZyA9IFJ1bGVzZXR0eXBlc0NvbW1hbmRzW1JzdHlwZXNfQVNQXVsxXVxyXG5cdFx0XHRcdC8vXHRpZiAoY29tbWFuZC5vdXRwdXRmb3JtYXQgIT0gdW5kZWZpbmVkICYmIGNvbW1hbmQub3V0cHV0Zm9ybWF0ICE9IFJ1bGVzZXR0eXBlc0NvbW1hbmRzW1JzdHlwZXNfQVNQXVswXSkgeyBvdXRwdXRGb3JtYXQgPSBjb21tYW5kLm91dHB1dGZvcm1hdCB9XHJcblxyXG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlRm9yQVNQID0gdGhpcy5zbENvbW0uc2x2aWV3LmdldFNlbWFMb2dpY1BhcnNlKHRoaXMuc2V0dGluZ3MsIHZBUElfVVJMLCBkaWFsZWN0SUQsIGJvZHl0ZXh0LCB0cnVlLCBvdXRwdXRGb3JtYXQpXHJcblx0XHRcdFx0cmVzcG9uc2VGb3JBU1AudGhlbih2YWx1ZSA9PiB7XHJcblx0XHRcdFx0XHQvL3RoaXMudXBkYXRlVHJhbnNmZXJPdXRzdGFuZGluZyA9IHRydWU7XHJcblx0XHRcdFx0XHQvL3NsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0N1cnJlbnRfRGV2LCB0aGlzLnNsQ29tbS5zbHZpZXcsICdTZXQgVXBkYXRlQVNQT3V0c3RhbmRpbmc6JyArIHRoaXMudXBkYXRlVHJhbnNmZXJPdXRzdGFuZGluZylcclxuXHRcdFx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSwgdGhpcy5zbENvbW0uc2x2aWV3LCB2YWx1ZSlcclxuXHRcdFx0XHRcdGNvbnN0IGFzcFByb21pc2UgPSB0aGlzLnNsQ29tbS5zbGFzcHZpZXcuYXNwUGFyc2UodGhpcy5zbENvbW0sIHRoaXMuc2V0dGluZ3MsIHZhbHVlLCB0aGlzLnNsQ29tbS5zbGFzcHZpZXcuTGFzdFJlcXVlc3RUaW1lKVxyXG5cdFx0XHRcdFx0YXNwUHJvbWlzZS50aGVuKHZhbHVlID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgeyBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldiwgdGhpcy5zbENvbW0uc2x2aWV3LCB2YWx1ZSkgfVxyXG5cdFx0XHRcdFx0XHQvL1xyXG5cdFx0XHRcdFx0XHQvL3NsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0N1cnJlbnRfRGV2LCB0aGlzLnNsQ29tbS5zbHZpZXcsICdTZXQgVXBkYXRlQVNQT3V0c3RhbmRpbmc6JyArIHRoaXMudXBkYXRlVHJhbnNmZXJPdXRzdGFuZGluZylcclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0fSBlbHNlIHsgdGhpcy51cGRhdGVUcmFuc2Zlck91dHN0YW5kaW5nID0gdHJ1ZSB9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJlc3VsdHNcclxuXHR9XHJcblxyXG5cdGFzeW5jIGFjdGl2YXRlQVNQVmlldygpIHtcclxuXHRcdC8vIEFkZCB0aGUgQVNQIC0gVmlld1xyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBBU1BWaWV3XHJcblx0XHRpZiAodGhpcy5zbENvbW0uc2xhc3B2aWV3ID09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyVmlldyhcclxuXHRcdFx0XHRBU1BWaWV3VHlwZSxcclxuXHRcdFx0XHRsZWFmID0+IG5ldyBBU1BWaWV3KGxlYWYpXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgbGVhZiA9IHRoaXMuR2V0QXNwTGVhZigpO1xyXG5cdFx0aWYgKGxlYWYgIT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdGxlYWYuc2V0Vmlld1N0YXRlKHtcclxuXHRcdFx0XHR0eXBlOiBBU1BWaWV3VHlwZSxcclxuXHRcdFx0XHRhY3RpdmU6IGZhbHNlLFxyXG5cdFx0XHR9KVxyXG5cdFx0XHRhd2FpdCB0aGlzLnNlbWFMb2dpY1Jlc2V0KClcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHksIHVuZGVmaW5lZCwgXCJBU1AtTGVhZiBub3QgY3JlYXRlZFwiKVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5zZXRWaWV3cygpXHJcblx0XHR0aGlzLmhhbmRsZVBpbmcoKVxyXG5cdFx0dGhpcy5zdGF0dXNUcmFuc2ZlciA9IHRydWVcclxuXHRcdHRoaXMuc2VtYUxvZ2ljVXBkYXRlKClcclxuXHRcdHRoaXMubXlTdGF0dXMuc2V0VGV4dCgnQVNQIGlzIG9uJyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBhY3RpdmF0ZVZpZXcoKSB7XHJcblx0XHQvLyBBZGQgdGhlIFNlbWFMb2dpYyAtIFZpZXdcclxuXHRcdGlmICh0aGlzLnNsQ29tbS5zbHZpZXcgPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxyXG5cdFx0XHRcdFNlbWFMb2dpY1ZpZXdUeXBlLFxyXG5cdFx0XHRcdGxlYWYgPT4gbmV3IFNlbWFMb2dpY1ZpZXcobGVhZilcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBsZWFmID0gdGhpcy5HZXRTZW1hTG9naWNMZWFmKCk7XHJcblx0XHRpZiAobGVhZiAhPSB1bmRlZmluZWQpIHtcclxuXHRcdFx0bGVhZi5zZXRWaWV3U3RhdGUoe1xyXG5cdFx0XHRcdHR5cGU6IFNlbWFMb2dpY1ZpZXdUeXBlLFxyXG5cdFx0XHRcdGFjdGl2ZTogZmFsc2UsXHJcblx0XHRcdH0pXHJcblx0XHRcdGF3YWl0IHRoaXMuc2VtYUxvZ2ljUmVzZXQoKVxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSwgdW5kZWZpbmVkLCBcIlNlbWFMb2dpYy1MZWFmIG5vdCBjcmVhdGVkXCIpXHJcblx0XHR9XHJcblx0XHR0aGlzLnNldFZpZXdzKClcclxuXHRcdHRoaXMuaGFuZGxlUGluZygpXHJcblx0XHR0aGlzLnNlbWFMb2dpY1VwZGF0ZSgpXHJcblx0XHR0aGlzLm15U3RhdHVzLnNldFRleHQoJ1NlbWFMb2dpYyBpcyBvbicpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZGVhY3RpdmF0ZUFTUFZpZXcoKSB7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKEFTUFZpZXdUeXBlKTtcclxuXHRcdHRoaXMuc2xDb21tLmFjdGl2YXRlZEFTUCA9IGZhbHNlXHJcblx0XHR0aGlzLnN0YXR1c1RyYW5zZmVyID0gdHJ1ZVxyXG5cdFx0dGhpcy5teVN0YXR1cy5zZXRUZXh0KCdBU1AgaXMgb2ZmJyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBkZWFjdGl2YXRlVmlldygpIHtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoU2VtYUxvZ2ljVmlld1R5cGUpO1xyXG5cdFx0dGhpcy5hY3RpdmF0ZWQgPSBmYWxzZVxyXG5cdFx0dGhpcy5zbENvbW0uc2x2aWV3LnVubG9hZCgpXHJcblx0XHR0aGlzLm15U3RhdHVzLnNldFRleHQoJ1NlbWFMb2dpYyBpcyBvZmYnKTtcclxuXHR9XHJcblxyXG5cdEdldEFzcExlYWYoKTogV29ya3NwYWNlTGVhZiB8IHVuZGVmaW5lZCB7XHJcblx0XHRsZXQgZm91bmQ6IGJvb2xlYW4gPSBmYWxzZVxyXG5cdFx0bGV0IHNsdjogV29ya3NwYWNlTGVhZiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxyXG5cclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdGlmICghZm91bmQpIHtcclxuXHRcdFx0XHRzd2l0Y2ggKGxlYWYudmlldy5nZXRWaWV3VHlwZSgpKSB7XHJcblx0XHRcdFx0XHRjYXNlIEFTUFZpZXdUeXBlOiB7XHJcblx0XHRcdFx0XHRcdGZvdW5kID0gdHJ1ZVxyXG5cdFx0XHRcdFx0XHRzbHYgPSBsZWFmXHJcblx0XHRcdFx0XHRcdC8vcmV0dXJuIHNsdlxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdGlmICghZm91bmQpIHtcclxuXHRcdFx0c2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQWxsLCB1bmRlZmluZWQsICdTcGxpdCcpXHJcblx0XHRcdHNsdiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCdzcGxpdCcpO1xyXG5cdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9BbGwsIHVuZGVmaW5lZCwgc2x2KVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHNsdlxyXG5cdH1cclxuXHJcblx0R2V0U2VtYUxvZ2ljTGVhZigpOiBXb3Jrc3BhY2VMZWFmIHwgdW5kZWZpbmVkIHtcclxuXHRcdGxldCBmb3VuZDogYm9vbGVhbiA9IGZhbHNlXHJcblx0XHRsZXQgc2x2OiBXb3Jrc3BhY2VMZWFmIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXHJcblxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0aWYgKCFmb3VuZCkge1xyXG5cdFx0XHRcdHN3aXRjaCAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkpIHtcclxuXHRcdFx0XHRcdGNhc2UgU2VtYUxvZ2ljVmlld1R5cGU6IHtcclxuXHRcdFx0XHRcdFx0Zm91bmQgPSB0cnVlXHJcblx0XHRcdFx0XHRcdHNsdiA9IGxlYWZcclxuXHRcdFx0XHRcdFx0Ly9yZXR1cm4gc2x2XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0aWYgKCFmb3VuZCkge1xyXG5cdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9BbGwsIHVuZGVmaW5lZCwgJ1NwbGl0JylcclxuXHRcdFx0c2x2ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3NwbGl0Jyk7XHJcblx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0FsbCwgdW5kZWZpbmVkLCBzbHYpXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gc2x2XHJcblx0fVxyXG5cclxuXHJcblx0YXN5bmMgb251bmxvYWQoKSB7XHJcblx0XHQvLyBjb21tZW50ZWQgb3V0IGR1ZSB0byBwdWJsaXNoaW5nIHByb2Nlc3MgLSBzZWUgUGx1Z0luR3VpZGVsaW5lIC0gY291bGQgYmUgZGVsZXRlZFxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShBU1BWaWV3VHlwZSk7XHJcblx0XHQvL3RoaXMuc2xDb21tLnNsYXNwdmlldy51bmxvYWQoKVxyXG5cdFx0Ly90aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFNlbWFMb2dpY1ZpZXdUeXBlKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBEZWZhdWx0X3Byb2ZpbGUsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdFx0aWYgKHRoaXMuc2xDb21tLnNsdmlldyAhPSB1bmRlZmluZWQpIHsgdGhpcy5zbENvbW0uc2x2aWV3LnNldE5ld0luaXRpYWwodGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15T3V0cHV0Rm9ybWF0KSB9XHJcblx0XHR0aGlzLnVwZGF0ZU91dHN0YW5kaW5nID0gdHJ1ZTtcclxuXHRcdC8vdGhpcy5zZW1hTG9naWNQYXJzZSgpO1xyXG5cdH1cclxuXHJcblx0aGFuZGxlUGluZygpIHtcclxuXHRcdHNlbWFMb2dpY1BpbmcodGhpcy5zZXR0aW5ncywgdGhpcy5sYXN0VXBkYXRlKVxyXG5cdH1cclxuXHJcblx0aGFuZGxlVXBkYXRlID0gKHVwZGF0ZTogVmlld1VwZGF0ZSkgPT4ge1xyXG5cdFx0aWYgKHRoaXMuc3RhdHVzU0wpIHtcclxuXHRcdFx0Ly8gVG8gYXZvaWQgdG8gbXVjaCBwYXJzaW5nIHRyYWZmaWMgZm9yIHRlc3Rpbmcgd2UgdHJpZWQgdG8gcGFyc2UgaXQgb25seSBldmVyeSA1MDAgbXMgd2hlbiB0aGVyZSBpcyBhbiB1cGRhdGVcclxuXHRcdFx0Y29uc3QgdGV4dCA9ICdVcGRhdGV0aW1lJyArICcvJyArIFN0cmluZyhEYXRlLm5vdygpKSArICcvJyArIFN0cmluZyh0aGlzLmxhc3RVcGRhdGUpICsgJy8nICsgU3RyaW5nKERhdGUubm93KCkgLSB0aGlzLmxhc3RVcGRhdGUpICsgJy8nICsgU3RyaW5nKHRoaXMudXBkYXRlT3V0c3RhbmRpbmcpICsgJy8nICsgU3RyaW5nKHRoaXMud2FpdGluZ0ZvclJlc3BvbnNlKVxyXG5cdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldiwgdGhpcy5zbENvbW0uc2x2aWV3LCB0ZXh0KVxyXG5cdFx0XHRpZiAodXBkYXRlID09IG51bGwpIHsgfVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRpZiAodXBkYXRlLnZpZXcpIHtcclxuXHRcdFx0XHRcdGlmICghdXBkYXRlLmRvY0NoYW5nZWQgJiYgIXVwZGF0ZS5mb2N1c0NoYW5nZWQpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuVXBkYXRlUHJvY2Vzc2luZyA9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0XHRcdC8vdGhpcy51cGRhdGVPdXRzdGFuZGluZyA9IHRydWVcclxuXHRcdFx0XHRcdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldiwgdGhpcy5zbENvbW0uc2x2aWV3LCAnU3RhcnQgVXBkYXRlIGRvY0NoYW5nZWQsIGZvY3VzY2hhbmdlZCwgVXBkUHJvYyAgJyArIFN0cmluZyh1cGRhdGUuZG9jQ2hhbmdlZCkgKyBcIi9cIiArIFN0cmluZyh1cGRhdGUuZm9jdXNDaGFuZ2VkKSArIFwiL1wiICsgU3RyaW5nKHRoaXMuVXBkYXRlUHJvY2Vzc2luZykpXHJcblx0XHRcdFx0XHRcdFx0dGhpcy5zZW1hTG9naWNVcGRhdGUoKVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoKERhdGUubm93KCkgLSB0aGlzLmxhc3RVcGRhdGUgPiB0aGlzLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnNldHRpbmdzLm15U2V0dGluZ10ubXlVcGRhdGVJbnRlcnZhbCkgJiYgKHRoaXMudXBkYXRlT3V0c3RhbmRpbmcgPT0gdHJ1ZSB8fCB0aGlzLnVwZGF0ZVRyYW5zZmVyT3V0c3RhbmRpbmcgPT0gdHJ1ZSkgJiYgKHRoaXMud2FpdGluZ0ZvclJlc3BvbnNlID09IGZhbHNlKSkge1xyXG5cdFx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0N1cnJlbnRfRGV2LCB0aGlzLnNsQ29tbS5zbHZpZXcsICdTdGFydCBVcGRhdGUgUEFSU0lORycpXHJcblx0XHRcdFx0dGhpcy5sYXN0VXBkYXRlID0gRGF0ZS5ub3coKVxyXG5cdFx0XHRcdHRoaXMuc2VtYUxvZ2ljVXBkYXRlKClcclxuXHRcdFx0XHQvL3RoaXMudXBkYXRlVHJhbnNmZXJPdXRzdGFuZGluZyA9IGZhbHNlXHJcblx0XHRcdFx0Ly9zbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldiwgdGhpcy5zbENvbW0uc2x2aWV3LCAnU2V0IGluIGludGVydmFsIFVwZGF0ZUFTUE91dHN0YW5kaW5nOicgKyB0aGlzLnVwZGF0ZVRyYW5zZmVyT3V0c3RhbmRpbmcpXHJcblx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdGlmICgoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFVwZGF0ZSA+IHRoaXMuc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2V0dGluZ3MubXlTZXR0aW5nXS5teVVwZGF0ZUludGVydmFsKSAmJiAodGhpcy51cGRhdGVPdXRzdGFuZGluZyA9PSB0cnVlKSAmJiAodGhpcy53YWl0aW5nRm9yUmVzcG9uc2UgPT0gZmFsc2UpKSB7XHJcblx0XHRcdFx0XHRzZW1hTG9naWNQaW5nKHRoaXMuc2V0dGluZ3MsIHRoaXMubGFzdFVwZGF0ZSlcclxuXHRcdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdH1cclxuXHJcblx0c2VtYUxvZ2ljVXBkYXRlKHNldFZpZXc/OiBib29sZWFuKSB7XHJcblxyXG5cdFx0dGhpcy53YWl0aW5nRm9yUmVzcG9uc2UgPSB0cnVlXHJcblx0XHR0aGlzLlVwZGF0ZVByb2Nlc3NpbmcgPSB0cnVlXHJcblxyXG5cdFx0aWYgKHNldFZpZXcgPT0gdHJ1ZSB8fCBzZXRWaWV3ID09IHVuZGVmaW5lZCkgeyB0aGlzLnNldFZpZXdzKCkgfVxyXG5cclxuXHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSwgdGhpcy5zbENvbW0uc2x2aWV3LCAnU3RhcnQgU2VtYUxvZ2ljVXBkYXRlJylcclxuXHJcblx0XHR0aGlzLnNldFZpZXdzKClcclxuXHRcdGxldCBhY3RpdmVWaWV3ID0gdGhpcy5nZXRBY3RpdmVWaWV3KClcclxuXHRcdHRoaXMuc2VtYUxvZ2ljUGFyc2UoKTtcclxuXHJcblx0XHRpZiAoIXRoaXMudXBkYXRpbmcpIHtcclxuXHRcdFx0dGhpcy51cGRhdGluZyA9IHRydWVcclxuXHRcdFx0aWYgKGFjdGl2ZVZpZXcgIT0gbnVsbCkge1xyXG5cdFx0XHRcdGNvbnN0IGVkaXRvcnRleHQgPSBhY3RpdmVWaWV3LmVkaXRvci5nZXRSYW5nZSh7IGxpbmU6IDAsIGNoOiAwIH0sIHsgbGluZTogYWN0aXZlVmlldy5lZGl0b3IubGFzdExpbmUoKSwgY2g6IGFjdGl2ZVZpZXcuZWRpdG9yLmxhc3RMaW5lLmxlbmd0aCB9KVxyXG5cdFx0XHRcdGNvbnN0IGFkZENoYXI6IHN0cmluZyA9IFwiIFwiXHJcblx0XHRcdFx0bGV0IGN1cnNvciA9IGFjdGl2ZVZpZXcuZWRpdG9yLmdldEN1cnNvcigpXHJcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhY3RpdmVWaWV3LmVkaXRvci5sYXN0TGluZSgpOyBpKyspIHtcclxuXHRcdFx0XHRcdGlmIChhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZygwLCBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQubGVuZ3RoKSA9PSBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkubGVuZ3RoIC0gMSwgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5sZW5ndGgpID09IHNlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9lbmQpIHtcclxuXHRcdFx0XHRcdFx0XHQvLyB0ZW1wb3Jhcmx5IGFkZCBhIGNoYXIgZm9yIGZvcmNpbmcgYW4gdXBkYXRlIG9mIGh0bWwtdmlldyBcclxuXHRcdFx0XHRcdFx0XHRhY3RpdmVWaWV3LmVkaXRvci5zZXRMaW5lKGksIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkubGVuZ3RoKSArIGFkZENoYXIpXHJcblxyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZyhhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLmxlbmd0aCAtIDEsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkubGVuZ3RoKSA9PSBhZGRDaGFyKSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyB0ZW1wb3Jhcmx5IGFkZCBhIGNoYXIgZm9yIGZvcmNpbmcgYW4gdXBkYXRlIG9mIGh0bWwtdmlldyBcclxuXHRcdFx0XHRcdFx0XHRcdGFjdGl2ZVZpZXcuZWRpdG9yLnNldExpbmUoaSwgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoMCwgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5sZW5ndGggLSAxKSlcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gYmFjayB0byBjdXJzb3JcclxuXHRcdFx0XHRhY3RpdmVWaWV3LmVkaXRvci5zZXRDdXJzb3IoY3Vyc29yKVxyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMudXBkYXRpbmcgPSBmYWxzZVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuVXBkYXRlUHJvY2Vzc2luZyA9IGZhbHNlXHJcblx0XHR0aGlzLndhaXRpbmdGb3JSZXNwb25zZSA9IGZhbHNlXHJcblx0fVxyXG5cclxuXHJcblx0Z2V0U2VtYUxvZ2ljVGV4dCgpOiBzdHJpbmcge1xyXG5cdFx0aWYgKHRoaXMuc2xDb21tLnNsdmlldy5jb250ZW50RWwudGV4dENvbnRlbnQgPT0gbnVsbCkge1xyXG5cdFx0XHRyZXR1cm4gXCJcIlxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc2xDb21tLnNsdmlldy5nZXRDb250ZW50KClcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFzeW5jIHNlbWFMb2dpY1Jlc2V0KCkge1xyXG5cdFx0Ly8gbGV0IHZBUElfVVJMX1Jlc2V0ID0gQVBJX0RlZmF1bHRzLkJhc2VfVVJMICsgXCI6XCIgKyBBUElfRGVmYXVsdHMuUG9ydCArIEFQSV9EZWZhdWx0cy5yZXNldCArIFwiP3NpZD1cIiArIEFQSV9EZWZhdWx0cy5TSUQ7XHJcblx0XHQvLyBsZXQgdkFQSV9VUkxfUmVzZXQgPSBnZXRIb3N0UG9ydCh0aGlzLnNldHRpbmdzKSArIEFQSV9EZWZhdWx0cy5yZXNldCArIFwiP3NpZD1cIiArIHRoaXMuc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2V0dGluZ3MubXlTZXR0aW5nXS5teVNJRDtcclxuXHRcdGxldCB2QVBJX1VSTF9SZXNldCA9IGdldEhvc3RQb3J0KHRoaXMuc2V0dGluZ3MpICsgQVBJX0RlZmF1bHRzLnJlc2V0ICsgXCI/c2lkPVwiICsgbXlnU0lEO1xyXG5cdFx0bGV0IG9wdGlvbnNSZXNldDogUmVxdWVzdFVybFBhcmFtXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15VXNlSHR0cHNTTCAmJiB0aGlzLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnNldHRpbmdzLm15U2V0dGluZ10ubXlVc2VyU0wgIT0gJycpIHtcclxuXHRcdFx0b3B0aW9uc1Jlc2V0ID0ge1xyXG5cdFx0XHRcdHVybDogdkFQSV9VUkxfUmVzZXQsXHJcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRcdFx0aGVhZGVyczoge1xyXG5cdFx0XHRcdFx0XCJjb250ZW50LXR5cGVcIjogXCJ0ZXh0L3BsYWluXCIsXHJcblx0XHRcdFx0XHRcIkF1dGhvcml6YXRpb25cIjogXCJCYXNpYyBcIiArIGJ0b2EodGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15VXNlclNMICsgXCI6XCIgKyB0aGlzLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnNldHRpbmdzLm15U2V0dGluZ10ubXlQYXNzd29yZFNMKVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdG9wdGlvbnNSZXNldCA9IHtcclxuXHRcdFx0XHR1cmw6IHZBUElfVVJMX1Jlc2V0LFxyXG5cdFx0XHRcdG1ldGhvZDogJ1BPU1QnLFxyXG5cdFx0XHRcdGhlYWRlcnM6IHtcclxuXHRcdFx0XHRcdFwiY29udGVudC10eXBlXCI6IFwidGV4dC9wbGFpblwiXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdGhpcy5zbENvbW0uc2x2aWV3LCBvcHRpb25zUmVzZXQpXHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXNwb25zZVJlc2V0ID0gYXdhaXQgcmVxdWVzdFVybChvcHRpb25zUmVzZXQpXHJcblx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0luZm9ybWF0aXZlLCB0aGlzLnNsQ29tbS5zbHZpZXcsIGBTZW1hTG9naWM6IFJlc2V0IHdpdGggaHR0cC1zdGF0dXMgJHtyZXNwb25zZVJlc2V0LnN0YXR1cy50b1N0cmluZygpfWApXHJcblx0XHR9XHJcblx0XHRjYXRjaCAoZSkge1xyXG5cdFx0XHRzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9FcnJvciwgdGhpcy5zbENvbW0uc2x2aWV3LCBgQ2F0Y2hlcnJvciBieSByZXNldCAke3ZBUElfVVJMX1Jlc2V0fWApXHJcblx0XHRcdHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0Vycm9yLCB0aGlzLnNsQ29tbS5zbHZpZXcsIGUudG9TdHJpbmcoKSlcclxuXHRcdH1cclxuXHR9XHJcblxyXG59XHJcblxyXG4iLCAiaW1wb3J0IHsgRHJvcGRvd25Db21wb25lbnQsIEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBCdXR0b25Db21wb25lbnQsIFJlcXVlc3RVcmxQYXJhbSwgcmVxdWVzdFVybCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBzbFRleHRzLCBEZWJ1Z0xldk1hcCwgUnVsZXNldHR5cGVzQ29tbWFuZHMsIFJzdHlwZXNfU2VtYWxvZ2ljLCBSc3R5cGVzX1NlbWFudGljVHJlZSwgUnN0eXBlc19Lbm93bGVkZ2VHcmFwaCwgUnN0eXBlc19QaWN0dXJlLCBSc3R5cGVzX0FTUCB9IGZyb20gXCIuL2NvbnN0XCJcclxuaW1wb3J0IHsgU2VtYUxvZ2ljUGx1Z2luQ29tbSwgRGVidWdMZXZlbCwgU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi4vbWFpblwiXHJcbmltcG9ydCB7IHNsY29uc29sZWxvZyB9IGZyb20gJy4vdXRpbHMnXHJcbmltcG9ydCB7IFZpZXdVdGlscyB9IGZyb20gXCIuL3ZpZXdfdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBTZW1hTG9naWNWaWV3VHlwZSA9IFwiU2VtYUxvZ2ljU2VydmljZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlbWFMb2dpY1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XHJcbiAgdmlld191dGlsczogVmlld1V0aWxzXHJcbiAgbXlBY3Rpb246IEhUTUxFbGVtZW50XHJcbiAgZHJvcGRvd25CdXR0b246IERyb3Bkb3duQ29tcG9uZW50XHJcbiAgY29weUJ1dHRvbjogQnV0dG9uQ29tcG9uZW50XHJcbiAgZGVidWdCdXR0b246IEJ1dHRvbkNvbXBvbmVudFxyXG4gIGRlYnVnQ29udGVudDogc3RyaW5nW11cclxuICB6b29tSW46IEJ1dHRvbkNvbXBvbmVudFxyXG4gIHpvb21SYXRpbzogQnV0dG9uQ29tcG9uZW50XHJcbiAgem9vbU91dDogQnV0dG9uQ29tcG9uZW50XHJcbiAgc2xDb21tOiBTZW1hTG9naWNQbHVnaW5Db21tXHJcbiAgc2NhbGVSYXRpbzogbnVtYmVyXHJcbiAgY3VyclJlc3VsdDogc3RyaW5nXHJcbiAgYm9keXRleHQ6IHN0cmluZ1xyXG4gIGFwaVVSTDogc3RyaW5nXHJcbiAgZGlhbGVjdElEOiBzdHJpbmdcclxuXHJcbiAgcHVibGljIGRlYnVnSW5saW5lOiBib29sZWFuXHJcblxyXG4gIHB1YmxpYyBnZXRPdXRQdXRGb3JtYXQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmRyb3Bkb3duQnV0dG9uLmdldFZhbHVlKClcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXREZWJ1Z0lubGluZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmRlYnVnSW5saW5lXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0Q29udGVudCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMudmlld191dGlscy5nZXRDb250ZW50KHRoaXMuY29udGVudEVsLCB0aGlzLmdldE91dFB1dEZvcm1hdCgpKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFwcGVuZERlYnVnQ29udGVudCh0ZXh0OiBzdHJpbmcpIHtcclxuICAgIHRoaXMuZGVidWdDb250ZW50LnB1c2godGV4dClcclxuICB9XHJcblxyXG4gIGNvcHlUb0NiKCkge1xyXG4gICAgY29uc3QgYmxvYmNvbnRlbnRUZXh0ID0gKGNvbnQ6IHN0cmluZykgPT4gYCR7Y29udH1gXHJcblxyXG4gICAgbGV0IGRhdGEgPVxyXG4gICAgICBuZXcgQ2xpcGJvYXJkSXRlbSh7XHJcbiAgICAgICAgXCJ0ZXh0L3BsYWluXCI6IG5ldyBCbG9iKFtibG9iY29udGVudFRleHQodGhpcy5jdXJyUmVzdWx0KV0sIHtcclxuICAgICAgICAgIHR5cGU6IFwidGV4dC9wbGFpblwiXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuXHJcbiAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlKFtkYXRhXSlcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGFsZXJ0KFwic3VjY2Vzc2Z1bGx5IGNvcGllZFwiKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKCgpID0+IHtcclxuICAgICAgICBhbGVydChcInNvbWV0aGluZyB3ZW50IHdyb25nXCIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcclxuICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgdGhpcy5zY2FsZVJhdGlvID0gMTAwXHJcbiAgICB0aGlzLnZpZXdfdXRpbHMgPSBuZXcgVmlld1V0aWxzXHJcbiAgICB0aGlzLmRlYnVnSW5saW5lID0gZmFsc2VcclxuICAgIHRoaXMuZGVidWdDb250ZW50ID0gW11cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRDb21tKGNvbW06IFNlbWFMb2dpY1BsdWdpbkNvbW0pIHtcclxuICAgIGlmICh0aGlzLnNsQ29tbSAhPSBjb21tKSB7XHJcbiAgICAgIHRoaXMuc2xDb21tID0gY29tbVxyXG4gICAgICAvL3RoaXMuc2xDb21tLnNldFNsVmlldyh0aGlzKVxyXG4gICAgICB0aGlzLnNldE5ld0luaXRpYWwodGhpcy5zbENvbW0uc2xQbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2xDb21tLnNsUGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlPdXRwdXRGb3JtYXQpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3VHlwZSgpIHtcclxuICAgIHJldHVybiBTZW1hTG9naWNWaWV3VHlwZTtcclxuICB9XHJcblxyXG4gIGdldERpc3BsYXlUZXh0KCkge1xyXG4gICAgcmV0dXJuIFNlbWFMb2dpY1ZpZXdUeXBlO1xyXG4gIH1cclxuXHJcbiAgb25sb2FkKCk6IHZvaWQge1xyXG4gICAgdGhpcy5uYXZpZ2F0aW9uID0gdHJ1ZVxyXG4gICAgdGhpcy5jb250ZW50RWwuY29udGVudEVkaXRhYmxlID0gJ3RydWUnXHJcbiAgICB0aGlzLmRlYnVnSW5saW5lID09IGZhbHNlXHJcbiAgfVxyXG5cclxuICBnZXREZWJ1Z0J1dHRvblRleHQoKTogc3RyaW5nIHtcclxuICAgIGlmICh0aGlzLmRlYnVnSW5saW5lID09IHRydWUpIHtcclxuICAgICAgcmV0dXJuICdJbmxpbmVEZWJ1ZyBpcyBvbidcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAnSW5saW5lRGVidWcgaXMgb2ZmJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlRHJvcERvd25CdXR0b25Gb3JPdXRQdXRGb3JtYXQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZHJvcERvd25WYWx1ZTogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xyXG4gICAgdGhpcy5kcm9wZG93bkJ1dHRvbiA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpXHJcbiAgICAgIC5hZGRPcHRpb24oUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19TZW1hbG9naWNdWzFdLCBSdWxlc2V0dHlwZXNDb21tYW5kc1tSc3R5cGVzX1NlbWFsb2dpY11bMF0pXHJcbiAgICAgIC5hZGRPcHRpb24oUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19BU1BdWzFdLCBSdWxlc2V0dHlwZXNDb21tYW5kc1tSc3R5cGVzX0FTUF1bMF0pXHJcbiAgICAgIC5hZGRPcHRpb24oUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19QaWN0dXJlXVsxXSwgUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19QaWN0dXJlXVswXSlcclxuICAgICAgLmFkZE9wdGlvbihSdWxlc2V0dHlwZXNDb21tYW5kc1tSc3R5cGVzX1NlbWFudGljVHJlZV1bMV0sIFJ1bGVzZXR0eXBlc0NvbW1hbmRzW1JzdHlwZXNfU2VtYW50aWNUcmVlXVswXSlcclxuICAgICAgLmFkZE9wdGlvbihSdWxlc2V0dHlwZXNDb21tYW5kc1tSc3R5cGVzX0tub3dsZWRnZUdyYXBoXVsxXSwgUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19Lbm93bGVkZ2VHcmFwaF1bMF0pXHJcbiAgICAgIC5zZXRWYWx1ZShkcm9wRG93blZhbHVlKVxyXG4gICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUsIHRoaXMuc2xDb21tLnNsdmlldywgJ1NldCBWaWV3T3V0cHV0Rm9ybWF0OiAnICsgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc2xDb21tLnNsUGx1Z2luLnVwZGF0ZU91dHN0YW5kaW5nID0gdHJ1ZVxyXG4gICAgICAgIGRyb3BEb3duVmFsdWUgPSB2YWx1ZVxyXG4gICAgICAgIHRoaXMuZHJvcGRvd25CdXR0b24uc2V0VmFsdWUodmFsdWUpXHJcbiAgICAgICAgdGhpcy5nZXRTZW1hTG9naWNQYXJzZSh0aGlzLnNsQ29tbS5zbFBsdWdpbi5zZXR0aW5ncywgdGhpcy5hcGlVUkwsIHRoaXMuZGlhbGVjdElELCB0aGlzLmJvZHl0ZXh0LCBmYWxzZSwgdmFsdWUpXHJcbiAgICAgICAgLy90aGlzLnVwZGF0ZVZpZXcoKVxyXG4gICAgICB9KVxyXG4gICAgcmV0dXJuIGNvbnRhaW5lclxyXG4gIH1cclxuICBjcmVhdGVDb3B5VG9DbGlwYm9hcmRCdXR0b24oY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcclxuICAgIHRoaXMuY29weUJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoY29udGFpbmVyKVxyXG4gICAgICAuc2V0QnV0dG9uVGV4dCgnQ29weSB0byBDbGlwYm9hcmQnKVxyXG4gICAgICAub25DbGljaygobW91c2VfZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLmNvcHlUb0NiKClcclxuICAgICAgfSlcclxuICAgIHJldHVybiBjb250YWluZXJcclxuICB9XHJcbiAgY3JlYXRlRGVidWdCdXR0b24oY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcclxuICAgIGlmIChEZWJ1Z0xldmVsICE9IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfT2ZmKSB7XHJcbiAgICAgIHRoaXMuZGVidWdCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lcilcclxuICAgICAgICAuc2V0QnV0dG9uVGV4dCh0aGlzLmdldERlYnVnQnV0dG9uVGV4dCgpKVxyXG4gICAgICAgIC5vbkNsaWNrKChtb3VzZV9ldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHRoaXMuZGVidWdJbmxpbmUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnSW5saW5lID0gZmFsc2VcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z0NvbnRlbnQgPSBbXVxyXG4gICAgICAgICAgfSBlbHNlIHsgdGhpcy5kZWJ1Z0lubGluZSA9IHRydWUgfVxyXG4gICAgICAgICAgaWYgKHRoaXMuc2xDb21tLnNsdmlldyAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUsIHRoaXMuc2xDb21tLnNsdmlldywgJ1NldCBJbmxpbmVEZWJ1Z2dpbmc6ICcgKyB0aGlzLmRlYnVnSW5saW5lKTtcclxuICAgICAgICAgICAgLy90aGlzLnNldE5ld0luaXRpYWwoZHJvcERvd25WYWx1ZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMudXBkYXRlVmlldygpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiBjb250YWluZXJcclxuICB9XHJcblxyXG4gIGNyZWF0ZVNjYWxlQnV0dG9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQge1xyXG4gICAgLy8gWm9vbSBpblxyXG4gICAgdGhpcy56b29tSW4gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lcilcclxuICAgICAgLnNldEJ1dHRvblRleHQoJy0nKVxyXG4gICAgICAub25DbGljaygobW91c2VfZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLnNjYWxlUmF0aW8gPSB0aGlzLnNjYWxlUmF0aW8gLyAyXHJcbiAgICAgICAgaWYgKHRoaXMuem9vbVJhdGlvICE9IG51bGwpIHsgdGhpcy56b29tUmF0aW8uc2V0QnV0dG9uVGV4dChTdHJpbmcodGhpcy5zY2FsZVJhdGlvKSkgfVxyXG4gICAgICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0luZm9ybWF0aXZlLCB0aGlzLnNsQ29tbS5zbHZpZXcsICdTZXQgU2NhbGVSYXRpbyB0bzogJyArIHRoaXMuc2NhbGVSYXRpbyk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3KClcclxuICAgICAgfSlcclxuXHJcbiAgICB0aGlzLnpvb21SYXRpbyA9IG5ldyBCdXR0b25Db21wb25lbnQoY29udGFpbmVyKVxyXG4gICAgICAuc2V0QnV0dG9uVGV4dChTdHJpbmcodGhpcy5zY2FsZVJhdGlvKSlcclxuICAgICAgLm9uQ2xpY2soKG1vdXNlX2V2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUsIHRoaXMuc2xDb21tLnNsdmlldywgJ1NjYWxlUmF0aW8gOj0gJyArIHRoaXMuc2NhbGVSYXRpbyk7XHJcbiAgICAgIH0pXHJcblxyXG4gICAgdGhpcy56b29tT3V0ID0gbmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXIpXHJcbiAgICAgIC5zZXRCdXR0b25UZXh0KCcrJylcclxuICAgICAgLm9uQ2xpY2soKG1vdXNlX2V2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gdGhpcy5zY2FsZVJhdGlvICogMlxyXG4gICAgICAgIHRoaXMuem9vbVJhdGlvLnNldEJ1dHRvblRleHQoU3RyaW5nKHRoaXMuc2NhbGVSYXRpbykpXHJcbiAgICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUsIHRoaXMuc2xDb21tLnNsdmlldywgJ1NldCBTY2FsZVJhdGlvIHRvOiAnICsgdGhpcy5zY2FsZVJhdGlvKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKVxyXG4gICAgICB9KVxyXG5cclxuICAgIHJldHVybiBjb250YWluZXJcclxuICB9XHJcblxyXG4gIGNoZWNrQ29udGFpbmVyQ29udGVudCgpOiBib29sZWFuIHtcclxuICAgIGlmICh0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICBpZiAodGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXS50ZXh0Q29udGVudCA9PSBzbFRleHRzWydIZWFkZXJTTCddKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVDb250YWluZXJDb250ZW50KCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW4gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb250YWluZXJFbC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuW2ldLm5vZGVOYW1lID09IFwicFwiKSB7XHJcbiAgICAgICAgICB3aGlsZSAodGhpcy5jb250YWluZXJFbC5jaGlsZHJlbltpXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jaGlsZHJlbltpXS5lbXB0eVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyBzZXROZXdJbml0aWFsKGRyb3BEb3duVmFsdWU6IHN0cmluZykge1xyXG4gICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsXHJcbiAgICBpZiAoIXRoaXMuY2hlY2tDb250YWluZXJDb250ZW50KCkpIHtcclxuICAgICAgY29udGFpbmVyLmVtcHR5KClcclxuICAgICAgLy9jb250YWluZXIuY29udGVudEVkaXRhYmxlID0gJ3RydWUnXHJcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogc2xUZXh0c1snSGVhZGVyU0wnXSB9KTtcclxuXHJcbiAgICAgIGNvbnRhaW5lciA9IHRoaXMuY3JlYXRlRHJvcERvd25CdXR0b25Gb3JPdXRQdXRGb3JtYXQoY29udGFpbmVyLCBkcm9wRG93blZhbHVlKVxyXG4gICAgICBjb250YWluZXIgPSB0aGlzLmNyZWF0ZUNvcHlUb0NsaXBib2FyZEJ1dHRvbihjb250YWluZXIpXHJcbiAgICAgIGNvbnRhaW5lciA9IHRoaXMuY3JlYXRlRGVidWdCdXR0b24oY29udGFpbmVyKVxyXG4gICAgICBpZiAoZHJvcERvd25WYWx1ZSA9PSBSdWxlc2V0dHlwZXNDb21tYW5kc1tSc3R5cGVzX1BpY3R1cmVdWzFdKSB7XHJcbiAgICAgICAgY29udGFpbmVyID0gdGhpcy5jcmVhdGVTY2FsZUJ1dHRvbnMoY29udGFpbmVyKVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVFbChcInBcIilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZGVsZXRlQ29udGFpbmVyQ29udGVudCgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICB0aGlzLnNldE5ld0luaXRpYWwoUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19TZW1hbG9naWNdWzFdKVxyXG4gICAgLy8gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXS5hcHBlbmRUZXh0KFwibGV0J3MgYmVnaW5cIik7XHJcbiAgfVxyXG5cclxuICBhc3luYyBvbkNsb3NlKCkge1xyXG4gICAgLy8gTm90aGluZyB0byBjbGVhbiB1cC5cclxuICB9XHJcblxyXG4gIHNob3dFcnJvcihmcmFnbWVudDogRG9jdW1lbnRGcmFnbWVudCkge1xyXG4gICAgLy8gICB0aGlzLnNldEluaXRpYWwoUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19TZW1hbG9naWNdWzFdKVxyXG4gICAgdGhpcy5jb250ZW50RWwuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpXHJcbiAgfVxyXG4gIG9udW5sb2FkKCk6IHZvaWQge1xyXG5cclxuICAgIGlmICh0aGlzLnNsQ29tbS5zbFBsdWdpbiAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5zbENvbW0uc2xQbHVnaW4uYWN0aXZhdGVkID0gZmFsc2VcclxuICAgICAgdGhpcy5zbENvbW0uc2xQbHVnaW4ubXlTdGF0dXMuc2V0VGV4dCgnU2VtYUxvZ2ljIGlzIG9mZicpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIGNyZWF0ZVNlbWFMb2dpY1JlcXVlc3RCb2R5KGRpYWxlY3RJRDogc3RyaW5nLCBib2R5dGV4dDogc3RyaW5nLCBvdXRQdXRGb3JtYXQ6IHN0cmluZyk6IGFueSB7XHJcbiAgICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHRoaXMuc2xDb21tLnNsdmlldywgJ0NvbnRleHQ6ICcgKyBkaWFsZWN0SUQgKyAnIEJvZHl0ZXh0OiAnICsgYm9keXRleHQpXHJcbiAgICBsZXQgc2VtYUxvZ2ljSnNvblJlcXVlc3RCb2R5ID0ge1xyXG4gICAgICBcInRleHRcIjogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwidGV4dElEXCI6IFwiUGFyc2luZ09uVGhlRmx5XCIsXHJcbiAgICAgICAgICBcImRpYWxlY3RJRFwiOiBkaWFsZWN0SUQsXHJcbiAgICAgICAgICBcInJ1bGVzXCI6IGJvZHl0ZXh0XHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBcImZpbHRlclwiOiB7fSxcclxuICAgICAgXCJwZXJzaXN0ZW5jeVwiOiBmYWxzZSxcclxuICAgICAgXCJydWxlc2V0dHlwZVwiOiBvdXRQdXRGb3JtYXRcclxuICAgIH1cclxuICAgIHJldHVybiBzZW1hTG9naWNKc29uUmVxdWVzdEJvZHlcclxuICB9XHJcblxyXG4gIGNyZWF0ZVNlbWFMb2dpY1JlcXVlc3Qoc2V0dGluZ3M6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzLCB2QVBJX1VSTDogc3RyaW5nLCBzZW1hTG9naWNKc29uUmVxdWVzdEJvZHk6IGFueSk6IFJlcXVlc3RVcmxQYXJhbSB7XHJcbiAgICBsZXQgcmVxdWVzdDogUmVxdWVzdFVybFBhcmFtID0ge1xyXG4gICAgICB1cmw6IHZBUElfVVJMLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNlbWFMb2dpY0pzb25SZXF1ZXN0Qm9keSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlVc2VIdHRwc1NMICYmIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15VXNlclNMICE9ICcnKSB7XHJcbiAgICAgIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgdXJsOiB2QVBJX1VSTCxcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJhc2ljIFwiICsgYnRvYShzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZXJTTCArIFwiOlwiICsgc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlQYXNzd29yZFNMKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc2VtYUxvZ2ljSnNvblJlcXVlc3RCb2R5KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHRoaXMuc2xDb21tLnNsdmlldywgJ1BhcnNpbmdzc3RyaW5nJylcclxuICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdGhpcy5zbENvbW0uc2x2aWV3LCByZXF1ZXN0KVxyXG4gICAgcmV0dXJuIHJlcXVlc3RcclxuICB9XHJcblxyXG4gIGdldFJlcXVlc3RFbWJlZChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRoaXMuZ2V0T3V0UHV0Rm9ybWF0KCkgPT0gUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19QaWN0dXJlXVsxXSkge1xyXG4gICAgICAvLyBab29tIGZvciBQaWN0dXJlXHJcbiAgICAgIC8vIHRyeSB0byBnZXQgb3JpZ2luYWwgdmlld2JveCBzaXplXHJcbiAgICAgIGxldCB2aWV3Qm94U3RyaW5nOiBzdHJpbmdcclxuICAgICAgY29uc3QgYmVnaW5WQiA9IGNvbnRlbnQuaW5kZXhPZigndmlld0JveCcpXHJcbiAgICAgIGlmIChiZWdpblZCID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGVuZFZCID0gY29udGVudC5pbmRleE9mKCdcXFwiJywgY29udGVudC5pbmRleE9mKCdcXFwiJywgYmVnaW5WQikgKyAxKVxyXG4gICAgICAgIHZpZXdCb3hTdHJpbmcgPSBjb250ZW50LnN1YnN0cmluZyhiZWdpblZCLCBlbmRWQiArIDEpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmlld0JveFN0cmluZyA9ICd2aWV3Qm94ID0gXCIwIDAgMTYgOVwiJ1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoXCI8Ym9keT5cIiwgXCJcIilcclxuICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShcIjwvYm9keT5cIiwgXCJcIilcclxuXHJcbiAgICAgIGxldCBoZWFkZXI6IHN0cmluZ1xyXG4gICAgICBoZWFkZXIgPSAnPHN2ZyAgJyArIHZpZXdCb3hTdHJpbmcgKyAnIHdpZHRoID0gXCInICsgU3RyaW5nKHRoaXMuc2NhbGVSYXRpbykgKyAnJVwiIHhtbG5zID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiID5cXG4nXHJcbiAgICAgIGhlYWRlciA9IGhlYWRlciArIGNvbnRlbnRcclxuICAgICAgaGVhZGVyID0gaGVhZGVyICsgJzwvc3ZnPidcclxuICAgICAgcmV0dXJuIGhlYWRlclxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGNvbnRlbnRcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEN1cnJSZXN1bHQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3RFbWJlZCh0aGlzLmN1cnJSZXN1bHQpXHJcbiAgfVxyXG5cclxuICBnZXRDdXJySFRNTCgpOiB2b2lkIHtcclxuICAgIGxldCByZXNwb25zZUNvbnRlbnQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XHJcblxyXG4gICAgaWYgKHRoaXMuZGVidWdJbmxpbmUgPT0gdHJ1ZSkge1xyXG4gICAgICB0aGlzLmRlYnVnQ29udGVudC5mb3JFYWNoKHZhbHVlID0+IHtcclxuICAgICAgICBjb25zdCB0ZXh0bGluZSA9IHJlc3BvbnNlQ29udGVudC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiB2YWx1ZSArIFwiXFxuXCIsIGNsczogXCJkZWJ1Z2lubGluZVwiIH0pXHJcbiAgICAgICAgLy90ZXh0bGluZS5zdHlsZS5jc3NUZXh0ID0gJ3doaXRlLXNwYWNlOiBwcmU7JyAvLzsgd2hpdGUtc3BhY2U6IHByZS1saW5lOydcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLmdldE91dFB1dEZvcm1hdCgpID09IFJ1bGVzZXR0eXBlc0NvbW1hbmRzW1JzdHlwZXNfQVNQXVsxXSkge1xyXG4gICAgICAgIGxldCByZXN1bHR0ZXh0YXJyYXkgPSB0aGlzLmdldEN1cnJSZXN1bHQoKS5zcGxpdCgnXFxuJylcclxuICAgICAgICByZXN1bHR0ZXh0YXJyYXkuZm9yRWFjaCh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB0ZXh0bGluZSA9IHJlc3BvbnNlQ29udGVudC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiB2YWx1ZSArIFwiXFxuXCIsIGNsczogXCJkZWJ1Z2lubGluZVwiIH0pXHJcbiAgICAgICAgICAvLyB0ZXh0bGluZS5zdHlsZS5jc3NUZXh0ID0gJ3doaXRlLXNwYWNlOiBwcmU7JyAvLzsgd2hpdGUtc3BhY2U6IHByZS1saW5lOydcclxuICAgICAgICB9KVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJlc3BvbnNlQ29udGVudC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIiBcIiB9KVxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG5cclxuICAgICAgICAvLyBBZGQgc29tZSBIVE1MIGNvbnRlbnQgdG8gdGhlIGRpdiBcclxuICAgICAgICBkaXYuaW5uZXJIVE1MID0gdGhpcy5nZXRDdXJyUmVzdWx0KCk7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgZGl2IHRvIHRoZSBkb2N1bWVudCBib2R5XHJcbiAgICAgICAgcmVzcG9uc2VDb250ZW50LmFwcGVuZENoaWxkKGRpdik7XHJcblxyXG4gICAgICAgICovXHJcbiAgICAgICAgcmVzcG9uc2VDb250ZW50Lmluc2VydEFkamFjZW50SFRNTChcImFmdGVyZW5kXCIsIHRoaXMuZ2V0Q3VyclJlc3VsdCgpKVxyXG5cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9yZXR1cm4gcmVzcG9uc2VDb250ZW50XHJcbiAgfVxyXG5cclxuICB1cGRhdGVWaWV3KCk6IHZvaWQge1xyXG4gICAgdGhpcy5zZXROZXdJbml0aWFsKHRoaXMuZ2V0T3V0UHV0Rm9ybWF0KCkpXHJcbiAgICB0aGlzLmdldEN1cnJIVE1MKClcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBnZXRTZW1hTG9naWNQYXJzZShzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MsIHZBUElfVVJMOiBzdHJpbmcsIGRpYWxlY3RJRDogc3RyaW5nLCBib2R5dGV4dDogc3RyaW5nLCBwYXJzZU9uVGhlRmx5OiBib29sZWFuLCBwYXJzaW5nRm9ybWF0Pzogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHRoaXMuYm9keXRleHQgPSBib2R5dGV4dFxyXG4gICAgdGhpcy5hcGlVUkwgPSB2QVBJX1VSTFxyXG4gICAgdGhpcy5kaWFsZWN0SUQgPSBkaWFsZWN0SURcclxuICAgIGxldCBvdXRQdXRGb3JtYXQ6IHN0cmluZ1xyXG4gICAgbGV0IHJlc3VsdGh0dHA6IHN0cmluZ1xyXG5cclxuICAgIGlmIChwYXJzaW5nRm9ybWF0ICE9PSB1bmRlZmluZWQpIHsgb3V0UHV0Rm9ybWF0ID0gcGFyc2luZ0Zvcm1hdCB9IGVsc2UgeyBvdXRQdXRGb3JtYXQgPSB0aGlzLmdldE91dFB1dEZvcm1hdCgpIH1cclxuICAgIGxldCBzZW1hTG9naWNKc29uUmVxdWVzdEJvZHkgPSB0aGlzLmNyZWF0ZVNlbWFMb2dpY1JlcXVlc3RCb2R5KGRpYWxlY3RJRCwgYm9keXRleHQsIG91dFB1dEZvcm1hdClcclxuICAgIGxldCBzZW1hTG9naWNSZXF1ZXN0ID0gdGhpcy5jcmVhdGVTZW1hTG9naWNSZXF1ZXN0KHNldHRpbmdzLCB2QVBJX1VSTCwgc2VtYUxvZ2ljSnNvblJlcXVlc3RCb2R5KVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybChzZW1hTG9naWNSZXF1ZXN0KVxyXG5cclxuICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCwgdGhpcy5zbENvbW0uc2x2aWV3LCBcIlNlbWFMb2dpYzogUGFyc2Ugd2l0aCBodHRwLXN0YXR1cyBcIiArIHJlc3BvbnNlLnN0YXR1cy50b1N0cmluZygpKVxyXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgIHJlc3VsdGh0dHAgPSByZXNwb25zZS50ZXh0O1xyXG4gICAgICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSwgdGhpcy5zbENvbW0uc2x2aWV3LCBgUGFyc2VyZXN1bHQ6JHtyZXN1bHRodHRwfWApXHJcbiAgICAgICAgaWYgKCh0aGlzLmRlYnVnSW5saW5lID09IGZhbHNlKSAmJiAocGFyc2VPblRoZUZseSA9PSBmYWxzZSkpIHtcclxuICAgICAgICAgIHRoaXMuY3VyclJlc3VsdCA9IHJlc3VsdGh0dHBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFwYXJzZU9uVGhlRmx5KSB7XHJcbiAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHRoaXMuc2xDb21tLnNsYXNwdmlldyAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAvL3RoaXMuc2xDb21tLnNsYXNwdmlldy5hc3BQYXJzZSh0aGlzLnNsQ29tbSwgc2V0dGluZ3MsIHRoaXMuZ2V0U2VtYUxvZ2ljVGV4dCgpKVxyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUocmVzdWx0aHR0cCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCwgdGhpcy5zbENvbW0uc2x2aWV3LCBgQ2F0Y2hlcnJvciBvZiByZW1vdmluZyBjb250ZXh0ICR7dkFQSV9VUkx9YClcclxuICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCwgdGhpcy5zbENvbW0uc2x2aWV3LCBlLnRvU3RyaW5nKCkpXHJcbiAgICAgIGxldCB0ZXh0ID0gbmV3IERvY3VtZW50RnJhZ21lbnQoKVxyXG4gICAgICB0ZXh0LmNyZWF0ZUVsKFwicFwiKVxyXG4gICAgICBsZXQgdGV4dGZyYWdtZW50ID0gKG5ldyBSYW5nZSgpKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoZS50b1N0cmluZygpKTtcclxuICAgICAgdGV4dC5hcHBlbmRDaGlsZCh0ZXh0ZnJhZ21lbnQpXHJcbiAgICAgIHRleHQuY3JlYXRlRWwoXCJwXCIpXHJcbiAgICAgIHRleHRmcmFnbWVudCA9IChuZXcgUmFuZ2UoKSkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KFwiU2VlIGZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3ItY29kZSBvZiBodHRwOiBodHRwczovL2RlLndpa2lwZWRpYS5vcmcvd2lraS9IVFRQLVN0YXR1c2NvZGUgXCIpO1xyXG4gICAgICB0ZXh0LmFwcGVuZCh0ZXh0ZnJhZ21lbnQpXHJcbiAgICAgIHRleHQuY3JlYXRlRWwoXCJwXCIpXHJcbiAgICAgIHRleHRmcmFnbWVudCA9IChuZXcgUmFuZ2UoKSkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHNlbWFMb2dpY1JlcXVlc3QudXJsKTtcclxuICAgICAgdGV4dC5hcHBlbmQodGV4dGZyYWdtZW50KVxyXG4gICAgICB0ZXh0LmNyZWF0ZUVsKFwicFwiKVxyXG4gICAgICB0ZXh0ZnJhZ21lbnQgPSAobmV3IFJhbmdlKCkpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChTdHJpbmcoc2VtYUxvZ2ljUmVxdWVzdC5ib2R5KSk7XHJcbiAgICAgIHRleHQuYXBwZW5kKHRleHRmcmFnbWVudClcclxuICAgICAgdGhpcy5zaG93RXJyb3IodGV4dClcclxuICAgICAgdGhyb3cgZVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG4iLCAiLy8gVG9EbyAoUHJpbyAzKTogR2V0dGluZyBEZWZhdWx0LUFQSS1VUkwgYnkgQVBJLURlc2NyaXB0aW9uXHJcbmV4cG9ydCBjb25zdCBBUElfRGVmYXVsdHMgPSB7XHJcblx0aHR0cDogXCJodHRwOi8vXCIsXHJcblx0aHR0cHM6IFwiaHR0cHM6Ly9cIixcclxuXHRCYXNlX1VSTDogXCJzZXJ2aWNlLnNlbWFsb2dpYy5kZG5zLm5ldFwiLFxyXG5cdFBvcnQ6IFwiNDQzXCIsXHJcblx0cnVsZXNfcGFyc2U6IFwiL3J1bGVzL3BhcnNlXCIsXHJcblx0cmVzZXQ6IFwiL3Jlc2V0XCIsXHJcblx0VmVyc2lvbjogXCIvQVBJVmVyc2lvblwiLFxyXG5cdFBvc3REaWFsZWN0OiBcIi9kaWFsZWN0L2RlZmluZVwiLFxyXG5cdFJlbW92ZURpYWxlY3Q6IFwiL2RpYWxlY3QvcmVtb3ZlXCIsXHJcblx0R2V0QVBJOiBcIi9BUElWZXJzaW9uXCIsXHJcblx0U0lEOiBcIjEyMzQ1Njc4XCIsXHJcblx0U2hvd0NvbnRleHQ6IHRydWUsXHJcblx0dXNlVXNlclBhc3N3b3J0Zm9ySFRUUDogdHJ1ZSxcclxuXHRIdHRwVXNlcjogXCJVc2VyXCIsXHJcblx0SHR0cFBhc3N3b3JkOiBcIlBhc3N3b3JkXCIsXHJcblx0dmlld2hlYWRlcjogXCJTVkdcIixcclxuXHRBc3BVcmw6IFwiQVNQLVNlcnZpY2UtVVJMLmNvbS9cIixcclxuXHRBc3BFbmRwb2ludDogXCIvcGxhbnMvY291bnRcIixcclxuXHR1c2VVc2VyUGFzc3dvcnRmb3JIVFRQU0w6IHRydWUsXHJcblx0SHR0cFVzZXJTTDogXCJVc2VyXCIsXHJcblx0SHR0cFBhc3N3b3JkU0w6IFwiUGFzc3dvcmRcIixcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFZhbHVlX0RlZmF1bHRzID0ge1xyXG5cdHVwZGF0ZUludGVydmFsOiA1MDBcclxufVxyXG5cclxuXHJcbi8vIFRvRG86IDIueCBPcHRpbWl6ZWQgYXJyYXkgc3RydWN0IC8gbWV0aG9kcyBmb3IgY29tbWFuZHMgXHJcbmV4cG9ydCB2YXIgc2VtYUxvZ2ljQ29tbWFuZCA9IHtcclxuXHRjb21tYW5kX3N0YXJ0OiBcIlNlbWFMb2dpYyhcIixcclxuXHRjb21tYW5kX2VuZDogXCIpXCIsXHJcblx0c2hvd0hlbHA6IFwic2hvdyBoZWxwXCIsXHJcblx0c2hvd1ZlcnNpb246IFwic2hvdyB2ZXJzaW9uXCIsXHJcblx0Z2V0RGlhbGVjdHdUZW1wbGF0ZTogXCJ0ZW1wbGF0ZVwiLCAvLyBUb0RvOiBHZXQgVGVtcGxhdGUgcGxhbmVkIGZvciB2ZXJzaW9uIDIueFxyXG5cdHVzZURpYWxlY3Q6IFwidXNlID8/P2RpYWxlY3ROYW1lPz8/XCIsXHJcblx0ZGVmaW5lOiBcImRlZmluZVwiLCAvLyBEZWZpbmUgaXMgbm90IGZvciBvYnNpZGlhbiAtIGl0IGlzIGZvciBkZWZpbmluZyBTZW1hTG9naWMtSW50ZXJwcmV0YXRpb25cclxuXHRzaG93UGFyc2U6IFwic2hvdyBhc1wiLFxyXG5cdHNob3dGaWx0ZXI6IFwiZm9yXCIsXHJcblx0dHJhbnNmZXI6IFwidHJhbnNmZXJcIixcclxuXHR0cmFuc2ZlckVuZHBvaW50OiBcInRvIGVuZHBvaW50XCIsXHJcblx0dHJhbnNmZXJQYXJhbTogXCJ3aXRoIHBhcmFtXCJcclxufVxyXG5cclxuZXhwb3J0IHZhciBzeW10b2tlbiA9IFwiU3ltVG9rZW5cIlxyXG5cclxuZXhwb3J0IGNvbnN0IHNlbWFMb2dpY0hlbHA6IHN0cmluZ1tdW10gPSBbXHJcblx0W3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCArIFwiPz8/XCIgKyBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfZW5kLCBcIllvdSBjYW4gZGVmaW5lIHdoYXQgU2VtYUxvZ2ljIHNob3VsZCBkbyBmb3IgeW91IGJ5IHJlcGxhY2luZyA/Pz8gd2l0aCBvbmUgb2YgdGhlIGZvbGxvd2luZyBTZW1hTG9naWMgY29tbWFuZHM6XCJdLFxyXG5cdFtzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQgKyBzZW1hTG9naWNDb21tYW5kLnNob3dIZWxwICsgc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX2VuZCwgXCJTaG93IHRoaXMgaGVscCBpbmZvcm1hdGlvblwiXSxcclxuXHRbc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0ICsgc2VtYUxvZ2ljQ29tbWFuZC5zaG93VmVyc2lvbiArIHNlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9lbmQsIFwiU2hvdyB0aGUgdmVyc2lvbiBvZiB0aGUgU2VtYUxvZ2ljLVNlcnZpY2VcIl0sXHJcblx0W3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCArIHNlbWFMb2dpY0NvbW1hbmQuZGVmaW5lICsgc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX2VuZCwgXCJBZnRlciB0aGlzIGlubGluZWNvbW1hbmQgYW5kIGEgc3BhY2UgbGluZSBjb21lcyBlLmcuIGEgdGFibGUgdGhhdCBzaG91bGQgYmUgaW50ZXJwcmV0ZWQgYnkgU2VtYUxvZ2ljICh0YWJsZSwgTlRhYmxlLCBaVGFibGUpIHdpdGggb3B0aW9uYWwgaGVhZGVyaW50ZXJwcmV0YXRpb24tIEV4cGVjdGVkIGZvcm1hdDpcXG4ofFN5bWJvbHx8TGV2ZWwobisxKXxcXG58LS0tfC0tLXxcXG58TGV2ZWwoMSl8TGV2ZWwobil8VmFsdWV8KVwiXSxcclxuXHRbYCR7c2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0ICsgc2VtYUxvZ2ljQ29tbWFuZC5zaG93UGFyc2V9ICUxICR7c2VtYUxvZ2ljQ29tbWFuZC5zaG93RmlsdGVyfSAlMiAke3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9lbmR9YCwgXCJzaG93IGFzIC0gc2hvd3MgYW4gb3V0cHV0IGRpcmVjdGx5IHRvIHRoZSByZWFkaW5nIHZpZXcgKCB3aXRoICUxIHlvdSBoYXZlIHRvIHNldCB0aGUgb3V0cHV0IHR5cGU6IDF8MSB7cGljdHVyZSwgc3llbWFsb2dpYywgYXNwfSBhbmQgd2l0aCAlMiB5b3UgY291bGQgZmlsdGVyIGZvciBhbiBzeW1ib2wgYnkgc3ltYm9sbmFtZSlcIl0sXHJcblx0W2Ake3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCArIHNlbWFMb2dpY0NvbW1hbmQudHJhbnNmZXJ9ICUxICR7c2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlckVuZHBvaW50fSAlMiAke3NlbWFMb2dpY0NvbW1hbmQudHJhbnNmZXJQYXJhbX0gJTMgJHtzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfZW5kfWAsIFwidHJhbnNmZXIgLSBzaG93cyBhbiAoY3VycmVudGx5IG9ubHkpIGFzcCBvdXRwdXQgZGlyZWN0bHkgdG8gdGhlIGFzcC52aWV3IGZyb20gU2VtYUxvZ2ljVmlldyAoIHdpdGggJTEgeW91IGhhdmUgdG8gc2V0IHRoZSBvdXRwdXQgdHlwZTogMXwxIHthc3B9IGFuZCB3aXRoICUyIHlvdSBjb3VsZCBzZXQgdGhlIGVuZHBvaW50IGFuZCB3dXRoICUzIHlvdSBjb3VsZCBzZXQgcXVlcnlwYXJhbWV0ZXIpXCJdLFxyXG5dXHJcblxyXG4vLyBydWxlc2V0dHlwZSA6IHR5cGUsIE5hbWluZ1xyXG5leHBvcnQgY29uc3QgUnN0eXBlc19TZW1hbG9naWMgPSAwXHJcbmV4cG9ydCBjb25zdCBSc3R5cGVzX1BpY3R1cmUgPSAzXHJcbmV4cG9ydCBjb25zdCBSc3R5cGVzX0FTUCA9IDZcclxuZXhwb3J0IGNvbnN0IFJzdHlwZXNfU2VtYW50aWNUcmVlID0gOFxyXG5leHBvcnQgY29uc3QgUnN0eXBlc19Lbm93bGVkZ2VHcmFwaCA9IDlcclxuXHJcbmV4cG9ydCBjb25zdCBSdWxlc2V0dHlwZXNDb21tYW5kczogc3RyaW5nW11bXSA9IFtcclxuXHRbXCJTZW1hTG9naWNcIiwgXCJTZW1hTG9naWNcIl0sXHJcblx0W1widGVjaG5pY2FsXCIsIFwiU2VtYUxvZ2ljXCJdLFxyXG5cdFtcInNlbWFsb2dpY1wiLCBcIlNlbWFMb2dpY1wiXSxcclxuXHRbXCJQaWN0dXJlIChTVkcpXCIsIFwiU1ZHXCJdLFxyXG5cdFtcInBpY3R1cmVcIiwgXCJTVkdcIl0sXHJcblx0W1wiU1ZHXCIsIFwiU1ZHXCJdLFxyXG5cdFtcIkFTUFwiLCBcIkFTUC5qc29uXCJdLFxyXG5cdFtcImFzcFwiLCBcIkFTUC5qc29uXCJdLFxyXG5cdFtcIlNlbWFudGljVHJlZVwiLCBcIlNlbWFudGljVHJlZVwiXSxcclxuXHRbXCJLbndvbGVkZ2VHcmFwaFwiLCBcIktub3dsZWRnZUdyYXBoXCJdXHJcbl1cclxuXHJcbmV4cG9ydCBjb25zdCBEZWJ1Z0xldmVsTmFtZXM6IHN0cmluZ1tdID1cclxuXHRbXHJcblx0XHQnRGVidWdMZXZlbF9PZmYnLFxyXG5cdFx0J0RlYnVnTGV2ZWxfRXJyb3InLFxyXG5cdFx0J0RlYnVnTGV2ZWxfQ3VycmVudF9EZXYnLFxyXG5cdFx0J0RlYnVnTGV2ZWxfSW1wb3J0YW50JyxcclxuXHRcdCdEZWJ1Z0xldmVsX0luZm9ybWF0aXZlJyxcclxuXHRcdCdEZWJ1Z0xldmVsX0NoYXR0eScsXHJcblx0XHQnRGVidWdMZXZlbF9BbGwnXHJcblx0XVxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBEZWJ1Z0xldk1hcDogRGVidWdMZXZlbF9JID0ge1xyXG5cdCdEZWJ1Z0xldmVsX09mZic6IDAsXHJcblx0J0RlYnVnTGV2ZWxfRXJyb3InOiAxLFxyXG5cdCdEZWJ1Z0xldmVsX0N1cnJlbnRfRGV2JzogMixcclxuXHQnRGVidWdMZXZlbF9JbXBvcnRhbnQnOiAzLFxyXG5cdCdEZWJ1Z0xldmVsX0luZm9ybWF0aXZlJzogNCxcclxuXHQnRGVidWdMZXZlbF9DaGF0dHknOiA1LFxyXG5cdCdEZWJ1Z0xldmVsX0FsbCc6IDZcclxufVxyXG5cclxuaW50ZXJmYWNlIERlYnVnTGV2ZWxfSSB7XHJcblx0W0xldmVsbmFtZTogc3RyaW5nXTogbnVtYmVyXHJcbn1cclxuXHJcbnR5cGUgTWFwVHlwZSA9IHtcclxuXHRbaWQ6IHN0cmluZ106IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNsVGV4dHM6IE1hcFR5cGUgPSB7XHJcblx0XCJIZWFkZXJTTFwiOiBcIlNlbWFMb2dpYy5WaWV3XCIsXHJcblx0XCJIZWFkZXJUVlwiOiBcIlRyYW5zZmVyLlZpZXdcIlxyXG59IiwgImltcG9ydCB7IE1hcmtkb3duUmVuZGVyQ2hpbGQsIE1hcmtkb3duVmlldyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgcmVxdWVzdFVybCwgUmVxdWVzdFVybFBhcmFtLCBSZXF1ZXN0VXJsUmVzcG9uc2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IERlYnVnTGV2ZWwsIFNlbWFMb2dpY1BsdWdpblNldHRpbmdzLCBteWdTSUQgfSBmcm9tIFwiLi4vbWFpblwiO1xyXG5pbXBvcnQgeyBBUElfRGVmYXVsdHMsIHNlbWFMb2dpY0NvbW1hbmQsIHNlbWFMb2dpY0hlbHAsIERlYnVnTGV2TWFwLCBSdWxlc2V0dHlwZXNDb21tYW5kcywgUnN0eXBlc19BU1AgfSBmcm9tIFwiLi9jb25zdFwiXHJcbmltcG9ydCB7IFNlbWFMb2dpY1ZpZXcsIFNlbWFMb2dpY1ZpZXdUeXBlIH0gZnJvbSBcIi4vdmlld1wiO1xyXG5pbXBvcnQgeyBwYXJzZUNvbW1hbmQgfSBmcm9tICdzcmMvdmlld191dGlscyc7XHJcblxyXG5leHBvcnQgY29uc3Qgc2VhcmNoRm9yU2VtYUxvZ2ljQ29tbWFuZHMgPSAoZWw6IEVsZW1lbnQpOiBib29sZWFuID0+IHtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGVsLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IGNoaWxkID0gZWwuY2hpbGROb2Rlc1tpXTtcclxuICAgIGlmIChpc1NlbWFMb2dpY0NvbW1hbmQoY2hpbGQpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaXNTZW1hTG9naWNDb21tYW5kID0gKG46IE5vZGUpOiBib29sZWFuID0+XHJcbiAgbi5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUgJiYgQm9vbGVhbihuLnRleHRDb250ZW50Py5zdGFydHNXaXRoKHNlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCkpO1xyXG5cclxuXHJcbi8vIGNoZWNrIGlmIHRoZSBub2RlIGhhcyB0byBiZSByZXBsYWNlZCBtdXN0IGJlIGRvIGJlZm9yZSBcclxuZXhwb3J0IGNvbnN0IHJlcGxhY2VXaXRoRW1wdHlOb2RlID0gKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IE5vZGVbXSA9PiB7XHJcbiAgY29uc3QgcmVzdWx0czogTm9kZVtdID0gW107XHJcbiAgcmV0dXJuIHJlc3VsdHNcclxufTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXBsYWNlV2l0aENvbW1hbmROb2RlKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgc2V0dGluZ3M6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzKTogUHJvbWlzZTxOb2RlW10+IHtcclxuICBsZXQgcmVzdWx0czogTm9kZVtdID0gW11cclxuICBsZXQgZm91bmQ6IGJvb2xlYW4gPSBmYWxzZVxyXG5cclxuICBsZXQgc2VtYUxvZ2ljQ29tID0gY29udGFpbmVyRWwudGV4dENvbnRlbnQ/LnN1YnN0cmluZyhzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQubGVuZ3RoLCBjb250YWluZXJFbC50ZXh0Q29udGVudD8uaW5kZXhPZihzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfZW5kKSkudG9Mb3dlckNhc2UoKVxyXG5cclxuICBpZiAoKCFmb3VuZCkgJiYgKChzZW1hTG9naWNDb20/LnRvU3RyaW5nKCkuc3Vic3RyaW5nKDAsIHNlbWFMb2dpY0NvbW1hbmQuc2hvd0hlbHAubGVuZ3RoKSkgPT0gc2VtYUxvZ2ljQ29tbWFuZC5zaG93SGVscCkpIHsvL3NlbWFMb2dpY0NvbW1hbmQuc2hvd0hlbHAudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgIC8vIE1ha2UgdGFibGUgd2l0aCBoZWxwLUFycmF5XHJcbiAgICByZXN1bHRzID0gYXdhaXQgc2hvd0hlbHAoKVxyXG4gICAgZm91bmQgPSB0cnVlXHJcbiAgfVxyXG5cclxuICBpZiAoKCFmb3VuZCkgJiYgKChzZW1hTG9naWNDb20/LnRvU3RyaW5nKCkuc3Vic3RyaW5nKDAsIHNlbWFMb2dpY0NvbW1hbmQuc2hvd1ZlcnNpb24ubGVuZ3RoKSkgPT0gc2VtYUxvZ2ljQ29tbWFuZC5zaG93VmVyc2lvbikpIHsvLyBzZW1hTG9naWNDb21tYW5kLnNob3dWZXJzaW9uLnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICByZXN1bHRzID0gYXdhaXQgc2hvd1ZlcnNpb24oc2V0dGluZ3MpXHJcbiAgICBmb3VuZCA9IHRydWVcclxuICB9XHJcblxyXG4gIGlmICgoIWZvdW5kKSAmJiAoKHNlbWFMb2dpY0NvbT8udG9TdHJpbmcoKS5zdWJzdHJpbmcoMCwgc2VtYUxvZ2ljQ29tbWFuZC5zaG93UGFyc2UubGVuZ3RoKSkgPT0gc2VtYUxvZ2ljQ29tbWFuZC5zaG93UGFyc2UpKSB7Ly8gc2VtYUxvZ2ljQ29tbWFuZC5zaG93UGFyc2UudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgIC8vIHNlYXJjaCBmb3IgcnVsZXNzZXR0eXBlXHJcbiAgICBsZXQgcnVsZXNldHR5cGU6IHN0cmluZyA9IFwiXCIgLy8gc28gZmFyIGFzIHRoZXJlIGlzIG5vIG91dHB1dGZvcm1hdCAtIG5vdGhpbmcgdG8gZG9cclxuICAgIGxldCBmaWx0ZXI6IHN0cmluZyA9IFwiXCJcclxuXHJcbiAgICBmb3IgKGxldCBydWxlIGluIFJ1bGVzZXR0eXBlc0NvbW1hbmRzKSB7XHJcbiAgICAgIC8vIHNlYXJjaCBmb3IgdGhlIHJ1bGVzc2V0dHlwZSB3aGljaCBpcyB0byBzaG93IGlubGluZVxyXG4gICAgICBpZiAoc2VtYUxvZ2ljQ29tLmNvbnRhaW5zKFJ1bGVzZXR0eXBlc0NvbW1hbmRzW3J1bGVdWzBdKSkge1xyXG4gICAgICAgIHJ1bGVzZXR0eXBlID0gUnVsZXNldHR5cGVzQ29tbWFuZHNbcnVsZV1bMV1cclxuICAgICAgICAvLyBzZWFyY2ggZm9yIGEgZ2l2ZW4gZmlsdGVyXHJcbiAgICAgICAgY29uc3QgZmluZGZvciA9IHNlbWFMb2dpY0NvbS5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQuc2hvd0ZpbHRlcilcclxuICAgICAgICBpZiAoZmluZGZvciA+IDApIHtcclxuICAgICAgICAgIGZpbHRlciA9IHNlbWFMb2dpY0NvbS5zdWJzdHJpbmcoZmluZGZvciArIHNlbWFMb2dpY0NvbW1hbmQuc2hvd0ZpbHRlci5sZW5ndGgpXHJcbiAgICAgICAgICBmaWx0ZXIgPSBmaWx0ZXIudHJpbSgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvdW5kID0gdHJ1ZVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWZvdW5kKSB7IC8vIERlZmF1bHRcclxuICAgICAgLy8gTWFrZSB0YWJsZSB3aXRoIGhlbHAtQXJyYXlcclxuICAgICAgcmVzdWx0cyA9IGF3YWl0IHNob3dIZWxwKClcclxuICAgICAgZm91bmQgPSB0cnVlXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmIChydWxlc2V0dHlwZSAhPSBcIlwiKSB7XHJcbiAgICAgIHJlc3VsdHMgPSBhd2FpdCBzaG93UGFyc2VXaXRoRmlsdGVyKGZpbHRlciwgcnVsZXNldHR5cGUsIHNldHRpbmdzKVxyXG4gICAgfVxyXG4gICAgZm91bmQgPSB0cnVlXHJcbiAgfVxyXG5cclxuICBpZiAoIWZvdW5kKSB7XHJcbiAgICByZXN1bHRzID0gcmVwbGFjZVdpdGhFbXB0eU5vZGUoY29udGFpbmVyRWwpXHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0c1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2VtYUxvZ2ljUmVuZGVyZWRFbGVtZW50IGV4dGVuZHMgTWFya2Rvd25SZW5kZXJDaGlsZCB7XHJcbiAgbXlzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3M7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHsgY29udGFpbmVyRWwsIHNldCB9OiB7IGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgc2V0OiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyB9KSB7XHJcbiAgICBzdXBlcihjb250YWluZXJFbCk7XHJcbiAgICB0aGlzLm15c2V0dGluZ3MgPSBzZXRcclxuICB9XHJcbiAgYXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5jb250YWluZXJFbC5zZXRDaGlsZHJlbkluUGxhY2UoXHJcbiAgICAgIGF3YWl0IHJlcGxhY2VXaXRoQ29tbWFuZE5vZGUodGhpcy5jb250YWluZXJFbCwgdGhpcy5teXNldHRpbmdzKVxyXG4gICAgICAvL3JlcGxhY2VXaXRoRW1wdHlOb2RlKHRoaXMuY29udGFpbmVyRWwpXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc2hvd0hlbHAoKTogUHJvbWlzZTxOb2RlW10+IHtcclxuICBsZXQgcmVzdWx0czogTm9kZVtdID0gW107XHJcbiAgbGV0IGJ1aWxkY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xyXG5cclxuICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbmZvcm1hdGl2ZSwgdW5kZWZpbmVkLCBzZW1hTG9naWNDb21tYW5kLnNob3dIZWxwKVxyXG5cclxuICBidWlsZGNvbnRhaW5lckVsID0gY3JlYXRlRWwoJ3RhYmxlJyk7XHJcbiAgbGV0IGJvZHkgPSBidWlsZGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiYm9keVwiKTtcclxuICBsZXQgcm93ID0gYm9keS5jcmVhdGVFbChcInRyXCIpO1xyXG4gIHJvdy5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogXCJTZW1hTG9naWMtQ29tbWFuZHMtSGVscFwiIH0pO1xyXG4gIHJvdy5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogXCJEZXNjcmlwdGlvblwiIH0pO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2VtYUxvZ2ljSGVscC5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3Qgcm93ID0gYm9keS5jcmVhdGVFbChcInRyXCIpO1xyXG4gICAgcm93LmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiBzZW1hTG9naWNIZWxwW2ldWzBdIH0pO1xyXG4gICAgcm93LmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiBzZW1hTG9naWNIZWxwW2ldWzFdIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzdWx0cy5wdXNoKGJ1aWxkY29udGFpbmVyRWwpO1xyXG4gIHJldHVybiByZXN1bHRzO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzaG93VmVyc2lvbihzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MpOiBQcm9taXNlPE5vZGVbXT4ge1xyXG4gIGxldCByZXN1bHRzOiBOb2RlW10gPSBbXTtcclxuICBsZXQgYnVpbGRjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XHJcbiAgbGV0IHZlcnNpb250ZXh0OiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbmZvcm1hdGl2ZSwgdW5kZWZpbmVkLCBzZW1hTG9naWNDb21tYW5kLnNob3dWZXJzaW9uKVxyXG5cclxuICBjb25zdCB2ZXJzaW9uID0gYXdhaXQgc2VtYUxvZ2ljR2V0VmVyc2lvbihzZXR0aW5ncylcclxuICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHRCdWZmZXI6IGFueSkge1xyXG4gICAgICB2ZXJzaW9udGV4dCA9IHJlc3VsdEJ1ZmZlcjtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZnVuY3Rpb24gKHJlc3VsdEJ1ZmZlcjogYW55KSB7IHZlcnNpb250ZXh0ID0gcmVzdWx0QnVmZmVyOyB9XHJcbiAgICApXHJcbiAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCwgdW5kZWZpbmVkLCBgSlNPTi1UZXh0IGluIFByb2Nlc3Nvcjoke3ZlcnNpb250ZXh0fWApXHJcblxyXG4gIC8vIFZlcnNpb24gaXMgc2hvd24gaW4gYSB0YWJsZSBsaW5lXHJcbiAgYnVpbGRjb250YWluZXJFbCA9IGNyZWF0ZUVsKCd0YWJsZScpO1xyXG4gIGNvbnN0IHRhYmxlID0gYnVpbGRjb250YWluZXJFbC5jcmVhdGVFbCgndGFibGUnKTtcclxuICBjb25zdCBib2R5ID0gYnVpbGRjb250YWluZXJFbC5jcmVhdGVFbChcImJvZHlcIik7XHJcbiAgY29uc3Qgcm93ID0gYm9keS5jcmVhdGVFbChcInRyXCIpO1xyXG4gIHJvdy5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogdmVyc2lvbnRleHQgfSk7XHJcblxyXG4gIHJlc3VsdHMucHVzaChidWlsZGNvbnRhaW5lckVsKTtcclxuICByZXR1cm4gcmVzdWx0cztcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc2hvd1BhcnNlU1ZHKEZpbHRlcjogc3RyaW5nKTogUHJvbWlzZTxOb2RlW10+IHtcclxuICBsZXQgcmVzdWx0czogTm9kZVtdID0gW107XHJcbiAgbGV0IGJ1aWxkY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xyXG5cclxuICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbmZvcm1hdGl2ZSwgdW5kZWZpbmVkLCBzZW1hTG9naWNDb21tYW5kLnNob3dIZWxwKTtcclxuXHJcbiAgYnVpbGRjb250YWluZXJFbCA9IGNyZWF0ZUVsKCd0YWJsZScpO1xyXG4gIGxldCBib2R5ID0gYnVpbGRjb250YWluZXJFbC5jcmVhdGVFbChcImJvZHlcIik7XHJcbiAgbGV0IHJvdyA9IGJvZHkuY3JlYXRlRWwoXCJ0clwiKTtcclxuICByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IFwiU2VtYUxvZ2ljLUNvbW1hbmRzLUhlbHBcIiB9KTtcclxuICByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbWFMb2dpY0hlbHAubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IHJvdyA9IGJvZHkuY3JlYXRlRWwoXCJ0clwiKTtcclxuICAgIHJvdy5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogc2VtYUxvZ2ljSGVscFtpXVswXSB9KTtcclxuICAgIHJvdy5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogc2VtYUxvZ2ljSGVscFtpXVsxXSB9KTtcclxuICB9XHJcblxyXG4gIHJlc3VsdHMucHVzaChidWlsZGNvbnRhaW5lckVsKTtcclxuICByZXR1cm4gcmVzdWx0cztcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0aHR0cHMoaHR0cHM6IGJvb2xlYW4pOiBzdHJpbmcge1xyXG4gIGxldCBzdHI6IHN0cmluZ1xyXG4gIC8vIGh0dHBzID9cclxuICBpZiAoaHR0cHMpIHtcclxuICAgIHN0ciA9IEFQSV9EZWZhdWx0cy5odHRwc1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzdHIgPSBBUElfRGVmYXVsdHMuaHR0cFxyXG4gIH1cclxuICByZXR1cm4gc3RyXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIb3N0UG9ydChzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MpOiBzdHJpbmcge1xyXG4gIGxldCBhZHJlc3MgPSBzZXRodHRwcyhzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzU0wpXHJcbiAgYWRyZXNzID0gYWRyZXNzICsgc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlCYXNlVVJMXHJcblxyXG4gIGlmIChzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVBvcnQgIT0gJycpIHtcclxuICAgIGFkcmVzcyA9IGFkcmVzcyArICc6JyArIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15UG9ydFxyXG4gIH1cclxuICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoLCB1bmRlZmluZWQsICdnZXR0aW5nIFNlbWFMb2dpYy1BZHJlc3M6ICcgKyBhZHJlc3MpXHJcbiAgcmV0dXJuIGFkcmVzc1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SG9zdEFzcFBvcnQoc2V0dGluZ3M6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzLCBwYXJzZWRDb21tYW5kczogcGFyc2VDb21tYW5kKTogc3RyaW5nIHtcclxuICBsZXQgYWRyZXNzOiBzdHJpbmdcclxuICBpZiAocGFyc2VkQ29tbWFuZHMub3V0cHV0Zm9ybWF0ID09IFJ1bGVzZXR0eXBlc0NvbW1hbmRzW1JzdHlwZXNfQVNQXVsxXSkge1xyXG4gICAgYWRyZXNzID0gc2V0aHR0cHMoc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlVc2VIdHRwcylcclxuICAgIGFkcmVzcyA9IGFkcmVzcyArIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15QXNwVXJsXHJcbiAgICBpZiAocGFyc2VkQ29tbWFuZHMuZW5kcG9pbnQgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGlmIChwYXJzZWRDb21tYW5kcy5lbmRwb2ludC5pbmRleE9mKFwiaHR0cFwiKSA+PSAwKSB7XHJcbiAgICAgICAgYWRyZXNzID0gcGFyc2VkQ29tbWFuZHMuZW5kcG9pbnRcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBhZHJlc3MgPSBhZHJlc3MgKyBcIi9cIiArIHBhcnNlZENvbW1hbmRzLmVuZHBvaW50XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgLy8gdW5kZWZpbmRlZCBuZXcgdHJhbnNmZXIgZW5kcG9pbnRcclxuICAgIGFkcmVzcyA9IHBhcnNlZENvbW1hbmRzLmVuZHBvaW50XHJcbiAgfVxyXG4gIGlmICgocGFyc2VkQ29tbWFuZHMucGFyYW0gIT0gdW5kZWZpbmVkKSAmJiAocGFyc2VkQ29tbWFuZHMucGFyYW0gIT0gJycpKSB7IGFkcmVzcyA9IGFkcmVzcyArIFwiP1wiICsgcGFyc2VkQ29tbWFuZHMucGFyYW0gfVxyXG4gIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0hpZ2gsIHVuZGVmaW5lZCwgJ2dldHRpbmcgYXNwLUFkcmVzczogJyArIGFkcmVzcylcclxuICByZXR1cm4gYWRyZXNzXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW1hTG9naWNHZXRWZXJzaW9uKHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyk6IFByb21pc2U8c3RyaW5nPiB7XHJcblxyXG4gIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdW5kZWZpbmVkLCBcIlN0YXJ0IHNlbWFMb2dpY0dldFZlcnNpb25cIilcclxuXHJcbiAgLy8gUHJlcGFyZSBKU09OLUZvcm1hdFxyXG4gIGNvbnN0IG15VmVyc2lvbiA9ICd7XCJ2ZXJzaW9uXCI6XCIwXCIsXCJ2ZXJzaW9udGV4dFwiOlwiVGV4dFwifSc7XHJcbiAgbGV0IG15SnNvbiA9IEpTT04ucGFyc2UobXlWZXJzaW9uKTtcclxuICBsZXQganNvblZlcnNpb246IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gIC8vIENyZWF0ZSBVcmwgZm9yIEdldCBWZXJzaW9uXHJcbiAgbGV0IHZBUElfVVJMX1ZlcnNpb24gPSBnZXRIb3N0UG9ydChzZXR0aW5ncykgKyBBUElfRGVmYXVsdHMuVmVyc2lvbjtcclxuICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHVuZGVmaW5lZCwgdkFQSV9VUkxfVmVyc2lvbilcclxuXHJcbiAgbGV0IG9wdGlvbnM6IFJlcXVlc3RVcmxQYXJhbVxyXG5cclxuICBpZiAoc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlVc2VIdHRwc1NMICYmIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15VXNlclNMICE9ICcnKSB7XHJcbiAgICBvcHRpb25zID0ge1xyXG4gICAgICB1cmw6IHZBUElfVVJMX1ZlcnNpb24sXHJcbiAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCYXNpYyBcIiArIGJ0b2Eoc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlVc2VyU0wgKyBcIjpcIiArIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15UGFzc3dvcmRTTClcclxuICAgICAgfSxcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgb3B0aW9ucyA9IHtcclxuICAgICAgdXJsOiB2QVBJX1VSTF9WZXJzaW9uLFxyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgfVxyXG4gIH1cclxuICBsZXQgcmVzcG9uc2U6IFJlcXVlc3RVcmxSZXNwb25zZTtcclxuXHJcbiAgLy8gR2V0IGluZm9ybWF0aW9uIGFib3V0IHZlcnNpb24gZnJvbSB0aGUgcmVxdWVzdCBcclxuICB0cnkge1xyXG4gICAgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKG9wdGlvbnMpXHJcbiAgICBteUpzb24gPSBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQpO1xyXG4gICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQWxsLCB1bmRlZmluZWQsIG15SnNvbi52ZXJzaW9uKVxyXG4gICAganNvblZlcnNpb24gPSBteUpzb24udmVyc2lvbjtcclxuICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0FsbCwgdW5kZWZpbmVkLCBgSlNPTi1UZXh0IGluIFJlcXVlc3Q6JHtqc29uVmVyc2lvbn1gKVxyXG4gICAgcmV0dXJuIGpzb25WZXJzaW9uO1xyXG4gIH1cclxuICBjYXRjaCAoZSkge1xyXG4gICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfRXJyb3IsIHVuZGVmaW5lZCwgJ0Vycm9yOiBDYXRjaCBvZiBBUElWZXJzaW9uJyArIGUudG9TdHJpbmcoKSlcclxuICAgIHRocm93IG5ldyBFcnJvcigpXHJcbiAgfVxyXG59XHJcblxyXG4vLyBzZW1hTG9naWNQaW5nIHRyaWVzIHRvIHRlc3Qgc3RhbmRhcmRWZXJzaW9uQVBJIC0gaWYgaXQgY2FuJ3QgYmUgY29ubmVjdGVkIC0gc2hvdyBtZWFuaW5nZnVsIGVycm9yIHN0YXRlXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW1hTG9naWNQaW5nKHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncywgbGFzdFVwZGF0ZTogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgbGV0IHN0YXJ0dGltZSA9IERhdGUubm93KClcclxuICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbmZvcm1hdGl2ZSwgdW5kZWZpbmVkLCAnR2V0VmVyc2lvblBpbmcgYXQgJywgRGF0ZS5ub3coKSwgJyAgZm9yICcsIGdldEhvc3RQb3J0KHNldHRpbmdzKSlcclxuICBhd2FpdCBzZW1hTG9naWNHZXRWZXJzaW9uKHNldHRpbmdzKVxyXG4gICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdEJ1ZmZlcjogYW55KSB7XHJcbiAgICAgIC8vIG5vdGhpbmcgdG8gZG9cclxuICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUsIHVuZGVmaW5lZCwgJ1NlbWFMb2dpYyBHZXRWZXJzaW9uUGluZyBzdGFydGVkIGF0OicsIHN0YXJ0dGltZSwgJyBFbmR0aW1lOiAnLCBEYXRlLm5vdygpKVxyXG4gICAgfSlcclxuICAgIC5jYXRjaChmdW5jdGlvbiAoZTogRXJyb3IpIHtcclxuICAgICAgLy8gSWYgaXQgaXMgYW4gb2xkIGVycm9yIChsb25nIHRpbWUgYWdvIHNlbnQpLCB0aGVuIHRlaGVyZSBpcyBub3RoaW5nIHRvIGRvXHJcbiAgICAgIGlmIChzdGFydHRpbWUgPCBsYXN0VXBkYXRlKSB7XHJcbiAgICAgICAgLy8gdGltZSB0byBzaG93IGFuIGVycm9yIFxyXG4gICAgICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdW5kZWZpbmVkLCBgVGhlcmUgaXMgbm8gY29ubmVjdGlvbiB0byBTZW1hTG9naWNTZXJ2aWNlIEFQSVZlcnNpb25gKVxyXG4gICAgICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdW5kZWZpbmVkLCBnZXRIb3N0UG9ydChzZXR0aW5ncykpXHJcbiAgICAgICAgYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmOiBhbnkpID0+IHtcclxuICAgICAgICAgIGxldCBzbFZpZXcgPSBsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKVxyXG4gICAgICAgICAgaWYgKHNsVmlldyA9PSBTZW1hTG9naWNWaWV3VHlwZSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBsZWFmLnZpZXcuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiU2VtYUxvZ2ljX0Vycm9yXCIgfSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbChcImJcIiwgeyB0ZXh0OiBcIlRoZXJlIGlzIG5vIGNvbm5lY3Rpb24gdG8gU2VtYUxvZ2ljU2VydmljZSAtPiBBUElWZXJzaW9uXCIgfSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbChcImJcIiwgeyB0ZXh0OiBnZXRIb3N0UG9ydChzZXR0aW5ncykgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCwgdW5kZWZpbmVkLCAnU2VtYUxvZ2ljIEdldFZlcnNpb25QaW5nIGZhaWxlZCBhbmQgbm90IHVzZWQgc3RhcnRlZDonLCBzdGFydHRpbWUsICcgRW5kdGltZTogJywgRGF0ZS5ub3coKSlcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgKVxyXG4gIHJldHVybiB0cnVlXHJcbn1cclxuXHJcbi8vIFRvRG86IFBhcnNlIGlzdCBkdXJjaCBkZW4gYWt0dWVsbGVuIFVtYmF1IGltIFByZVByb2Nlc3NvciBub2NobWFsIGFuenVwYXNzZW5cclxuYXN5bmMgZnVuY3Rpb24gc2hvd1BhcnNlV2l0aEZpbHRlcihmaWx0ZXI6IHN0cmluZywgcnVsZXNzZXR0eXBlOiBzdHJpbmcsIHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyk6IFByb21pc2U8Tm9kZVtdPiB7XHJcbiAgLy8gVG9EbzogQ2hhbmdlIGZyb20gY29uc29sZS1sb2cgdG8gc2xjb25zb2xlbG9nIHdpdGggU0xjb20tT2JqZWN0XHJcbiAgbGV0IHJlc3VsdHM6IE5vZGVbXSA9IFtdO1xyXG4gIGxldCBidWlsZGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgLy9sZXQgdkFQSV9VUkwgPSBnZXRIb3N0UG9ydChzZXR0aW5ncykgKyBBUElfRGVmYXVsdHMucnVsZXNfcGFyc2UgKyBcIj9zaWQ9XCIgKyBzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVNJRDtcclxuICBsZXQgdkFQSV9VUkwgPSBnZXRIb3N0UG9ydChzZXR0aW5ncykgKyBBUElfRGVmYXVsdHMucnVsZXNfcGFyc2UgKyBcIj9zaWQ9XCIgKyBteWdTSUQ7XHJcbiAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50LCB1bmRlZmluZWQsIHZBUElfVVJMKVxyXG4gIGxldCBib2R5dGV4dDogc3RyaW5nID0gXCJcIjtcclxuXHJcbiAgbGV0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG4gIGlmIChhY3RpdmVWaWV3ID09IHVuZGVmaW5lZCkge1xyXG4gICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCwgdW5kZWZpbmVkLCBcIkRvIG5vdCBmaW5kIGFuIGFjdGl2ZSB2aWV3XCIpXHJcbiAgICByZXR1cm4gcmVzdWx0c1xyXG4gIH1cclxuXHJcbiAgbGV0IGRpYWxlY3RJRDogc3RyaW5nID0gXCJkZWZhdWx0XCJcclxuXHJcbiAgbGV0IGNvZGVibG9jazogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIGxldCBuZXdDb2RlYmxvY2s6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgaWYgKGFjdGl2ZVZpZXcgIT0gbnVsbCkge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhY3RpdmVWaWV3LmVkaXRvci5saW5lQ291bnQoKTsgaSsrKSB7XHJcbiAgICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0FsbCwgdW5kZWZpbmVkLCBpLCAnOycsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkpXHJcbiAgICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0FsbCwgdW5kZWZpbmVkLCAnU3Vic3RyaW5nOicsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIDIpKTtcclxuICAgICAgaWYgKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIDMpID09IFwiYGBgXCIpIHtcclxuICAgICAgICBpZiAoIWNvZGVibG9jaykge1xyXG4gICAgICAgICAgY29kZWJsb2NrID0gdHJ1ZVxyXG4gICAgICAgICAgbmV3Q29kZWJsb2NrID0gdHJ1ZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBuZXdDb2RlYmxvY2sgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUsIHVuZGVmaW5lZCwgJ0N1cnJlbnQgbGluZSBpcyBDb2RlYmxvY2snLCBjb2RlYmxvY2spXHJcblxyXG4gICAgICBpZiAoKCFjb2RlYmxvY2spICYmICghbmV3Q29kZWJsb2NrKSkge1xyXG4gICAgICAgIC8vIENoZWNrIGlubGluZSBTdGF0ZW1lbnRzXHJcbiAgICAgICAgc3dpdGNoIChhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpKSB7XHJcbiAgICAgICAgICBkZWZhdWx0OiBib2R5dGV4dCA9IGJvZHl0ZXh0LmNvbmNhdChhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpICsgJ1xcbicpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIC8vIFByXHUwMEZDZmUgYXVmIHp1IHZlcndlbmRlbmRlbiBEaWFsZWN0XHJcbiAgICAgICAgc3dpdGNoIChhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZygwLCBzZW1hTG9naWNDb21tYW5kLnVzZURpYWxlY3QubGVuZ3RoKSkge1xyXG4gICAgICAgICAgY2FzZSBzZW1hTG9naWNDb21tYW5kLnVzZURpYWxlY3Q6IHtcclxuICAgICAgICAgICAgZGlhbGVjdElEID0gYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoc2VtYUxvZ2ljQ29tbWFuZC51c2VEaWFsZWN0Lmxlbmd0aCwgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5sZW5ndGggLSAxKVxyXG4gICAgICAgICAgICBkaWFsZWN0SUQgPSBkaWFsZWN0SUQudHJpbSgpO1xyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGVmYXVsdDogeyB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG4gICAgICBpZiAoaSA8IGFjdGl2ZVZpZXcuZWRpdG9yLmxpbmVDb3VudCgpKSB7XHJcbiAgICAgICAgaWYgKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIDMpID09IFwiYGBgXCIpIHtcclxuICAgICAgICAgIGlmICgoY29kZWJsb2NrKSAmJiAoIW5ld0NvZGVibG9jaykpIHsgY29kZWJsb2NrID0gZmFsc2UgfSBlbHNlIHsgbmV3Q29kZWJsb2NrID0gZmFsc2UgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG5cclxuICBpZiAoYm9keXRleHQgPT0gXCJcIikgeyBib2R5dGV4dCA9IFwiXCIgfVxyXG4gIGlmIChkaWFsZWN0SUQgPT0gXCJcIikgeyBkaWFsZWN0SUQgPSBcImRlZmF1bHRcIiB9XHJcbiAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgbGV0IG9wdGlvbnNQYXJzZTogUmVxdWVzdFVybFBhcmFtO1xyXG5cclxuICBpZiAoZmlsdGVyICE9IFwiXCIpIHtcclxuICAgIGxldCBqc29ud29GaWx0ZXIgPSB7XHJcbiAgICAgIFwidGV4dFwiOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCJ0ZXh0SURcIjogXCJmbHlcIixcclxuICAgICAgICAgIFwiZGlhbGVjdElEXCI6IGRpYWxlY3RJRCxcclxuICAgICAgICAgIFwicnVsZXNcIjogYm9keXRleHRcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIFwiZmlsdGVyXCI6IHtcclxuICAgICAgICBcImRpYWxlY3RJRFwiOiBcImRlZmF1bHRcIixcclxuICAgICAgICBcInN5bWJvbHNcIjogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBcInN5bWJvbFwiOiBmaWx0ZXJcclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgIFwicGVyc2lzdGVuY3lcIjogZmFsc2UsXHJcbiAgICAgIFwicnVsZXNldHR5cGVcIjogcnVsZXNzZXR0eXBlIC8vc2V0dGluZ3MubXlPdXRwdXRGb3JtYXRcclxuICAgIH1cclxuICAgIG9wdGlvbnNQYXJzZSA9IHtcclxuICAgICAgdXJsOiB2QVBJX1VSTCxcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShqc29ud29GaWx0ZXIpXHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGxldCBqc29udGVzdHd0aEZpbHRlciA9IHtcclxuICAgICAgXCJ0ZXh0XCI6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcInRleHRJRFwiOiBcImZseVwiLFxyXG4gICAgICAgICAgXCJkaWFsZWN0SURcIjogZGlhbGVjdElELFxyXG4gICAgICAgICAgXCJydWxlc1wiOiBib2R5dGV4dFxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgXCJmaWx0ZXJcIjoge30sXHJcbiAgICAgIFwicGVyc2lzdGVuY3lcIjogZmFsc2UsXHJcbiAgICAgIFwicnVsZXNldHR5cGVcIjogcnVsZXNzZXR0eXBlIC8vc2V0dGluZ3MubXlPdXRwdXRGb3JtYXRcclxuICAgIH1cclxuICAgIG9wdGlvbnNQYXJzZSA9IHtcclxuICAgICAgdXJsOiB2QVBJX1VSTCxcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShqc29udGVzdHd0aEZpbHRlcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxldCByZXM6IHN0cmluZztcclxuICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHksIHVuZGVmaW5lZCwgYENvbnRleHQ6ICR7ZGlhbGVjdElEfSwgQm9keXRleHQ6ICR7Ym9keXRleHR9YClcclxuICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHVuZGVmaW5lZCwgb3B0aW9uc1BhcnNlKVxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXNwb25zZVBhcnNlID0gYXdhaXQgcmVxdWVzdFVybChvcHRpb25zUGFyc2UpXHJcbiAgICBjb25zdCByZW1Kc29uID0gcmVzcG9uc2VQYXJzZS50ZXh0O1xyXG4gICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50LCB1bmRlZmluZWQsIFwiU2VtYUxvZ2ljOiBQYXJzZSB3aXRoIGh0dHAtc3RhdHVzIFwiICsgcmVzcG9uc2VQYXJzZS5zdGF0dXMudG9TdHJpbmcoKSlcclxuICAgIGlmIChyZXNwb25zZVBhcnNlLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgbGV0IHJlc3VsdGh0dHAgPSByZXNwb25zZVBhcnNlLnRleHQ7XHJcbiAgICAgIGNvbnN0IGZyYWdtZW50ID0gKG5ldyBSYW5nZSgpKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQocmVzdWx0aHR0cCk7XHJcbiAgICAgIC8vYnVpbGRjb250YWluZXJFbCA9IGNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBBUElfRGVmYXVsdHMudmlld2hlYWRlciB9KTtcclxuICAgICAgYnVpbGRjb250YWluZXJFbCA9IGNyZWF0ZUVsKFwicFwiKVxyXG4gICAgICBidWlsZGNvbnRhaW5lckVsLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcclxuICAgICAgcmVzdWx0cy5wdXNoKGJ1aWxkY29udGFpbmVyRWwpXHJcbiAgICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdW5kZWZpbmVkLCBgUGFyc2VyZXN1bHQ6JHtyZXN1bHRodHRwfWApO1xyXG4gICAgICByZXR1cm4gcmVzdWx0c1xyXG4gICAgfVxyXG4gIH1cclxuICBjYXRjaCAoZSkge1xyXG4gICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfRXJyb3IsIHVuZGVmaW5lZCwgYENhdGNoZXJyb3Igb2YgcmVtb3ZpbmcgY29udGV4dCAke3ZBUElfVVJMfWApXHJcbiAgICAvL2NvbnNvbGUubG9nKGBDYXRjaGVycm9yIG9mIHJlbW92aW5nIGNvbnRleHQgJHt2QVBJX1VSTH1gKVxyXG4gICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfRXJyb3IsIHVuZGVmaW5lZCwgZS50b1N0cmluZygpKVxyXG4gICAgLy9jb25zb2xlLmxvZyhlLnRvU3RyaW5nKCkpXHJcbiAgICB0aHJvdyBlXHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0c1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2xjb25zb2xlbG9nKERlYnVnVmFsdWU6IG51bWJlciwgc2x2aWV3PzogU2VtYUxvZ2ljVmlldyB8IHVuZGVmaW5lZCwgbWVzc2FnZT86IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKSB7XHJcbiAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdWYWx1ZSkge1xyXG4gICAgaWYgKHNsdmlldyAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgaWYgKHNsdmlldy5nZXRWaWV3VHlwZSgpID09IFNlbWFMb2dpY1ZpZXdUeXBlKSB7XHJcbiAgICAgICAgaWYgKHNsdmlldy5nZXREZWJ1Z0lubGluZSgpID09IHRydWUpIHtcclxuICAgICAgICAgIGxldCBsb2dNZXNzYWdlcyA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpXHJcbiAgICAgICAgICBzbHZpZXcuYXBwZW5kRGVidWdDb250ZW50KGxvZ01lc3NhZ2VzKVxyXG4gICAgICAgIH0gZWxzZSB7IGNvbnNvbGUubG9nKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuXHJcbiIsICJpbXBvcnQgeyBEZWJ1Z0xldk1hcCwgc2VtYUxvZ2ljQ29tbWFuZCwgUnVsZXNldHR5cGVzQ29tbWFuZHMsIFJzdHlwZXNfQVNQLCBSc3R5cGVzX1NlbWFsb2dpYyB9IGZyb20gXCJzcmMvY29uc3RcIlxyXG5pbXBvcnQgeyBEZWJ1Z0xldmVsIH0gZnJvbSBcIi4uL21haW5cIlxyXG5pbXBvcnQgeyBzbGNvbnNvbGVsb2cgfSBmcm9tIFwic3JjL3V0aWxzXCJcclxuXHJcblxyXG5leHBvcnQgdHlwZSBwYXJzZUNvbW1hbmQgPSB7XHJcbiAgICBvdXRwdXRmb3JtYXQ6IHN0cmluZyxcclxuICAgIGVuZHBvaW50OiBzdHJpbmcsXHJcbiAgICBwYXJhbTogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgcGFyc2VDb21tYW5kcyB7XHJcbiAgICBjb21tYW5kczogcGFyc2VDb21tYW5kW11cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFZpZXdVdGlscyB7XHJcblxyXG4gICAgcHVibGljIGdldENvbnRlbnQoY29udGVudEVsOiBIVE1MRWxlbWVudCwgb3V0UHV0Rm9ybWF0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBjb250ZW50OiBzdHJpbmdcclxuICAgICAgICBpZiAoY29udGVudEVsLnRleHRDb250ZW50ID09IG51bGwpIHsgY29udGVudCA9IFwiXCIgfSBlbHNlIHsgY29udGVudCA9IGNvbnRlbnRFbC50ZXh0Q29udGVudCB9XHJcbiAgICAgICAgY29udGVudCA9IHRoaXMuY2xlYW5Db250ZW50KGNvbnRlbnQsIG91dFB1dEZvcm1hdClcclxuICAgICAgICBjb250ZW50ID0gdGhpcy5jbGVhbkNvbW1hbmRzKGNvbnRlbnQpXHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnRcclxuICAgIH1cclxuXHJcbiAgICBjbGVhbkNvbnRlbnQoY29udGVudDogc3RyaW5nLCBvdXRQdXRGb3JtYXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgLy8gVGV4dG1hbmlwdWxhdGlvbiBmb3Igc3BlY2lhbCBvdXRjb21lc1xyXG4gICAgICAgIGlmIChvdXRQdXRGb3JtYXQgPT0gUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19BU1BdWzFdKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0SlNPTkJyYWNrZXQgPSBjb250ZW50LmluZGV4T2YoXCJ7XCIpXHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZyhmaXJzdEpTT05CcmFja2V0LCBjb250ZW50Lmxlbmd0aClcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG91dFB1dEZvcm1hdCA9PSBSdWxlc2V0dHlwZXNDb21tYW5kc1tSc3R5cGVzX1NlbWFsb2dpY11bMV0pIHtcclxuICAgICAgICAgICAgY29uc3QgaGVhZGVyU3RyaW5nID0gXCJTZW1hbG9naWMgT3V0cHV0XCJcclxuICAgICAgICAgICAgY29uc3QgZmlyc3RoZWFkZXJTdHJpbmcgPSBjb250ZW50LmluZGV4T2YoaGVhZGVyU3RyaW5nKVxyXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5zdWJzdHJpbmcoZmlyc3RoZWFkZXJTdHJpbmcgKyBoZWFkZXJTdHJpbmcubGVuZ3RoLCBjb250ZW50Lmxlbmd0aClcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNvbnRlbnRcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYW5Db21tYW5kcyhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBjb250ZW50Q2xlYW5lZDogc3RyaW5nW10gPSBbXVxyXG4gICAgICAgIGxldCBjb250ZW50QXJyYXkgPSBjb250ZW50LnNwbGl0KCdcXG4nKVxyXG5cclxuICAgICAgICBjb250ZW50QXJyYXkuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgICAgbGV0IHJvdyA9IGVsZW1lbnQudHJpbSgpXHJcbiAgICAgICAgICAgIHJvdyA9IHJvdy50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSwgdW5kZWZpbmVkLCBcIlJvdyBiZWZvcmU6XCIgKyByb3cpXHJcbiAgICAgICAgICAgIHJvdyA9IHJvdy5yZXBsYWNlQWxsKFwiIFwiLCBcIlwiKVxyXG4gICAgICAgICAgICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHksIHVuZGVmaW5lZCwgXCJSb3cgYWZ0ZXI6XCIgKyByb3cpXHJcbiAgICAgICAgICAgIGlmIChyb3cuaW5kZXhPZihzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQudG9Mb3dlckNhc2UoKSkgIT0gMCkgeyAvLyBObyBzdGFydGluZyBTZW1hTG9naWMtQ29tbWFuZFxyXG4gICAgICAgICAgICAgICAgY29udGVudENsZWFuZWQucHVzaChlbGVtZW50KVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gU3RhcnRpbmcgU2VtYUxvZ2ljQ29tbWFuZFxyXG4gICAgICAgICAgICAgICAgLy8gVGVzdCBmb3IgU2VtYUxvZ2ljQ29tbWFuZHMgd2hpY2ggc2hvdWxkIGJlIGludGVycHJldGF0ZWQgYnkgU2VtYUxvZ2ljU2VydmljZSAgICBcclxuICAgICAgICAgICAgICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSwgdW5kZWZpbmVkLCBcIkluZGV4IERlZmluZTpcIiArIHJvdy5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQuZGVmaW5lKS50b1N0cmluZygpKVxyXG4gICAgICAgICAgICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5LCB1bmRlZmluZWQsIFwiTGVuZ3RoIFN0YXJ0OlwiICsgc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0Lmxlbmd0aC50b1N0cmluZygpKVxyXG4gICAgICAgICAgICAgICAgaWYgKHJvdy5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQuZGVmaW5lKSA9PSBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudENsZWFuZWQucHVzaChlbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb250ZW50ID0gXCJcIlxyXG4gICAgICAgIGNvbnRlbnRDbGVhbmVkLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgZWxlbWVudCArIFwiXFxuXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY29udGVudFxyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBSZXF1ZXN0VXJsUGFyYW0sIHJlcXVlc3RVcmwgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgRGVidWdMZXZNYXAsIHNlbWFMb2dpY0NvbW1hbmQsIFJzdHlwZXNfQVNQLCBSdWxlc2V0dHlwZXNDb21tYW5kcywgc2xUZXh0cyB9IGZyb20gXCIuL2NvbnN0XCJcclxuaW1wb3J0IHsgU2VtYUxvZ2ljUGx1Z2luQ29tbSwgU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi4vbWFpblwiXHJcbmltcG9ydCB7IGdldEhvc3RBc3BQb3J0LCBzbGNvbnNvbGVsb2cgfSBmcm9tICcuL3V0aWxzJ1xyXG5pbXBvcnQgeyBwYXJzZUNvbW1hbmRzIH0gZnJvbSBcInNyYy92aWV3X3V0aWxzXCI7XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IEFTUFZpZXdUeXBlID0gJ1RyYW5zZmVyU2VydmljZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgQVNQVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcclxuXHJcbiAgbXlBY3Rpb246IEhUTUxFbGVtZW50XHJcbiAgTGFzdFJlcXVlc3RUaW1lOiBudW1iZXIgPSAwXHJcbiAgc2xDb21tOiBTZW1hTG9naWNQbHVnaW5Db21tXHJcblxyXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcclxuICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgdGhpcy5uYXZpZ2F0aW9uID0gdHJ1ZVxyXG4gICAgdGhpcy5zZXROZXdBU1BJbml0aWFsKHRydWUpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgc2V0Q29tbShjb21tOiBTZW1hTG9naWNQbHVnaW5Db21tKSB7XHJcbiAgICB0aGlzLnNsQ29tbSA9IGNvbW1cclxuICAgIC8vdGhpcy5zbENvbW0uc2V0U2xWaWV3KHRoaXMpXHJcbiAgICB0aGlzLnNldE5ld0FTUEluaXRpYWwoZmFsc2UpXHJcbiAgfVxyXG5cclxuICBnZXRWaWV3VHlwZSgpIHtcclxuICAgIHJldHVybiBBU1BWaWV3VHlwZTtcclxuICB9XHJcblxyXG4gIGdldERpc3BsYXlUZXh0KCkge1xyXG4gICAgcmV0dXJuIEFTUFZpZXdUeXBlO1xyXG4gIH1cclxuXHJcbiAgb25sb2FkKCk6IHZvaWQge1xyXG4gICAgdGhpcy5uYXZpZ2F0aW9uID0gdHJ1ZVxyXG4gICAgdGhpcy5jb250ZW50RWwuY29udGVudEVkaXRhYmxlID0gJ3RydWUnXHJcbiAgfVxyXG5cclxuICBjaGVja0FTUENvbnRhaW5lckNvbnRlbnQoKTogYm9vbGVhbiB7XHJcbiAgICBpZiAodGhpcy5jb250YWluZXJFbC5jaGlsZHJlbiAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgaWYgKHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQ/LnN1YnN0cmluZygwLCBzbFRleHRzWydIZWFkZXJUViddLmxlbmd0aCkgPT0gc2xUZXh0c1snSGVhZGVyVFYnXSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlQVNQQ29udGFpbmVyQ29udGVudCgpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAodGhpcy5jb250YWluZXJFbC5jaGlsZHJlbltpXS5ub2RlTmFtZSA9PSBcInBcIikge1xyXG4gICAgICAgICAgd2hpbGUgKHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5baV0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5baV0uZW1wdHlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXROZXdBU1BJbml0aWFsKG5vdzogYm9vbGVhbikge1xyXG4gICAgLy9jb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbFxyXG4gICAgLy9jb250YWluZXIuZW1wdHkoKVxyXG4gICAgLy9jb250YWluZXIuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiVHJhbnNmZXIuVmlld1wiIH0pO1xyXG4gICAgLy9jb250YWluZXIuY3JlYXRlRWwoXCJwXCIpXHJcbiAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jb250ZW50RWxcclxuICAgIGlmIChub3cgfHwgIXRoaXMuY2hlY2tBU1BDb250YWluZXJDb250ZW50KCkpIHtcclxuICAgICAgY29udGFpbmVyLmVtcHR5KClcclxuICAgICAgLy9jb250YWluZXIuY29udGVudEVkaXRhYmxlID0gJ3RydWUnXHJcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogc2xUZXh0c1snSGVhZGVyVFYnXSB9KTtcclxuICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKFwicFwiKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy90aGlzLmRlbGV0ZUFTUENvbnRhaW5lckNvbnRlbnQoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG5cclxuICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAvL3RoaXMuc2V0TmV3QVNQSW5pdGlhbCgpXHJcbiAgfVxyXG5cclxuICBhc3luYyBvbkNsb3NlKCkge1xyXG4gICAgLy8gTm90aGluZyB0byBjbGVhbiB1cC5cclxuICB9XHJcblxyXG4gIHNob3dFcnJvcihmcmFnbWVudDogRG9jdW1lbnRGcmFnbWVudCkge1xyXG4gICAgLy8gICB0aGlzLnNldEluaXRpYWwocnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19TZW1hbG9naWNdWzFdKVxyXG4gICAgdGhpcy5jb250ZW50RWwuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpXHJcbiAgfVxyXG4gIG9udW5sb2FkKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuc2xDb21tICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLnNsQ29tbS5zbFBsdWdpbi5hY3RpdmF0ZWQgPSBmYWxzZVxyXG4gICAgICB0aGlzLnNsQ29tbS5zbFBsdWdpbi5teVN0YXR1cy5zZXRUZXh0KCdUcmFuc2ZlciBpcyBvZmYnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNyZWF0ZVJlcXVlc3QoY29tbTogU2VtYUxvZ2ljUGx1Z2luQ29tbSwgc2V0dGluZ3M6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzLCBhcGlVcmw6IHN0cmluZywgbWV0aG9kOiBzdHJpbmcsIGNvbnRlbnRUeXBlOiBzdHJpbmcsIHdpdGhCYXNpY0F1dGg6IGJvb2xlYW4sIGJvZHk/OiBzdHJpbmcpOiBSZXF1ZXN0VXJsUGFyYW0ge1xyXG4gICAgbGV0IHJlcXVlc3Q6IFJlcXVlc3RVcmxQYXJhbVxyXG4gICAgdHlwZSByZXF1ZXN0SGVhZGVyID0gUmVjb3JkPHN0cmluZywgc3RyaW5nPlxyXG4gICAgbGV0IG15SGVhZGVyOiByZXF1ZXN0SGVhZGVyID0ge31cclxuXHJcbiAgICBjb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlLnRvTG93ZXJDYXNlKClcclxuICAgIG1ldGhvZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpXHJcblxyXG4gICAgc3dpdGNoIChjb250ZW50VHlwZS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgIGNhc2UgKFwianNvblwiKToge1xyXG4gICAgICAgIG15SGVhZGVyW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIChcImFzcFwiKToge1xyXG4gICAgICAgIG15SGVhZGVyW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIChcImFzcC5qc29uXCIpOiB7XHJcbiAgICAgICAgbXlIZWFkZXJbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgKFwidGV4dFwiKToge1xyXG4gICAgICAgIG15SGVhZGVyW1wiQ29udGVudC1UeXBlXCJdID0gXCJ0ZXh0L3BsYWluXCJcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICBteUhlYWRlcltcIkNvbnRlbnQtVHlwZVwiXSA9IGNvbnRlbnRUeXBlXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh3aXRoQmFzaWNBdXRoKSB7XHJcbiAgICAgIG15SGVhZGVyW1wiQXV0aG9yaXphdGlvblwiXSA9IFwiQmFzaWMgXCIgKyBidG9hKHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15VXNlciArIFwiOlwiICsgc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlQYXNzd29yZClcclxuICAgIH1cclxuXHJcbiAgICByZXF1ZXN0ID0ge1xyXG4gICAgICB1cmw6IGFwaVVybCxcclxuICAgICAgbWV0aG9kOiBtZXRob2QsXHJcbiAgICAgIGhlYWRlcnM6IG15SGVhZGVyLFxyXG4gICAgICBib2R5OiBib2R5XHJcbiAgICB9XHJcbiAgICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQsIHRoaXMuc2xDb21tLnNsdmlldywgcmVxdWVzdClcclxuICAgIHJldHVybiByZXF1ZXN0XHJcbiAgfVxyXG5cclxuICBnZXRBU1BDb21tYW5kcyhzbENvbW06IFNlbWFMb2dpY1BsdWdpbkNvbW0sIHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyk6IHBhcnNlQ29tbWFuZHMge1xyXG4gICAgbGV0IHBhcnNlQ29tbWFuZHM6IHBhcnNlQ29tbWFuZHNcclxuICAgIHBhcnNlQ29tbWFuZHMgPSB7XHJcbiAgICAgIGNvbW1hbmRzOiBbe1xyXG4gICAgICAgIG91dHB1dGZvcm1hdDogXCJBU1AuanNvblwiLFxyXG4gICAgICAgIGVuZHBvaW50OiBzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teUFzcEVuZHBvaW50LFxyXG4gICAgICAgIHBhcmFtOiBcIlwiXHJcbiAgICAgIH1dXHJcbiAgICB9XHJcbiAgICBsZXQgcGFyc2VJbml0aWFsID0gdHJ1ZVxyXG5cclxuICAgIGlmIChzbENvbW0uc2x2aWV3ICE9IG51bGwpIHtcclxuXHJcbiAgICAgIGNvbnN0IGVkaXRvcnRleHQgPSBzbENvbW0uc2xVc2VkTURWaWV3LmVkaXRvci5nZXRSYW5nZSh7IGxpbmU6IDAsIGNoOiAwIH0sIHsgbGluZTogc2xDb21tLnNsVXNlZE1EVmlldy5lZGl0b3IubGFzdExpbmUoKSArIDEsIGNoOiBzbENvbW0uc2xVc2VkTURWaWV3LmVkaXRvci5sYXN0TGluZS5sZW5ndGggfSlcclxuICAgICAgY29uc3Qgcm93cyA9IGVkaXRvcnRleHQuc3BsaXQoXCJcXG5cIikuZmlsdGVyKChyb3cpID0+IHJvdy5sZW5ndGggPiAwKTtcclxuXHJcbiAgICAgIGxldCBteVN0clJlc3VsdDogc3RyaW5nO1xyXG4gICAgICBsZXQgdHJhbnNmZXJTdHJpbmc6IHN0cmluZztcclxuICAgICAgbGV0IGVuZHBvaW50U3RyaW5nOiBzdHJpbmcgPSAnJztcclxuICAgICAgbGV0IHBhcmFtU3RyaW5nOiBzdHJpbmc7XHJcblxyXG4gICAgICByb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgICBpZiAocm93LnN1YnN0cmluZygwLCBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQubGVuZ3RoKSA9PSBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQpIHtcclxuICAgICAgICAgIGNvbnN0IHRyYW5zZmVyID0gcm93LmluZGV4T2Yoc2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlcilcclxuICAgICAgICAgIGNvbnN0IGVuZHBvaW50ID0gcm93LmluZGV4T2Yoc2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlckVuZHBvaW50KVxyXG4gICAgICAgICAgbGV0IHBhcmFtID0gcm93LmluZGV4T2Yoc2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlclBhcmFtKVxyXG4gICAgICAgICAgY29uc3QgZW5kQ29tbWFuZCA9IHJvdy5sYXN0SW5kZXhPZihzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfZW5kKVxyXG4gICAgICAgICAgaWYgKHBhcmFtIDwgMCkgeyBwYXJhbSA9IGVuZENvbW1hbmQgfVxyXG5cclxuICAgICAgICAgIGlmICh0cmFuc2ZlciA8PSAwKSB7IH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRyYW5zZmVyU3RyaW5nID0gcm93LnN1YnN0cmluZyh0cmFuc2ZlciArIHNlbWFMb2dpY0NvbW1hbmQudHJhbnNmZXIubGVuZ3RoICsgMSwgZW5kcG9pbnQpXHJcbiAgICAgICAgICAgIHRyYW5zZmVyU3RyaW5nID0gdHJhbnNmZXJTdHJpbmcudHJpbUVuZCgpXHJcbiAgICAgICAgICAgIGlmIChlbmRwb2ludCA+IDApIHtcclxuICAgICAgICAgICAgICBlbmRwb2ludFN0cmluZyA9IHJvdy5zdWJzdHJpbmcoZW5kcG9pbnQgKyAxICsgc2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlckVuZHBvaW50Lmxlbmd0aCwgcGFyYW0pXHJcbiAgICAgICAgICAgICAgZW5kcG9pbnRTdHJpbmcgPSBlbmRwb2ludFN0cmluZy50cmltRW5kKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyYW0gPiAwICYmIHBhcmFtICE9IGVuZENvbW1hbmQpIHtcclxuICAgICAgICAgICAgICBwYXJhbVN0cmluZyA9IHJvdy5zdWJzdHJpbmcocGFyYW0gKyAxICsgc2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlclBhcmFtLmxlbmd0aCwgZW5kQ29tbWFuZClcclxuICAgICAgICAgICAgICBwYXJhbVN0cmluZyA9IHBhcmFtU3RyaW5nLnRyaW1FbmQoKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgcGFyYW1QYXJzZWRDb21tYW5kID0ge1xyXG4gICAgICAgICAgICAgIG91dHB1dGZvcm1hdDogdHJhbnNmZXJTdHJpbmcsXHJcbiAgICAgICAgICAgICAgZW5kcG9pbnQ6IGVuZHBvaW50U3RyaW5nLFxyXG4gICAgICAgICAgICAgIHBhcmFtOiBwYXJhbVN0cmluZ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJzZUluaXRpYWwpIHtcclxuICAgICAgICAgICAgICBwYXJzZUluaXRpYWwgPSBmYWxzZVxyXG4gICAgICAgICAgICAgIHBhcnNlQ29tbWFuZHMuY29tbWFuZHNbMF0gPSBwYXJhbVBhcnNlZENvbW1hbmRcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBwYXJzZUNvbW1hbmRzLmNvbW1hbmRzLnB1c2gocGFyYW1QYXJzZWRDb21tYW5kKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcnNlQ29tbWFuZHNcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBhc3BQYXJzZShzbENvbW06IFNlbWFMb2dpY1BsdWdpbkNvbW0sIHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncywgYXNwSnNvblBhcnNlZFNlbWFMb2dpYzogc3RyaW5nLCBSZXF1ZXN0VGltZTogTnVtYmVyKSB7XHJcbiAgICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldiwgdGhpcy5zbENvbW0uc2x2aWV3LCAnU3RhcnQgVHJhbnNmZXJfUGFyc2UnKVxyXG4gICAgLy90aGlzLnNldE5ld0FTUEluaXRpYWwoKVxyXG5cclxuICAgIGxldCB2QVBJX1VSTDogc3RyaW5nID0gXCJcIlxyXG4gICAgY29uc3QgcGFyc2VDb21tYW5kcyA9IHRoaXMuZ2V0QVNQQ29tbWFuZHMoc2xDb21tLCBzZXR0aW5ncylcclxuXHJcbiAgICBwYXJzZUNvbW1hbmRzLmNvbW1hbmRzLmZvckVhY2gocGFyc2VDb21tYW5kcyA9PiB7XHJcblxyXG4gICAgICBpZiAocGFyc2VDb21tYW5kcy5vdXRwdXRmb3JtYXQgPT0gUnVsZXNldHR5cGVzQ29tbWFuZHNbUnN0eXBlc19BU1BdWzFdIHx8IHBhcnNlQ29tbWFuZHMub3V0cHV0Zm9ybWF0ID09IFJ1bGVzZXR0eXBlc0NvbW1hbmRzW1JzdHlwZXNfQVNQXVswXSkge1xyXG4gICAgICAgIHZBUElfVVJMID0gZ2V0SG9zdEFzcFBvcnQoc2V0dGluZ3MsIHBhcnNlQ29tbWFuZHMpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdkFQSV9VUkwgPSBwYXJzZUNvbW1hbmRzLmVuZHBvaW50XHJcbiAgICAgICAgaWYgKHBhcnNlQ29tbWFuZHMucGFyYW0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICBpZiAocGFyc2VDb21tYW5kcy5wYXJhbS5sZW5ndGggPiAwKSB7IHZBUElfVVJMID0gdkFQSV9VUkwgKyBcIj9cIiArIHBhcnNlQ29tbWFuZHMucGFyYW0gfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldiwgdGhpcy5zbENvbW0uc2x2aWV3LCBcIlRyYW5zZmVyIFVSTDogXCIsIHZBUElfVVJMKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBsZXQgb3B0aW9uc1BhcnNlID0gdGhpcy5jcmVhdGVSZXF1ZXN0KHRoaXMuc2xDb21tLCBzZXR0aW5ncywgdkFQSV9VUkwsICdQT1NUJywgJ2pzb24nLCB0cnVlLCBhc3BKc29uUGFyc2VkU2VtYUxvZ2ljKVxyXG4gICAgICB0aGlzLlJlc3Aob3B0aW9uc1BhcnNlLCB2QVBJX1VSTCwgUmVxdWVzdFRpbWUpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIFJlc3Aob3B0aW9uc1BhcnNlOiBSZXF1ZXN0VXJsUGFyYW0sIHZBUElfVVJMOiBzdHJpbmcsIFJlcXVlc3RUaW1lOiBOdW1iZXIpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdGhpcy5zbENvbW0uc2x2aWV3LCBcIkFTUDogd2FudCB0byBwYXJzZSBcIiwgb3B0aW9uc1BhcnNlKVxyXG4gICAgICBjb25zdCByZXNwb25zZVBhcnNlID0gYXdhaXQgcmVxdWVzdFVybChvcHRpb25zUGFyc2UpXHJcbiAgICAgIGNvbnN0IHJlbUpzb24gPSByZXNwb25zZVBhcnNlLnRleHQ7XHJcbiAgICAgIHNsY29uc29sZWxvZyhEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCwgdGhpcy5zbENvbW0uc2x2aWV3LCBcIkFTUDogUGFyc2Ugd2l0aCBodHRwLXN0YXR1cyBcIiArIHJlc3BvbnNlUGFyc2Uuc3RhdHVzLnRvU3RyaW5nKCkpXHJcbiAgICAgIGlmIChyZXNwb25zZVBhcnNlLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICBpZiAodGhpcy5zbENvbW0uc2xhc3B2aWV3Lkxhc3RSZXF1ZXN0VGltZSA9PSBSZXF1ZXN0VGltZSkge1xyXG4gICAgICAgICAgbGV0IHJlc3VsdGh0dHAgPSByZXNwb25zZVBhcnNlLnRleHQ7XHJcbiAgICAgICAgICB0aGlzLnNldE5ld0FTUEluaXRpYWwodHJ1ZSlcclxuICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKFwiYnJcIilcclxuICAgICAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKFwic3BhblwiLCBcIi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKVxyXG4gICAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJiclwiKVxyXG4gICAgICAgICAgLy8gdGVtcG9yYXJ5IHByZXR0eSBwcmludCBmb3Igbm90IGZvcm1hdHRlZCBqc29uLW91dHB1dCAtIHdpbGwgYmUgY2hhbmdlZCBpbiByZWwgMi54XHJcbiAgICAgICAgICByZXN1bHRodHRwID0gcmVzdWx0aHR0cC5yZXBsYWNlQWxsKFwiW1wiLCBcIltcXG5cIilcclxuICAgICAgICAgIHJlc3VsdGh0dHAgPSByZXN1bHRodHRwLnJlcGxhY2VBbGwoXCJdXCIsIFwiXFxuXVwiKVxyXG4gICAgICAgICAgcmVzdWx0aHR0cCA9IHJlc3VsdGh0dHAucmVwbGFjZUFsbChcIixcIiwgXCIsXFxuXCIpXHJcbiAgICAgICAgICBsZXQgcmVzdWx0aHR0cEFycmF5ID0gcmVzdWx0aHR0cC5zcGxpdCgnXFxuJylcclxuICAgICAgICAgIHJlc3VsdGh0dHBBcnJheS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5hcHBlbmQoZWxlbWVudClcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJiclwiKVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHksIHRoaXMuc2xDb21tLnNsdmlldywgYEFTUC1QYXJzZXJlc3VsdDoke3Jlc3VsdGh0dHB9YClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ3VycmVudF9EZXYsIHRoaXMuc2xDb21tLnNsdmlldywgYE9sZF9BU1AtUmVxdWVzdDogJHtSZXF1ZXN0VGltZX0gdnMgJHt0aGlzLnNsQ29tbS5zbGFzcHZpZXcuTGFzdFJlcXVlc3RUaW1lfWApXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICBzbGNvbnNvbGVsb2coRGVidWdMZXZNYXAuRGVidWdMZXZlbF9FcnJvciwgdGhpcy5zbENvbW0uc2x2aWV3LCBgQ2F0Y2hlcnJvciBvZiByZW1vdmluZyBjb250ZXh0ICR7dkFQSV9VUkx9YClcclxuICAgICAgc2xjb25zb2xlbG9nKERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfRXJyb3IsIHRoaXMuc2xDb21tLnNsdmlldywgZS50b1N0cmluZygpKVxyXG5cclxuICAgICAgbGV0IHRleHQgPSBuZXcgRG9jdW1lbnRGcmFnbWVudCgpXHJcbiAgICAgIHRleHQuY3JlYXRlRWwoXCJwXCIpXHJcbiAgICAgIGxldCB0ZXh0ZnJhZ21lbnQgPSAobmV3IFJhbmdlKCkpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChlLnRvU3RyaW5nKCkpO1xyXG4gICAgICB0ZXh0LmFwcGVuZENoaWxkKHRleHRmcmFnbWVudClcclxuXHJcbiAgICAgIHRleHQuY3JlYXRlRWwoXCJwXCIpXHJcbiAgICAgIHRleHRmcmFnbWVudCA9IChuZXcgUmFuZ2UoKSkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KFwiU2VlIGZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3ItY29kZSBvZiBodHRwOiBodHRwczovL2RlLndpa2lwZWRpYS5vcmcvd2lraS9IVFRQLVN0YXR1c2NvZGUgXCIpO1xyXG4gICAgICB0ZXh0LmFwcGVuZCh0ZXh0ZnJhZ21lbnQpXHJcblxyXG4gICAgICB0ZXh0LmNyZWF0ZUVsKFwicFwiKVxyXG4gICAgICB0ZXh0ZnJhZ21lbnQgPSAobmV3IFJhbmdlKCkpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChvcHRpb25zUGFyc2UudXJsKTtcclxuICAgICAgdGV4dC5hcHBlbmQodGV4dGZyYWdtZW50KVxyXG5cclxuICAgICAgdGV4dC5jcmVhdGVFbChcInBcIilcclxuICAgICAgdGV4dGZyYWdtZW50ID0gKG5ldyBSYW5nZSgpKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoU3RyaW5nKG9wdGlvbnNQYXJzZS5ib2R5KSk7XHJcbiAgICAgIHRleHQuYXBwZW5kKHRleHRmcmFnbWVudClcclxuICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKVxyXG4gICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcImJyXCIpXHJcbiAgICAgIHRoaXMuY29udGVudEVsLmFwcGVuZCh0ZXh0KVxyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSw2QkFBQUE7QUFBQSxFQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUMsbUJBQ007OztBQ0ROLElBQUFDLG1CQUF5Rzs7O0FDQ2xHLElBQU0sZUFBZTtBQUFBLEVBQzNCLE1BQU07QUFBQSxFQUNOLE9BQU87QUFBQSxFQUNQLFVBQVU7QUFBQSxFQUNWLE1BQU07QUFBQSxFQUNOLGFBQWE7QUFBQSxFQUNiLE9BQU87QUFBQSxFQUNQLFNBQVM7QUFBQSxFQUNULGFBQWE7QUFBQSxFQUNiLGVBQWU7QUFBQSxFQUNmLFFBQVE7QUFBQSxFQUNSLEtBQUs7QUFBQSxFQUNMLGFBQWE7QUFBQSxFQUNiLHdCQUF3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V0FBVyxXQUFXLE1BQU0sS0FBSyxTQUFTLGFBQWEsS0FBSyxTQUFTLFdBQVcsWUFBWTtBQUFBLFFBQ3ZLO0FBQUEsTUFDRDtBQUFBLElBQ0QsT0FBTztBQUNOLHFCQUFlO0FBQUEsUUFDZCxLQUFLO0FBQUEsUUFDTCxRQUFRO0FBQUEsUUFDUixTQUFTO0FBQUEsVUFDUixnQkFBZ0I7QUFBQSxRQUNqQjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBRUEsaUJBQWEsWUFBWSxzQkFBc0IsS0FBSyxPQUFPLFFBQVEsWUFBWTtBQUMvRSxRQUFJO0FBQ0gsWUFBTSxnQkFBZ0IsVUFBTSw2QkFBVyxZQUFZO0FBQ25ELG1CQUFhLFlBQVksd0JBQXdCLEtBQUssT0FBTyxRQUFRLHFDQUFxQyxjQUFjLE9BQU8sU0FBUyxHQUFHO0FBQUEsSUFDNUksU0FDTyxHQUFQO0FBQ0MsbUJBQWEsWUFBWSxrQkFBa0IsS0FBSyxPQUFPLFFBQVEsdUJBQXVCLGdCQUFnQjtBQUN0RyxtQkFBYSxZQUFZLGtCQUFrQixLQUFLLE9BQU8sUUFBUSxFQUFFLFNBQVMsQ0FBQztBQUFBLElBQzVFO0FBQUEsRUFDRDtBQUVEOyIsCiAgIm5hbWVzIjogWyJTZW1hTG9naWNQbHVnaW5Db21tIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInJvdyIsICJTZW1hTG9naWNWaWV3IiwgImltcG9ydF9vYnNpZGlhbiIsICJwYXJzZUNvbW1hbmRzIiwgImltcG9ydF92aWV3IiwgImFwcCIsICJTZW1hTG9naWNQbHVnaW5Db21tIiwgInZhbHVlIiwgImxlYWYiLCAiU2VtYUxvZ2ljVmlldyJdCn0K
