/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  DebugLevel: () => DebugLevel,
  Default_profile: () => Default_profile,
  SemaLogicPluginComm: () => SemaLogicPluginComm3,
  default: () => SemaLogicPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// view.ts
var import_obsidian3 = require("obsidian");

// const.ts
var API_Defaults = {
  http: "http://",
  https: "https://",
  Base_URL: "localhost",
  Port: "28000",
  rules_parse: "/rules/parse",
  reset: "/reset",
  Version: "/APIVersion",
  PostDialect: "/dialect/define",
  RemoveDialect: "/dialect/remove",
  GetAPI: "/APIVersion",
  SID: "12345678",
  ShowContext: true,
  useUserPasswortforHTTP: false,
  HttpUser: "User",
  HttpPassword: "Password",
  viewheader: "SemaLogicView",
  AspUrl: "ASP-Service-URL.com/",
  AspEndpoint: "/plans/count"
};
var Value_Defaults = {
  updateInterval: 500
};
var semaLogicCommand = {
  command_start: "SemaLogic(",
  command_end: ")",
  showHelp: "show help",
  showVersion: "show version",
  getDialectwTemplate: "template",
  useDialect: "use ???dialectName???",
  define: "define",
  showParse: "show as",
  showFilter: "for",
  transfer: "transfer",
  transferEndpoint: "to endpoint",
  transferParam: "with param"
};
var semaLogicHelp = [
  [semaLogicCommand.command_start + "???" + semaLogicCommand.command_end, "You can define what SemaLogic should do for you by replacing ??? with one of the following SemaLogic commands:"],
  [semaLogicCommand.command_start + semaLogicCommand.showHelp + semaLogicCommand.command_end, "Show this help information"],
  [semaLogicCommand.command_start + semaLogicCommand.showVersion + semaLogicCommand.command_end, "Show the version of the SemaLogic-Service"],
  [semaLogicCommand.command_start + semaLogicCommand.define + semaLogicCommand.command_end, "After this inlinecommand and a space line comes e.g. a table that should be interpreted by SemaLogic (table, NTable, ZTable) with optional headerinterpretation- Expected format:\n(|Symbol||Level(n+1)|\n|---|---|\n|Level(1)|Level(n)|Value|)"],
  [`${semaLogicCommand.command_start + semaLogicCommand.showParse} %1 ${semaLogicCommand.showFilter} %2 ${semaLogicCommand.command_end}`, "show as - shows an output directly to the reading view ( with %1 you have to set the output type: 1|1 {picture, syemalogic, asp} and with %2 you could filter for an symbol by symbolname)"],
  [`${semaLogicCommand.command_start + semaLogicCommand.transfer} %1 ${semaLogicCommand.transferEndpoint} %2 ${semaLogicCommand.transferParam} %3 ${semaLogicCommand.command_end}`, "transfer - shows an (currently only) asp output directly to the asp.view from SemaLogicView ( with %1 you have to set the output type: 1|1 {asp} and with %2 you could set the endpoint and wuth %3 you could set queryparameter)"]
];
var rstypes_Semalogic = 0;
var rstypes_Picture = 3;
var rstypes_ASP = 6;
var rstypes_SemanticTree = 8;
var rulesettypesCommands = [
  ["SemaLogic", "SemaLogic"],
  ["technical", "SemaLogic"],
  ["semalogic", "SemaLogic"],
  ["Picture (SVG)", "SVG"],
  ["picture", "SVG"],
  ["SVG", "SVG"],
  ["ASP", "ASP.json"],
  ["asp", "ASP.json"],
  ["SemanticTree", "SemanticTree"]
];
var DebugLevelNames = [
  "DebugLevel_Off",
  "DebugLevel_Current_Dev",
  "DebugLevel_Important",
  "DebugLevel_Informative",
  "DebugLevel_Chatty",
  "DebugLevel_All"
];
var DebugLevMap = {
  "DebugLevel_Off": 0,
  "DebugLevel_Current_Dev": 1,
  "DebugLevel_Important": 2,
  "DebugLevel_Informative": 3,
  "DebugLevel_Chatty": 4,
  "DebugLevel_All": 5
};
var slTexts = {
  "HeaderSL": "SemaLogic.View"
};

// utils.ts
var import_obsidian = require("obsidian");
var import_obsidian2 = require("obsidian");
var searchForSemaLogicCommands = (el) => {
  for (let i = 0; i < el.childNodes.length; i++) {
    const child = el.childNodes[i];
    if (isSemaLogicCommand(child)) {
      return true;
    }
  }
  return false;
};
var isSemaLogicCommand = (n) => {
  var _a;
  return n.nodeType === Node.TEXT_NODE && Boolean((_a = n.textContent) == null ? void 0 : _a.startsWith(semaLogicCommand.command_start));
};
var replaceWithEmptyNode = (containerEl) => {
  const results = [];
  return results;
};
async function replaceWithCommandNode(containerEl, settings) {
  var _a, _b;
  let results = [];
  let found = false;
  let semaLogicCom = (_b = containerEl.textContent) == null ? void 0 : _b.substring(semaLogicCommand.command_start.length, (_a = containerEl.textContent) == null ? void 0 : _a.indexOf(semaLogicCommand.command_end)).toLowerCase();
  if (!found && (semaLogicCom == null ? void 0 : semaLogicCom.toString().substring(0, semaLogicCommand.showHelp.length)) == semaLogicCommand.showHelp) {
    results = await showHelp();
    found = true;
  }
  if (!found && (semaLogicCom == null ? void 0 : semaLogicCom.toString().substring(0, semaLogicCommand.showVersion.length)) == semaLogicCommand.showVersion) {
    results = await showVersion(settings);
    found = true;
  }
  if (!found && (semaLogicCom == null ? void 0 : semaLogicCom.toString().substring(0, semaLogicCommand.showParse.length)) == semaLogicCommand.showParse) {
    let rulesettype = "";
    let filter = "";
    for (let rule in rulesettypesCommands) {
      if (semaLogicCom.contains(rulesettypesCommands[rule][0])) {
        rulesettype = rulesettypesCommands[rule][1];
        const findfor = semaLogicCom.indexOf(semaLogicCommand.showFilter);
        if (findfor > 0) {
          let filter2 = semaLogicCom.substring(findfor + semaLogicCommand.showFilter.length);
          filter2 = filter2.trim();
        }
        break;
      }
    }
    if (!found) {
      results = await showHelp();
      found = true;
    }
    if (rulesettype != "") {
      results = await showParseWithFilter(filter, rulesettype, settings);
    }
    found = true;
  }
  if (!found) {
    results = replaceWithEmptyNode(containerEl);
  }
  return results;
}
var SemaLogicRenderedElement = class extends import_obsidian.MarkdownRenderChild {
  constructor({ containerEl, set }) {
    super(containerEl);
    this.mysettings = set;
  }
  async onload() {
    this.containerEl.setChildrenInPlace(
      await replaceWithCommandNode(this.containerEl, this.mysettings)
    );
  }
};
async function showHelp() {
  let results = [];
  let buildcontainerEl;
  if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
    console.log(semaLogicCommand.showHelp);
  }
  buildcontainerEl = createEl("table");
  let body = buildcontainerEl.createEl("body");
  let row = body.createEl("tr");
  row.createEl("td", { text: "SemaLogic-Commands-Help" });
  row.createEl("td", { text: "Description" });
  for (let i = 0; i < semaLogicHelp.length; i++) {
    const row2 = body.createEl("tr");
    row2.createEl("td", { text: semaLogicHelp[i][0] });
    row2.createEl("td", { text: semaLogicHelp[i][1] });
  }
  results.push(buildcontainerEl);
  return results;
}
async function showVersion(settings) {
  let results = [];
  let buildcontainerEl;
  let versiontext = "";
  if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
    console.log(semaLogicCommand.showVersion);
  }
  const version = await semaLogicGetVersion(settings).then(function(resultBuffer) {
    versiontext = resultBuffer;
  }).catch(
    function(resultBuffer) {
      versiontext = resultBuffer;
    }
  );
  if (DebugLevel >= DebugLevMap.DebugLevel_High) {
    console.log(`JSON-Text in Processor:${versiontext}`);
  }
  buildcontainerEl = createEl("table");
  const table = buildcontainerEl.createEl("table");
  const body = buildcontainerEl.createEl("body");
  const row = body.createEl("tr");
  row.createEl("td", { text: versiontext });
  results.push(buildcontainerEl);
  return results;
}
function sethttps(https) {
  let str;
  if (https) {
    str = API_Defaults.https;
  } else {
    str = API_Defaults.http;
  }
  return str;
}
function getHostPort(settings) {
  let adress = sethttps(settings.mySLSettings[settings.mySetting].myUseHttps);
  adress = adress + settings.mySLSettings[settings.mySetting].myBaseURL;
  if (settings.mySLSettings[settings.mySetting].myPort != "") {
    adress = adress + ":" + settings.mySLSettings[settings.mySetting].myPort;
  }
  if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
    console.log("getting SemaLogic-Adress: " + adress);
  }
  return adress;
}
function getHostAspPort(settings, parsedCommands) {
  let adress;
  if (parsedCommands.outputformat == rulesettypesCommands[rstypes_ASP][1]) {
    adress = sethttps(settings.mySLSettings[settings.mySetting].myUseHttps);
    adress = adress + settings.mySLSettings[settings.mySetting].myAspUrl;
    if (parsedCommands.endpoint != void 0) {
      if (parsedCommands.endpoint.indexOf("http") >= 0) {
        adress = parsedCommands.endpoint;
      } else {
        adress = adress + "/" + parsedCommands.endpoint;
      }
    }
  } else {
    adress = parsedCommands.endpoint;
  }
  if (parsedCommands.param != void 0) {
    adress = adress + "?" + parsedCommands.param;
  }
  if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
    console.log("getting asp-Adress: " + adress);
  }
  return adress;
}
async function semaLogicGetVersion(settings) {
  if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
    console.log("Start semaLogicGetVersion");
  }
  const myVersion = '{"version":"0","versiontext":"Text"}';
  let myJson = JSON.parse(myVersion);
  let jsonVersion = "";
  let vAPI_URL_Version = getHostPort(settings) + API_Defaults.Version;
  if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
    console.log(vAPI_URL_Version);
  }
  let options;
  if (settings.mySLSettings[settings.mySetting].myUseHttps && settings.mySLSettings[settings.mySetting].myUser != "") {
    options = {
      url: vAPI_URL_Version,
      method: "GET",
      headers: {
        "content-type": "application/json",
        "Authorization": "Basic " + btoa(settings.mySLSettings[settings.mySetting].myUser + ":" + settings.mySLSettings[settings.mySetting].myPassword)
      }
    };
  } else {
    options = {
      url: vAPI_URL_Version,
      method: "GET"
    };
  }
  let response;
  try {
    response = await (0, import_obsidian2.requestUrl)(options);
    myJson = JSON.parse(response.text);
    if (DebugLevel >= DebugLevMap.DebugLevel_All) {
      console.log(myJson.version);
    }
    jsonVersion = myJson.version;
    if (DebugLevel >= DebugLevMap.DebugLevel_All) {
      console.log(`JSON-Text in Request:${jsonVersion}`);
    }
    return jsonVersion;
  } catch (e) {
    console.log("Error: Catch of APIVersion" + e.toString());
    throw new Error();
  }
}
async function semaLogicPing(settings, lastUpdate) {
  let starttime = Date.now();
  if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
    console.log("GetVersionPing at ", Date.now(), "  for ", getHostPort(settings));
  }
  await semaLogicGetVersion(settings).then(function(resultBuffer) {
    if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
      console.log("SemaLogic GetVersionPing started at:", starttime, " Endtime: ", Date.now());
    }
  }).catch(
    function(e) {
      if (starttime < lastUpdate) {
        if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
          console.log(`There is no connection to SemaLogicService APIVersion`);
          console.log(getHostPort(settings));
        }
        app.workspace.iterateAllLeaves((leaf) => {
          let slView = leaf.view.getViewType();
          if (slView == SemaLogicViewType) {
            const container = leaf.view.containerEl.children[1];
            container.empty();
            container.createEl("h3", { text: "SemaLogic_Error" });
            container.createEl("b", { text: "There is no connection to SemaLogicService -> APIVersion" });
            container.createEl("b", { text: getHostPort(settings) });
            return false;
          }
        });
      } else {
        if (DebugLevel >= DebugLevMap.DebugLevel_High) {
          console.log("SemaLogic GetVersionPing failed and not used started:", starttime, " Endtime: ", Date.now());
        }
      }
    }
  );
  return true;
}
async function showParseWithFilter(filter, rulessettype, settings) {
  let results = [];
  let buildcontainerEl;
  let vAPI_URL = getHostPort(settings) + API_Defaults.rules_parse + "?sid=" + settings.mySLSettings[settings.mySetting].mySID;
  if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
    console.log(vAPI_URL);
  }
  ;
  let bodytext = "";
  let activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
  if (activeView == void 0) {
    if (DebugLevel >= DebugLevMap.DebugLevel_High) {
      console.log("Do not find an active view");
    }
    return results;
  }
  let dialectID = "default";
  let codeblock = false;
  let newCodeblock = false;
  if (activeView != null) {
    for (let i = 0; i < activeView.editor.lineCount(); i++) {
      if (DebugLevel >= DebugLevMap.DebugLevel_All) {
        console.log(i, ";", activeView.editor.getLine(i));
        console.log("Substring:", activeView.editor.getLine(i).substring(0, 2));
      }
      if (activeView.editor.getLine(i).substring(0, 3) == "```") {
        if (!codeblock) {
          codeblock = true;
          newCodeblock = true;
        } else {
          newCodeblock = false;
        }
      }
      if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
        console.log("Current line is Codeblock", codeblock);
      }
      if (!codeblock && !newCodeblock) {
        switch (activeView.editor.getLine(i)) {
          default:
            bodytext = bodytext.concat(activeView.editor.getLine(i) + "\n");
        }
      } else {
        switch (activeView.editor.getLine(i).substring(0, semaLogicCommand.useDialect.length)) {
          case semaLogicCommand.useDialect: {
            dialectID = activeView.editor.getLine(i).substring(semaLogicCommand.useDialect.length, activeView.editor.getLine(i).length - 1);
            dialectID = dialectID.trim();
            break;
          }
          default: {
          }
        }
      }
      if (i < activeView.editor.lineCount()) {
        if (activeView.editor.getLine(i).substring(0, 3) == "```") {
          if (codeblock && !newCodeblock) {
            codeblock = false;
          } else {
            newCodeblock = false;
          }
        }
      }
    }
  }
  if (bodytext == "") {
    bodytext = "";
  }
  if (dialectID == "") {
    dialectID = "default";
  }
  let result = "";
  if (filter != "") {
    let jsonwoFilter = {
      "text": [
        {
          "textID": "fly",
          "dialectID": dialectID,
          "rules": bodytext
        }
      ],
      "filter": {
        "dialectID": "default",
        "symbols": [
          {
            "symbol": filter
          }
        ]
      },
      "persistency": false,
      "rulesettype": rulessettype
    };
    var optionsParse = {
      url: vAPI_URL,
      method: "POST",
      headers: {
        "content-type": "application/json"
      },
      body: JSON.stringify(jsonwoFilter)
    };
  } else {
    let jsontestwthFilter = {
      "text": [
        {
          "textID": "fly",
          "dialectID": dialectID,
          "rules": bodytext
        }
      ],
      "filter": {},
      "persistency": false,
      "rulesettype": rulessettype
    };
    var optionsParse = {
      url: vAPI_URL,
      method: "POST",
      headers: {
        "content-type": "application/json"
      },
      body: JSON.stringify(jsontestwthFilter)
    };
  }
  let res;
  if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
    console.log(`Context: ${dialectID}, Bodytext: ${bodytext}`);
  }
  if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
    console.log(optionsParse);
  }
  try {
    const responseParse = await (0, import_obsidian2.requestUrl)(optionsParse);
    const remJson = responseParse.text;
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      console.log("SemaLogic: Parse with http-status " + responseParse.status.toString());
    }
    ;
    if (responseParse.status == 200) {
      let resulthttp = responseParse.text;
      const fragment = new Range().createContextualFragment(resulthttp);
      buildcontainerEl = createEl("p");
      buildcontainerEl.appendChild(fragment);
      results.push(buildcontainerEl);
      if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log(`Parseresult:${resulthttp}`);
      }
      return results;
    }
  } catch (e) {
    slconsolelog(void 0, `Catcherror of removing context ${vAPI_URL}`);
    slconsolelog(void 0, e.toString());
    throw e;
  }
  return results;
}
function slconsolelog(slview, message, ...optionalParams) {
  if (slview != void 0) {
    if (slview.getViewType() == SemaLogicViewType) {
      if (slview.getDebugInline() == true) {
        let logMessages = JSON.stringify(message);
        slview.appendDebugContent(logMessages);
      } else {
        console.log(message, ...optionalParams);
      }
    }
  } else {
    console.log(message, ...optionalParams);
  }
}

// view_utils.ts
var ViewUtils = class {
  getContent(contentEl, outPutFormat) {
    let content;
    if (contentEl.textContent == null) {
      content = "";
    } else {
      content = contentEl.textContent;
    }
    content = this.cleanContent(content, outPutFormat);
    content = this.cleanCommands(content);
    return content;
  }
  cleanContent(content, outPutFormat) {
    if (outPutFormat == rulesettypesCommands[rstypes_ASP][1]) {
      const firstJSONBracket = content.indexOf("{");
      content = content.substring(firstJSONBracket, content.length);
    }
    if (outPutFormat == rulesettypesCommands[rstypes_Semalogic][1]) {
      const headerString = "Semalogic Output";
      const firstheaderString = content.indexOf(headerString);
      content = content.substring(firstheaderString + headerString.length, content.length);
    }
    return content;
  }
  cleanCommands(content) {
    let contentCleaned = [];
    let contentArray = content.split("\n");
    contentArray.forEach((element) => {
      let row = element.trim();
      row = row.toLowerCase();
      if (DebugLevel == DebugLevMap.DebugLevel_Chatty) {
        console.log("Row before:" + row);
      }
      row = row.replaceAll(" ", "");
      if (DebugLevel == DebugLevMap.DebugLevel_Chatty) {
        console.log("Row after:" + row);
      }
      if (row.indexOf(semaLogicCommand.command_start.toLowerCase()) != 0) {
        contentCleaned.push(element);
      } else {
        if (DebugLevel == DebugLevMap.DebugLevel_Chatty) {
          console.log("Index Define:" + row.indexOf(semaLogicCommand.define).toString());
        }
        if (DebugLevel == DebugLevMap.DebugLevel_Chatty) {
          console.log("Length Start:" + semaLogicCommand.command_start.length.toString());
        }
        if (row.indexOf(semaLogicCommand.define) == semaLogicCommand.command_start.length) {
          contentCleaned.push(element);
        }
      }
    });
    content = "";
    contentCleaned.forEach((element) => {
      content = content + element + "\n";
    });
    return content;
  }
};

// view.ts
var SemaLogicViewType = "SemaLogicService";
var SemaLogicView2 = class extends import_obsidian3.ItemView {
  constructor(leaf) {
    super(leaf);
    this.scaleRatio = 100;
    this.view_utils = new ViewUtils();
    this.debugInline = false;
    this.debugContent = [];
  }
  getOutPutFormat() {
    return this.dropdownButton.getValue();
  }
  getDebugInline() {
    return this.debugInline;
  }
  getContent() {
    return this.view_utils.getContent(this.contentEl, this.getOutPutFormat());
  }
  appendDebugContent(text) {
    this.debugContent.push(text);
  }
  copyToCb() {
    const blobcontentText = (cont) => `${cont}`;
    let data = new ClipboardItem({
      "text/plain": new Blob([blobcontentText(this.currResult)], {
        type: "text/plain"
      })
    });
    navigator.clipboard.write([data]).then(() => {
      alert("successfully copied");
    }).catch(() => {
      alert("something went wrong");
    });
  }
  setComm(comm) {
    if (this.slComm != comm) {
      this.slComm = comm;
      this.setNewInitial(this.slComm.slPlugin.settings.mySLSettings[this.slComm.slPlugin.settings.mySetting].myOutputFormat);
    }
  }
  getViewType() {
    return SemaLogicViewType;
  }
  getDisplayText() {
    return SemaLogicViewType;
  }
  onload() {
    this.navigation = true;
    this.contentEl.contentEditable = "true";
    this.debugInline == false;
  }
  getDebugButtonText() {
    if (this.debugInline == true) {
      return "InlineDebug is on";
    } else {
      return "InlineDebug is off";
    }
  }
  createDropDownButtonForOutPutFormat(container, dropDownValue) {
    this.dropdownButton = new import_obsidian3.DropdownComponent(container).addOption(rulesettypesCommands[rstypes_Semalogic][1], rulesettypesCommands[rstypes_Semalogic][0]).addOption(rulesettypesCommands[rstypes_ASP][1], rulesettypesCommands[rstypes_ASP][0]).addOption(rulesettypesCommands[rstypes_Picture][1], rulesettypesCommands[rstypes_Picture][0]).addOption(rulesettypesCommands[rstypes_SemanticTree][1], rulesettypesCommands[rstypes_SemanticTree][0]).setValue(dropDownValue).onChange(async (value) => {
      if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
        slconsolelog(this.slComm.slview, "Set ViewOutputFormat: " + value);
      }
      this.slComm.slPlugin.updateOutstanding = true;
      dropDownValue = value;
      this.dropdownButton.setValue(value);
      this.getSemaLogicParse(this.slComm.slPlugin.settings, this.apiURL, this.dialectID, this.bodytext, false, value);
    });
    return container;
  }
  createCopyToClipboardButton(container) {
    this.copyButton = new import_obsidian3.ButtonComponent(container).setButtonText("Copy to Clipboard").onClick((mouse_event) => {
      this.copyToCb();
    });
    return container;
  }
  createDebugButton(container) {
    if (DebugLevel != DebugLevMap.DebugLevel_Off) {
      this.debugButton = new import_obsidian3.ButtonComponent(container).setButtonText(this.getDebugButtonText()).onClick((mouse_event) => {
        if (this.debugInline == true) {
          this.debugInline = false;
          this.debugContent = [];
        } else {
          this.debugInline = true;
        }
        if (this.slComm.slview != void 0) {
          if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
            slconsolelog(this.slComm.slview, "Set InlineDebugging: " + this.debugInline);
          }
        }
        this.updateView();
      });
    }
    return container;
  }
  createScaleButtons(container) {
    this.zoomIn = new import_obsidian3.ButtonComponent(container).setButtonText("-").onClick((mouse_event) => {
      this.scaleRatio = this.scaleRatio / 2;
      if (this.zoomRatio != null) {
        this.zoomRatio.setButtonText(String(this.scaleRatio));
      }
      if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
        slconsolelog(this.slComm.slview, "Set ScaleRatio to: " + this.scaleRatio);
      }
      this.updateView();
    });
    this.zoomRatio = new import_obsidian3.ButtonComponent(container).setButtonText(String(this.scaleRatio)).onClick((mouse_event) => {
      if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
        slconsolelog(this.slComm.slview, "ScaleRatio := " + this.scaleRatio);
      }
    });
    this.zoomOut = new import_obsidian3.ButtonComponent(container).setButtonText("+").onClick((mouse_event) => {
      this.scaleRatio = this.scaleRatio * 2;
      this.zoomRatio.setButtonText(String(this.scaleRatio));
      if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
        slconsolelog(this.slComm.slview, "Set ScaleRatio to: " + this.scaleRatio);
      }
      this.updateView();
    });
    return container;
  }
  checkContainerContent() {
    if (this.containerEl.children != void 0) {
      if (this.containerEl.children[1].textContent == slTexts["HeaderSL"]) {
        return true;
      } else {
        return false;
      }
    } else {
      return false;
    }
  }
  deleteContainerContent() {
    if (this.containerEl.children != void 0) {
      for (let i = 0; i < this.containerEl.children.length; i++) {
        if (this.containerEl.children[i].nodeName == "p") {
          while (this.containerEl.children[i] != void 0) {
            this.containerEl.children[i].empty;
          }
        }
      }
    }
  }
  setNewInitial(dropDownValue) {
    let container = this.contentEl;
    if (!this.checkContainerContent()) {
      container.empty();
      container.createEl("h4", { text: slTexts["HeaderSL"] });
      container = this.createDropDownButtonForOutPutFormat(container, dropDownValue);
      container = this.createCopyToClipboardButton(container);
      container = this.createDebugButton(container);
      if (dropDownValue == rulesettypesCommands[rstypes_Picture][1]) {
        container = this.createScaleButtons(container);
      }
      container.createEl("p");
    } else {
      this.deleteContainerContent();
    }
  }
  async onOpen() {
    this.setNewInitial(rulesettypesCommands[rstypes_Semalogic][1]);
  }
  async onClose() {
  }
  showError(fragment) {
    this.contentEl.appendChild(fragment);
  }
  onunload() {
    if (this.slComm.slPlugin != void 0) {
      this.slComm.slPlugin.activated = false;
      this.slComm.slPlugin.myStatus.setText("SemaLogic is off");
    }
  }
  createSemaLogicRequestBody(dialectID, bodytext, outPutFormat) {
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      slconsolelog(this.slComm.slview, "Context: " + dialectID + " Bodytext: " + bodytext);
    }
    let semaLogicJsonRequestBody = {
      "text": [
        {
          "textID": "ParsingOnTheFly",
          "dialectID": dialectID,
          "rules": bodytext
        }
      ],
      "filter": {},
      "persistency": false,
      "rulesettype": outPutFormat
    };
    return semaLogicJsonRequestBody;
  }
  createSemaLogicRequest(settings, vAPI_URL, semaLogicJsonRequestBody) {
    let request = {
      url: vAPI_URL,
      method: "POST",
      headers: {
        "content-type": "application/json"
      },
      body: JSON.stringify(semaLogicJsonRequestBody)
    };
    if (settings.mySLSettings[settings.mySetting].myUseHttps && settings.mySLSettings[settings.mySetting].myUser != "") {
      request = {
        url: vAPI_URL,
        method: "POST",
        headers: {
          "content-type": "application/json",
          "Authorization": "Basic " + btoa(settings.mySLSettings[settings.mySetting].myUser + ":" + settings.mySLSettings[settings.mySetting].myPassword)
        },
        body: JSON.stringify(semaLogicJsonRequestBody)
      };
    }
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      slconsolelog(this.slComm.slview, "Parsingsstring");
      slconsolelog(this.slComm.slview, request);
    }
    return request;
  }
  getRequestEmbed(content) {
    if (this.getOutPutFormat() == rulesettypesCommands[rstypes_Picture][1]) {
      let viewBoxString;
      const beginVB = content.indexOf("viewBox");
      if (beginVB > 0) {
        const endVB = content.indexOf('"', content.indexOf('"', beginVB) + 1);
        viewBoxString = content.substring(beginVB, endVB + 1);
      } else {
        viewBoxString = 'viewBox = "0 0 16 9"';
      }
      content = content.replace("<body>", "");
      content = content.replace("</body>", "");
      let header;
      header = "<svg  " + viewBoxString + ' width = "' + String(this.scaleRatio) + '%" xmlns = "http://www.w3.org/2000/svg" >\n';
      header = header + content;
      header = header + "</svg>";
      return header;
    } else {
      return content;
    }
  }
  getCurrResult() {
    return this.getRequestEmbed(this.currResult);
  }
  getCurrHTML() {
    let responseContent = this.contentEl.createEl("div");
    if (this.debugInline == true) {
      this.debugContent.forEach((value) => {
        const textline = responseContent.createEl("span", { text: value + "\n" });
        textline.style.cssText = "white-space: pre;";
      });
    } else {
      if (this.getOutPutFormat() == rulesettypesCommands[rstypes_ASP][1]) {
        let resulttextarray = this.getCurrResult().split("\n");
        resulttextarray.forEach((value) => {
          const textline = responseContent.createEl("span", { text: value + "\n" });
          textline.style.cssText = "white-space: pre;";
        });
      } else {
        responseContent.createEl("p", { text: " " });
        let div = document.createElement("div");
        div.innerHTML = this.getCurrResult();
        responseContent.appendChild(div);
      }
    }
  }
  updateView() {
    this.setNewInitial(this.getOutPutFormat());
    this.getCurrHTML();
  }
  async getSemaLogicParse(settings, vAPI_URL, dialectID, bodytext, parseOnTheFly, parsingFormat) {
    this.bodytext = bodytext;
    this.apiURL = vAPI_URL;
    this.dialectID = dialectID;
    let outPutFormat;
    if (parsingFormat !== void 0) {
      outPutFormat = parsingFormat;
    } else {
      outPutFormat = this.getOutPutFormat();
    }
    let semaLogicJsonRequestBody = this.createSemaLogicRequestBody(dialectID, bodytext, outPutFormat);
    let semaLogicRequest = this.createSemaLogicRequest(settings, vAPI_URL, semaLogicJsonRequestBody);
    try {
      const response = await (0, import_obsidian3.requestUrl)(semaLogicRequest);
      if (DebugLevel >= DebugLevMap.DebugLevel_High) {
        slconsolelog(this.slComm.slview, "SemaLogic: Parse with http-status " + response.status.toString());
      }
      ;
      if (response.status == 200) {
        var resulthttp = response.text;
        if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
          slconsolelog(this.slComm.slview, `Parseresult:${resulthttp}`);
        }
        if (this.debugInline == false && parseOnTheFly == false) {
          this.currResult = resulthttp;
        }
        if (!parseOnTheFly) {
          this.updateView();
        }
      }
      if (this.slComm.slaspview != void 0) {
      }
      return new Promise((resolve) => {
        resolve(resulthttp);
      });
    } catch (e) {
      if (DebugLevel >= DebugLevMap.DebugLevel_High) {
        slconsolelog(this.slComm.slview, `Catcherror of removing context ${vAPI_URL}`);
      }
      if (DebugLevel >= DebugLevMap.DebugLevel_High) {
        slconsolelog(this.slComm.slview, e.toString());
      }
      let text = new DocumentFragment();
      text.createEl("p");
      let textfragment = new Range().createContextualFragment(e.toString());
      text.appendChild(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment("See for information about the error-code of http: https://de.wikipedia.org/wiki/HTTP-Statuscode ");
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(semaLogicRequest.url);
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(String(semaLogicRequest.body));
      text.append(textfragment);
      this.showError(text);
      throw e;
    }
  }
};

// view_asp.ts
var import_obsidian4 = require("obsidian");
var ASPViewType = "TransferService";
var ASPView = class extends import_obsidian4.ItemView {
  constructor(leaf) {
    super(leaf);
    this.setNewASPInitial();
  }
  setComm(comm) {
    this.slComm = comm;
    this.setNewASPInitial();
  }
  getViewType() {
    return ASPViewType;
  }
  getDisplayText() {
    return ASPViewType;
  }
  onload() {
    this.navigation = true;
    this.contentEl.contentEditable = "true";
  }
  setNewASPInitial() {
    const container = this.contentEl;
    container.empty();
    container.createEl("h4", { text: "Transfer.View" });
    container.createEl("p");
  }
  async onOpen() {
    this.setNewASPInitial();
  }
  async onClose() {
  }
  showError(fragment) {
    this.contentEl.appendChild(fragment);
  }
  onunload() {
    if (this.slComm != void 0) {
      this.slComm.slPlugin.activated = false;
      this.slComm.slPlugin.myStatus.setText("Transfer is off");
    }
  }
  createRequest(comm, settings, apiUrl, method, contentType, withBasicAuth, body) {
    let request;
    let myHeader = {};
    contentType = contentType.toLowerCase();
    method = method.toUpperCase();
    switch (contentType.toLowerCase()) {
      case "json": {
        myHeader["Content-Type"] = "application/json";
        break;
      }
      case "asp": {
        myHeader["Content-Type"] = "application/json";
        break;
      }
      case "asp.json": {
        myHeader["Content-Type"] = "application/json";
        break;
      }
      case "text": {
        myHeader["Content-Type"] = "text/plain";
        break;
      }
      default: {
        myHeader["Content-Type"] = contentType;
        break;
      }
    }
    if (withBasicAuth) {
      myHeader["Authorization"] = "Basic " + btoa(settings.mySLSettings[settings.mySetting].myUser + ":" + settings.mySLSettings[settings.mySetting].myPassword);
    }
    request = {
      url: apiUrl,
      method,
      headers: myHeader,
      body
    };
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      console.log(request);
    }
    ;
    return request;
  }
  getASPCommands(slComm, settings) {
    let paramParsedCommand = {
      outputformat: "ASP.json",
      endpoint: settings.mySLSettings[settings.mySetting].myAspEndpoint,
      param: ""
    };
    let commands;
    if (slComm.slview != null) {
      const editortext = slComm.slUsedMDView.editor.getRange({ line: 0, ch: 0 }, { line: slComm.slUsedMDView.editor.lastLine(), ch: slComm.slUsedMDView.editor.lastLine.length });
      const rows = editortext.split("\n").filter((row) => row.length > 0);
      let myStrResult;
      let transferString;
      let endpointString = "";
      let paramString;
      rows.forEach((row) => {
        if (row.substring(0, semaLogicCommand.command_start.length) == semaLogicCommand.command_start) {
          const transfer = row.indexOf(semaLogicCommand.transfer);
          const endpoint = row.indexOf(semaLogicCommand.transferEndpoint);
          let param = row.indexOf(semaLogicCommand.transferParam);
          const endCommand = row.indexOf(semaLogicCommand.command_end);
          if (param < 0) {
            param = endCommand;
          }
          if (transfer <= 0) {
          } else {
            transferString = row.substring(transfer + semaLogicCommand.transfer.length + 1, endpoint);
            transferString = transferString.trimEnd();
            if (endpoint > 0) {
              endpointString = row.substring(endpoint + 1 + semaLogicCommand.transferEndpoint.length, param);
              endpointString = endpointString.trimEnd();
            }
            if (param > 0 && param != endCommand) {
              paramString = row.substring(param + 1 + semaLogicCommand.transferParam.length, endCommand);
              paramString = paramString.trimEnd();
            }
            paramParsedCommand = {
              outputformat: transferString,
              endpoint: endpointString,
              param: paramString
            };
          }
        }
      });
    }
    return paramParsedCommand;
  }
  async aspParse(slComm, settings, aspJsonParsedSemaLogic) {
    if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
      console.log("Start Transfer_Parse");
    }
    ;
    let vAPI_URL = "";
    const parseCommands = this.getASPCommands(slComm, settings);
    if (parseCommands.outputformat == rulesettypesCommands[rstypes_ASP][1] || parseCommands.outputformat == rulesettypesCommands[rstypes_ASP][0]) {
      vAPI_URL = getHostAspPort(settings, parseCommands);
    } else {
      vAPI_URL = parseCommands.endpoint;
      if (parseCommands.param != void 0) {
        if (parseCommands.param.length > 0) {
          vAPI_URL = vAPI_URL + "?" + parseCommands.param;
        }
      }
      if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Transfer URL: ", vAPI_URL);
      }
    }
    let optionsParse = this.createRequest(this.slComm, settings, vAPI_URL, "POST", "json", true, aspJsonParsedSemaLogic);
    try {
      if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("ASP: want to parse ", optionsParse);
      }
      ;
      const responseParse = await (0, import_obsidian4.requestUrl)(optionsParse);
      const remJson = responseParse.text;
      if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("ASP: Parse with http-status " + responseParse.status.toString());
      }
      ;
      if (responseParse.status == 200) {
        let resulthttp = responseParse.text;
        this.setNewASPInitial();
        resulthttp = resulthttp.replaceAll("[", "[\n");
        resulthttp = resulthttp.replaceAll("]", "\n]");
        resulthttp = resulthttp.replaceAll(",", ",\n");
        let resulthttpArray = resulthttp.split("\n");
        resulthttpArray.forEach((element) => {
          this.contentEl.append(element);
          this.contentEl.createEl("br");
        });
        if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
          console.log(`ASP-Parseresult:${resulthttp}`);
        }
      }
    } catch (e) {
      if (DebugLevel >= DebugLevMap.DebugLevel_High) {
        console.log(`Catcherror of removing context ${vAPI_URL}`);
      }
      if (DebugLevel >= DebugLevMap.DebugLevel_High) {
        console.log(e.toString());
      }
      let text = new DocumentFragment();
      text.createEl("p");
      let textfragment = new Range().createContextualFragment(e.toString());
      text.appendChild(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment("See for information about the error-code of http: https://de.wikipedia.org/wiki/HTTP-Statuscode ");
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(optionsParse.url);
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(String(optionsParse.body));
      text.append(textfragment);
      this.contentEl.empty();
      this.contentEl.createEl("br");
      this.contentEl.append(text);
    }
  }
};

// main.ts
var import_view3 = require("@codemirror/view");
var DebugLevel = 0;
var Default_profile = {
  mySLSettings: [
    {
      myPort: API_Defaults.Port,
      myOutputFormat: "SemaLogic",
      myBaseURL: API_Defaults.Base_URL,
      myGetAPI: API_Defaults.GetAPI,
      mySID: API_Defaults.SID,
      myContext: API_Defaults.ShowContext,
      myUseHttps: API_Defaults.useUserPasswortforHTTP,
      myUser: API_Defaults.HttpUser,
      myPassword: API_Defaults.HttpPassword,
      myUpdateInterval: Value_Defaults.updateInterval,
      myAspUrl: API_Defaults.AspUrl,
      myAspEndpoint: API_Defaults.AspEndpoint
    },
    {
      myPort: API_Defaults.Port,
      myOutputFormat: "SemaLogic",
      myBaseURL: API_Defaults.Base_URL,
      myGetAPI: API_Defaults.GetAPI,
      mySID: API_Defaults.SID,
      myContext: API_Defaults.ShowContext,
      myUseHttps: API_Defaults.useUserPasswortforHTTP,
      myUser: API_Defaults.HttpUser,
      myPassword: API_Defaults.HttpPassword,
      myUpdateInterval: Value_Defaults.updateInterval,
      myAspUrl: API_Defaults.AspUrl,
      myAspEndpoint: API_Defaults.AspEndpoint
    },
    {
      myPort: API_Defaults.Port,
      myOutputFormat: "SemaLogic",
      myBaseURL: API_Defaults.Base_URL,
      myGetAPI: API_Defaults.GetAPI,
      mySID: API_Defaults.SID,
      myContext: API_Defaults.ShowContext,
      myUseHttps: API_Defaults.useUserPasswortforHTTP,
      myUser: API_Defaults.HttpUser,
      myPassword: API_Defaults.HttpPassword,
      myUpdateInterval: Value_Defaults.updateInterval,
      myAspUrl: API_Defaults.AspUrl,
      myAspEndpoint: API_Defaults.AspEndpoint
    }
  ],
  mySetting: 0,
  myDebugLevel: 0
};
var SemaLogicSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for SemaLogic:" });
    new import_obsidian5.Setting(containerEl).setName("General DebugLevel").setDesc("You can set a DebugLevel for Developmentinformation").addDropdown((dropDown) => dropDown.addOption("0", DebugLevelNames[0]).addOption("1", DebugLevelNames[1]).addOption("2", DebugLevelNames[2]).addOption("3", DebugLevelNames[3]).addOption("4", DebugLevelNames[4]).addOption("5", DebugLevelNames[5]).setValue(String(this.plugin.settings.myDebugLevel)).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Current_Dev) {
        console.log("Set DebugLevel: " + DebugLevelNames[parseInt(value)]);
      }
      ;
      this.plugin.settings.myDebugLevel = parseInt(value);
      DebugLevel = parseInt(value);
      await this.plugin.saveSettings();
      this.display();
    }));
    new import_obsidian5.Setting(containerEl).setName("Change your setting profile").setDesc("You can define different profiles for your SemaLogicService").addDropdown((dropDown) => dropDown.addOption("0", "Profile 1").addOption("1", "Profile 2").addOption("2", "Profile 3").setValue(this.plugin.settings.mySetting.toString()).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Current_Dev) {
        console.log("Set Profile: " + value);
      }
      ;
      this.plugin.settings.mySetting = parseInt(value);
      this.display();
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Port SemaLogic").setDesc("Enter the Port").addText((text) => text.setPlaceholder(API_Defaults.Port).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPort).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set to Port: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPort = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("OutputFormat").setDesc("Here you can set the outputformat for SemaLogic, which could be get from SemaLogicService").addDropdown((dropDown) => dropDown.addOption(rulesettypesCommands[rstypes_Semalogic][1], rulesettypesCommands[rstypes_Semalogic][0]).addOption(rulesettypesCommands[rstypes_ASP][1], rulesettypesCommands[rstypes_ASP][0]).addOption(rulesettypesCommands[rstypes_Picture][1], rulesettypesCommands[rstypes_Picture][0]).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myOutputFormat).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set Outputformat: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myOutputFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("BaseUrl").setDesc("BaseURL for reaching SemaLogicService").addText((text) => text.setPlaceholder(API_Defaults.Base_URL).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myBaseURL).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set BaseURL: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myBaseURL = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Path to Get-API-Endpoints").setDesc("Path to Get-API for more Information about the Endpoints of used APIs").addText((text) => text.setPlaceholder(API_Defaults.GetAPI).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myGetAPI).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set to Get-API-Endpoint: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myGetAPI = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("SID").setDesc("SemaLogic SessionID").addText((text) => text.setPlaceholder(API_Defaults.SID).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].mySID).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set SID: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].mySID = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Show Context in Reading View").addToggle((setting) => setting.setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myContext).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set Context of Reading View: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myContext = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Standard updateinterval").addText((setting) => setting.setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUpdateInterval.toString()).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set Update Interval: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUpdateInterval = parseInt(value);
      window.clearInterval(this.plugin.interval);
      this.plugin.registerInterval(
        this.plugin.interval = window.setInterval(this.plugin.handleUpdate, this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUpdateInterval)
      );
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Secure HTTP-Request").setDesc("If you has to use User/Password for http-request to the SemaLogic service").addToggle((setting) => setting.setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttps).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set UserPasswordRequest: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttps = value;
      await this.plugin.saveSettings();
      this.display();
    }));
    if (this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttps) {
      new import_obsidian5.Setting(containerEl).setName("HTTP-Request-User").setDesc("User to reach SemaLogic service").addText((text) => text.setPlaceholder(API_Defaults.HttpUser).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUser).onChange(async (value) => {
        if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
          console.log("Set HTTP-Request-User...");
        }
        ;
        this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUser = value;
        await this.plugin.saveSettings();
      }));
      new import_obsidian5.Setting(containerEl).setName("HTTP-Request-Password").setDesc("Password to reach SemaLogic service").addText((text) => text.setPlaceholder(API_Defaults.HttpPassword).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPassword).onChange(async (value) => {
        if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
          console.log("Set HTTP-Request-Password...");
        }
        ;
        this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPassword = value;
        await this.plugin.saveSettings();
      }));
    }
    new import_obsidian5.Setting(containerEl).setName("BaseUrl for ASP").setDesc("BaseURL for reaching ASP-Service").addText((text) => text.setPlaceholder(API_Defaults.AspUrl).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspUrl).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set ASPBaseURL: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Path to Get-ASP-StandardAPI-Endpoint").setDesc("Path to ASP-Standard-API ").addText((text) => text.setPlaceholder(API_Defaults.AspEndpoint).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspEndpoint).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set to ASP-Standard-API-Endpoint: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspEndpoint = value;
      await this.plugin.saveSettings();
    }));
  }
};
var SemaLogicPluginComm3 = class {
  constructor() {
    this.activatedASP = false;
  }
  setSlView(view) {
    this.slview = view;
  }
  setSLClass(slclass) {
    this.slPlugin = slclass;
  }
  add(a, b) {
    return a + b;
  }
};
var SemaLogicPlugin = class extends import_obsidian5.Plugin {
  constructor() {
    super(...arguments);
    this.activated = false;
    this.updating = false;
    this.lastUpdate = 0;
    this.updateOutstanding = false;
    this.updateOutstandingSetting = false;
    this.waitingForResponse = false;
    this.UpdateProcessing = false;
    this.view_utils = new ViewUtils();
    this.handleUpdate = (update) => {
      if (this.statusSL) {
        if (DebugLevel >= DebugLevMap.DebugLevel_Current_Dev || DebugLevel >= DebugLevMap.DebugLevel_High) {
          const text = "Updatetime/" + String(Date.now()) + "/" + String(this.lastUpdate) + "/" + String(Date.now() - this.lastUpdate) + "/" + String(this.updateOutstanding) + "/" + String(this.waitingForResponse);
          slconsolelog(this.slComm.slview, text);
        }
        if (update == null) {
        } else {
          if (update.view) {
            if (!update.docChanged && !update.focusChanged) {
              return;
            } else {
              if (this.UpdateProcessing == false) {
                if (DebugLevel >= DebugLevMap.DebugLevel_Current_Dev || DebugLevel >= DebugLevMap.DebugLevel_All)
                  slconsolelog(this.slComm.slview, "Start Update docChanged, focuschanged, UpdProc  " + String(update.docChanged) + "/" + String(update.focusChanged) + "/" + String(this.UpdateProcessing));
                this.semaLogicUpdate();
              }
            }
          }
        }
        if (Date.now() - this.lastUpdate > this.settings.mySLSettings[this.settings.mySetting].myUpdateInterval && this.updateOutstanding == true && this.waitingForResponse == false) {
          if (DebugLevel >= DebugLevMap.DebugLevel_Current_Dev || DebugLevel >= DebugLevMap.DebugLevel_All)
            slconsolelog(this.slComm.slview, "Start Update PARSING");
          this.lastUpdate = Date.now();
          this.semaLogicUpdate();
        } else if (Date.now() - this.lastUpdate > this.settings.mySLSettings[this.settings.mySetting].myUpdateInterval && this.updateOutstanding == true && this.waitingForResponse == false) {
          semaLogicPing(this.settings, this.lastUpdate);
        }
      }
    };
  }
  getContextFromLine(mydialectID) {
    mydialectID = mydialectID.replace("SemaLogicContext\u2261", "SemaLogicDialect\u2261");
    let re = /\t/gi;
    mydialectID = mydialectID.replace(re, "");
    re = /\n/gi;
    mydialectID = mydialectID.replace(re, "");
    return { mydialectID };
  }
  getActiveView() {
    const activeView = app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
    if (activeView === null) {
      if (this.lastactiveView === null) {
        if (DebugLevel >= DebugLevMap.DebugLevel_High) {
          slconsolelog(this.slComm.slview, "ActiveView could not be defined through SemaLogic");
        }
        return;
      } else {
        return this.lastactiveView;
      }
    }
    this.lastactiveView = activeView;
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      slconsolelog(this.slComm.slview, this.lastactiveView.getDisplayText());
    }
    return this.lastactiveView;
  }
  setViews() {
    this.slComm.activatedASP = false;
    this.app.workspace.iterateAllLeaves((leaf) => {
      switch (leaf.view.getViewType()) {
        case ASPViewType: {
          this.slComm.slaspview = leaf.view;
          this.slComm.slaspview.setComm(this.slComm);
          this.slComm.slaspview.slComm.setSlView(this.slComm.slview);
          this.slComm.slaspview.slComm.slPlugin = this.slComm.slPlugin;
          this.slComm.activatedASP = true;
          this.statusTransfer = true;
        }
        case SemaLogicViewType: {
          this.slComm.slview = leaf.view;
          this.slComm.slview.setComm(this.slComm);
          this.slComm.slview.slComm.setSlView(this.slComm.slview);
          this.slComm.slview.slComm.slPlugin = this.slComm.slPlugin;
          this.activated = true;
          this.statusSL = true;
        }
      }
    });
    this.getActiveView();
  }
  async onload() {
    this.registerMarkdownPostProcessor((element, context) => {
      console.log(element, context);
      element.querySelectorAll("p").forEach((el) => {
        if (searchForSemaLogicCommands(el)) {
          let set = this.settings;
          context.addChild(new SemaLogicRenderedElement({ containerEl: el, set }));
        }
      });
    });
    this.addSettingTab(new SemaLogicSettingTab(this.app, this));
    await this.loadSettings();
    DebugLevel = this.settings.myDebugLevel;
    this.myStatus = this.addStatusBarItem();
    this.slComm = new SemaLogicPluginComm3();
    this.slComm.setSLClass(this);
    this.activateView();
    await this.semaLogicReset();
    this.setViews();
    this.addRibbonIcon("book", "On/Off SemaLogic.View", () => {
      this.setViews();
      if (this.activated == false) {
        this.statusSL = true;
        if (!this.activated) {
          this.activateView();
        }
      } else {
        this.statusSL = false;
        this.deactivateView();
      }
    });
    this.addRibbonIcon("dice", "On/Off Transfer.View", () => {
      this.setViews();
      if (this.slComm != void 0) {
        if (this.slComm.activatedASP == false) {
          this.activateASPView();
        } else {
          this.deactivateASPView();
        }
      }
    });
    if (this.statusSL) {
      this.semaLogicReset();
      this.slComm.slview.setNewInitial(this.settings.mySLSettings[this.settings.mySetting].myOutputFormat);
      this.semaLogicParse();
    }
    this.registerInterval(
      this.interval = window.setInterval(this.handleUpdate, this.settings.mySLSettings[this.settings.mySetting].myUpdateInterval)
    );
    this.registerEditorExtension([import_view3.EditorView.updateListener.of(this.handleUpdate)]);
  }
  async semaLogicParse() {
    this.setViews();
    if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
      slconsolelog(this.slComm.slview, "Start SemaLogicParse");
    }
    ;
    let results = [];
    this.lastUpdate = Date.now();
    await semaLogicPing(this.settings, this.lastUpdate);
    let vAPI_URL = getHostPort(this.settings) + API_Defaults.rules_parse + "?sid=" + this.settings.mySLSettings[this.settings.mySetting].mySID;
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      slconsolelog(this.slComm.slview, vAPI_URL);
    }
    ;
    let bodytext = "";
    let activeView = this.getActiveView();
    if (activeView != void 0) {
      this.slComm.slUsedMDView = activeView;
    }
    let dialectID = "default";
    let codeblock = false;
    let newCodeblock = false;
    if (activeView != null) {
      if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
        slconsolelog(this.slComm.slview, "ActiveView is not NULL");
      }
      ;
      for (let i = 0; i < activeView.editor.lineCount(); i++) {
        if (DebugLevel >= DebugLevMap.DebugLevel_All) {
          slconsolelog(this.slComm.slview, i, ";", activeView.editor.getLine(i));
          slconsolelog(this.slComm.slview, "Substring:", activeView.editor.getLine(i).substring(0, 2));
        }
        if (activeView.editor.getLine(i).substring(0, 3) == "```") {
          if (!codeblock) {
            codeblock = true;
            newCodeblock = true;
          } else {
            newCodeblock = false;
          }
        }
        if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
          slconsolelog(this.slComm.slview, "Current line is Codeblock", codeblock);
        }
        if (!codeblock && !newCodeblock) {
          bodytext = bodytext.concat(activeView.editor.getLine(i) + "\n");
        } else {
          switch (activeView.editor.getLine(i).substring(0, semaLogicCommand.useDialect.length)) {
            case semaLogicCommand.useDialect: {
              dialectID = activeView.editor.getLine(i).substring(semaLogicCommand.useDialect.length, activeView.editor.getLine(i).length - 1);
              dialectID = dialectID.trim();
              break;
            }
            default: {
            }
          }
        }
        if (i < activeView.editor.lineCount()) {
          if (activeView.editor.getLine(i).substring(0, 3) == "```") {
            if (codeblock && !newCodeblock) {
              codeblock = false;
            } else {
              newCodeblock = false;
            }
          }
        }
      }
    }
    bodytext = this.view_utils.cleanCommands(bodytext);
    if (dialectID == "") {
      dialectID = "default";
    }
    if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
      console.log("Parsingresult for SemaLogicView");
    }
    const responseForSemaLogic = this.slComm.slview.getSemaLogicParse(this.settings, vAPI_URL, dialectID, bodytext, false);
    responseForSemaLogic.then((value) => {
      if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
        console.log(value);
      }
    });
    this.updateOutstanding = false;
    if (this.slComm.activatedASP) {
      if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
        console.log("Parsingresult for OnTheFly Transfer.view in SemaLogic");
      }
      const parseCommands = this.slComm.slaspview.getASPCommands(this.slComm, this.settings);
      let outputFormat = rulesettypesCommands[rstypes_ASP][1];
      if (parseCommands.outputformat != void 0 && parseCommands.outputformat != rulesettypesCommands[rstypes_ASP][0]) {
        outputFormat = parseCommands.outputformat;
      }
      const responseForASP = this.slComm.slview.getSemaLogicParse(this.settings, vAPI_URL, dialectID, bodytext, true, outputFormat);
      responseForASP.then((value) => {
        if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
          console.log(value);
        }
        const aspPromise = this.slComm.slaspview.aspParse(this.slComm, this.settings, value);
        aspPromise.then((value2) => {
          if (value2 != void 0) {
            slconsolelog(this.slComm.slview, value2);
          }
        });
      });
    }
    return results;
  }
  async activateASPView() {
    if (this.slComm.slaspview == void 0) {
      this.registerView(
        ASPViewType,
        (leaf2) => new ASPView(leaf2)
      );
    }
    const leaf = this.GetAspLeaf();
    if (leaf != void 0) {
      leaf.setViewState({
        type: ASPViewType,
        active: false
      });
      await this.semaLogicReset();
      this.app.workspace.revealLeaf(leaf);
    } else {
      console.log("ASP-Leaf not created");
    }
    this.setViews();
    this.handlePing();
    this.statusTransfer = true;
    this.semaLogicUpdate();
    this.myStatus.setText("ASP is on");
  }
  async activateView() {
    if (this.slComm.slview == void 0) {
      this.registerView(
        SemaLogicViewType,
        (leaf2) => new SemaLogicView2(leaf2)
      );
    }
    const leaf = this.GetSemaLogicLeaf();
    if (leaf != void 0) {
      leaf.setViewState({
        type: SemaLogicViewType,
        active: false
      });
      await this.semaLogicReset();
      this.app.workspace.revealLeaf(leaf);
    } else {
      console.log("SemaLogic-Leaf not created");
    }
    this.setViews();
    this.handlePing();
    this.semaLogicUpdate();
    this.myStatus.setText("SemaLogic is on");
  }
  async deactivateASPView() {
    this.app.workspace.detachLeavesOfType(ASPViewType);
    this.slComm.activatedASP = false;
    this.statusTransfer = true;
    this.myStatus.setText("ASP is off");
  }
  async deactivateView() {
    this.app.workspace.detachLeavesOfType(SemaLogicViewType);
    this.activated = false;
    this.slComm.slview.unload();
    this.myStatus.setText("SemaLogic is off");
  }
  GetAspLeaf() {
    let found = false;
    var slv = void 0;
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (!found) {
        switch (leaf.view.getViewType()) {
          case ASPViewType: {
            found = true;
            slv = leaf;
          }
        }
      }
    });
    if (!found) {
      if (DebugLevel >= DebugLevMap.DebugLevel_All) {
        console.log("Split");
      }
      slv = this.app.workspace.getLeaf("split");
      if (DebugLevel >= DebugLevMap.DebugLevel_All) {
        console.log(slv);
      }
    }
    return slv;
  }
  GetSemaLogicLeaf() {
    let found = false;
    var slv = void 0;
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (!found) {
        switch (leaf.view.getViewType()) {
          case SemaLogicViewType: {
            found = true;
            slv = leaf;
          }
        }
      }
    });
    if (!found) {
      if (DebugLevel >= DebugLevMap.DebugLevel_All) {
        console.log("Split");
      }
      slv = this.app.workspace.getLeaf("split");
      if (DebugLevel >= DebugLevMap.DebugLevel_All) {
        console.log(slv);
      }
    }
    return slv;
  }
  async onunload() {
    this.app.workspace.detachLeavesOfType(ASPViewType);
    this.app.workspace.detachLeavesOfType(SemaLogicViewType);
  }
  async loadSettings() {
    this.settings = Object.assign({}, Default_profile, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    if (this.slComm.slview != void 0) {
      this.slComm.slview.setNewInitial(this.settings.mySLSettings[this.settings.mySetting].myOutputFormat);
    }
    this.updateOutstanding = true;
  }
  handlePing() {
    semaLogicPing(this.settings, this.lastUpdate);
  }
  semaLogicUpdate(setView) {
    this.waitingForResponse = true;
    this.UpdateProcessing = true;
    if (setView == true || setView == void 0) {
      this.setViews();
    }
    if (DebugLevel >= DebugLevMap.DebugLevel_Current_Dev || DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
      slconsolelog(this.slComm.slview, "Start SemaLogicUpdate");
    }
    ;
    this.setViews();
    let activeView = this.getActiveView();
    this.semaLogicParse();
    if (!this.updating) {
      this.updating = true;
      if (activeView != null) {
        const editortext = activeView.editor.getRange({ line: 0, ch: 0 }, { line: activeView.editor.lastLine(), ch: activeView.editor.lastLine.length });
        const addChar = " ";
        let cursor = activeView.editor.getCursor();
        for (let i = 0; i < activeView.editor.lastLine(); i++) {
          if (activeView.editor.getLine(i).substring(0, semaLogicCommand.command_start.length) == semaLogicCommand.command_start) {
            if (activeView.editor.getLine(i).substring(activeView.editor.getLine(i).length - 1, activeView.editor.getLine(i).length) == semaLogicCommand.command_end) {
              activeView.editor.setLine(i, activeView.editor.getLine(i).substring(0, activeView.editor.getLine(i).length) + addChar);
            } else {
              if (activeView.editor.getLine(i).substring(activeView.editor.getLine(i).length - 1, activeView.editor.getLine(i).length) == addChar) {
                activeView.editor.setLine(i, activeView.editor.getLine(i).substring(0, activeView.editor.getLine(i).length - 1));
              }
            }
          }
        }
        activeView.editor.setCursor(cursor);
      }
      this.updating = false;
    }
    this.UpdateProcessing = false;
    this.waitingForResponse = false;
  }
  getSemaLogicText() {
    if (this.slComm.slview.contentEl.textContent == null) {
      return "";
    } else {
      return this.slComm.slview.getContent();
    }
  }
  async semaLogicReset() {
    let vAPI_URL_Reset = getHostPort(this.settings) + API_Defaults.reset + "?sid=" + this.settings.mySLSettings[this.settings.mySetting].mySID;
    let optionsReset;
    if (this.settings.mySLSettings[this.settings.mySetting].myUseHttps && this.settings.mySLSettings[this.settings.mySetting].myUser != "") {
      optionsReset = {
        url: vAPI_URL_Reset,
        method: "POST",
        headers: {
          "content-type": "text/plain",
          "Authorization": "Basic " + btoa(this.settings.mySLSettings[this.settings.mySetting].myUser + ":" + this.settings.mySLSettings[this.settings.mySetting].myPassword)
        }
      };
    } else {
      optionsReset = {
        url: vAPI_URL_Reset,
        method: "POST",
        headers: {
          "content-type": "text/plain"
        }
      };
    }
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      slconsolelog(this.slComm.slview, optionsReset);
    }
    try {
      const responseReset = await (0, import_obsidian5.requestUrl)(optionsReset);
      if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
        console.log(this.slComm.slview, `SemaLogic: Reset with http-status ${responseReset.status.toString()}`);
      }
      ;
    } catch (e) {
      console.log(this.slComm.slview, `Catcherror by reset ${vAPI_URL_Reset}`);
      console.log(this.slComm.slview, e.toString());
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJ2aWV3LnRzIiwgImNvbnN0LnRzIiwgInV0aWxzLnRzIiwgInZpZXdfdXRpbHMudHMiLCAidmlld19hc3AudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgTWFya2Rvd25WaWV3LCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIHJlcXVlc3RVcmwsIFNldHRpbmcsIFdvcmtzcGFjZUxlYWYsIHJlbmRlclJlc3VsdHMsIFJlcXVlc3RVcmxQYXJhbSwgUmVxdWVzdFVybFJlc3BvbnNlLCBSZXF1ZXN0VXJsUmVzcG9uc2VQcm9taXNlLCBCdXR0b25Db21wb25lbnQsIE1hcmtkb3duUmVuZGVyQ2hpbGQsIE1hcmtkb3duUHJldmlld1ZpZXcsIFZpZXcgfVxyXG5cdGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgU2VtYUxvZ2ljVmlldywgU2VtYUxvZ2ljVmlld1R5cGUgfSBmcm9tIFwiLi92aWV3XCI7XHJcbmltcG9ydCB7IEFTUFZpZXcsIEFTUFZpZXdUeXBlIH0gZnJvbSBcIi4vdmlld19hc3BcIjtcclxuaW1wb3J0IHsgVmlld1VwZGF0ZSwgRWRpdG9yVmlldyB9IGZyb20gXCJAY29kZW1pcnJvci92aWV3XCI7XHJcbmltcG9ydCB7IFNlbWFMb2dpY1JlbmRlcmVkRWxlbWVudCwgc2VhcmNoRm9yU2VtYUxvZ2ljQ29tbWFuZHMsIGdldEhvc3RQb3J0LCBzZW1hTG9naWNQaW5nLCBzbGNvbnNvbGVsb2cgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBBUElfRGVmYXVsdHMsIFZhbHVlX0RlZmF1bHRzLCBzZW1hTG9naWNDb21tYW5kLCBydWxlc2V0dHlwZXNDb21tYW5kcywgcnN0eXBlc19TZW1hbG9naWMsIHJzdHlwZXNfUGljdHVyZSwgcnN0eXBlc19BU1AsIERlYnVnTGV2TWFwLCBEZWJ1Z0xldmVsTmFtZXMgfSBmcm9tIFwiLi9jb25zdFwiXHJcbmltcG9ydCB7IFZpZXdVdGlscyB9IGZyb20gJ3ZpZXdfdXRpbHMnO1xyXG5cclxuZXhwb3J0IHZhciBEZWJ1Z0xldmVsID0gMDtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU0xTZXR0aW5nIHtcclxuXHRteVBvcnQ6IHN0cmluZztcclxuXHRteU91dHB1dEZvcm1hdDogc3RyaW5nO1xyXG5cdG15QmFzZVVSTDogc3RyaW5nO1xyXG5cdG15R2V0QVBJOiBzdHJpbmc7XHJcblx0bXlTSUQ6IHN0cmluZztcclxuXHRteUNvbnRleHQ6IGJvb2xlYW47XHJcblx0bXlVcGRhdGVJbnRlcnZhbDogbnVtYmVyO1xyXG5cdG15VXNlSHR0cHM6IGJvb2xlYW4sXHJcblx0bXlVc2VyOiBzdHJpbmcsXHJcblx0bXlQYXNzd29yZDogc3RyaW5nXHJcblx0bXlBc3BVcmw6IHN0cmluZyxcclxuXHRteUFzcEVuZHBvaW50OiBzdHJpbmdcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyB7XHJcblx0bXlTTFNldHRpbmdzOiBTTFNldHRpbmdbXTtcclxuXHRteVNldHRpbmc6IG51bWJlcjtcclxuXHRteURlYnVnTGV2ZWw6IG51bWJlcjtcclxufVxyXG5leHBvcnQgY29uc3QgRGVmYXVsdF9wcm9maWxlOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyA9IHtcclxuXHRteVNMU2V0dGluZ3M6IFt7XHJcblx0XHRteVBvcnQ6IEFQSV9EZWZhdWx0cy5Qb3J0LFxyXG5cdFx0bXlPdXRwdXRGb3JtYXQ6ICdTZW1hTG9naWMnLFxyXG5cdFx0bXlCYXNlVVJMOiBBUElfRGVmYXVsdHMuQmFzZV9VUkwsXHJcblx0XHRteUdldEFQSTogQVBJX0RlZmF1bHRzLkdldEFQSSxcclxuXHRcdG15U0lEOiBBUElfRGVmYXVsdHMuU0lELFxyXG5cdFx0bXlDb250ZXh0OiBBUElfRGVmYXVsdHMuU2hvd0NvbnRleHQsXHJcblx0XHRteVVzZUh0dHBzOiBBUElfRGVmYXVsdHMudXNlVXNlclBhc3N3b3J0Zm9ySFRUUCxcclxuXHRcdG15VXNlcjogQVBJX0RlZmF1bHRzLkh0dHBVc2VyLFxyXG5cdFx0bXlQYXNzd29yZDogQVBJX0RlZmF1bHRzLkh0dHBQYXNzd29yZCxcclxuXHRcdG15VXBkYXRlSW50ZXJ2YWw6IFZhbHVlX0RlZmF1bHRzLnVwZGF0ZUludGVydmFsLFxyXG5cdFx0bXlBc3BVcmw6IEFQSV9EZWZhdWx0cy5Bc3BVcmwsXHJcblx0XHRteUFzcEVuZHBvaW50OiBBUElfRGVmYXVsdHMuQXNwRW5kcG9pbnRcclxuXHR9LFxyXG5cdHtcclxuXHRcdG15UG9ydDogQVBJX0RlZmF1bHRzLlBvcnQsXHJcblx0XHRteU91dHB1dEZvcm1hdDogJ1NlbWFMb2dpYycsXHJcblx0XHRteUJhc2VVUkw6IEFQSV9EZWZhdWx0cy5CYXNlX1VSTCxcclxuXHRcdG15R2V0QVBJOiBBUElfRGVmYXVsdHMuR2V0QVBJLFxyXG5cdFx0bXlTSUQ6IEFQSV9EZWZhdWx0cy5TSUQsXHJcblx0XHRteUNvbnRleHQ6IEFQSV9EZWZhdWx0cy5TaG93Q29udGV4dCxcclxuXHRcdG15VXNlSHR0cHM6IEFQSV9EZWZhdWx0cy51c2VVc2VyUGFzc3dvcnRmb3JIVFRQLFxyXG5cdFx0bXlVc2VyOiBBUElfRGVmYXVsdHMuSHR0cFVzZXIsXHJcblx0XHRteVBhc3N3b3JkOiBBUElfRGVmYXVsdHMuSHR0cFBhc3N3b3JkLFxyXG5cdFx0bXlVcGRhdGVJbnRlcnZhbDogVmFsdWVfRGVmYXVsdHMudXBkYXRlSW50ZXJ2YWwsXHJcblx0XHRteUFzcFVybDogQVBJX0RlZmF1bHRzLkFzcFVybCxcclxuXHRcdG15QXNwRW5kcG9pbnQ6IEFQSV9EZWZhdWx0cy5Bc3BFbmRwb2ludFxyXG5cdH0sXHJcblx0e1xyXG5cdFx0bXlQb3J0OiBBUElfRGVmYXVsdHMuUG9ydCxcclxuXHRcdG15T3V0cHV0Rm9ybWF0OiAnU2VtYUxvZ2ljJyxcclxuXHRcdG15QmFzZVVSTDogQVBJX0RlZmF1bHRzLkJhc2VfVVJMLFxyXG5cdFx0bXlHZXRBUEk6IEFQSV9EZWZhdWx0cy5HZXRBUEksXHJcblx0XHRteVNJRDogQVBJX0RlZmF1bHRzLlNJRCxcclxuXHRcdG15Q29udGV4dDogQVBJX0RlZmF1bHRzLlNob3dDb250ZXh0LFxyXG5cdFx0bXlVc2VIdHRwczogQVBJX0RlZmF1bHRzLnVzZVVzZXJQYXNzd29ydGZvckhUVFAsXHJcblx0XHRteVVzZXI6IEFQSV9EZWZhdWx0cy5IdHRwVXNlcixcclxuXHRcdG15UGFzc3dvcmQ6IEFQSV9EZWZhdWx0cy5IdHRwUGFzc3dvcmQsXHJcblx0XHRteVVwZGF0ZUludGVydmFsOiBWYWx1ZV9EZWZhdWx0cy51cGRhdGVJbnRlcnZhbCxcclxuXHRcdG15QXNwVXJsOiBBUElfRGVmYXVsdHMuQXNwVXJsLFxyXG5cdFx0bXlBc3BFbmRwb2ludDogQVBJX0RlZmF1bHRzLkFzcEVuZHBvaW50XHJcblx0fSxcclxuXHRdLFxyXG5cdG15U2V0dGluZzogMCxcclxuXHRteURlYnVnTGV2ZWw6IDAsXHJcbn1cclxuXHJcblxyXG5jb25zdCBnZXREZWJ1Z0xldmVsID0gKERlYnVnTGV2ZWxOYW1lOiBzdHJpbmcpOiBudW1iZXIgPT4ge1xyXG5cdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IGNvbnNvbGUubG9nKCdHZXQgZm9yIERlYnVnTGV2ZWxOYW1lJywgRGVidWdMZXZlbE5hbWUpIH1cclxuXHREZWJ1Z0xldmVsTmFtZXMuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XHJcblx0XHRpZiAodmFsdWUgPT0gRGVidWdMZXZlbE5hbWUpIHtcclxuXHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgY29uc29sZS5sb2coJ0ZpbmQgRGVidWdMZXZlbEluZGV4JywgaW5kZXgpIH1cclxuXHRcdFx0cmV0dXJuIGluZGV4XHJcblx0XHR9XHJcblx0fSk7XHJcblx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoKSB7IGNvbnNvbGUubG9nKCdObyBGaW5kaW5nIGZvciBEZWJ1Z0xldmVsTmFtZScsIERlYnVnTGV2ZWxOYW1lKSB9XHJcblx0cmV0dXJuIDBcclxufVxyXG5cclxuLy8gU2V0dGluZ3MgZm9yIFNlbWFMb2dpY1xyXG5jbGFzcyBTZW1hTG9naWNTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcblx0cGx1Z2luOiBTZW1hTG9naWNQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFNlbWFMb2dpY1BsdWdpbikge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cclxuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdC8vIEhlYWRsaW5lIGZvciBTZXR0aW5nc1RhYlxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnU2V0dGluZ3MgZm9yIFNlbWFMb2dpYzonIH0pO1xyXG5cclxuXHRcdC8vIEdlbmVyYWwgRGVidWcgTGV2ZWxcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnR2VuZXJhbCBEZWJ1Z0xldmVsJylcclxuXHRcdFx0LnNldERlc2MoJ1lvdSBjYW4gc2V0IGEgRGVidWdMZXZlbCBmb3IgRGV2ZWxvcG1lbnRpbmZvcm1hdGlvbicpXHJcblx0XHRcdC5hZGREcm9wZG93bihkcm9wRG93biA9PiBkcm9wRG93blxyXG5cdFx0XHRcdC5hZGRPcHRpb24oJzAnLCBEZWJ1Z0xldmVsTmFtZXNbMF0pXHJcblx0XHRcdFx0LmFkZE9wdGlvbignMScsIERlYnVnTGV2ZWxOYW1lc1sxXSlcclxuXHRcdFx0XHQuYWRkT3B0aW9uKCcyJywgRGVidWdMZXZlbE5hbWVzWzJdKVxyXG5cdFx0XHRcdC5hZGRPcHRpb24oJzMnLCBEZWJ1Z0xldmVsTmFtZXNbM10pXHJcblx0XHRcdFx0LmFkZE9wdGlvbignNCcsIERlYnVnTGV2ZWxOYW1lc1s0XSlcclxuXHRcdFx0XHQuYWRkT3B0aW9uKCc1JywgRGVidWdMZXZlbE5hbWVzWzVdKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlEZWJ1Z0xldmVsKSlcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ3VycmVudF9EZXYpIHsgY29uc29sZS5sb2coJ1NldCBEZWJ1Z0xldmVsOiAnICsgRGVidWdMZXZlbE5hbWVzW3BhcnNlSW50KHZhbHVlKV0pIH07XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teURlYnVnTGV2ZWwgPSBwYXJzZUludCh2YWx1ZSk7XHJcblx0XHRcdFx0XHREZWJ1Z0xldmVsID0gcGFyc2VJbnQodmFsdWUpXHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpXHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdC8vIERpc3BsYXkgU2V0dGluZ3MgZm9yIFNlbWFMb2dpY1xyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdDaGFuZ2UgeW91ciBzZXR0aW5nIHByb2ZpbGUnKVxyXG5cdFx0XHQuc2V0RGVzYygnWW91IGNhbiBkZWZpbmUgZGlmZmVyZW50IHByb2ZpbGVzIGZvciB5b3VyIFNlbWFMb2dpY1NlcnZpY2UnKVxyXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcERvd24gPT4gZHJvcERvd25cclxuXHRcdFx0XHQuYWRkT3B0aW9uKCcwJywgJ1Byb2ZpbGUgMScpXHJcblx0XHRcdFx0LmFkZE9wdGlvbignMScsICdQcm9maWxlIDInKVxyXG5cdFx0XHRcdC5hZGRPcHRpb24oJzInLCAnUHJvZmlsZSAzJylcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nLnRvU3RyaW5nKCkpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0N1cnJlbnRfRGV2KSB7IGNvbnNvbGUubG9nKCdTZXQgUHJvZmlsZTogJyArIHZhbHVlKSB9O1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nID0gcGFyc2VJbnQodmFsdWUpO1xyXG5cdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0Ly8gUG9ydCBmb3IgcmVhY2hpbmcgU2VtYUxvZ2ljIHdpdGggU3RhbmRhcmRwYXJhbWV0ZXJcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUG9ydCBTZW1hTG9naWMnKVxyXG5cdFx0XHQuc2V0RGVzYygnRW50ZXIgdGhlIFBvcnQnKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoQVBJX0RlZmF1bHRzLlBvcnQpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15UG9ydClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IGNvbnNvbGUubG9nKCdTZXQgdG8gUG9ydDogJyArIHZhbHVlKSB9O1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlQb3J0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0Ly8gT3V0cHV0Rm9ybWF0cyBcclxuXHRcdC8vIFRvRG86IEdldCBmcm9tIEFQSSB3aGljaCBPdXRwdXRGb3JtYXRzIGFyZSBwb3NzaWJsZVx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnT3V0cHV0Rm9ybWF0JylcclxuXHRcdFx0LnNldERlc2MoJ0hlcmUgeW91IGNhbiBzZXQgdGhlIG91dHB1dGZvcm1hdCBmb3IgU2VtYUxvZ2ljLCB3aGljaCBjb3VsZCBiZSBnZXQgZnJvbSBTZW1hTG9naWNTZXJ2aWNlJylcclxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3BEb3duID0+IGRyb3BEb3duXHJcblx0XHRcdFx0LmFkZE9wdGlvbihydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX1NlbWFsb2dpY11bMV0sIHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfU2VtYWxvZ2ljXVswXSlcclxuXHRcdFx0XHQuYWRkT3B0aW9uKHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfQVNQXVsxXSwgcnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19BU1BdWzBdKVxyXG5cdFx0XHRcdC5hZGRPcHRpb24ocnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19QaWN0dXJlXVsxXSwgcnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19QaWN0dXJlXVswXSlcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlPdXRwdXRGb3JtYXQpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZygnU2V0IE91dHB1dGZvcm1hdDogJyArIHZhbHVlKSB9O1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlPdXRwdXRGb3JtYXQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHQvLyBCYXNlVVJMIFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdCYXNlVXJsJylcclxuXHRcdFx0LnNldERlc2MoJ0Jhc2VVUkwgZm9yIHJlYWNoaW5nIFNlbWFMb2dpY1NlcnZpY2UnKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoQVBJX0RlZmF1bHRzLkJhc2VfVVJMKVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teUJhc2VVUkwpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZygnU2V0IEJhc2VVUkw6ICcgKyB2YWx1ZSkgfTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15QmFzZVVSTCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUGF0aCB0byBHZXQtQVBJLUVuZHBvaW50cycpXHJcblx0XHRcdC5zZXREZXNjKCdQYXRoIHRvIEdldC1BUEkgZm9yIG1vcmUgSW5mb3JtYXRpb24gYWJvdXQgdGhlIEVuZHBvaW50cyBvZiB1c2VkIEFQSXMnKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoQVBJX0RlZmF1bHRzLkdldEFQSSlcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlHZXRBUEkpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZygnU2V0IHRvIEdldC1BUEktRW5kcG9pbnQ6ICcgKyB2YWx1ZSkgfTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15R2V0QVBJID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdC8vdGhpcy5kaXNwbGF5KClcclxuXHRcdFx0XHR9KSk7XHJcblx0XHQvLyBTSUQtSW5mb3JtYXRpb25cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnU0lEJylcclxuXHRcdFx0LnNldERlc2MoJ1NlbWFMb2dpYyBTZXNzaW9uSUQnKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoQVBJX0RlZmF1bHRzLlNJRClcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlTSUQpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZygnU2V0IFNJRDogJyArIHZhbHVlKSB9O1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlTSUQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHRcdC8vIFNob3cgRGlhbGVjdCBpbiBSZWFkaW5nIFZpZXdcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnU2hvdyBDb250ZXh0IGluIFJlYWRpbmcgVmlldycpXHJcblx0XHRcdC8vLnNldERlc2MoJ1Nob3cgQ29udGV4dCBpbiBSZWFkaW5nIFZpZXcnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHNldHRpbmcgPT4gc2V0dGluZ1xyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teUNvbnRleHQpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZygnU2V0IENvbnRleHQgb2YgUmVhZGluZyBWaWV3OiAnICsgdmFsdWUpIH07XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teUNvbnRleHQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXHJcblx0XHRcdFx0XHQvL3RoaXMuZGlzcGxheSgpXHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdC8vIFNob3cgU3RhbmRhcmRVcGRhdGVJbnRlcnZhbFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdTdGFuZGFyZCB1cGRhdGVpbnRlcnZhbCcpXHJcblx0XHRcdC8vLnNldERlc2MoJ1NldCBzdGFuZGFyZCB1cGRhdGVpbnRlcnZhbCcpXHJcblx0XHRcdC5hZGRUZXh0KHNldHRpbmcgPT4gc2V0dGluZ1xyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVwZGF0ZUludGVydmFsLnRvU3RyaW5nKCkpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZygnU2V0IFVwZGF0ZSBJbnRlcnZhbDogJyArIHZhbHVlKSB9O1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlVcGRhdGVJbnRlcnZhbCA9IHBhcnNlSW50KHZhbHVlKTtcclxuXHRcdFx0XHRcdHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMucGx1Z2luLmludGVydmFsKVxyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmVnaXN0ZXJJbnRlcnZhbChcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uaW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwodGhpcy5wbHVnaW4uaGFuZGxlVXBkYXRlLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVwZGF0ZUludGVydmFsKVxyXG5cdFx0XHRcdFx0KTtcclxuXHJcblxyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcclxuXHRcdFx0XHRcdC8vdGhpcy5kaXNwbGF5KClcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0Ly8gRm9yIEhUVFAtUmVxdWVzdCB3aXRoIFVzZXIvUGFzc3dvcmQgXHRcdFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdTZWN1cmUgSFRUUC1SZXF1ZXN0JylcclxuXHRcdFx0LnNldERlc2MoJ0lmIHlvdSBoYXMgdG8gdXNlIFVzZXIvUGFzc3dvcmQgZm9yIGh0dHAtcmVxdWVzdCB0byB0aGUgU2VtYUxvZ2ljIHNlcnZpY2UnKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKHNldHRpbmcgPT4gc2V0dGluZ1xyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teURlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coJ1NldCBVc2VyUGFzc3dvcmRSZXF1ZXN0OiAnICsgdmFsdWUpIH07XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxyXG5cdFx0XHRcdFx0dGhpcy5kaXNwbGF5KClcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzKSB7XHJcblx0XHRcdC8vIFJlcXVlc3QtVXNlclxyXG5cdFx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgnSFRUUC1SZXF1ZXN0LVVzZXInKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdVc2VyIHRvIHJlYWNoIFNlbWFMb2dpYyBzZXJ2aWNlJylcclxuXHRcdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihBUElfRGVmYXVsdHMuSHR0cFVzZXIpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlVc2VyKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IGNvbnNvbGUubG9nKCdTZXQgSFRUUC1SZXF1ZXN0LVVzZXIuLi4nKSB9O1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZXIgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0XHQvLyBSZXF1ZXN0LVBhc3N3b3JkXHJcblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHRcdC5zZXROYW1lKCdIVFRQLVJlcXVlc3QtUGFzc3dvcmQnKVxyXG5cdFx0XHRcdC5zZXREZXNjKCdQYXNzd29yZCB0byByZWFjaCBTZW1hTG9naWMgc2VydmljZScpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoQVBJX0RlZmF1bHRzLkh0dHBQYXNzd29yZClcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVBhc3N3b3JkKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IGNvbnNvbGUubG9nKCdTZXQgSFRUUC1SZXF1ZXN0LVBhc3N3b3JkLi4uJykgfTtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlQYXNzd29yZCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdH0pKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBU1BCYXNlVVJMIFxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKCdCYXNlVXJsIGZvciBBU1AnKVxyXG5cdFx0XHQuc2V0RGVzYygnQmFzZVVSTCBmb3IgcmVhY2hpbmcgQVNQLVNlcnZpY2UnKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoQVBJX0RlZmF1bHRzLkFzcFVybClcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlBc3BVcmwpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZygnU2V0IEFTUEJhc2VVUkw6ICcgKyB2YWx1ZSkgfTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15QXNwVXJsID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0Ly8gU3RhbmRhcmQgQVNQRW5kcG9pbnRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnUGF0aCB0byBHZXQtQVNQLVN0YW5kYXJkQVBJLUVuZHBvaW50JylcclxuXHRcdFx0LnNldERlc2MoJ1BhdGggdG8gQVNQLVN0YW5kYXJkLUFQSSAnKVxyXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoQVBJX0RlZmF1bHRzLkFzcEVuZHBvaW50KVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teUFzcEVuZHBvaW50KVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teURlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coJ1NldCB0byBBU1AtU3RhbmRhcmQtQVBJLUVuZHBvaW50OiAnICsgdmFsdWUpIH07XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teUFzcEVuZHBvaW50ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdH1cclxufVxyXG5cclxuLy8gQ29tbXVuaWNhdGlvbkNsYXNzIGZvciBpbnRlcmFjdGlvbiBiZXR3ZWVuIFNMdmlldyBhbmQgZWRpdG9yIHdpbmRvd1xyXG5leHBvcnQgY2xhc3MgU2VtYUxvZ2ljUGx1Z2luQ29tbSB7XHJcblx0c2x2aWV3OiBTZW1hTG9naWNWaWV3XHJcblx0c2xQbHVnaW46IFNlbWFMb2dpY1BsdWdpblxyXG5cdHNsYXNwdmlldzogQVNQVmlld1xyXG5cdGFjdGl2YXRlZEFTUDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHNsVXNlZE1EVmlldzogTWFya2Rvd25WaWV3XHJcblxyXG5cdHNldFNsVmlldyh2aWV3OiBTZW1hTG9naWNWaWV3KSB7XHJcblx0XHR0aGlzLnNsdmlldyA9IHZpZXdcclxuXHR9XHJcblxyXG5cdHNldFNMQ2xhc3Moc2xjbGFzczogU2VtYUxvZ2ljUGx1Z2luKSB7XHJcblx0XHR0aGlzLnNsUGx1Z2luID0gc2xjbGFzc1xyXG5cdH1cclxuXHJcblx0cHVibGljIGFkZChhOiBudW1iZXIsIGI6IG51bWJlcik6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gYSArIGJcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlbWFMb2dpY1BsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzO1xyXG5cdHNlbWFMb2dpY1ZpZXc6IFNlbWFMb2dpY1ZpZXc7XHJcblx0bXlTdGF0dXM6IEhUTUxFbGVtZW50O1xyXG5cdHN0YXR1c1RyYW5zZmVyOiBib29sZWFuXHJcblx0c3RhdHVzU0w6IGJvb2xlYW47XHJcblxyXG5cdGFjdGl2YXRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHVwZGF0aW5nOiBib29sZWFuID0gZmFsc2U7XHJcblx0bGFzdFVwZGF0ZTogbnVtYmVyID0gMDtcclxuXHR1cGRhdGVPdXRzdGFuZGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHVwZGF0ZU91dHN0YW5kaW5nU2V0dGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdHdhaXRpbmdGb3JSZXNwb25zZSA9IGZhbHNlO1xyXG5cdFVwZGF0ZVByb2Nlc3Npbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRzbENvbW06IFNlbWFMb2dpY1BsdWdpbkNvbW07XHJcblx0bGFzdGFjdGl2ZVZpZXc6IE1hcmtkb3duVmlldztcclxuXHR2aWV3X3V0aWxzID0gbmV3IFZpZXdVdGlsc1xyXG5cdGludGVydmFsOiBudW1iZXJcclxuXHJcblx0Ly8gRHVlIHRvIGNoYW5nZSBpbiBTcHJpbnQgMS8yMDIzIHRvIGlubGluZSBkaWFsZWN0cywgZGV0ZWN0aW9uIG9mIGNvbnRleHRzIHdpbGwgYmUgbmVlZGVkIGluIGxhdGVyIHNwcmludHMgXHJcblx0cHJpdmF0ZSBnZXRDb250ZXh0RnJvbUxpbmUobXlkaWFsZWN0SUQ6IHN0cmluZykge1xyXG5cdFx0Ly8gVG9EbzogUmVwbGFjZSB2b24gVG9rb25zIC0gYmlzIGRpZSBuZXVlIFNlbWFMb2dpY1ZlcnNpb24gYnpnbC4gZGVyIENvbnRleHRlIHZlcmZcdTAwRkNnYmFyIGlzdFxyXG5cdFx0bXlkaWFsZWN0SUQgPSBteWRpYWxlY3RJRC5yZXBsYWNlKCdTZW1hTG9naWNDb250ZXh0XHUyMjYxJywgJ1NlbWFMb2dpY0RpYWxlY3RcdTIyNjEnKTtcclxuXHRcdC8vbXlkaWFsZWN0SUQgPSBteWRpYWxlY3RJRC5yZXBsYWNlKFwiZGlhbGVjdDo9XCIsIFwiXCIpO1xyXG5cdFx0bGV0IHJlID0gL1xcdC9naTtcclxuXHRcdG15ZGlhbGVjdElEID0gbXlkaWFsZWN0SUQucmVwbGFjZShyZSwgXCJcIik7XHJcblx0XHRyZSA9IC9cXG4vZ2k7XHJcblx0XHRteWRpYWxlY3RJRCA9IG15ZGlhbGVjdElELnJlcGxhY2UocmUsIFwiXCIpO1xyXG5cdFx0cmV0dXJuIHsgbXlkaWFsZWN0SUQgfTtcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgZ2V0QWN0aXZlVmlldygpOiBNYXJrZG93blZpZXcgfCB1bmRlZmluZWQge1xyXG5cdFx0Y29uc3QgYWN0aXZlVmlldyA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0aWYgKGFjdGl2ZVZpZXcgPT09IG51bGwpIHtcclxuXHRcdFx0aWYgKHRoaXMubGFzdGFjdGl2ZVZpZXcgPT09IG51bGwpIHtcclxuXHRcdFx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0hpZ2gpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgXCJBY3RpdmVWaWV3IGNvdWxkIG5vdCBiZSBkZWZpbmVkIHRocm91Z2ggU2VtYUxvZ2ljXCIpIH1cclxuXHRcdFx0XHRyZXR1cm5cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5sYXN0YWN0aXZlVmlldztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5sYXN0YWN0aXZlVmlldyA9IGFjdGl2ZVZpZXdcclxuXHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIHRoaXMubGFzdGFjdGl2ZVZpZXcuZ2V0RGlzcGxheVRleHQoKSkgfVxyXG5cdFx0cmV0dXJuIHRoaXMubGFzdGFjdGl2ZVZpZXdcclxuXHR9XHJcblxyXG5cdHNldFZpZXdzKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5zbENvbW0uYWN0aXZhdGVkQVNQID0gZmFsc2VcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdHN3aXRjaCAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkpIHtcclxuXHRcdFx0XHRjYXNlIEFTUFZpZXdUeXBlOiB7XHJcblx0XHRcdFx0XHR0aGlzLnNsQ29tbS5zbGFzcHZpZXcgPSAobGVhZi52aWV3IGFzIEFTUFZpZXcpXHJcblx0XHRcdFx0XHR0aGlzLnNsQ29tbS5zbGFzcHZpZXcuc2V0Q29tbSh0aGlzLnNsQ29tbSlcclxuXHRcdFx0XHRcdHRoaXMuc2xDb21tLnNsYXNwdmlldy5zbENvbW0uc2V0U2xWaWV3KHRoaXMuc2xDb21tLnNsdmlldylcclxuXHRcdFx0XHRcdHRoaXMuc2xDb21tLnNsYXNwdmlldy5zbENvbW0uc2xQbHVnaW4gPSB0aGlzLnNsQ29tbS5zbFBsdWdpblxyXG5cdFx0XHRcdFx0dGhpcy5zbENvbW0uYWN0aXZhdGVkQVNQID0gdHJ1ZVxyXG5cdFx0XHRcdFx0dGhpcy5zdGF0dXNUcmFuc2ZlciA9IHRydWVcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y2FzZSBTZW1hTG9naWNWaWV3VHlwZToge1xyXG5cdFx0XHRcdFx0dGhpcy5zbENvbW0uc2x2aWV3ID0gKGxlYWYudmlldyBhcyBTZW1hTG9naWNWaWV3KVxyXG5cdFx0XHRcdFx0dGhpcy5zbENvbW0uc2x2aWV3LnNldENvbW0odGhpcy5zbENvbW0pXHJcblx0XHRcdFx0XHR0aGlzLnNsQ29tbS5zbHZpZXcuc2xDb21tLnNldFNsVmlldyh0aGlzLnNsQ29tbS5zbHZpZXcpXHJcblx0XHRcdFx0XHR0aGlzLnNsQ29tbS5zbHZpZXcuc2xDb21tLnNsUGx1Z2luID0gdGhpcy5zbENvbW0uc2xQbHVnaW5cclxuXHRcdFx0XHRcdHRoaXMuYWN0aXZhdGVkID0gdHJ1ZVxyXG5cdFx0XHRcdFx0dGhpcy5zdGF0dXNTTCA9IHRydWVcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHR0aGlzLmdldEFjdGl2ZVZpZXcoKVxyXG5cdFx0Ly90aGlzLnNlbWFMb2dpY1VwZGF0ZShmYWxzZSlcclxuXHR9XHJcblxyXG5cdGFzeW5jIG9ubG9hZCgpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93blBvc3RQcm9jZXNzb3IoKGVsZW1lbnQsIGNvbnRleHQpID0+IHtcclxuXHRcdFx0Y29uc29sZS5sb2coZWxlbWVudCwgY29udGV4dClcclxuXHRcdFx0ZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwicFwiKS5mb3JFYWNoKChlbCkgPT4ge1xyXG5cdFx0XHRcdGlmIChzZWFyY2hGb3JTZW1hTG9naWNDb21tYW5kcyhlbCkpIHtcclxuXHRcdFx0XHRcdGxldCBzZXQgPSB0aGlzLnNldHRpbmdzXHJcblx0XHRcdFx0XHRjb250ZXh0LmFkZENoaWxkKG5ldyBTZW1hTG9naWNSZW5kZXJlZEVsZW1lbnQoeyBjb250YWluZXJFbDogZWwgYXMgSFRNTEVsZW1lbnQsIHNldCB9KSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pXHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgU2VtYUxvZ2ljU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdERlYnVnTGV2ZWwgPSB0aGlzLnNldHRpbmdzLm15RGVidWdMZXZlbFxyXG5cclxuXHRcdC8vIFRoaXMgYWRkcyBhIHN0YXR1cyBiYXIgZm9yIGluZm9ybWF0aW9uc1xyXG5cdFx0dGhpcy5teVN0YXR1cyA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpXHJcblxyXG5cdFx0dGhpcy5zbENvbW0gPSBuZXcgU2VtYUxvZ2ljUGx1Z2luQ29tbVxyXG5cdFx0dGhpcy5zbENvbW0uc2V0U0xDbGFzcyh0aGlzKVxyXG5cclxuXHRcdHRoaXMuYWN0aXZhdGVWaWV3KCk7XHJcblx0XHQvLyBDbGVhciBTZW1hTG9naWMgdG8gc3RhcnQgd2l0aCBhIGNsZWFyIHNlcnZpY2VcclxuXHRcdGF3YWl0IHRoaXMuc2VtYUxvZ2ljUmVzZXQoKTtcclxuXHRcdHRoaXMuc2V0Vmlld3MoKVxyXG5cclxuXHRcdC8vIGFkZCBhbiBSaWJib25JY29uIHRvIGFjdGl2Y2F0ZSBhbmQgZGVhY3RpdmF0ZSB0aGUgU2VtYUxvZ2ljVmlld1xyXG5cdFx0dGhpcy5hZGRSaWJib25JY29uKFwiYm9va1wiLCBcIk9uL09mZiBTZW1hTG9naWMuVmlld1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0Vmlld3MoKVxyXG5cdFx0XHRpZiAodGhpcy5hY3RpdmF0ZWQgPT0gZmFsc2UpIHtcclxuXHRcdFx0XHR0aGlzLnN0YXR1c1NMID0gdHJ1ZVxyXG5cdFx0XHRcdGlmICghdGhpcy5hY3RpdmF0ZWQpIHtcclxuXHRcdFx0XHRcdHRoaXMuYWN0aXZhdGVWaWV3KClcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5zdGF0dXNTTCA9IGZhbHNlXHJcblx0XHRcdFx0dGhpcy5kZWFjdGl2YXRlVmlldygpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSk7XHJcblx0XHQvLyBhZGQgYW4gUmliYm9uSWNvbiB0byBhY3RpdmNhdGUgYW5kIGRlYWN0aXZhdGUgdGhlIFNlbWFMb2dpY1ZpZXdcclxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbihcImRpY2VcIiwgXCJPbi9PZmYgVHJhbnNmZXIuVmlld1wiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2V0Vmlld3MoKVxyXG5cdFx0XHRpZiAodGhpcy5zbENvbW0gIT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuc2xDb21tLmFjdGl2YXRlZEFTUCA9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0dGhpcy5hY3RpdmF0ZUFTUFZpZXcoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5kZWFjdGl2YXRlQVNQVmlldygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRpZiAodGhpcy5zdGF0dXNTTCkge1xyXG5cdFx0XHR0aGlzLnNlbWFMb2dpY1Jlc2V0KCk7XHJcblx0XHRcdC8vIERlZmF1bHQgaXMgdGhhdCBTZW1hTG9naWNWaWV3IGlzIGFjdGl2YXRlZCBidXQgaXQgY2FuIGJlIGRlYWN0aXZhdGVkIGJ5IGNsaWNrIG9uIFJpYmJvbiBJY29uXHJcblx0XHRcdHRoaXMuc2xDb21tLnNsdmlldy5zZXROZXdJbml0aWFsKHRoaXMuc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2V0dGluZ3MubXlTZXR0aW5nXS5teU91dHB1dEZvcm1hdCk7XHJcblx0XHRcdHRoaXMuc2VtYUxvZ2ljUGFyc2UoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMucmVnaXN0ZXJJbnRlcnZhbChcclxuXHRcdFx0dGhpcy5pbnRlcnZhbCA9IHdpbmRvdy5zZXRJbnRlcnZhbCh0aGlzLmhhbmRsZVVwZGF0ZSwgdGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15VXBkYXRlSW50ZXJ2YWwpXHJcblx0XHQpO1xyXG5cdFx0dGhpcy5yZWdpc3RlckVkaXRvckV4dGVuc2lvbihbRWRpdG9yVmlldy51cGRhdGVMaXN0ZW5lci5vZih0aGlzLmhhbmRsZVVwZGF0ZSldKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNlbWFMb2dpY1BhcnNlKCk6IFByb21pc2U8Tm9kZVtdPiB7XHJcblxyXG5cdFx0dGhpcy5zZXRWaWV3cygpO1xyXG5cclxuXHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdTdGFydCBTZW1hTG9naWNQYXJzZScpIH07XHJcblx0XHRsZXQgcmVzdWx0czogTm9kZVtdID0gW107XHJcblxyXG5cdFx0dGhpcy5sYXN0VXBkYXRlID0gRGF0ZS5ub3coKVxyXG5cdFx0YXdhaXQgc2VtYUxvZ2ljUGluZyh0aGlzLnNldHRpbmdzLCB0aGlzLmxhc3RVcGRhdGUpXHJcblxyXG5cdFx0bGV0IHZBUElfVVJMID0gZ2V0SG9zdFBvcnQodGhpcy5zZXR0aW5ncykgKyBBUElfRGVmYXVsdHMucnVsZXNfcGFyc2UgKyBcIj9zaWQ9XCIgKyB0aGlzLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnNldHRpbmdzLm15U2V0dGluZ10ubXlTSUQ7XHJcblx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCB2QVBJX1VSTCkgfTtcclxuXHJcblx0XHRsZXQgYm9keXRleHQ6IHN0cmluZyA9IFwiXCI7XHJcblx0XHRsZXQgYWN0aXZlVmlldyA9IHRoaXMuZ2V0QWN0aXZlVmlldygpXHJcblx0XHRpZiAoYWN0aXZlVmlldyAhPSB1bmRlZmluZWQpIHsgdGhpcy5zbENvbW0uc2xVc2VkTURWaWV3ID0gYWN0aXZlVmlldyB9XHJcblxyXG5cdFx0bGV0IGRpYWxlY3RJRDogc3RyaW5nID0gXCJkZWZhdWx0XCJcclxuXHRcdGxldCBjb2RlYmxvY2s6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRcdGxldCBuZXdDb2RlYmxvY2s6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcblx0XHRpZiAoYWN0aXZlVmlldyAhPSBudWxsKSB7XHJcblx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdBY3RpdmVWaWV3IGlzIG5vdCBOVUxMJykgfTtcclxuXHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYWN0aXZlVmlldy5lZGl0b3IubGluZUNvdW50KCk7IGkrKykge1xyXG5cdFx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQWxsKSB7XHJcblx0XHRcdFx0XHRzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCBpLCAnOycsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkpXHJcblx0XHRcdFx0XHRzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCAnU3Vic3RyaW5nOicsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIDIpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIDMpID09IFwiYGBgXCIpIHtcclxuXHRcdFx0XHRcdGlmICghY29kZWJsb2NrKSB7XHJcblx0XHRcdFx0XHRcdGNvZGVibG9jayA9IHRydWVcclxuXHRcdFx0XHRcdFx0bmV3Q29kZWJsb2NrID0gdHJ1ZVxyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0bmV3Q29kZWJsb2NrID0gZmFsc2VcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdDdXJyZW50IGxpbmUgaXMgQ29kZWJsb2NrJywgY29kZWJsb2NrKSB9XHJcblxyXG5cdFx0XHRcdGlmICgoIWNvZGVibG9jaykgJiYgKCFuZXdDb2RlYmxvY2spKSB7XHJcblx0XHRcdFx0XHQvLyBDaGVjayBpbmxpbmUgU3RhdGVtZW50c1xyXG5cdFx0XHRcdFx0Ym9keXRleHQgPSBib2R5dGV4dC5jb25jYXQoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKSArICdcXG4nKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFByXHUwMEZDZmUgYXVmIHp1IHZlcndlbmRlbmRlbiBEaWFsZWN0XHJcblx0XHRcdFx0XHRzd2l0Y2ggKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIHNlbWFMb2dpY0NvbW1hbmQudXNlRGlhbGVjdC5sZW5ndGgpKSB7XHJcblx0XHRcdFx0XHRcdGNhc2Ugc2VtYUxvZ2ljQ29tbWFuZC51c2VEaWFsZWN0OiB7XHJcblx0XHRcdFx0XHRcdFx0ZGlhbGVjdElEID0gYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoc2VtYUxvZ2ljQ29tbWFuZC51c2VEaWFsZWN0Lmxlbmd0aCwgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5sZW5ndGggLSAxKVxyXG5cdFx0XHRcdFx0XHRcdGRpYWxlY3RJRCA9IGRpYWxlY3RJRC50cmltKCk7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRkZWZhdWx0OiB7IH1cclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmIChpIDwgYWN0aXZlVmlldy5lZGl0b3IubGluZUNvdW50KCkpIHtcclxuXHRcdFx0XHRcdGlmIChhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZygwLCAzKSA9PSBcImBgYFwiKSB7XHJcblx0XHRcdFx0XHRcdGlmICgoY29kZWJsb2NrKSAmJiAoIW5ld0NvZGVibG9jaykpIHsgY29kZWJsb2NrID0gZmFsc2UgfSBlbHNlIHsgbmV3Q29kZWJsb2NrID0gZmFsc2UgfVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHJcblx0XHRib2R5dGV4dCA9IHRoaXMudmlld191dGlscy5jbGVhbkNvbW1hbmRzKGJvZHl0ZXh0KVxyXG5cdFx0aWYgKGRpYWxlY3RJRCA9PSBcIlwiKSB7IGRpYWxlY3RJRCA9IFwiZGVmYXVsdFwiIH1cclxuXHJcblx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZyhcIlBhcnNpbmdyZXN1bHQgZm9yIFNlbWFMb2dpY1ZpZXdcIikgfVxyXG5cdFx0Y29uc3QgcmVzcG9uc2VGb3JTZW1hTG9naWMgPSB0aGlzLnNsQ29tbS5zbHZpZXcuZ2V0U2VtYUxvZ2ljUGFyc2UodGhpcy5zZXR0aW5ncywgdkFQSV9VUkwsIGRpYWxlY3RJRCwgYm9keXRleHQsIGZhbHNlKVxyXG5cdFx0cmVzcG9uc2VGb3JTZW1hTG9naWMudGhlbih2YWx1ZSA9PiB7XHJcblx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IGNvbnNvbGUubG9nKHZhbHVlKSB9XHJcblx0XHR9KVxyXG5cclxuXHRcdHRoaXMudXBkYXRlT3V0c3RhbmRpbmcgPSBmYWxzZVxyXG5cclxuXHRcdGlmICh0aGlzLnNsQ29tbS5hY3RpdmF0ZWRBU1ApIHtcclxuXHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgY29uc29sZS5sb2coXCJQYXJzaW5ncmVzdWx0IGZvciBPblRoZUZseSBUcmFuc2Zlci52aWV3IGluIFNlbWFMb2dpY1wiKSB9XHJcblx0XHRcdGNvbnN0IHBhcnNlQ29tbWFuZHMgPSB0aGlzLnNsQ29tbS5zbGFzcHZpZXcuZ2V0QVNQQ29tbWFuZHModGhpcy5zbENvbW0sIHRoaXMuc2V0dGluZ3MpXHJcblx0XHRcdGxldCBvdXRwdXRGb3JtYXQ6IHN0cmluZyA9IHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfQVNQXVsxXVxyXG5cdFx0XHRpZiAocGFyc2VDb21tYW5kcy5vdXRwdXRmb3JtYXQgIT0gdW5kZWZpbmVkICYmIHBhcnNlQ29tbWFuZHMub3V0cHV0Zm9ybWF0ICE9IHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfQVNQXVswXSkgeyBvdXRwdXRGb3JtYXQgPSBwYXJzZUNvbW1hbmRzLm91dHB1dGZvcm1hdCB9XHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlRm9yQVNQID0gdGhpcy5zbENvbW0uc2x2aWV3LmdldFNlbWFMb2dpY1BhcnNlKHRoaXMuc2V0dGluZ3MsIHZBUElfVVJMLCBkaWFsZWN0SUQsIGJvZHl0ZXh0LCB0cnVlLCBvdXRwdXRGb3JtYXQpXHJcblx0XHRcdHJlc3BvbnNlRm9yQVNQLnRoZW4odmFsdWUgPT4ge1xyXG5cdFx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IGNvbnNvbGUubG9nKHZhbHVlKSB9XHJcblx0XHRcdFx0Y29uc3QgYXNwUHJvbWlzZSA9IHRoaXMuc2xDb21tLnNsYXNwdmlldy5hc3BQYXJzZSh0aGlzLnNsQ29tbSwgdGhpcy5zZXR0aW5ncywgdmFsdWUpXHJcblx0XHRcdFx0YXNwUHJvbWlzZS50aGVuKHZhbHVlID0+IHsgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgeyBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCB2YWx1ZSkgfSB9KVxyXG5cdFx0XHR9KVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJlc3VsdHNcclxuXHR9XHJcblxyXG5cdGFzeW5jIGFjdGl2YXRlQVNQVmlldygpIHtcclxuXHRcdC8vIEFkZCB0aGUgQVNQIC0gVmlld1xyXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUgaXMgYSBBU1BWaWV3XHJcblx0XHRpZiAodGhpcy5zbENvbW0uc2xhc3B2aWV3ID09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHR0aGlzLnJlZ2lzdGVyVmlldyhcclxuXHRcdFx0XHRBU1BWaWV3VHlwZSxcclxuXHRcdFx0XHRsZWFmID0+IG5ldyBBU1BWaWV3KGxlYWYpXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgbGVhZiA9IHRoaXMuR2V0QXNwTGVhZigpO1xyXG5cdFx0aWYgKGxlYWYgIT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdGxlYWYuc2V0Vmlld1N0YXRlKHtcclxuXHRcdFx0XHR0eXBlOiBBU1BWaWV3VHlwZSxcclxuXHRcdFx0XHRhY3RpdmU6IGZhbHNlLFxyXG5cdFx0XHR9KVxyXG5cdFx0XHRhd2FpdCB0aGlzLnNlbWFMb2dpY1Jlc2V0KClcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkFTUC1MZWFmIG5vdCBjcmVhdGVkXCIpXHJcblx0XHR9XHJcblx0XHR0aGlzLnNldFZpZXdzKClcclxuXHRcdHRoaXMuaGFuZGxlUGluZygpXHJcblx0XHR0aGlzLnN0YXR1c1RyYW5zZmVyID0gdHJ1ZVxyXG5cdFx0dGhpcy5zZW1hTG9naWNVcGRhdGUoKVxyXG5cdFx0dGhpcy5teVN0YXR1cy5zZXRUZXh0KCdBU1AgaXMgb24nKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGFjdGl2YXRlVmlldygpIHtcclxuXHRcdC8vIEFkZCB0aGUgU2VtYUxvZ2ljIC0gVmlld1xyXG5cdFx0aWYgKHRoaXMuc2xDb21tLnNsdmlldyA9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0dGhpcy5yZWdpc3RlclZpZXcoXHJcblx0XHRcdFx0U2VtYUxvZ2ljVmlld1R5cGUsXHJcblx0XHRcdFx0bGVhZiA9PiBuZXcgU2VtYUxvZ2ljVmlldyhsZWFmKVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGxlYWYgPSB0aGlzLkdldFNlbWFMb2dpY0xlYWYoKTtcclxuXHRcdGlmIChsZWFmICE9IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRsZWFmLnNldFZpZXdTdGF0ZSh7XHJcblx0XHRcdFx0dHlwZTogU2VtYUxvZ2ljVmlld1R5cGUsXHJcblx0XHRcdFx0YWN0aXZlOiBmYWxzZSxcclxuXHRcdFx0fSlcclxuXHRcdFx0YXdhaXQgdGhpcy5zZW1hTG9naWNSZXNldCgpXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJTZW1hTG9naWMtTGVhZiBub3QgY3JlYXRlZFwiKVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5zZXRWaWV3cygpXHJcblx0XHR0aGlzLmhhbmRsZVBpbmcoKVxyXG5cdFx0dGhpcy5zZW1hTG9naWNVcGRhdGUoKVxyXG5cdFx0dGhpcy5teVN0YXR1cy5zZXRUZXh0KCdTZW1hTG9naWMgaXMgb24nKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGRlYWN0aXZhdGVBU1BWaWV3KCkge1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShBU1BWaWV3VHlwZSk7XHJcblx0XHR0aGlzLnNsQ29tbS5hY3RpdmF0ZWRBU1AgPSBmYWxzZVxyXG5cdFx0dGhpcy5zdGF0dXNUcmFuc2ZlciA9IHRydWVcclxuXHRcdHRoaXMubXlTdGF0dXMuc2V0VGV4dCgnQVNQIGlzIG9mZicpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgZGVhY3RpdmF0ZVZpZXcoKSB7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFNlbWFMb2dpY1ZpZXdUeXBlKTtcclxuXHRcdHRoaXMuYWN0aXZhdGVkID0gZmFsc2VcclxuXHRcdHRoaXMuc2xDb21tLnNsdmlldy51bmxvYWQoKVxyXG5cdFx0dGhpcy5teVN0YXR1cy5zZXRUZXh0KCdTZW1hTG9naWMgaXMgb2ZmJyk7XHJcblx0fVxyXG5cclxuXHRHZXRBc3BMZWFmKCk6IFdvcmtzcGFjZUxlYWYgfCB1bmRlZmluZWQge1xyXG5cdFx0bGV0IGZvdW5kOiBib29sZWFuID0gZmFsc2VcclxuXHRcdHZhciBzbHY6IFdvcmtzcGFjZUxlYWYgfCB1bmRlZmluZWQgPSB1bmRlZmluZWRcclxuXHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRpZiAoIWZvdW5kKSB7XHJcblx0XHRcdFx0c3dpdGNoIChsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKSkge1xyXG5cdFx0XHRcdFx0Y2FzZSBBU1BWaWV3VHlwZToge1xyXG5cdFx0XHRcdFx0XHRmb3VuZCA9IHRydWVcclxuXHRcdFx0XHRcdFx0c2x2ID0gbGVhZlxyXG5cdFx0XHRcdFx0XHQvL3JldHVybiBzbHZcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHRpZiAoIWZvdW5kKSB7XHJcblx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQWxsKSB7IGNvbnNvbGUubG9nKCdTcGxpdCcpIH1cclxuXHRcdFx0c2x2ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3NwbGl0Jyk7XHJcblx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQWxsKSB7IGNvbnNvbGUubG9nKHNsdikgfVxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHNsdlxyXG5cdH1cclxuXHJcblx0R2V0U2VtYUxvZ2ljTGVhZigpOiBXb3Jrc3BhY2VMZWFmIHwgdW5kZWZpbmVkIHtcclxuXHRcdGxldCBmb3VuZDogYm9vbGVhbiA9IGZhbHNlXHJcblx0XHR2YXIgc2x2OiBXb3Jrc3BhY2VMZWFmIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXHJcblxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0aWYgKCFmb3VuZCkge1xyXG5cdFx0XHRcdHN3aXRjaCAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkpIHtcclxuXHRcdFx0XHRcdGNhc2UgU2VtYUxvZ2ljVmlld1R5cGU6IHtcclxuXHRcdFx0XHRcdFx0Zm91bmQgPSB0cnVlXHJcblx0XHRcdFx0XHRcdHNsdiA9IGxlYWZcclxuXHRcdFx0XHRcdFx0Ly9yZXR1cm4gc2x2XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0aWYgKCFmb3VuZCkge1xyXG5cdFx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0FsbCkgeyBjb25zb2xlLmxvZygnU3BsaXQnKSB9XHJcblx0XHRcdHNsdiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCdzcGxpdCcpO1xyXG5cdFx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0FsbCkgeyBjb25zb2xlLmxvZyhzbHYpIH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBzbHZcclxuXHR9XHJcblxyXG5cclxuXHRhc3luYyBvbnVubG9hZCgpIHtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoQVNQVmlld1R5cGUpO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShTZW1hTG9naWNWaWV3VHlwZSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgRGVmYXVsdF9wcm9maWxlLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHRcdGlmICh0aGlzLnNsQ29tbS5zbHZpZXcgIT0gdW5kZWZpbmVkKSB7IHRoaXMuc2xDb21tLnNsdmlldy5zZXROZXdJbml0aWFsKHRoaXMuc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2V0dGluZ3MubXlTZXR0aW5nXS5teU91dHB1dEZvcm1hdCkgfVxyXG5cdFx0dGhpcy51cGRhdGVPdXRzdGFuZGluZyA9IHRydWU7XHJcblx0XHQvL3RoaXMuc2VtYUxvZ2ljUGFyc2UoKTtcclxuXHR9XHJcblxyXG5cdGhhbmRsZVBpbmcoKSB7XHJcblx0XHRzZW1hTG9naWNQaW5nKHRoaXMuc2V0dGluZ3MsIHRoaXMubGFzdFVwZGF0ZSlcclxuXHR9XHJcblxyXG5cdGhhbmRsZVVwZGF0ZSA9ICh1cGRhdGU6IFZpZXdVcGRhdGUpID0+IHtcclxuXHRcdGlmICh0aGlzLnN0YXR1c1NMKSB7XHJcblx0XHRcdC8vIFRvIGF2b2lkIHRvIG11Y2ggcGFyc2luZyB0cmFmZmljIGZvciB0ZXN0aW5nIHdlIHRyaWVkIHRvIHBhcnNlIGl0IG9ubHkgZXZlcnkgNTAwIG1zIHdoZW4gdGhlcmUgaXMgYW4gdXBkYXRlXHJcblxyXG5cdFx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0N1cnJlbnRfRGV2IHx8IERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoKSB7XHJcblx0XHRcdFx0Y29uc3QgdGV4dCA9ICdVcGRhdGV0aW1lJyArICcvJyArIFN0cmluZyhEYXRlLm5vdygpKSArICcvJyArIFN0cmluZyh0aGlzLmxhc3RVcGRhdGUpICsgJy8nICsgU3RyaW5nKERhdGUubm93KCkgLSB0aGlzLmxhc3RVcGRhdGUpICsgJy8nICsgU3RyaW5nKHRoaXMudXBkYXRlT3V0c3RhbmRpbmcpICsgJy8nICsgU3RyaW5nKHRoaXMud2FpdGluZ0ZvclJlc3BvbnNlKVxyXG5cdFx0XHRcdHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIHRleHQpXHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICh1cGRhdGUgPT0gbnVsbCkgeyB9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGlmICh1cGRhdGUudmlldykge1xyXG5cdFx0XHRcdFx0aWYgKCF1cGRhdGUuZG9jQ2hhbmdlZCAmJiAhdXBkYXRlLmZvY3VzQ2hhbmdlZCkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRpZiAodGhpcy5VcGRhdGVQcm9jZXNzaW5nID09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly90aGlzLnVwZGF0ZU91dHN0YW5kaW5nID0gdHJ1ZVxyXG5cdFx0XHRcdFx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ3VycmVudF9EZXYgfHwgRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0FsbCkgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgJ1N0YXJ0IFVwZGF0ZSBkb2NDaGFuZ2VkLCBmb2N1c2NoYW5nZWQsIFVwZFByb2MgICcgKyBTdHJpbmcodXBkYXRlLmRvY0NoYW5nZWQpICsgXCIvXCIgKyBTdHJpbmcodXBkYXRlLmZvY3VzQ2hhbmdlZCkgKyBcIi9cIiArIFN0cmluZyh0aGlzLlVwZGF0ZVByb2Nlc3NpbmcpKVxyXG5cdFx0XHRcdFx0XHRcdHRoaXMuc2VtYUxvZ2ljVXBkYXRlKClcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKChEYXRlLm5vdygpIC0gdGhpcy5sYXN0VXBkYXRlID4gdGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15VXBkYXRlSW50ZXJ2YWwpICYmICh0aGlzLnVwZGF0ZU91dHN0YW5kaW5nID09IHRydWUpICYmICh0aGlzLndhaXRpbmdGb3JSZXNwb25zZSA9PSBmYWxzZSkpIHtcclxuXHRcdFx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0N1cnJlbnRfRGV2IHx8IERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9BbGwpIHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdTdGFydCBVcGRhdGUgUEFSU0lORycpXHJcblx0XHRcdFx0dGhpcy5sYXN0VXBkYXRlID0gRGF0ZS5ub3coKVxyXG5cdFx0XHRcdHRoaXMuc2VtYUxvZ2ljVXBkYXRlKClcclxuXHRcdFx0fSBlbHNlXHJcblx0XHRcdFx0aWYgKChEYXRlLm5vdygpIC0gdGhpcy5sYXN0VXBkYXRlID4gdGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15VXBkYXRlSW50ZXJ2YWwpICYmICh0aGlzLnVwZGF0ZU91dHN0YW5kaW5nID09IHRydWUpICYmICh0aGlzLndhaXRpbmdGb3JSZXNwb25zZSA9PSBmYWxzZSkpIHtcclxuXHRcdFx0XHRcdHNlbWFMb2dpY1BpbmcodGhpcy5zZXR0aW5ncywgdGhpcy5sYXN0VXBkYXRlKVxyXG5cdFx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHNlbWFMb2dpY1VwZGF0ZShzZXRWaWV3PzogYm9vbGVhbikge1xyXG5cclxuXHRcdHRoaXMud2FpdGluZ0ZvclJlc3BvbnNlID0gdHJ1ZVxyXG5cdFx0dGhpcy5VcGRhdGVQcm9jZXNzaW5nID0gdHJ1ZVxyXG5cclxuXHRcdGlmIChzZXRWaWV3ID09IHRydWUgfHwgc2V0VmlldyA9PSB1bmRlZmluZWQpIHsgdGhpcy5zZXRWaWV3cygpIH1cclxuXHJcblx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0N1cnJlbnRfRGV2IHx8IERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgJ1N0YXJ0IFNlbWFMb2dpY1VwZGF0ZScpIH07XHJcblxyXG5cdFx0dGhpcy5zZXRWaWV3cygpXHJcblx0XHRsZXQgYWN0aXZlVmlldyA9IHRoaXMuZ2V0QWN0aXZlVmlldygpXHJcblx0XHR0aGlzLnNlbWFMb2dpY1BhcnNlKCk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLnVwZGF0aW5nKSB7XHJcblx0XHRcdHRoaXMudXBkYXRpbmcgPSB0cnVlXHJcblx0XHRcdGlmIChhY3RpdmVWaWV3ICE9IG51bGwpIHtcclxuXHRcdFx0XHRjb25zdCBlZGl0b3J0ZXh0ID0gYWN0aXZlVmlldy5lZGl0b3IuZ2V0UmFuZ2UoeyBsaW5lOiAwLCBjaDogMCB9LCB7IGxpbmU6IGFjdGl2ZVZpZXcuZWRpdG9yLmxhc3RMaW5lKCksIGNoOiBhY3RpdmVWaWV3LmVkaXRvci5sYXN0TGluZS5sZW5ndGggfSlcclxuXHRcdFx0XHRjb25zdCBhZGRDaGFyOiBzdHJpbmcgPSBcIiBcIlxyXG5cdFx0XHRcdGxldCBjdXJzb3IgPSBhY3RpdmVWaWV3LmVkaXRvci5nZXRDdXJzb3IoKVxyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYWN0aXZlVmlldy5lZGl0b3IubGFzdExpbmUoKTsgaSsrKSB7XHJcblx0XHRcdFx0XHRpZiAoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoMCwgc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0Lmxlbmd0aCkgPT0gc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0KSB7XHJcblx0XHRcdFx0XHRcdGlmIChhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZyhhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLmxlbmd0aCAtIDEsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkubGVuZ3RoKSA9PSBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfZW5kKSB7XHJcblx0XHRcdFx0XHRcdFx0Ly8gdGVtcG9yYXJseSBhZGQgYSBjaGFyIGZvciBmb3JjaW5nIGFuIHVwZGF0ZSBvZiBodG1sLXZpZXcgXHJcblx0XHRcdFx0XHRcdFx0YWN0aXZlVmlldy5lZGl0b3Iuc2V0TGluZShpLCBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZygwLCBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLmxlbmd0aCkgKyBhZGRDaGFyKVxyXG5cclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRpZiAoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5sZW5ndGggLSAxLCBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLmxlbmd0aCkgPT0gYWRkQ2hhcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gdGVtcG9yYXJseSBhZGQgYSBjaGFyIGZvciBmb3JjaW5nIGFuIHVwZGF0ZSBvZiBodG1sLXZpZXcgXHJcblx0XHRcdFx0XHRcdFx0XHRhY3RpdmVWaWV3LmVkaXRvci5zZXRMaW5lKGksIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkubGVuZ3RoIC0gMSkpXHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIGJhY2sgdG8gY3Vyc29yXHJcblx0XHRcdFx0YWN0aXZlVmlldy5lZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvcilcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLnVwZGF0aW5nID0gZmFsc2VcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLlVwZGF0ZVByb2Nlc3NpbmcgPSBmYWxzZVxyXG5cdFx0dGhpcy53YWl0aW5nRm9yUmVzcG9uc2UgPSBmYWxzZVxyXG5cdH1cclxuXHJcblxyXG5cdGdldFNlbWFMb2dpY1RleHQoKTogc3RyaW5nIHtcclxuXHRcdGlmICh0aGlzLnNsQ29tbS5zbHZpZXcuY29udGVudEVsLnRleHRDb250ZW50ID09IG51bGwpIHtcclxuXHRcdFx0cmV0dXJuIFwiXCJcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnNsQ29tbS5zbHZpZXcuZ2V0Q29udGVudCgpXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRhc3luYyBzZW1hTG9naWNSZXNldCgpIHtcclxuXHRcdC8vIGxldCB2QVBJX1VSTF9SZXNldCA9IEFQSV9EZWZhdWx0cy5CYXNlX1VSTCArIFwiOlwiICsgQVBJX0RlZmF1bHRzLlBvcnQgKyBBUElfRGVmYXVsdHMucmVzZXQgKyBcIj9zaWQ9XCIgKyBBUElfRGVmYXVsdHMuU0lEO1xyXG5cdFx0bGV0IHZBUElfVVJMX1Jlc2V0ID0gZ2V0SG9zdFBvcnQodGhpcy5zZXR0aW5ncykgKyBBUElfRGVmYXVsdHMucmVzZXQgKyBcIj9zaWQ9XCIgKyB0aGlzLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnNldHRpbmdzLm15U2V0dGluZ10ubXlTSUQ7XHJcblxyXG5cdFx0bGV0IG9wdGlvbnNSZXNldDogUmVxdWVzdFVybFBhcmFtXHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15VXNlSHR0cHMgJiYgdGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15VXNlciAhPSAnJykge1xyXG5cdFx0XHRvcHRpb25zUmVzZXQgPSB7XHJcblx0XHRcdFx0dXJsOiB2QVBJX1VSTF9SZXNldCxcclxuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0XHRcImNvbnRlbnQtdHlwZVwiOiBcInRleHQvcGxhaW5cIixcclxuXHRcdFx0XHRcdFwiQXV0aG9yaXphdGlvblwiOiBcIkJhc2ljIFwiICsgYnRvYSh0aGlzLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnNldHRpbmdzLm15U2V0dGluZ10ubXlVc2VyICsgXCI6XCIgKyB0aGlzLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnNldHRpbmdzLm15U2V0dGluZ10ubXlQYXNzd29yZClcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRvcHRpb25zUmVzZXQgPSB7XHJcblx0XHRcdFx0dXJsOiB2QVBJX1VSTF9SZXNldCxcclxuXHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcclxuXHRcdFx0XHRoZWFkZXJzOiB7XHJcblx0XHRcdFx0XHRcImNvbnRlbnQtdHlwZVwiOiBcInRleHQvcGxhaW5cIlxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCBvcHRpb25zUmVzZXQpIH1cclxuXHRcdHRyeSB7XHJcblx0XHRcdGNvbnN0IHJlc3BvbnNlUmVzZXQgPSBhd2FpdCByZXF1ZXN0VXJsKG9wdGlvbnNSZXNldClcclxuXHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbmZvcm1hdGl2ZSkgeyBjb25zb2xlLmxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIGBTZW1hTG9naWM6IFJlc2V0IHdpdGggaHR0cC1zdGF0dXMgJHtyZXNwb25zZVJlc2V0LnN0YXR1cy50b1N0cmluZygpfWApIH07XHJcblx0XHR9XHJcblx0XHRjYXRjaCAoZSkge1xyXG5cdFx0XHRjb25zb2xlLmxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIGBDYXRjaGVycm9yIGJ5IHJlc2V0ICR7dkFQSV9VUkxfUmVzZXR9YClcclxuXHRcdFx0Y29uc29sZS5sb2codGhpcy5zbENvbW0uc2x2aWV3LCBlLnRvU3RyaW5nKCkpXHJcblx0XHR9XHJcblx0fVxyXG5cclxufVxyXG5cclxuIiwgImltcG9ydCB7IERyb3Bkb3duQ29tcG9uZW50LCBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgQnV0dG9uQ29tcG9uZW50LCBSZXF1ZXN0VXJsUGFyYW0sIHJlcXVlc3RVcmwgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgc2xUZXh0cywgcnVsZXNldHR5cGVzQ29tbWFuZHMsIHJzdHlwZXNfU2VtYWxvZ2ljLCByc3R5cGVzX1BpY3R1cmUsIHJzdHlwZXNfQVNQLCByc3R5cGVzX1NlbWFudGljVHJlZSwgRGVidWdMZXZNYXAgfSBmcm9tIFwiLi9jb25zdFwiXHJcbmltcG9ydCB7IFNlbWFMb2dpY1BsdWdpbkNvbW0sIERlYnVnTGV2ZWwsIFNlbWFMb2dpY1BsdWdpblNldHRpbmdzIH0gZnJvbSBcIi4vbWFpblwiXHJcbmltcG9ydCB7IHNsY29uc29sZWxvZyB9IGZyb20gJy4vdXRpbHMnXHJcbmltcG9ydCB7IFZpZXdVdGlscyB9IGZyb20gXCIuL3ZpZXdfdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBTZW1hTG9naWNWaWV3VHlwZSA9IFwiU2VtYUxvZ2ljU2VydmljZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlbWFMb2dpY1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XHJcbiAgdmlld191dGlsczogVmlld1V0aWxzXHJcbiAgbXlBY3Rpb246IEhUTUxFbGVtZW50XHJcbiAgZHJvcGRvd25CdXR0b246IERyb3Bkb3duQ29tcG9uZW50XHJcbiAgY29weUJ1dHRvbjogQnV0dG9uQ29tcG9uZW50XHJcbiAgZGVidWdCdXR0b246IEJ1dHRvbkNvbXBvbmVudFxyXG4gIGRlYnVnQ29udGVudDogc3RyaW5nW11cclxuICB6b29tSW46IEJ1dHRvbkNvbXBvbmVudFxyXG4gIHpvb21SYXRpbzogQnV0dG9uQ29tcG9uZW50XHJcbiAgem9vbU91dDogQnV0dG9uQ29tcG9uZW50XHJcbiAgc2xDb21tOiBTZW1hTG9naWNQbHVnaW5Db21tXHJcbiAgc2NhbGVSYXRpbzogbnVtYmVyXHJcbiAgY3VyclJlc3VsdDogc3RyaW5nXHJcbiAgYm9keXRleHQ6IHN0cmluZ1xyXG4gIGFwaVVSTDogc3RyaW5nXHJcbiAgZGlhbGVjdElEOiBzdHJpbmdcclxuXHJcbiAgcHVibGljIGRlYnVnSW5saW5lOiBib29sZWFuXHJcblxyXG4gIHB1YmxpYyBnZXRPdXRQdXRGb3JtYXQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmRyb3Bkb3duQnV0dG9uLmdldFZhbHVlKClcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXREZWJ1Z0lubGluZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLmRlYnVnSW5saW5lXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgZ2V0Q29udGVudCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMudmlld191dGlscy5nZXRDb250ZW50KHRoaXMuY29udGVudEVsLCB0aGlzLmdldE91dFB1dEZvcm1hdCgpKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFwcGVuZERlYnVnQ29udGVudCh0ZXh0OiBzdHJpbmcpIHtcclxuICAgIHRoaXMuZGVidWdDb250ZW50LnB1c2godGV4dClcclxuICB9XHJcblxyXG4gIGNvcHlUb0NiKCkge1xyXG4gICAgY29uc3QgYmxvYmNvbnRlbnRUZXh0ID0gKGNvbnQ6IHN0cmluZykgPT4gYCR7Y29udH1gXHJcblxyXG4gICAgbGV0IGRhdGEgPVxyXG4gICAgICBuZXcgQ2xpcGJvYXJkSXRlbSh7XHJcbiAgICAgICAgXCJ0ZXh0L3BsYWluXCI6IG5ldyBCbG9iKFtibG9iY29udGVudFRleHQodGhpcy5jdXJyUmVzdWx0KV0sIHtcclxuICAgICAgICAgIHR5cGU6IFwidGV4dC9wbGFpblwiXHJcbiAgICAgICAgfSlcclxuICAgICAgfSlcclxuXHJcbiAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlKFtkYXRhXSlcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGFsZXJ0KFwic3VjY2Vzc2Z1bGx5IGNvcGllZFwiKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKCgpID0+IHtcclxuICAgICAgICBhbGVydChcInNvbWV0aGluZyB3ZW50IHdyb25nXCIpO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcclxuICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgdGhpcy5zY2FsZVJhdGlvID0gMTAwXHJcbiAgICB0aGlzLnZpZXdfdXRpbHMgPSBuZXcgVmlld1V0aWxzXHJcbiAgICB0aGlzLmRlYnVnSW5saW5lID0gZmFsc2VcclxuICAgIHRoaXMuZGVidWdDb250ZW50ID0gW11cclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRDb21tKGNvbW06IFNlbWFMb2dpY1BsdWdpbkNvbW0pIHtcclxuICAgIGlmICh0aGlzLnNsQ29tbSAhPSBjb21tKSB7XHJcbiAgICAgIHRoaXMuc2xDb21tID0gY29tbVxyXG4gICAgICAvL3RoaXMuc2xDb21tLnNldFNsVmlldyh0aGlzKVxyXG4gICAgICB0aGlzLnNldE5ld0luaXRpYWwodGhpcy5zbENvbW0uc2xQbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2xDb21tLnNsUGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlPdXRwdXRGb3JtYXQpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3VHlwZSgpIHtcclxuICAgIHJldHVybiBTZW1hTG9naWNWaWV3VHlwZTtcclxuICB9XHJcblxyXG4gIGdldERpc3BsYXlUZXh0KCkge1xyXG4gICAgcmV0dXJuIFNlbWFMb2dpY1ZpZXdUeXBlO1xyXG4gIH1cclxuXHJcbiAgb25sb2FkKCk6IHZvaWQge1xyXG4gICAgdGhpcy5uYXZpZ2F0aW9uID0gdHJ1ZVxyXG4gICAgdGhpcy5jb250ZW50RWwuY29udGVudEVkaXRhYmxlID0gJ3RydWUnXHJcbiAgICB0aGlzLmRlYnVnSW5saW5lID09IGZhbHNlXHJcbiAgfVxyXG5cclxuICBnZXREZWJ1Z0J1dHRvblRleHQoKTogc3RyaW5nIHtcclxuICAgIGlmICh0aGlzLmRlYnVnSW5saW5lID09IHRydWUpIHtcclxuICAgICAgcmV0dXJuICdJbmxpbmVEZWJ1ZyBpcyBvbidcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiAnSW5saW5lRGVidWcgaXMgb2ZmJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlRHJvcERvd25CdXR0b25Gb3JPdXRQdXRGb3JtYXQoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgZHJvcERvd25WYWx1ZTogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xyXG4gICAgdGhpcy5kcm9wZG93bkJ1dHRvbiA9IG5ldyBEcm9wZG93bkNvbXBvbmVudChjb250YWluZXIpXHJcbiAgICAgIC5hZGRPcHRpb24ocnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19TZW1hbG9naWNdWzFdLCBydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX1NlbWFsb2dpY11bMF0pXHJcbiAgICAgIC5hZGRPcHRpb24ocnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19BU1BdWzFdLCBydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX0FTUF1bMF0pXHJcbiAgICAgIC5hZGRPcHRpb24ocnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19QaWN0dXJlXVsxXSwgcnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19QaWN0dXJlXVswXSlcclxuICAgICAgLmFkZE9wdGlvbihydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX1NlbWFudGljVHJlZV1bMV0sIHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfU2VtYW50aWNUcmVlXVswXSlcclxuICAgICAgLnNldFZhbHVlKGRyb3BEb3duVmFsdWUpXHJcbiAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0luZm9ybWF0aXZlKSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdTZXQgVmlld091dHB1dEZvcm1hdDogJyArIHZhbHVlKTsgfVxyXG4gICAgICAgIHRoaXMuc2xDb21tLnNsUGx1Z2luLnVwZGF0ZU91dHN0YW5kaW5nID0gdHJ1ZVxyXG4gICAgICAgIGRyb3BEb3duVmFsdWUgPSB2YWx1ZVxyXG4gICAgICAgIHRoaXMuZHJvcGRvd25CdXR0b24uc2V0VmFsdWUodmFsdWUpXHJcbiAgICAgICAgdGhpcy5nZXRTZW1hTG9naWNQYXJzZSh0aGlzLnNsQ29tbS5zbFBsdWdpbi5zZXR0aW5ncywgdGhpcy5hcGlVUkwsIHRoaXMuZGlhbGVjdElELCB0aGlzLmJvZHl0ZXh0LCBmYWxzZSwgdmFsdWUpXHJcbiAgICAgICAgLy90aGlzLnVwZGF0ZVZpZXcoKVxyXG4gICAgICB9KVxyXG4gICAgcmV0dXJuIGNvbnRhaW5lclxyXG4gIH1cclxuICBjcmVhdGVDb3B5VG9DbGlwYm9hcmRCdXR0b24oY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcclxuICAgIHRoaXMuY29weUJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoY29udGFpbmVyKVxyXG4gICAgICAuc2V0QnV0dG9uVGV4dCgnQ29weSB0byBDbGlwYm9hcmQnKVxyXG4gICAgICAub25DbGljaygobW91c2VfZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLmNvcHlUb0NiKClcclxuICAgICAgfSlcclxuICAgIHJldHVybiBjb250YWluZXJcclxuICB9XHJcbiAgY3JlYXRlRGVidWdCdXR0b24oY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcclxuICAgIGlmIChEZWJ1Z0xldmVsICE9IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfT2ZmKSB7XHJcbiAgICAgIHRoaXMuZGVidWdCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lcilcclxuICAgICAgICAuc2V0QnV0dG9uVGV4dCh0aGlzLmdldERlYnVnQnV0dG9uVGV4dCgpKVxyXG4gICAgICAgIC5vbkNsaWNrKChtb3VzZV9ldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgaWYgKHRoaXMuZGVidWdJbmxpbmUgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmRlYnVnSW5saW5lID0gZmFsc2VcclxuICAgICAgICAgICAgdGhpcy5kZWJ1Z0NvbnRlbnQgPSBbXVxyXG4gICAgICAgICAgfSBlbHNlIHsgdGhpcy5kZWJ1Z0lubGluZSA9IHRydWUgfVxyXG4gICAgICAgICAgaWYgKHRoaXMuc2xDb21tLnNsdmlldyAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbmZvcm1hdGl2ZSkgeyBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCAnU2V0IElubGluZURlYnVnZ2luZzogJyArIHRoaXMuZGVidWdJbmxpbmUpOyB9XHJcbiAgICAgICAgICAgIC8vdGhpcy5zZXROZXdJbml0aWFsKGRyb3BEb3duVmFsdWUpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29udGFpbmVyXHJcbiAgfVxyXG5cclxuICBjcmVhdGVTY2FsZUJ1dHRvbnMoY29udGFpbmVyOiBIVE1MRWxlbWVudCk6IEhUTUxFbGVtZW50IHtcclxuICAgIC8vIFpvb20gaW5cclxuICAgIHRoaXMuem9vbUluID0gbmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXIpXHJcbiAgICAgIC5zZXRCdXR0b25UZXh0KCctJylcclxuICAgICAgLm9uQ2xpY2soKG1vdXNlX2V2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gdGhpcy5zY2FsZVJhdGlvIC8gMlxyXG4gICAgICAgIGlmICh0aGlzLnpvb21SYXRpbyAhPSBudWxsKSB7IHRoaXMuem9vbVJhdGlvLnNldEJ1dHRvblRleHQoU3RyaW5nKHRoaXMuc2NhbGVSYXRpbykpIH1cclxuICAgICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0luZm9ybWF0aXZlKSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdTZXQgU2NhbGVSYXRpbyB0bzogJyArIHRoaXMuc2NhbGVSYXRpbyk7IH1cclxuICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKVxyXG4gICAgICB9KVxyXG5cclxuICAgIHRoaXMuem9vbVJhdGlvID0gbmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXIpXHJcbiAgICAgIC5zZXRCdXR0b25UZXh0KFN0cmluZyh0aGlzLnNjYWxlUmF0aW8pKVxyXG4gICAgICAub25DbGljaygobW91c2VfZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0luZm9ybWF0aXZlKSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdTY2FsZVJhdGlvIDo9ICcgKyB0aGlzLnNjYWxlUmF0aW8pOyB9XHJcbiAgICAgIH0pXHJcblxyXG4gICAgdGhpcy56b29tT3V0ID0gbmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXIpXHJcbiAgICAgIC5zZXRCdXR0b25UZXh0KCcrJylcclxuICAgICAgLm9uQ2xpY2soKG1vdXNlX2V2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgdGhpcy5zY2FsZVJhdGlvID0gdGhpcy5zY2FsZVJhdGlvICogMlxyXG4gICAgICAgIHRoaXMuem9vbVJhdGlvLnNldEJ1dHRvblRleHQoU3RyaW5nKHRoaXMuc2NhbGVSYXRpbykpXHJcbiAgICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbmZvcm1hdGl2ZSkgeyBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCAnU2V0IFNjYWxlUmF0aW8gdG86ICcgKyB0aGlzLnNjYWxlUmF0aW8pOyB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaWV3KClcclxuICAgICAgfSlcclxuXHJcbiAgICByZXR1cm4gY29udGFpbmVyXHJcbiAgfVxyXG5cclxuICBjaGVja0NvbnRhaW5lckNvbnRlbnQoKTogYm9vbGVhbiB7XHJcbiAgICBpZiAodGhpcy5jb250YWluZXJFbC5jaGlsZHJlbiAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgaWYgKHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQgPT0gc2xUZXh0c1snSGVhZGVyU0wnXSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ29udGFpbmVyQ29udGVudCgpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAodGhpcy5jb250YWluZXJFbC5jaGlsZHJlbltpXS5ub2RlTmFtZSA9PSBcInBcIikge1xyXG4gICAgICAgICAgd2hpbGUgKHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5baV0gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5baV0uZW1wdHlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBwdWJsaWMgc2V0TmV3SW5pdGlhbChkcm9wRG93blZhbHVlOiBzdHJpbmcpIHtcclxuICAgIGxldCBjb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbFxyXG4gICAgaWYgKCF0aGlzLmNoZWNrQ29udGFpbmVyQ29udGVudCgpKSB7XHJcbiAgICAgIGNvbnRhaW5lci5lbXB0eSgpXHJcbiAgICAgIC8vY29udGFpbmVyLmNvbnRlbnRFZGl0YWJsZSA9ICd0cnVlJ1xyXG4gICAgICBjb250YWluZXIuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IHNsVGV4dHNbJ0hlYWRlclNMJ10gfSk7XHJcblxyXG4gICAgICBjb250YWluZXIgPSB0aGlzLmNyZWF0ZURyb3BEb3duQnV0dG9uRm9yT3V0UHV0Rm9ybWF0KGNvbnRhaW5lciwgZHJvcERvd25WYWx1ZSlcclxuICAgICAgY29udGFpbmVyID0gdGhpcy5jcmVhdGVDb3B5VG9DbGlwYm9hcmRCdXR0b24oY29udGFpbmVyKVxyXG4gICAgICBjb250YWluZXIgPSB0aGlzLmNyZWF0ZURlYnVnQnV0dG9uKGNvbnRhaW5lcilcclxuICAgICAgaWYgKGRyb3BEb3duVmFsdWUgPT0gcnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19QaWN0dXJlXVsxXSkge1xyXG4gICAgICAgIGNvbnRhaW5lciA9IHRoaXMuY3JlYXRlU2NhbGVCdXR0b25zKGNvbnRhaW5lcilcclxuICAgICAgfVxyXG4gICAgICBjb250YWluZXIuY3JlYXRlRWwoXCJwXCIpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmRlbGV0ZUNvbnRhaW5lckNvbnRlbnQoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgb25PcGVuKCkge1xyXG4gICAgdGhpcy5zZXROZXdJbml0aWFsKHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfU2VtYWxvZ2ljXVsxXSlcclxuICAgIC8vIHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW5bMV0uYXBwZW5kVGV4dChcImxldCdzIGJlZ2luXCIpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgb25DbG9zZSgpIHtcclxuICAgIC8vIE5vdGhpbmcgdG8gY2xlYW4gdXAuXHJcbiAgfVxyXG5cclxuICBzaG93RXJyb3IoZnJhZ21lbnQ6IERvY3VtZW50RnJhZ21lbnQpIHtcclxuICAgIC8vICAgdGhpcy5zZXRJbml0aWFsKHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfU2VtYWxvZ2ljXVsxXSlcclxuICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKGZyYWdtZW50KVxyXG4gIH1cclxuICBvbnVubG9hZCgpOiB2b2lkIHtcclxuXHJcbiAgICBpZiAodGhpcy5zbENvbW0uc2xQbHVnaW4gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIHRoaXMuc2xDb21tLnNsUGx1Z2luLmFjdGl2YXRlZCA9IGZhbHNlXHJcbiAgICAgIHRoaXMuc2xDb21tLnNsUGx1Z2luLm15U3RhdHVzLnNldFRleHQoJ1NlbWFMb2dpYyBpcyBvZmYnKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuICBjcmVhdGVTZW1hTG9naWNSZXF1ZXN0Qm9keShkaWFsZWN0SUQ6IHN0cmluZywgYm9keXRleHQ6IHN0cmluZywgb3V0UHV0Rm9ybWF0OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgJ0NvbnRleHQ6ICcgKyBkaWFsZWN0SUQgKyAnIEJvZHl0ZXh0OiAnICsgYm9keXRleHQpIH1cclxuICAgIGxldCBzZW1hTG9naWNKc29uUmVxdWVzdEJvZHkgPSB7XHJcbiAgICAgIFwidGV4dFwiOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCJ0ZXh0SURcIjogXCJQYXJzaW5nT25UaGVGbHlcIixcclxuICAgICAgICAgIFwiZGlhbGVjdElEXCI6IGRpYWxlY3RJRCxcclxuICAgICAgICAgIFwicnVsZXNcIjogYm9keXRleHRcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIFwiZmlsdGVyXCI6IHt9LFxyXG4gICAgICBcInBlcnNpc3RlbmN5XCI6IGZhbHNlLFxyXG4gICAgICBcInJ1bGVzZXR0eXBlXCI6IG91dFB1dEZvcm1hdFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlbWFMb2dpY0pzb25SZXF1ZXN0Qm9keVxyXG4gIH1cclxuXHJcbiAgY3JlYXRlU2VtYUxvZ2ljUmVxdWVzdChzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MsIHZBUElfVVJMOiBzdHJpbmcsIHNlbWFMb2dpY0pzb25SZXF1ZXN0Qm9keTogYW55KTogUmVxdWVzdFVybFBhcmFtIHtcclxuICAgIGxldCByZXF1ZXN0OiBSZXF1ZXN0VXJsUGFyYW0gPSB7XHJcbiAgICAgIHVybDogdkFQSV9VUkwsXHJcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgfSxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc2VtYUxvZ2ljSnNvblJlcXVlc3RCb2R5KVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzICYmIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15VXNlciAhPSAnJykge1xyXG4gICAgICByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHVybDogdkFQSV9VUkwsXHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCJCYXNpYyBcIiArIGJ0b2Eoc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlVc2VyICsgXCI6XCIgKyBzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVBhc3N3b3JkKVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoc2VtYUxvZ2ljSnNvblJlcXVlc3RCb2R5KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkge1xyXG4gICAgICBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCAnUGFyc2luZ3NzdHJpbmcnKVxyXG4gICAgICBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCByZXF1ZXN0KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcXVlc3RcclxuICB9XHJcblxyXG4gIGdldFJlcXVlc3RFbWJlZChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRoaXMuZ2V0T3V0UHV0Rm9ybWF0KCkgPT0gcnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19QaWN0dXJlXVsxXSkge1xyXG4gICAgICAvLyBab29tIGZvciBQaWN0dXJlXHJcbiAgICAgIC8vIHRyeSB0byBnZXQgb3JpZ2luYWwgdmlld2JveCBzaXplXHJcbiAgICAgIGxldCB2aWV3Qm94U3RyaW5nOiBzdHJpbmdcclxuICAgICAgY29uc3QgYmVnaW5WQiA9IGNvbnRlbnQuaW5kZXhPZigndmlld0JveCcpXHJcbiAgICAgIGlmIChiZWdpblZCID4gMCkge1xyXG4gICAgICAgIGNvbnN0IGVuZFZCID0gY29udGVudC5pbmRleE9mKCdcXFwiJywgY29udGVudC5pbmRleE9mKCdcXFwiJywgYmVnaW5WQikgKyAxKVxyXG4gICAgICAgIHZpZXdCb3hTdHJpbmcgPSBjb250ZW50LnN1YnN0cmluZyhiZWdpblZCLCBlbmRWQiArIDEpXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmlld0JveFN0cmluZyA9ICd2aWV3Qm94ID0gXCIwIDAgMTYgOVwiJ1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoXCI8Ym9keT5cIiwgXCJcIilcclxuICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShcIjwvYm9keT5cIiwgXCJcIilcclxuXHJcbiAgICAgIGxldCBoZWFkZXI6IHN0cmluZ1xyXG4gICAgICBoZWFkZXIgPSAnPHN2ZyAgJyArIHZpZXdCb3hTdHJpbmcgKyAnIHdpZHRoID0gXCInICsgU3RyaW5nKHRoaXMuc2NhbGVSYXRpbykgKyAnJVwiIHhtbG5zID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiID5cXG4nXHJcbiAgICAgIGhlYWRlciA9IGhlYWRlciArIGNvbnRlbnRcclxuICAgICAgaGVhZGVyID0gaGVhZGVyICsgJzwvc3ZnPidcclxuICAgICAgcmV0dXJuIGhlYWRlclxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGNvbnRlbnRcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldEN1cnJSZXN1bHQoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3RFbWJlZCh0aGlzLmN1cnJSZXN1bHQpXHJcbiAgfVxyXG5cclxuICBnZXRDdXJySFRNTCgpOiB2b2lkIHtcclxuICAgIGxldCByZXNwb25zZUNvbnRlbnQgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2Jyk7XHJcblxyXG4gICAgaWYgKHRoaXMuZGVidWdJbmxpbmUgPT0gdHJ1ZSkge1xyXG4gICAgICB0aGlzLmRlYnVnQ29udGVudC5mb3JFYWNoKHZhbHVlID0+IHtcclxuICAgICAgICBjb25zdCB0ZXh0bGluZSA9IHJlc3BvbnNlQ29udGVudC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiB2YWx1ZSArIFwiXFxuXCIgfSlcclxuICAgICAgICB0ZXh0bGluZS5zdHlsZS5jc3NUZXh0ID0gJ3doaXRlLXNwYWNlOiBwcmU7JyAvLzsgd2hpdGUtc3BhY2U6IHByZS1saW5lOydcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmICh0aGlzLmdldE91dFB1dEZvcm1hdCgpID09IHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfQVNQXVsxXSkge1xyXG4gICAgICAgIGxldCByZXN1bHR0ZXh0YXJyYXkgPSB0aGlzLmdldEN1cnJSZXN1bHQoKS5zcGxpdCgnXFxuJylcclxuICAgICAgICByZXN1bHR0ZXh0YXJyYXkuZm9yRWFjaCh2YWx1ZSA9PiB7XHJcbiAgICAgICAgICBjb25zdCB0ZXh0bGluZSA9IHJlc3BvbnNlQ29udGVudC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiB2YWx1ZSArIFwiXFxuXCIgfSlcclxuICAgICAgICAgIHRleHRsaW5lLnN0eWxlLmNzc1RleHQgPSAnd2hpdGUtc3BhY2U6IHByZTsnIC8vOyB3aGl0ZS1zcGFjZTogcHJlLWxpbmU7J1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmVzcG9uc2VDb250ZW50LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiIFwiIH0pXHJcbiAgICAgICAgbGV0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIC8vIEFkZCBzb21lIEhUTUwgY29udGVudCB0byB0aGUgZGl2IFxyXG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSB0aGlzLmdldEN1cnJSZXN1bHQoKTtcclxuICAgICAgICAvLyBBcHBlbmQgdGhlIGRpdiB0byB0aGUgZG9jdW1lbnQgYm9keVxyXG4gICAgICAgIHJlc3BvbnNlQ29udGVudC5hcHBlbmRDaGlsZChkaXYpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICAvL3JldHVybiByZXNwb25zZUNvbnRlbnRcclxuICB9XHJcblxyXG4gIHVwZGF0ZVZpZXcoKTogdm9pZCB7XHJcbiAgICB0aGlzLnNldE5ld0luaXRpYWwodGhpcy5nZXRPdXRQdXRGb3JtYXQoKSlcclxuICAgIHRoaXMuZ2V0Q3VyckhUTUwoKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGFzeW5jIGdldFNlbWFMb2dpY1BhcnNlKHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncywgdkFQSV9VUkw6IHN0cmluZywgZGlhbGVjdElEOiBzdHJpbmcsIGJvZHl0ZXh0OiBzdHJpbmcsIHBhcnNlT25UaGVGbHk6IGJvb2xlYW4sIHBhcnNpbmdGb3JtYXQ/OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgdGhpcy5ib2R5dGV4dCA9IGJvZHl0ZXh0XHJcbiAgICB0aGlzLmFwaVVSTCA9IHZBUElfVVJMXHJcbiAgICB0aGlzLmRpYWxlY3RJRCA9IGRpYWxlY3RJRFxyXG4gICAgbGV0IG91dFB1dEZvcm1hdDogc3RyaW5nXHJcbiAgICBpZiAocGFyc2luZ0Zvcm1hdCAhPT0gdW5kZWZpbmVkKSB7IG91dFB1dEZvcm1hdCA9IHBhcnNpbmdGb3JtYXQgfSBlbHNlIHsgb3V0UHV0Rm9ybWF0ID0gdGhpcy5nZXRPdXRQdXRGb3JtYXQoKSB9XHJcbiAgICBsZXQgc2VtYUxvZ2ljSnNvblJlcXVlc3RCb2R5ID0gdGhpcy5jcmVhdGVTZW1hTG9naWNSZXF1ZXN0Qm9keShkaWFsZWN0SUQsIGJvZHl0ZXh0LCBvdXRQdXRGb3JtYXQpXHJcbiAgICBsZXQgc2VtYUxvZ2ljUmVxdWVzdCA9IHRoaXMuY3JlYXRlU2VtYUxvZ2ljUmVxdWVzdChzZXR0aW5ncywgdkFQSV9VUkwsIHNlbWFMb2dpY0pzb25SZXF1ZXN0Qm9keSlcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoc2VtYUxvZ2ljUmVxdWVzdClcclxuXHJcbiAgICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCkgeyBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCBcIlNlbWFMb2dpYzogUGFyc2Ugd2l0aCBodHRwLXN0YXR1cyBcIiArIHJlc3BvbnNlLnN0YXR1cy50b1N0cmluZygpKSB9O1xyXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICAgIHZhciByZXN1bHRodHRwID0gcmVzcG9uc2UudGV4dDtcclxuICAgICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCBgUGFyc2VyZXN1bHQ6JHtyZXN1bHRodHRwfWApIH1cclxuICAgICAgICBpZiAoKHRoaXMuZGVidWdJbmxpbmUgPT0gZmFsc2UpICYmIChwYXJzZU9uVGhlRmx5ID09IGZhbHNlKSkge1xyXG4gICAgICAgICAgdGhpcy5jdXJyUmVzdWx0ID0gcmVzdWx0aHR0cFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXBhcnNlT25UaGVGbHkpIHtcclxuICAgICAgICAgIHRoaXMudXBkYXRlVmlldygpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAodGhpcy5zbENvbW0uc2xhc3B2aWV3ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vdGhpcy5zbENvbW0uc2xhc3B2aWV3LmFzcFBhcnNlKHRoaXMuc2xDb21tLCBzZXR0aW5ncywgdGhpcy5nZXRTZW1hTG9naWNUZXh0KCkpXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgcmVzb2x2ZShyZXN1bHRodHRwKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0hpZ2gpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgYENhdGNoZXJyb3Igb2YgcmVtb3ZpbmcgY29udGV4dCAke3ZBUElfVVJMfWApIH1cclxuICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoKSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIGUudG9TdHJpbmcoKSkgfVxyXG4gICAgICBsZXQgdGV4dCA9IG5ldyBEb2N1bWVudEZyYWdtZW50KClcclxuICAgICAgdGV4dC5jcmVhdGVFbChcInBcIilcclxuICAgICAgbGV0IHRleHRmcmFnbWVudCA9IChuZXcgUmFuZ2UoKSkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGUudG9TdHJpbmcoKSk7XHJcbiAgICAgIHRleHQuYXBwZW5kQ2hpbGQodGV4dGZyYWdtZW50KVxyXG4gICAgICB0ZXh0LmNyZWF0ZUVsKFwicFwiKVxyXG4gICAgICB0ZXh0ZnJhZ21lbnQgPSAobmV3IFJhbmdlKCkpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChcIlNlZSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yLWNvZGUgb2YgaHR0cDogaHR0cHM6Ly9kZS53aWtpcGVkaWEub3JnL3dpa2kvSFRUUC1TdGF0dXNjb2RlIFwiKTtcclxuICAgICAgdGV4dC5hcHBlbmQodGV4dGZyYWdtZW50KVxyXG4gICAgICB0ZXh0LmNyZWF0ZUVsKFwicFwiKVxyXG4gICAgICB0ZXh0ZnJhZ21lbnQgPSAobmV3IFJhbmdlKCkpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChzZW1hTG9naWNSZXF1ZXN0LnVybCk7XHJcbiAgICAgIHRleHQuYXBwZW5kKHRleHRmcmFnbWVudClcclxuICAgICAgdGV4dC5jcmVhdGVFbChcInBcIilcclxuICAgICAgdGV4dGZyYWdtZW50ID0gKG5ldyBSYW5nZSgpKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoU3RyaW5nKHNlbWFMb2dpY1JlcXVlc3QuYm9keSkpO1xyXG4gICAgICB0ZXh0LmFwcGVuZCh0ZXh0ZnJhZ21lbnQpXHJcbiAgICAgIHRoaXMuc2hvd0Vycm9yKHRleHQpXHJcbiAgICAgIHRocm93IGVcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwgIi8vIFRvRG8gKFByaW8gMyk6IEdldHRpbmcgRGVmYXVsdC1BUEktVVJMIGJ5IEFQSS1EZXNjcmlwdGlvblxyXG5leHBvcnQgY29uc3QgQVBJX0RlZmF1bHRzID0ge1xyXG5cdGh0dHA6IFwiaHR0cDovL1wiLFxyXG5cdGh0dHBzOiBcImh0dHBzOi8vXCIsXHJcblx0QmFzZV9VUkw6IFwibG9jYWxob3N0XCIsXHJcblx0UG9ydDogXCIyODAwMFwiLFxyXG5cdHJ1bGVzX3BhcnNlOiBcIi9ydWxlcy9wYXJzZVwiLFxyXG5cdHJlc2V0OiBcIi9yZXNldFwiLFxyXG5cdFZlcnNpb246IFwiL0FQSVZlcnNpb25cIixcclxuXHRQb3N0RGlhbGVjdDogXCIvZGlhbGVjdC9kZWZpbmVcIixcclxuXHRSZW1vdmVEaWFsZWN0OiBcIi9kaWFsZWN0L3JlbW92ZVwiLFxyXG5cdEdldEFQSTogXCIvQVBJVmVyc2lvblwiLFxyXG5cdFNJRDogXCIxMjM0NTY3OFwiLFxyXG5cdFNob3dDb250ZXh0OiB0cnVlLFxyXG5cdHVzZVVzZXJQYXNzd29ydGZvckhUVFA6IGZhbHNlLFxyXG5cdEh0dHBVc2VyOiBcIlVzZXJcIixcclxuXHRIdHRwUGFzc3dvcmQ6IFwiUGFzc3dvcmRcIixcclxuXHR2aWV3aGVhZGVyOiBcIlNlbWFMb2dpY1ZpZXdcIixcclxuXHRBc3BVcmw6IFwiQVNQLVNlcnZpY2UtVVJMLmNvbS9cIixcclxuXHRBc3BFbmRwb2ludDogXCIvcGxhbnMvY291bnRcIlxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFZhbHVlX0RlZmF1bHRzID0ge1xyXG5cdHVwZGF0ZUludGVydmFsOiA1MDBcclxufVxyXG5cclxuXHJcbi8vIFRvRG86IDIueCBPcHRpbWl6ZWQgYXJyYXkgc3RydWN0IC8gbWV0aG9kcyBmb3IgY29tbWFuZHMgXHJcbmV4cG9ydCB2YXIgc2VtYUxvZ2ljQ29tbWFuZCA9IHtcclxuXHRjb21tYW5kX3N0YXJ0OiBcIlNlbWFMb2dpYyhcIixcclxuXHRjb21tYW5kX2VuZDogXCIpXCIsXHJcblx0c2hvd0hlbHA6IFwic2hvdyBoZWxwXCIsXHJcblx0c2hvd1ZlcnNpb246IFwic2hvdyB2ZXJzaW9uXCIsXHJcblx0Z2V0RGlhbGVjdHdUZW1wbGF0ZTogXCJ0ZW1wbGF0ZVwiLCAvLyBUb0RvOiBHZXQgVGVtcGxhdGUgcGxhbmVkIGZvciB2ZXJzaW9uIDIueFxyXG5cdHVzZURpYWxlY3Q6IFwidXNlID8/P2RpYWxlY3ROYW1lPz8/XCIsXHJcblx0ZGVmaW5lOiBcImRlZmluZVwiLCAvLyBEZWZpbmUgaXMgbm90IGZvciBvYnNpZGlhbiAtIGl0IGlzIGZvciBkZWZpbmluZyBTZW1hTG9naWMtSW50ZXJwcmV0YXRpb25cclxuXHRzaG93UGFyc2U6IFwic2hvdyBhc1wiLFxyXG5cdHNob3dGaWx0ZXI6IFwiZm9yXCIsXHJcblx0dHJhbnNmZXI6IFwidHJhbnNmZXJcIixcclxuXHR0cmFuc2ZlckVuZHBvaW50OiBcInRvIGVuZHBvaW50XCIsXHJcblx0dHJhbnNmZXJQYXJhbTogXCJ3aXRoIHBhcmFtXCJcclxufVxyXG5cclxuZXhwb3J0IHZhciBzeW10b2tlbiA9IFwiU3ltVG9rZW5cIlxyXG5cclxuZXhwb3J0IGNvbnN0IHNlbWFMb2dpY0hlbHA6IHN0cmluZ1tdW10gPSBbXHJcblx0W3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCArIFwiPz8/XCIgKyBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfZW5kLCBcIllvdSBjYW4gZGVmaW5lIHdoYXQgU2VtYUxvZ2ljIHNob3VsZCBkbyBmb3IgeW91IGJ5IHJlcGxhY2luZyA/Pz8gd2l0aCBvbmUgb2YgdGhlIGZvbGxvd2luZyBTZW1hTG9naWMgY29tbWFuZHM6XCJdLFxyXG5cdFtzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQgKyBzZW1hTG9naWNDb21tYW5kLnNob3dIZWxwICsgc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX2VuZCwgXCJTaG93IHRoaXMgaGVscCBpbmZvcm1hdGlvblwiXSxcclxuXHRbc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0ICsgc2VtYUxvZ2ljQ29tbWFuZC5zaG93VmVyc2lvbiArIHNlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9lbmQsIFwiU2hvdyB0aGUgdmVyc2lvbiBvZiB0aGUgU2VtYUxvZ2ljLVNlcnZpY2VcIl0sXHJcblx0W3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCArIHNlbWFMb2dpY0NvbW1hbmQuZGVmaW5lICsgc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX2VuZCwgXCJBZnRlciB0aGlzIGlubGluZWNvbW1hbmQgYW5kIGEgc3BhY2UgbGluZSBjb21lcyBlLmcuIGEgdGFibGUgdGhhdCBzaG91bGQgYmUgaW50ZXJwcmV0ZWQgYnkgU2VtYUxvZ2ljICh0YWJsZSwgTlRhYmxlLCBaVGFibGUpIHdpdGggb3B0aW9uYWwgaGVhZGVyaW50ZXJwcmV0YXRpb24tIEV4cGVjdGVkIGZvcm1hdDpcXG4ofFN5bWJvbHx8TGV2ZWwobisxKXxcXG58LS0tfC0tLXxcXG58TGV2ZWwoMSl8TGV2ZWwobil8VmFsdWV8KVwiXSxcclxuXHRbYCR7c2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0ICsgc2VtYUxvZ2ljQ29tbWFuZC5zaG93UGFyc2V9ICUxICR7c2VtYUxvZ2ljQ29tbWFuZC5zaG93RmlsdGVyfSAlMiAke3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9lbmR9YCwgXCJzaG93IGFzIC0gc2hvd3MgYW4gb3V0cHV0IGRpcmVjdGx5IHRvIHRoZSByZWFkaW5nIHZpZXcgKCB3aXRoICUxIHlvdSBoYXZlIHRvIHNldCB0aGUgb3V0cHV0IHR5cGU6IDF8MSB7cGljdHVyZSwgc3llbWFsb2dpYywgYXNwfSBhbmQgd2l0aCAlMiB5b3UgY291bGQgZmlsdGVyIGZvciBhbiBzeW1ib2wgYnkgc3ltYm9sbmFtZSlcIl0sXHJcblx0W2Ake3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCArIHNlbWFMb2dpY0NvbW1hbmQudHJhbnNmZXJ9ICUxICR7c2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlckVuZHBvaW50fSAlMiAke3NlbWFMb2dpY0NvbW1hbmQudHJhbnNmZXJQYXJhbX0gJTMgJHtzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfZW5kfWAsIFwidHJhbnNmZXIgLSBzaG93cyBhbiAoY3VycmVudGx5IG9ubHkpIGFzcCBvdXRwdXQgZGlyZWN0bHkgdG8gdGhlIGFzcC52aWV3IGZyb20gU2VtYUxvZ2ljVmlldyAoIHdpdGggJTEgeW91IGhhdmUgdG8gc2V0IHRoZSBvdXRwdXQgdHlwZTogMXwxIHthc3B9IGFuZCB3aXRoICUyIHlvdSBjb3VsZCBzZXQgdGhlIGVuZHBvaW50IGFuZCB3dXRoICUzIHlvdSBjb3VsZCBzZXQgcXVlcnlwYXJhbWV0ZXIpXCJdLFxyXG5dXHJcblxyXG4vLyBydWxlc2V0dHlwZSA6IHR5cGUsIE5hbWluZ1xyXG5leHBvcnQgY29uc3QgcnN0eXBlc19TZW1hbG9naWMgPSAwXHJcbmV4cG9ydCBjb25zdCByc3R5cGVzX1BpY3R1cmUgPSAzXHJcbmV4cG9ydCBjb25zdCByc3R5cGVzX0FTUCA9IDZcclxuZXhwb3J0IGNvbnN0IHJzdHlwZXNfU2VtYW50aWNUcmVlID0gOFxyXG5cclxuZXhwb3J0IGNvbnN0IHJ1bGVzZXR0eXBlc0NvbW1hbmRzOiBzdHJpbmdbXVtdID0gW1xyXG5cdFtcIlNlbWFMb2dpY1wiLCBcIlNlbWFMb2dpY1wiXSxcclxuXHRbXCJ0ZWNobmljYWxcIiwgXCJTZW1hTG9naWNcIl0sXHJcblx0W1wic2VtYWxvZ2ljXCIsIFwiU2VtYUxvZ2ljXCJdLFxyXG5cdFtcIlBpY3R1cmUgKFNWRylcIiwgXCJTVkdcIl0sXHJcblx0W1wicGljdHVyZVwiLCBcIlNWR1wiXSxcclxuXHRbXCJTVkdcIiwgXCJTVkdcIl0sXHJcblx0W1wiQVNQXCIsIFwiQVNQLmpzb25cIl0sXHJcblx0W1wiYXNwXCIsIFwiQVNQLmpzb25cIl0sXHJcblx0W1wiU2VtYW50aWNUcmVlXCIsIFwiU2VtYW50aWNUcmVlXCJdLFxyXG5dXHJcblxyXG5leHBvcnQgY29uc3QgRGVidWdMZXZlbE5hbWVzOiBzdHJpbmdbXSA9XHJcblx0WydEZWJ1Z0xldmVsX09mZicsXHJcblx0XHQnRGVidWdMZXZlbF9DdXJyZW50X0RldicsXHJcblx0XHQnRGVidWdMZXZlbF9JbXBvcnRhbnQnLFxyXG5cdFx0J0RlYnVnTGV2ZWxfSW5mb3JtYXRpdmUnLFxyXG5cdFx0J0RlYnVnTGV2ZWxfQ2hhdHR5JyxcclxuXHRcdCdEZWJ1Z0xldmVsX0FsbCdcclxuXHRdXHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IERlYnVnTGV2TWFwOiBEZWJ1Z0xldmVsX0kgPSB7XHJcblx0J0RlYnVnTGV2ZWxfT2ZmJzogMCxcclxuXHQnRGVidWdMZXZlbF9DdXJyZW50X0Rldic6IDEsXHJcblx0J0RlYnVnTGV2ZWxfSW1wb3J0YW50JzogMixcclxuXHQnRGVidWdMZXZlbF9JbmZvcm1hdGl2ZSc6IDMsXHJcblx0J0RlYnVnTGV2ZWxfQ2hhdHR5JzogNCxcclxuXHQnRGVidWdMZXZlbF9BbGwnOiA1XHJcbn1cclxuXHJcbmludGVyZmFjZSBEZWJ1Z0xldmVsX0kge1xyXG5cdFtMZXZlbG5hbWU6IHN0cmluZ106IG51bWJlclxyXG59XHJcblxyXG50eXBlIE1hcFR5cGUgPSB7XHJcblx0W2lkOiBzdHJpbmddOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzbFRleHRzOiBNYXBUeXBlID0ge1xyXG5cdFwiSGVhZGVyU0xcIjogXCJTZW1hTG9naWMuVmlld1wiXHJcbn0iLCAiaW1wb3J0IHsgTWFya2Rvd25SZW5kZXJDaGlsZCwgTWFya2Rvd25WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyByZXF1ZXN0VXJsLCBSZXF1ZXN0VXJsUGFyYW0sIFJlcXVlc3RVcmxSZXNwb25zZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgRGVidWdMZXZlbCwgU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi9tYWluXCI7XHJcbmltcG9ydCB7IEFQSV9EZWZhdWx0cywgc2VtYUxvZ2ljQ29tbWFuZCwgc2VtYUxvZ2ljSGVscCwgcnVsZXNldHR5cGVzQ29tbWFuZHMsIERlYnVnTGV2ZWxOYW1lcywgRGVidWdMZXZNYXAsIHJzdHlwZXNfQVNQLCByc3R5cGVzX1NlbWFsb2dpYyB9IGZyb20gXCIuL2NvbnN0XCJcclxuaW1wb3J0IHsgU2VtYUxvZ2ljVmlldywgU2VtYUxvZ2ljVmlld1R5cGUgfSBmcm9tIFwiLi92aWV3XCI7XHJcbmltcG9ydCB7IHBhcnNlQ29tbWFuZCB9IGZyb20gJ3ZpZXdfdXRpbHMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlYXJjaEZvclNlbWFMb2dpY0NvbW1hbmRzID0gKGVsOiBFbGVtZW50KTogYm9vbGVhbiA9PiB7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBlbC5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCBjaGlsZCA9IGVsLmNoaWxkTm9kZXNbaV07XHJcbiAgICBpZiAoaXNTZW1hTG9naWNDb21tYW5kKGNoaWxkKSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGlzU2VtYUxvZ2ljQ29tbWFuZCA9IChuOiBOb2RlKTogYm9vbGVhbiA9PlxyXG4gIG4ubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIEJvb2xlYW4obi50ZXh0Q29udGVudD8uc3RhcnRzV2l0aChzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQpKTtcclxuXHJcblxyXG4vLyBjaGVjayBpZiB0aGUgbm9kZSBoYXMgdG8gYmUgcmVwbGFjZWQgbXVzdCBiZSBkbyBiZWZvcmUgXHJcbmV4cG9ydCBjb25zdCByZXBsYWNlV2l0aEVtcHR5Tm9kZSA9IChjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiBOb2RlW10gPT4ge1xyXG4gIGNvbnN0IHJlc3VsdHM6IE5vZGVbXSA9IFtdO1xyXG4gIHJldHVybiByZXN1bHRzXHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVwbGFjZVdpdGhDb21tYW5kTm9kZShjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyk6IFByb21pc2U8Tm9kZVtdPiB7XHJcbiAgbGV0IHJlc3VsdHM6IE5vZGVbXSA9IFtdXHJcbiAgbGV0IGZvdW5kOiBib29sZWFuID0gZmFsc2VcclxuXHJcbiAgbGV0IHNlbWFMb2dpY0NvbSA9IGNvbnRhaW5lckVsLnRleHRDb250ZW50Py5zdWJzdHJpbmcoc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0Lmxlbmd0aCwgY29udGFpbmVyRWwudGV4dENvbnRlbnQ/LmluZGV4T2Yoc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX2VuZCkpLnRvTG93ZXJDYXNlKClcclxuXHJcbiAgaWYgKCghZm91bmQpICYmICgoc2VtYUxvZ2ljQ29tPy50b1N0cmluZygpLnN1YnN0cmluZygwLCBzZW1hTG9naWNDb21tYW5kLnNob3dIZWxwLmxlbmd0aCkpID09IHNlbWFMb2dpY0NvbW1hbmQuc2hvd0hlbHApKSB7Ly9zZW1hTG9naWNDb21tYW5kLnNob3dIZWxwLnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAvLyBNYWtlIHRhYmxlIHdpdGggaGVscC1BcnJheVxyXG4gICAgcmVzdWx0cyA9IGF3YWl0IHNob3dIZWxwKClcclxuICAgIGZvdW5kID0gdHJ1ZVxyXG4gIH1cclxuXHJcbiAgaWYgKCghZm91bmQpICYmICgoc2VtYUxvZ2ljQ29tPy50b1N0cmluZygpLnN1YnN0cmluZygwLCBzZW1hTG9naWNDb21tYW5kLnNob3dWZXJzaW9uLmxlbmd0aCkpID09IHNlbWFMb2dpY0NvbW1hbmQuc2hvd1ZlcnNpb24pKSB7Ly8gc2VtYUxvZ2ljQ29tbWFuZC5zaG93VmVyc2lvbi50b0xvd2VyQ2FzZSgpKSkge1xyXG4gICAgcmVzdWx0cyA9IGF3YWl0IHNob3dWZXJzaW9uKHNldHRpbmdzKVxyXG4gICAgZm91bmQgPSB0cnVlXHJcbiAgfVxyXG5cclxuICBpZiAoKCFmb3VuZCkgJiYgKChzZW1hTG9naWNDb20/LnRvU3RyaW5nKCkuc3Vic3RyaW5nKDAsIHNlbWFMb2dpY0NvbW1hbmQuc2hvd1BhcnNlLmxlbmd0aCkpID09IHNlbWFMb2dpY0NvbW1hbmQuc2hvd1BhcnNlKSkgey8vIHNlbWFMb2dpY0NvbW1hbmQuc2hvd1BhcnNlLnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICAvLyBzZWFyY2ggZm9yIHJ1bGVzc2V0dHlwZVxyXG4gICAgbGV0IHJ1bGVzZXR0eXBlOiBzdHJpbmcgPSBcIlwiIC8vIHNvIGZhciBhcyB0aGVyZSBpcyBubyBvdXRwdXRmb3JtYXQgLSBub3RoaW5nIHRvIGRvXHJcbiAgICBsZXQgZmlsdGVyOiBzdHJpbmcgPSBcIlwiXHJcblxyXG4gICAgZm9yIChsZXQgcnVsZSBpbiBydWxlc2V0dHlwZXNDb21tYW5kcykge1xyXG4gICAgICAvLyBzZWFyY2ggZm9yIHRoZSBydWxlc3NldHR5cGUgd2hpY2ggaXMgdG8gc2hvdyBpbmxpbmVcclxuICAgICAgaWYgKHNlbWFMb2dpY0NvbS5jb250YWlucyhydWxlc2V0dHlwZXNDb21tYW5kc1tydWxlXVswXSkpIHtcclxuICAgICAgICBydWxlc2V0dHlwZSA9IHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3J1bGVdWzFdXHJcbiAgICAgICAgLy8gc2VhcmNoIGZvciBhIGdpdmVuIGZpbHRlclxyXG4gICAgICAgIGNvbnN0IGZpbmRmb3IgPSBzZW1hTG9naWNDb20uaW5kZXhPZihzZW1hTG9naWNDb21tYW5kLnNob3dGaWx0ZXIpXHJcbiAgICAgICAgaWYgKGZpbmRmb3IgPiAwKSB7XHJcbiAgICAgICAgICBsZXQgZmlsdGVyID0gc2VtYUxvZ2ljQ29tLnN1YnN0cmluZyhmaW5kZm9yICsgc2VtYUxvZ2ljQ29tbWFuZC5zaG93RmlsdGVyLmxlbmd0aClcclxuICAgICAgICAgIGZpbHRlciA9IGZpbHRlci50cmltKClcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghZm91bmQpIHsgLy8gRGVmYXVsdFxyXG4gICAgICAvLyBNYWtlIHRhYmxlIHdpdGggaGVscC1BcnJheVxyXG4gICAgICByZXN1bHRzID0gYXdhaXQgc2hvd0hlbHAoKVxyXG4gICAgICBmb3VuZCA9IHRydWVcclxuICAgIH1cclxuXHJcblxyXG4gICAgaWYgKHJ1bGVzZXR0eXBlICE9IFwiXCIpIHtcclxuICAgICAgcmVzdWx0cyA9IGF3YWl0IHNob3dQYXJzZVdpdGhGaWx0ZXIoZmlsdGVyLCBydWxlc2V0dHlwZSwgc2V0dGluZ3MpXHJcbiAgICB9XHJcbiAgICBmb3VuZCA9IHRydWVcclxuICB9XHJcblxyXG4gIGlmICghZm91bmQpIHtcclxuICAgIHJlc3VsdHMgPSByZXBsYWNlV2l0aEVtcHR5Tm9kZShjb250YWluZXJFbClcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHRzXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTZW1hTG9naWNSZW5kZXJlZEVsZW1lbnQgZXh0ZW5kcyBNYXJrZG93blJlbmRlckNoaWxkIHtcclxuICBteXNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncztcclxuXHJcbiAgY29uc3RydWN0b3IoeyBjb250YWluZXJFbCwgc2V0IH06IHsgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBzZXQ6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzIH0pIHtcclxuICAgIHN1cGVyKGNvbnRhaW5lckVsKTtcclxuICAgIHRoaXMubXlzZXR0aW5ncyA9IHNldFxyXG4gIH1cclxuICBhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0aGlzLmNvbnRhaW5lckVsLnNldENoaWxkcmVuSW5QbGFjZShcclxuICAgICAgYXdhaXQgcmVwbGFjZVdpdGhDb21tYW5kTm9kZSh0aGlzLmNvbnRhaW5lckVsLCB0aGlzLm15c2V0dGluZ3MpXHJcbiAgICAgIC8vcmVwbGFjZVdpdGhFbXB0eU5vZGUodGhpcy5jb250YWluZXJFbClcclxuICAgICk7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzaG93SGVscCgpOiBQcm9taXNlPE5vZGVbXT4ge1xyXG4gIGxldCByZXN1bHRzOiBOb2RlW10gPSBbXTtcclxuICBsZXQgYnVpbGRjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUpIHsgY29uc29sZS5sb2coc2VtYUxvZ2ljQ29tbWFuZC5zaG93SGVscCk7IH1cclxuXHJcbiAgYnVpbGRjb250YWluZXJFbCA9IGNyZWF0ZUVsKCd0YWJsZScpO1xyXG4gIGxldCBib2R5ID0gYnVpbGRjb250YWluZXJFbC5jcmVhdGVFbChcImJvZHlcIik7XHJcbiAgbGV0IHJvdyA9IGJvZHkuY3JlYXRlRWwoXCJ0clwiKTtcclxuICByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IFwiU2VtYUxvZ2ljLUNvbW1hbmRzLUhlbHBcIiB9KTtcclxuICByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbWFMb2dpY0hlbHAubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IHJvdyA9IGJvZHkuY3JlYXRlRWwoXCJ0clwiKTtcclxuICAgIHJvdy5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogc2VtYUxvZ2ljSGVscFtpXVswXSB9KTtcclxuICAgIHJvdy5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogc2VtYUxvZ2ljSGVscFtpXVsxXSB9KTtcclxuICB9XHJcblxyXG4gIHJlc3VsdHMucHVzaChidWlsZGNvbnRhaW5lckVsKTtcclxuICByZXR1cm4gcmVzdWx0cztcclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc2hvd1ZlcnNpb24oc2V0dGluZ3M6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzKTogUHJvbWlzZTxOb2RlW10+IHtcclxuICBsZXQgcmVzdWx0czogTm9kZVtdID0gW107XHJcbiAgbGV0IGJ1aWxkY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xyXG4gIGxldCB2ZXJzaW9udGV4dDogc3RyaW5nID0gXCJcIjtcclxuXHJcbiAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbmZvcm1hdGl2ZSkgeyBjb25zb2xlLmxvZyhzZW1hTG9naWNDb21tYW5kLnNob3dWZXJzaW9uKTsgfVxyXG5cclxuICBjb25zdCB2ZXJzaW9uID0gYXdhaXQgc2VtYUxvZ2ljR2V0VmVyc2lvbihzZXR0aW5ncylcclxuICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHRCdWZmZXI6IGFueSkge1xyXG4gICAgICB2ZXJzaW9udGV4dCA9IHJlc3VsdEJ1ZmZlcjtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZnVuY3Rpb24gKHJlc3VsdEJ1ZmZlcjogYW55KSB7IHZlcnNpb250ZXh0ID0gcmVzdWx0QnVmZmVyOyB9XHJcbiAgICApXHJcbiAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoKSB7IGNvbnNvbGUubG9nKGBKU09OLVRleHQgaW4gUHJvY2Vzc29yOiR7dmVyc2lvbnRleHR9YCkgfVxyXG5cclxuICAvLyBWZXJzaW9uIGlzIHNob3duIGluIGEgdGFibGUgbGluZVxyXG4gIGJ1aWxkY29udGFpbmVyRWwgPSBjcmVhdGVFbCgndGFibGUnKTtcclxuICBjb25zdCB0YWJsZSA9IGJ1aWxkY29udGFpbmVyRWwuY3JlYXRlRWwoJ3RhYmxlJyk7XHJcbiAgY29uc3QgYm9keSA9IGJ1aWxkY29udGFpbmVyRWwuY3JlYXRlRWwoXCJib2R5XCIpO1xyXG4gIGNvbnN0IHJvdyA9IGJvZHkuY3JlYXRlRWwoXCJ0clwiKTtcclxuICByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IHZlcnNpb250ZXh0IH0pO1xyXG5cclxuICByZXN1bHRzLnB1c2goYnVpbGRjb250YWluZXJFbCk7XHJcbiAgcmV0dXJuIHJlc3VsdHM7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHNob3dQYXJzZVNWRyhGaWx0ZXI6IHN0cmluZyk6IFByb21pc2U8Tm9kZVtdPiB7XHJcbiAgbGV0IHJlc3VsdHM6IE5vZGVbXSA9IFtdO1xyXG4gIGxldCBidWlsZGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbmZvcm1hdGl2ZSkgeyBjb25zb2xlLmxvZyhzZW1hTG9naWNDb21tYW5kLnNob3dIZWxwKTsgfVxyXG5cclxuXHJcbiAgYnVpbGRjb250YWluZXJFbCA9IGNyZWF0ZUVsKCd0YWJsZScpO1xyXG4gIGxldCBib2R5ID0gYnVpbGRjb250YWluZXJFbC5jcmVhdGVFbChcImJvZHlcIik7XHJcbiAgbGV0IHJvdyA9IGJvZHkuY3JlYXRlRWwoXCJ0clwiKTtcclxuICByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IFwiU2VtYUxvZ2ljLUNvbW1hbmRzLUhlbHBcIiB9KTtcclxuICByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IFwiRGVzY3JpcHRpb25cIiB9KTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbWFMb2dpY0hlbHAubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IHJvdyA9IGJvZHkuY3JlYXRlRWwoXCJ0clwiKTtcclxuICAgIHJvdy5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogc2VtYUxvZ2ljSGVscFtpXVswXSB9KTtcclxuICAgIHJvdy5jcmVhdGVFbChcInRkXCIsIHsgdGV4dDogc2VtYUxvZ2ljSGVscFtpXVsxXSB9KTtcclxuICB9XHJcblxyXG4gIHJlc3VsdHMucHVzaChidWlsZGNvbnRhaW5lckVsKTtcclxuICByZXR1cm4gcmVzdWx0cztcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0aHR0cHMoaHR0cHM6IGJvb2xlYW4pOiBzdHJpbmcge1xyXG4gIGxldCBzdHI6IHN0cmluZ1xyXG4gIC8vIGh0dHBzID9cclxuICBpZiAoaHR0cHMpIHtcclxuICAgIHN0ciA9IEFQSV9EZWZhdWx0cy5odHRwc1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzdHIgPSBBUElfRGVmYXVsdHMuaHR0cFxyXG4gIH1cclxuICByZXR1cm4gc3RyXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIb3N0UG9ydChzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MpOiBzdHJpbmcge1xyXG4gIGxldCBhZHJlc3MgPSBzZXRodHRwcyhzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzKVxyXG4gIGFkcmVzcyA9IGFkcmVzcyArIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15QmFzZVVSTFxyXG5cclxuICBpZiAoc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlQb3J0ICE9ICcnKSB7XHJcbiAgICBhZHJlc3MgPSBhZHJlc3MgKyAnOicgKyBzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVBvcnRcclxuICB9XHJcbiAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgY29uc29sZS5sb2coJ2dldHRpbmcgU2VtYUxvZ2ljLUFkcmVzczogJyArIGFkcmVzcykgfVxyXG4gIHJldHVybiBhZHJlc3NcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldEhvc3RBc3BQb3J0KHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncywgcGFyc2VkQ29tbWFuZHM6IHBhcnNlQ29tbWFuZCk6IHN0cmluZyB7XHJcbiAgbGV0IGFkcmVzczogc3RyaW5nXHJcbiAgaWYgKHBhcnNlZENvbW1hbmRzLm91dHB1dGZvcm1hdCA9PSBydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX0FTUF1bMV0pIHtcclxuICAgIGFkcmVzcyA9IHNldGh0dHBzKHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15VXNlSHR0cHMpXHJcbiAgICBhZHJlc3MgPSBhZHJlc3MgKyBzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teUFzcFVybFxyXG4gICAgaWYgKHBhcnNlZENvbW1hbmRzLmVuZHBvaW50ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICBpZiAocGFyc2VkQ29tbWFuZHMuZW5kcG9pbnQuaW5kZXhPZihcImh0dHBcIikgPj0gMCkge1xyXG4gICAgICAgIGFkcmVzcyA9IHBhcnNlZENvbW1hbmRzLmVuZHBvaW50XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWRyZXNzID0gYWRyZXNzICsgXCIvXCIgKyBwYXJzZWRDb21tYW5kcy5lbmRwb2ludFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIHVuZGVmaW5kZWQgbmV3IHRyYW5zZmVyIGVuZHBvaW50XHJcbiAgICBhZHJlc3MgPSBwYXJzZWRDb21tYW5kcy5lbmRwb2ludFxyXG4gIH1cclxuICBpZiAocGFyc2VkQ29tbWFuZHMucGFyYW0gIT0gdW5kZWZpbmVkKSB7IGFkcmVzcyA9IGFkcmVzcyArIFwiP1wiICsgcGFyc2VkQ29tbWFuZHMucGFyYW0gfVxyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IGNvbnNvbGUubG9nKCdnZXR0aW5nIGFzcC1BZHJlc3M6ICcgKyBhZHJlc3MpIH1cclxuICByZXR1cm4gYWRyZXNzXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW1hTG9naWNHZXRWZXJzaW9uKHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyk6IFByb21pc2U8c3RyaW5nPiB7XHJcblxyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IGNvbnNvbGUubG9nKFwiU3RhcnQgc2VtYUxvZ2ljR2V0VmVyc2lvblwiKSB9XHJcblxyXG4gIC8vIFByZXBhcmUgSlNPTi1Gb3JtYXRcclxuICBjb25zdCBteVZlcnNpb24gPSAne1widmVyc2lvblwiOlwiMFwiLFwidmVyc2lvbnRleHRcIjpcIlRleHRcIn0nO1xyXG4gIGxldCBteUpzb24gPSBKU09OLnBhcnNlKG15VmVyc2lvbik7XHJcbiAgbGV0IGpzb25WZXJzaW9uOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAvLyBDcmVhdGUgVXJsIGZvciBHZXQgVmVyc2lvblxyXG4gIGxldCB2QVBJX1VSTF9WZXJzaW9uID0gZ2V0SG9zdFBvcnQoc2V0dGluZ3MpICsgQVBJX0RlZmF1bHRzLlZlcnNpb247XHJcbiAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2codkFQSV9VUkxfVmVyc2lvbikgfVxyXG5cclxuICBsZXQgb3B0aW9uczogUmVxdWVzdFVybFBhcmFtXHJcblxyXG4gIGlmIChzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzICYmIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15VXNlciAhPSAnJykge1xyXG4gICAgb3B0aW9ucyA9IHtcclxuICAgICAgdXJsOiB2QVBJX1VSTF9WZXJzaW9uLFxyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmFzaWMgXCIgKyBidG9hKHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15VXNlciArIFwiOlwiICsgc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlQYXNzd29yZClcclxuICAgICAgfSxcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgb3B0aW9ucyA9IHtcclxuICAgICAgdXJsOiB2QVBJX1VSTF9WZXJzaW9uLFxyXG4gICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgfVxyXG4gIH1cclxuICBsZXQgcmVzcG9uc2U6IFJlcXVlc3RVcmxSZXNwb25zZTtcclxuXHJcbiAgLy8gR2V0IGluZm9ybWF0aW9uIGFib3V0IHZlcnNpb24gZnJvbSB0aGUgcmVxdWVzdCBcclxuICB0cnkge1xyXG4gICAgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKG9wdGlvbnMpXHJcbiAgICBteUpzb24gPSBKU09OLnBhcnNlKHJlc3BvbnNlLnRleHQpO1xyXG4gICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9BbGwpIHsgY29uc29sZS5sb2cobXlKc29uLnZlcnNpb24pIH1cclxuICAgIGpzb25WZXJzaW9uID0gbXlKc29uLnZlcnNpb247XHJcbiAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0FsbCkgeyBjb25zb2xlLmxvZyhgSlNPTi1UZXh0IGluIFJlcXVlc3Q6JHtqc29uVmVyc2lvbn1gKSB9XHJcbiAgICByZXR1cm4ganNvblZlcnNpb247XHJcbiAgfVxyXG4gIGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmxvZygnRXJyb3I6IENhdGNoIG9mIEFQSVZlcnNpb24nICsgZS50b1N0cmluZygpKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKClcclxuICAgIC8vcmV0dXJuICdFcnJvcjogQ2F0Y2ggb2YgQVBJVmVyc2lvbidcclxuICB9XHJcbn1cclxuXHJcbi8vIHNlbWFMb2dpY1BpbmcgdHJpZXMgdG8gdGVzdCBzdGFuZGFyZFZlcnNpb25BUEkgLSBpZiBpdCBjYW4ndCBiZSBjb25uZWN0ZWQgLSBzaG93IG1lYW5pbmdmdWwgZXJyb3Igc3RhdGVcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbWFMb2dpY1Bpbmcoc2V0dGluZ3M6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzLCBsYXN0VXBkYXRlOiBudW1iZXIpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuICBsZXQgc3RhcnR0aW1lID0gRGF0ZS5ub3coKVxyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IGNvbnNvbGUubG9nKCdHZXRWZXJzaW9uUGluZyBhdCAnLCBEYXRlLm5vdygpLCAnICBmb3IgJywgZ2V0SG9zdFBvcnQoc2V0dGluZ3MpKSB9XHJcbiAgYXdhaXQgc2VtYUxvZ2ljR2V0VmVyc2lvbihzZXR0aW5ncylcclxuICAgIC50aGVuKGZ1bmN0aW9uIChyZXN1bHRCdWZmZXI6IGFueSkge1xyXG4gICAgICAvLyBub3RoaW5nIHRvIGRvXHJcbiAgICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IGNvbnNvbGUubG9nKCdTZW1hTG9naWMgR2V0VmVyc2lvblBpbmcgc3RhcnRlZCBhdDonLCBzdGFydHRpbWUsICcgRW5kdGltZTogJywgRGF0ZS5ub3coKSkgfVxyXG4gICAgfSlcclxuICAgIC5jYXRjaChmdW5jdGlvbiAoZTogRXJyb3IpIHtcclxuICAgICAgLy8gSWYgaXQgaXMgYW4gb2xkIGVycm9yIChsb25nIHRpbWUgYWdvIHNlbnQpLCB0aGVuIHRlaGVyZSBpcyBub3RoaW5nIHRvIGRvXHJcbiAgICAgIGlmIChzdGFydHRpbWUgPCBsYXN0VXBkYXRlKSB7XHJcbiAgICAgICAgLy8gdGltZSB0byBzaG93IGFuIGVycm9yIFxyXG4gICAgICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgVGhlcmUgaXMgbm8gY29ubmVjdGlvbiB0byBTZW1hTG9naWNTZXJ2aWNlIEFQSVZlcnNpb25gKVxyXG4gICAgICAgICAgY29uc29sZS5sb2coZ2V0SG9zdFBvcnQoc2V0dGluZ3MpKVxyXG4gICAgICAgIH1cclxuICAgICAgICBhcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWY6IGFueSkgPT4ge1xyXG4gICAgICAgICAgbGV0IHNsVmlldyA9IGxlYWYudmlldy5nZXRWaWV3VHlwZSgpXHJcbiAgICAgICAgICBpZiAoc2xWaWV3ID09IFNlbWFMb2dpY1ZpZXdUeXBlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGxlYWYudmlldy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJTZW1hTG9naWNfRXJyb3JcIiB9KTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKFwiYlwiLCB7IHRleHQ6IFwiVGhlcmUgaXMgbm8gY29ubmVjdGlvbiB0byBTZW1hTG9naWNTZXJ2aWNlIC0+IEFQSVZlcnNpb25cIiB9KTtcclxuICAgICAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKFwiYlwiLCB7IHRleHQ6IGdldEhvc3RQb3J0KHNldHRpbmdzKSB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0hpZ2gpIHsgY29uc29sZS5sb2coJ1NlbWFMb2dpYyBHZXRWZXJzaW9uUGluZyBmYWlsZWQgYW5kIG5vdCB1c2VkIHN0YXJ0ZWQ6Jywgc3RhcnR0aW1lLCAnIEVuZHRpbWU6ICcsIERhdGUubm93KCkpIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgKVxyXG4gIHJldHVybiB0cnVlXHJcbn1cclxuXHJcbi8vIFRvRG86IFBhcnNlIGlzdCBkdXJjaCBkZW4gYWt0dWVsbGVuIFVtYmF1IGltIFByZVByb2Nlc3NvciBub2NobWFsIGFuenVwYXNzZW5cclxuYXN5bmMgZnVuY3Rpb24gc2hvd1BhcnNlV2l0aEZpbHRlcihmaWx0ZXI6IHN0cmluZywgcnVsZXNzZXR0eXBlOiBzdHJpbmcsIHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyk6IFByb21pc2U8Tm9kZVtdPiB7XHJcbiAgLy8gVG9EbzogQ2hhbmdlIGZyb20gY29uc29sZS1sb2cgdG8gc2xjb25zb2xlbG9nIHdpdGggU0xjb20tT2JqZWN0XHJcbiAgbGV0IHJlc3VsdHM6IE5vZGVbXSA9IFtdO1xyXG4gIGxldCBidWlsZGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgbGV0IHZBUElfVVJMID0gZ2V0SG9zdFBvcnQoc2V0dGluZ3MpICsgQVBJX0RlZmF1bHRzLnJ1bGVzX3BhcnNlICsgXCI/c2lkPVwiICsgc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlTSUQ7XHJcbiAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2codkFQSV9VUkwpIH07XHJcblxyXG4gIGxldCBib2R5dGV4dDogc3RyaW5nID0gXCJcIjtcclxuXHJcbiAgbGV0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG4gIGlmIChhY3RpdmVWaWV3ID09IHVuZGVmaW5lZCkge1xyXG4gICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoKSB7IGNvbnNvbGUubG9nKFwiRG8gbm90IGZpbmQgYW4gYWN0aXZlIHZpZXdcIikgfVxyXG4gICAgcmV0dXJuIHJlc3VsdHNcclxuICB9XHJcblxyXG4gIGxldCBkaWFsZWN0SUQ6IHN0cmluZyA9IFwiZGVmYXVsdFwiXHJcblxyXG4gIGxldCBjb2RlYmxvY2s6IGJvb2xlYW4gPSBmYWxzZTtcclxuICBsZXQgbmV3Q29kZWJsb2NrOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG4gIGlmIChhY3RpdmVWaWV3ICE9IG51bGwpIHtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWN0aXZlVmlldy5lZGl0b3IubGluZUNvdW50KCk7IGkrKykge1xyXG4gICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0FsbCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGksICc7JywgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKSlcclxuICAgICAgICBjb25zb2xlLmxvZygnU3Vic3RyaW5nOicsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIDIpKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoMCwgMykgPT0gXCJgYGBcIikge1xyXG4gICAgICAgIGlmICghY29kZWJsb2NrKSB7XHJcbiAgICAgICAgICBjb2RlYmxvY2sgPSB0cnVlXHJcbiAgICAgICAgICBuZXdDb2RlYmxvY2sgPSB0cnVlXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG5ld0NvZGVibG9jayA9IGZhbHNlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfVxyXG4gICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZygnQ3VycmVudCBsaW5lIGlzIENvZGVibG9jaycsIGNvZGVibG9jaykgfVxyXG5cclxuICAgICAgaWYgKCghY29kZWJsb2NrKSAmJiAoIW5ld0NvZGVibG9jaykpIHtcclxuICAgICAgICAvLyBDaGVjayBpbmxpbmUgU3RhdGVtZW50c1xyXG4gICAgICAgIHN3aXRjaCAoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKSkge1xyXG4gICAgICAgICAgZGVmYXVsdDogYm9keXRleHQgPSBib2R5dGV4dC5jb25jYXQoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKSArICdcXG4nKVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAvLyBQclx1MDBGQ2ZlIGF1ZiB6dSB2ZXJ3ZW5kZW5kZW4gRGlhbGVjdFxyXG4gICAgICAgIHN3aXRjaCAoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoMCwgc2VtYUxvZ2ljQ29tbWFuZC51c2VEaWFsZWN0Lmxlbmd0aCkpIHtcclxuICAgICAgICAgIGNhc2Ugc2VtYUxvZ2ljQ29tbWFuZC51c2VEaWFsZWN0OiB7XHJcbiAgICAgICAgICAgIGRpYWxlY3RJRCA9IGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKHNlbWFMb2dpY0NvbW1hbmQudXNlRGlhbGVjdC5sZW5ndGgsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkubGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAgZGlhbGVjdElEID0gZGlhbGVjdElELnRyaW0oKTtcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGRlZmF1bHQ6IHsgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuICAgICAgaWYgKGkgPCBhY3RpdmVWaWV3LmVkaXRvci5saW5lQ291bnQoKSkge1xyXG4gICAgICAgIGlmIChhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZygwLCAzKSA9PSBcImBgYFwiKSB7XHJcbiAgICAgICAgICBpZiAoKGNvZGVibG9jaykgJiYgKCFuZXdDb2RlYmxvY2spKSB7IGNvZGVibG9jayA9IGZhbHNlIH0gZWxzZSB7IG5ld0NvZGVibG9jayA9IGZhbHNlIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuXHJcbiAgaWYgKGJvZHl0ZXh0ID09IFwiXCIpIHsgYm9keXRleHQgPSBcIlwiIH1cclxuICBpZiAoZGlhbGVjdElEID09IFwiXCIpIHsgZGlhbGVjdElEID0gXCJkZWZhdWx0XCIgfVxyXG4gIGxldCByZXN1bHQgPSBcIlwiO1xyXG4gIGlmIChmaWx0ZXIgIT0gXCJcIikge1xyXG4gICAgbGV0IGpzb253b0ZpbHRlciA9IHtcclxuICAgICAgXCJ0ZXh0XCI6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcInRleHRJRFwiOiBcImZseVwiLFxyXG4gICAgICAgICAgXCJkaWFsZWN0SURcIjogZGlhbGVjdElELFxyXG4gICAgICAgICAgXCJydWxlc1wiOiBib2R5dGV4dFxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgXCJmaWx0ZXJcIjoge1xyXG4gICAgICAgIFwiZGlhbGVjdElEXCI6IFwiZGVmYXVsdFwiLFxyXG4gICAgICAgIFwic3ltYm9sc1wiOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIFwic3ltYm9sXCI6IGZpbHRlclxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAgXCJwZXJzaXN0ZW5jeVwiOiBmYWxzZSxcclxuICAgICAgXCJydWxlc2V0dHlwZVwiOiBydWxlc3NldHR5cGUgLy9zZXR0aW5ncy5teU91dHB1dEZvcm1hdFxyXG4gICAgfVxyXG4gICAgdmFyIG9wdGlvbnNQYXJzZTogUmVxdWVzdFVybFBhcmFtID0ge1xyXG4gICAgICB1cmw6IHZBUElfVVJMLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGpzb253b0ZpbHRlcilcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgbGV0IGpzb250ZXN0d3RoRmlsdGVyID0ge1xyXG4gICAgICBcInRleHRcIjogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgIFwidGV4dElEXCI6IFwiZmx5XCIsXHJcbiAgICAgICAgICBcImRpYWxlY3RJRFwiOiBkaWFsZWN0SUQsXHJcbiAgICAgICAgICBcInJ1bGVzXCI6IGJvZHl0ZXh0XHJcbiAgICAgICAgfVxyXG4gICAgICBdLFxyXG4gICAgICBcImZpbHRlclwiOiB7fSxcclxuICAgICAgXCJwZXJzaXN0ZW5jeVwiOiBmYWxzZSxcclxuICAgICAgXCJydWxlc2V0dHlwZVwiOiBydWxlc3NldHR5cGUgLy9zZXR0aW5ncy5teU91dHB1dEZvcm1hdFxyXG4gICAgfVxyXG4gICAgdmFyIG9wdGlvbnNQYXJzZTogUmVxdWVzdFVybFBhcmFtID0ge1xyXG4gICAgICB1cmw6IHZBUElfVVJMLFxyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGpzb250ZXN0d3RoRmlsdGVyKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgbGV0IHJlczogc3RyaW5nO1xyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7XHJcbiAgICBjb25zb2xlLmxvZyhgQ29udGV4dDogJHtkaWFsZWN0SUR9LCBCb2R5dGV4dDogJHtib2R5dGV4dH1gKVxyXG4gIH1cclxuXHJcbiAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2cob3B0aW9uc1BhcnNlKSB9XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlUGFyc2UgPSBhd2FpdCByZXF1ZXN0VXJsKG9wdGlvbnNQYXJzZSlcclxuICAgIGNvbnN0IHJlbUpzb24gPSByZXNwb25zZVBhcnNlLnRleHQ7XHJcbiAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZyhcIlNlbWFMb2dpYzogUGFyc2Ugd2l0aCBodHRwLXN0YXR1cyBcIiArIHJlc3BvbnNlUGFyc2Uuc3RhdHVzLnRvU3RyaW5nKCkpIH07XHJcbiAgICBpZiAocmVzcG9uc2VQYXJzZS5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgIGxldCByZXN1bHRodHRwID0gcmVzcG9uc2VQYXJzZS50ZXh0O1xyXG4gICAgICBjb25zdCBmcmFnbWVudCA9IChuZXcgUmFuZ2UoKSkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHJlc3VsdGh0dHApO1xyXG4gICAgICAvL2J1aWxkY29udGFpbmVyRWwgPSBjcmVhdGVFbChcImg0XCIsIHsgdGV4dDogQVBJX0RlZmF1bHRzLnZpZXdoZWFkZXIgfSk7XHJcbiAgICAgIGJ1aWxkY29udGFpbmVyRWwgPSBjcmVhdGVFbChcInBcIilcclxuICAgICAgYnVpbGRjb250YWluZXJFbC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XHJcbiAgICAgIHJlc3VsdHMucHVzaChidWlsZGNvbnRhaW5lckVsKVxyXG4gICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBQYXJzZXJlc3VsdDoke3Jlc3VsdGh0dHB9YCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdHNcclxuICAgIH1cclxuICB9XHJcbiAgY2F0Y2ggKGUpIHtcclxuICAgIHNsY29uc29sZWxvZyh1bmRlZmluZWQsIGBDYXRjaGVycm9yIG9mIHJlbW92aW5nIGNvbnRleHQgJHt2QVBJX1VSTH1gKVxyXG4gICAgLy9jb25zb2xlLmxvZyhgQ2F0Y2hlcnJvciBvZiByZW1vdmluZyBjb250ZXh0ICR7dkFQSV9VUkx9YClcclxuICAgIHNsY29uc29sZWxvZyh1bmRlZmluZWQsIGUudG9TdHJpbmcoKSlcclxuICAgIC8vY29uc29sZS5sb2coZS50b1N0cmluZygpKVxyXG4gICAgdGhyb3cgZVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3VsdHNcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHNsY29uc29sZWxvZyhzbHZpZXc/OiBTZW1hTG9naWNWaWV3IHwgdW5kZWZpbmVkLCBtZXNzYWdlPzogYW55LCAuLi5vcHRpb25hbFBhcmFtczogYW55W10pIHtcclxuXHJcbiAgaWYgKHNsdmlldyAhPSB1bmRlZmluZWQpIHtcclxuICAgIGlmIChzbHZpZXcuZ2V0Vmlld1R5cGUoKSA9PSBTZW1hTG9naWNWaWV3VHlwZSkge1xyXG4gICAgICBpZiAoc2x2aWV3LmdldERlYnVnSW5saW5lKCkgPT0gdHJ1ZSkge1xyXG4gICAgICAgIGxldCBsb2dNZXNzYWdlcyA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2UpXHJcbiAgICAgICAgc2x2aWV3LmFwcGVuZERlYnVnQ29udGVudChsb2dNZXNzYWdlcylcclxuICAgICAgfSBlbHNlIHsgY29uc29sZS5sb2cobWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpIH1cclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2cobWVzc2FnZSwgLi4ub3B0aW9uYWxQYXJhbXMpXHJcbiAgfVxyXG59XHJcblxyXG4iLCAiaW1wb3J0IHsgRGVidWdMZXZNYXAsIHJzdHlwZXNfQVNQLCByc3R5cGVzX1NlbWFsb2dpYywgcnVsZXNldHR5cGVzQ29tbWFuZHMsIHNlbWFMb2dpY0NvbW1hbmQgfSBmcm9tIFwiY29uc3RcIlxyXG5pbXBvcnQgeyBEZWJ1Z0xldmVsIH0gZnJvbSBcIm1haW5cIlxyXG5pbXBvcnQgeyBzbGNvbnNvbGVsb2cgfSBmcm9tIFwidXRpbHNcIlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBwYXJzZUNvbW1hbmQge1xyXG4gICAgb3V0cHV0Zm9ybWF0OiBzdHJpbmcsXHJcbiAgICBlbmRwb2ludDogc3RyaW5nLFxyXG4gICAgcGFyYW06IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVmlld1V0aWxzIHtcclxuXHJcbiAgICBwdWJsaWMgZ2V0Q29udGVudChjb250ZW50RWw6IEhUTUxFbGVtZW50LCBvdXRQdXRGb3JtYXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQ6IHN0cmluZ1xyXG4gICAgICAgIGlmIChjb250ZW50RWwudGV4dENvbnRlbnQgPT0gbnVsbCkgeyBjb250ZW50ID0gXCJcIiB9IGVsc2UgeyBjb250ZW50ID0gY29udGVudEVsLnRleHRDb250ZW50IH1cclxuICAgICAgICBjb250ZW50ID0gdGhpcy5jbGVhbkNvbnRlbnQoY29udGVudCwgb3V0UHV0Rm9ybWF0KVxyXG4gICAgICAgIGNvbnRlbnQgPSB0aGlzLmNsZWFuQ29tbWFuZHMoY29udGVudClcclxuICAgICAgICByZXR1cm4gY29udGVudFxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFuQ29udGVudChjb250ZW50OiBzdHJpbmcsIG91dFB1dEZvcm1hdDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICAvLyBUZXh0bWFuaXB1bGF0aW9uIGZvciBzcGVjaWFsIG91dGNvbWVzXHJcbiAgICAgICAgaWYgKG91dFB1dEZvcm1hdCA9PSBydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX0FTUF1bMV0pIHtcclxuICAgICAgICAgICAgY29uc3QgZmlyc3RKU09OQnJhY2tldCA9IGNvbnRlbnQuaW5kZXhPZihcIntcIilcclxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuc3Vic3RyaW5nKGZpcnN0SlNPTkJyYWNrZXQsIGNvbnRlbnQubGVuZ3RoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3V0UHV0Rm9ybWF0ID09IHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfU2VtYWxvZ2ljXVsxXSkge1xyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJTdHJpbmcgPSBcIlNlbWFsb2dpYyBPdXRwdXRcIlxyXG4gICAgICAgICAgICBjb25zdCBmaXJzdGhlYWRlclN0cmluZyA9IGNvbnRlbnQuaW5kZXhPZihoZWFkZXJTdHJpbmcpXHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZyhmaXJzdGhlYWRlclN0cmluZyArIGhlYWRlclN0cmluZy5sZW5ndGgsIGNvbnRlbnQubGVuZ3RoKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29udGVudFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGVhbkNvbW1hbmRzKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGNvbnRlbnRDbGVhbmVkOiBzdHJpbmdbXSA9IFtdXHJcbiAgICAgICAgbGV0IGNvbnRlbnRBcnJheSA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpXHJcblxyXG4gICAgICAgIGNvbnRlbnRBcnJheS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcm93ID0gZWxlbWVudC50cmltKClcclxuICAgICAgICAgICAgcm93ID0gcm93LnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgaWYgKERlYnVnTGV2ZWwgPT0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgY29uc29sZS5sb2coXCJSb3cgYmVmb3JlOlwiICsgcm93KSB9XHJcbiAgICAgICAgICAgIHJvdyA9IHJvdy5yZXBsYWNlQWxsKFwiIFwiLCBcIlwiKVxyXG4gICAgICAgICAgICBpZiAoRGVidWdMZXZlbCA9PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZyhcIlJvdyBhZnRlcjpcIiArIHJvdykgfVxyXG4gICAgICAgICAgICBpZiAocm93LmluZGV4T2Yoc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0LnRvTG93ZXJDYXNlKCkpICE9IDApIHsgLy8gTm8gc3RhcnRpbmcgU2VtYUxvZ2ljLUNvbW1hbmRcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRDbGVhbmVkLnB1c2goZWxlbWVudClcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFN0YXJ0aW5nIFNlbWFMb2dpY0NvbW1hbmRcclxuICAgICAgICAgICAgICAgIC8vIFRlc3QgZm9yIFNlbWFMb2dpY0NvbW1hbmRzIHdoaWNoIHNob3VsZCBiZSBpbnRlcnByZXRhdGVkIGJ5IFNlbWFMb2dpY1NlcnZpY2UgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoRGVidWdMZXZlbCA9PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZyhcIkluZGV4IERlZmluZTpcIiArIHJvdy5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQuZGVmaW5lKS50b1N0cmluZygpKSB9XHJcbiAgICAgICAgICAgICAgICBpZiAoRGVidWdMZXZlbCA9PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZyhcIkxlbmd0aCBTdGFydDpcIiArIHNlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydC5sZW5ndGgudG9TdHJpbmcoKSkgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJvdy5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQuZGVmaW5lKSA9PSBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudENsZWFuZWQucHVzaChlbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb250ZW50ID0gXCJcIlxyXG4gICAgICAgIGNvbnRlbnRDbGVhbmVkLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgZWxlbWVudCArIFwiXFxuXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY29udGVudFxyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBSZXF1ZXN0VXJsUGFyYW0sIHJlcXVlc3RVcmwgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgcnVsZXNldHR5cGVzQ29tbWFuZHMsIHJzdHlwZXNfQVNQLCBEZWJ1Z0xldk1hcCwgc2VtYUxvZ2ljQ29tbWFuZCB9IGZyb20gXCIuL2NvbnN0XCJcclxuaW1wb3J0IHsgU2VtYUxvZ2ljUGx1Z2luQ29tbSwgRGVidWdMZXZlbCwgU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi9tYWluXCJcclxuaW1wb3J0IHsgZ2V0SG9zdEFzcFBvcnQgfSBmcm9tICcuL3V0aWxzJ1xyXG5pbXBvcnQgeyBwYXJzZUNvbW1hbmQgfSBmcm9tIFwidmlld191dGlsc1wiO1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBBU1BWaWV3VHlwZSA9ICdUcmFuc2ZlclNlcnZpY2UnO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFTUFZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XHJcblxyXG4gIG15QWN0aW9uOiBIVE1MRWxlbWVudFxyXG4gIHNsQ29tbTogU2VtYUxvZ2ljUGx1Z2luQ29tbVxyXG5cclxuICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmKSB7XHJcbiAgICBzdXBlcihsZWFmKTtcclxuICAgIC8vdGhpcy5uYXZpZ2F0aW9uID0gdHJ1ZVxyXG4gICAgdGhpcy5zZXROZXdBU1BJbml0aWFsKClcclxuICB9XHJcblxyXG4gIHB1YmxpYyBzZXRDb21tKGNvbW06IFNlbWFMb2dpY1BsdWdpbkNvbW0pIHtcclxuICAgIHRoaXMuc2xDb21tID0gY29tbVxyXG4gICAgLy90aGlzLnNsQ29tbS5zZXRTbFZpZXcodGhpcylcclxuICAgIHRoaXMuc2V0TmV3QVNQSW5pdGlhbCgpXHJcbiAgfVxyXG5cclxuICBnZXRWaWV3VHlwZSgpIHtcclxuICAgIHJldHVybiBBU1BWaWV3VHlwZTtcclxuICB9XHJcblxyXG4gIGdldERpc3BsYXlUZXh0KCkge1xyXG4gICAgcmV0dXJuIEFTUFZpZXdUeXBlO1xyXG4gIH1cclxuXHJcbiAgb25sb2FkKCk6IHZvaWQge1xyXG4gICAgdGhpcy5uYXZpZ2F0aW9uID0gdHJ1ZVxyXG4gICAgdGhpcy5jb250ZW50RWwuY29udGVudEVkaXRhYmxlID0gJ3RydWUnXHJcbiAgfVxyXG5cclxuXHJcbiAgcHVibGljIHNldE5ld0FTUEluaXRpYWwoKSB7XHJcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbFxyXG4gICAgY29udGFpbmVyLmVtcHR5KClcclxuICAgIGNvbnRhaW5lci5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJUcmFuc2Zlci5WaWV3XCIgfSk7XHJcbiAgICBjb250YWluZXIuY3JlYXRlRWwoXCJwXCIpXHJcbiAgfVxyXG5cclxuICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICB0aGlzLnNldE5ld0FTUEluaXRpYWwoKVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgb25DbG9zZSgpIHtcclxuICAgIC8vIE5vdGhpbmcgdG8gY2xlYW4gdXAuXHJcbiAgfVxyXG5cclxuICBzaG93RXJyb3IoZnJhZ21lbnQ6IERvY3VtZW50RnJhZ21lbnQpIHtcclxuICAgIC8vICAgdGhpcy5zZXRJbml0aWFsKHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfU2VtYWxvZ2ljXVsxXSlcclxuICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKGZyYWdtZW50KVxyXG4gIH1cclxuICBvbnVubG9hZCgpOiB2b2lkIHtcclxuICAgIGlmICh0aGlzLnNsQ29tbSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5zbENvbW0uc2xQbHVnaW4uYWN0aXZhdGVkID0gZmFsc2VcclxuICAgICAgdGhpcy5zbENvbW0uc2xQbHVnaW4ubXlTdGF0dXMuc2V0VGV4dCgnVHJhbnNmZXIgaXMgb2ZmJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjcmVhdGVSZXF1ZXN0KGNvbW06IFNlbWFMb2dpY1BsdWdpbkNvbW0sIHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncywgYXBpVXJsOiBzdHJpbmcsIG1ldGhvZDogc3RyaW5nLCBjb250ZW50VHlwZTogc3RyaW5nLCB3aXRoQmFzaWNBdXRoOiBib29sZWFuLCBib2R5Pzogc3RyaW5nKTogUmVxdWVzdFVybFBhcmFtIHtcclxuICAgIGxldCByZXF1ZXN0OiBSZXF1ZXN0VXJsUGFyYW1cclxuICAgIHR5cGUgcmVxdWVzdEhlYWRlciA9IFJlY29yZDxzdHJpbmcsIHN0cmluZz5cclxuICAgIGxldCBteUhlYWRlcjogcmVxdWVzdEhlYWRlciA9IHt9XHJcblxyXG4gICAgY29udGVudFR5cGUgPSBjb250ZW50VHlwZS50b0xvd2VyQ2FzZSgpXHJcbiAgICBtZXRob2QgPSBtZXRob2QudG9VcHBlckNhc2UoKVxyXG5cclxuICAgIHN3aXRjaCAoY29udGVudFR5cGUudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICBjYXNlIChcImpzb25cIik6IHtcclxuICAgICAgICBteUhlYWRlcltcIkNvbnRlbnQtVHlwZVwiXSA9IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAoXCJhc3BcIik6IHtcclxuICAgICAgICBteUhlYWRlcltcIkNvbnRlbnQtVHlwZVwiXSA9IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSAoXCJhc3AuanNvblwiKToge1xyXG4gICAgICAgIG15SGVhZGVyW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIChcInRleHRcIik6IHtcclxuICAgICAgICBteUhlYWRlcltcIkNvbnRlbnQtVHlwZVwiXSA9IFwidGV4dC9wbGFpblwiXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgbXlIZWFkZXJbXCJDb250ZW50LVR5cGVcIl0gPSBjb250ZW50VHlwZVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAod2l0aEJhc2ljQXV0aCkge1xyXG4gICAgICBteUhlYWRlcltcIkF1dGhvcml6YXRpb25cIl0gPSBcIkJhc2ljIFwiICsgYnRvYShzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZXIgKyBcIjpcIiArIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15UGFzc3dvcmQpXHJcbiAgICB9XHJcblxyXG4gICAgcmVxdWVzdCA9IHtcclxuICAgICAgdXJsOiBhcGlVcmwsXHJcbiAgICAgIG1ldGhvZDogbWV0aG9kLFxyXG4gICAgICBoZWFkZXJzOiBteUhlYWRlcixcclxuICAgICAgYm9keTogYm9keVxyXG4gICAgfVxyXG4gICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2cocmVxdWVzdCkgfTtcclxuXHJcbiAgICByZXR1cm4gcmVxdWVzdFxyXG4gIH1cclxuXHJcbiAgZ2V0QVNQQ29tbWFuZHMoc2xDb21tOiBTZW1hTG9naWNQbHVnaW5Db21tLCBzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MpOiBwYXJzZUNvbW1hbmQge1xyXG4gICAgbGV0IHBhcmFtUGFyc2VkQ29tbWFuZCA9IHtcclxuICAgICAgb3V0cHV0Zm9ybWF0OiBcIkFTUC5qc29uXCIsXHJcbiAgICAgIGVuZHBvaW50OiBzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teUFzcEVuZHBvaW50LFxyXG4gICAgICBwYXJhbTogXCJcIlxyXG4gICAgfVxyXG5cclxuICAgIGxldCBjb21tYW5kczogcGFyc2VDb21tYW5kXHJcblxyXG4gICAgaWYgKHNsQ29tbS5zbHZpZXcgIT0gbnVsbCkge1xyXG5cclxuICAgICAgY29uc3QgZWRpdG9ydGV4dCA9IHNsQ29tbS5zbFVzZWRNRFZpZXcuZWRpdG9yLmdldFJhbmdlKHsgbGluZTogMCwgY2g6IDAgfSwgeyBsaW5lOiBzbENvbW0uc2xVc2VkTURWaWV3LmVkaXRvci5sYXN0TGluZSgpLCBjaDogc2xDb21tLnNsVXNlZE1EVmlldy5lZGl0b3IubGFzdExpbmUubGVuZ3RoIH0pXHJcbiAgICAgIGNvbnN0IHJvd3MgPSBlZGl0b3J0ZXh0LnNwbGl0KFwiXFxuXCIpLmZpbHRlcigocm93KSA9PiByb3cubGVuZ3RoID4gMCk7XHJcblxyXG4gICAgICBsZXQgbXlTdHJSZXN1bHQ6IHN0cmluZztcclxuICAgICAgbGV0IHRyYW5zZmVyU3RyaW5nOiBzdHJpbmc7XHJcbiAgICAgIGxldCBlbmRwb2ludFN0cmluZzogc3RyaW5nID0gJyc7XHJcbiAgICAgIGxldCBwYXJhbVN0cmluZzogc3RyaW5nO1xyXG5cclxuICAgICAgcm93cy5mb3JFYWNoKHJvdyA9PiB7XHJcbiAgICAgICAgaWYgKHJvdy5zdWJzdHJpbmcoMCwgc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0Lmxlbmd0aCkgPT0gc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0KSB7XHJcbiAgICAgICAgICBjb25zdCB0cmFuc2ZlciA9IHJvdy5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQudHJhbnNmZXIpXHJcbiAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IHJvdy5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQudHJhbnNmZXJFbmRwb2ludClcclxuICAgICAgICAgIGxldCBwYXJhbSA9IHJvdy5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQudHJhbnNmZXJQYXJhbSlcclxuICAgICAgICAgIGNvbnN0IGVuZENvbW1hbmQgPSByb3cuaW5kZXhPZihzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfZW5kKVxyXG4gICAgICAgICAgaWYgKHBhcmFtIDwgMCkgeyBwYXJhbSA9IGVuZENvbW1hbmQgfVxyXG5cclxuICAgICAgICAgIGlmICh0cmFuc2ZlciA8PSAwKSB7IH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRyYW5zZmVyU3RyaW5nID0gcm93LnN1YnN0cmluZyh0cmFuc2ZlciArIHNlbWFMb2dpY0NvbW1hbmQudHJhbnNmZXIubGVuZ3RoICsgMSwgZW5kcG9pbnQpXHJcbiAgICAgICAgICAgIHRyYW5zZmVyU3RyaW5nID0gdHJhbnNmZXJTdHJpbmcudHJpbUVuZCgpXHJcbiAgICAgICAgICAgIGlmIChlbmRwb2ludCA+IDApIHtcclxuICAgICAgICAgICAgICBlbmRwb2ludFN0cmluZyA9IHJvdy5zdWJzdHJpbmcoZW5kcG9pbnQgKyAxICsgc2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlckVuZHBvaW50Lmxlbmd0aCwgcGFyYW0pXHJcbiAgICAgICAgICAgICAgZW5kcG9pbnRTdHJpbmcgPSBlbmRwb2ludFN0cmluZy50cmltRW5kKClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyYW0gPiAwICYmIHBhcmFtICE9IGVuZENvbW1hbmQpIHtcclxuICAgICAgICAgICAgICBwYXJhbVN0cmluZyA9IHJvdy5zdWJzdHJpbmcocGFyYW0gKyAxICsgc2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlclBhcmFtLmxlbmd0aCwgZW5kQ29tbWFuZClcclxuICAgICAgICAgICAgICBwYXJhbVN0cmluZyA9IHBhcmFtU3RyaW5nLnRyaW1FbmQoKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwYXJhbVBhcnNlZENvbW1hbmQgPSB7XHJcbiAgICAgICAgICAgICAgb3V0cHV0Zm9ybWF0OiB0cmFuc2ZlclN0cmluZyxcclxuICAgICAgICAgICAgICBlbmRwb2ludDogZW5kcG9pbnRTdHJpbmcsXHJcbiAgICAgICAgICAgICAgcGFyYW06IHBhcmFtU3RyaW5nXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyYW1QYXJzZWRDb21tYW5kXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgYXNwUGFyc2Uoc2xDb21tOiBTZW1hTG9naWNQbHVnaW5Db21tLCBzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MsIGFzcEpzb25QYXJzZWRTZW1hTG9naWM6IHN0cmluZykge1xyXG4gICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgY29uc29sZS5sb2coJ1N0YXJ0IFRyYW5zZmVyX1BhcnNlJykgfTtcclxuXHJcbiAgICBsZXQgdkFQSV9VUkw6IHN0cmluZyA9IFwiXCJcclxuICAgIGNvbnN0IHBhcnNlQ29tbWFuZHMgPSB0aGlzLmdldEFTUENvbW1hbmRzKHNsQ29tbSwgc2V0dGluZ3MpXHJcblxyXG4gICAgaWYgKHBhcnNlQ29tbWFuZHMub3V0cHV0Zm9ybWF0ID09IHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfQVNQXVsxXSB8fCBwYXJzZUNvbW1hbmRzLm91dHB1dGZvcm1hdCA9PSBydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX0FTUF1bMF0pIHtcclxuICAgICAgdkFQSV9VUkwgPSBnZXRIb3N0QXNwUG9ydChzZXR0aW5ncywgcGFyc2VDb21tYW5kcylcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHZBUElfVVJMID0gcGFyc2VDb21tYW5kcy5lbmRwb2ludFxyXG4gICAgICBpZiAocGFyc2VDb21tYW5kcy5wYXJhbSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICBpZiAocGFyc2VDb21tYW5kcy5wYXJhbS5sZW5ndGggPiAwKSB7IHZBUElfVVJMID0gdkFQSV9VUkwgKyBcIj9cIiArIHBhcnNlQ29tbWFuZHMucGFyYW0gfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IGNvbnNvbGUubG9nKFwiVHJhbnNmZXIgVVJMOiBcIiwgdkFQSV9VUkwpIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgb3B0aW9uc1BhcnNlID0gdGhpcy5jcmVhdGVSZXF1ZXN0KHRoaXMuc2xDb21tLCBzZXR0aW5ncywgdkFQSV9VUkwsICdQT1NUJywgJ2pzb24nLCB0cnVlLCBhc3BKc29uUGFyc2VkU2VtYUxvZ2ljKVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IGNvbnNvbGUubG9nKFwiQVNQOiB3YW50IHRvIHBhcnNlIFwiLCBvcHRpb25zUGFyc2UpIH07XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlUGFyc2UgPSBhd2FpdCByZXF1ZXN0VXJsKG9wdGlvbnNQYXJzZSlcclxuICAgICAgY29uc3QgcmVtSnNvbiA9IHJlc3BvbnNlUGFyc2UudGV4dDtcclxuICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coXCJBU1A6IFBhcnNlIHdpdGggaHR0cC1zdGF0dXMgXCIgKyByZXNwb25zZVBhcnNlLnN0YXR1cy50b1N0cmluZygpKSB9O1xyXG4gICAgICBpZiAocmVzcG9uc2VQYXJzZS5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdGh0dHAgPSByZXNwb25zZVBhcnNlLnRleHQ7XHJcbiAgICAgICAgdGhpcy5zZXROZXdBU1BJbml0aWFsKClcclxuICAgICAgICAvLyB0ZW1wb3JhcnkgcHJldHR5IHByaW50IGZvciBub3QgZm9ybWF0dGVkIGpzb24tb3V0cHV0IC0gd2lsbCBiZSBjaGFuZ2VkIGluIHJlbCAyLnhcclxuICAgICAgICByZXN1bHRodHRwID0gcmVzdWx0aHR0cC5yZXBsYWNlQWxsKFwiW1wiLCBcIltcXG5cIilcclxuICAgICAgICByZXN1bHRodHRwID0gcmVzdWx0aHR0cC5yZXBsYWNlQWxsKFwiXVwiLCBcIlxcbl1cIilcclxuICAgICAgICByZXN1bHRodHRwID0gcmVzdWx0aHR0cC5yZXBsYWNlQWxsKFwiLFwiLCBcIixcXG5cIilcclxuICAgICAgICBsZXQgcmVzdWx0aHR0cEFycmF5ID0gcmVzdWx0aHR0cC5zcGxpdCgnXFxuJylcclxuICAgICAgICByZXN1bHRodHRwQXJyYXkuZm9yRWFjaChlbGVtZW50ID0+IHtcclxuICAgICAgICAgIHRoaXMuY29udGVudEVsLmFwcGVuZChlbGVtZW50KVxyXG4gICAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoXCJiclwiKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICgoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkpIHsgY29uc29sZS5sb2coYEFTUC1QYXJzZXJlc3VsdDoke3Jlc3VsdGh0dHB9YCkgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0hpZ2gpIHsgY29uc29sZS5sb2coYENhdGNoZXJyb3Igb2YgcmVtb3ZpbmcgY29udGV4dCAke3ZBUElfVVJMfWApIH1cclxuICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoKSB7IGNvbnNvbGUubG9nKGUudG9TdHJpbmcoKSkgfVxyXG5cclxuICAgICAgbGV0IHRleHQgPSBuZXcgRG9jdW1lbnRGcmFnbWVudCgpXHJcbiAgICAgIHRleHQuY3JlYXRlRWwoXCJwXCIpXHJcbiAgICAgIGxldCB0ZXh0ZnJhZ21lbnQgPSAobmV3IFJhbmdlKCkpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChlLnRvU3RyaW5nKCkpO1xyXG4gICAgICB0ZXh0LmFwcGVuZENoaWxkKHRleHRmcmFnbWVudClcclxuXHJcbiAgICAgIHRleHQuY3JlYXRlRWwoXCJwXCIpXHJcbiAgICAgIHRleHRmcmFnbWVudCA9IChuZXcgUmFuZ2UoKSkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KFwiU2VlIGZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3ItY29kZSBvZiBodHRwOiBodHRwczovL2RlLndpa2lwZWRpYS5vcmcvd2lraS9IVFRQLVN0YXR1c2NvZGUgXCIpO1xyXG4gICAgICB0ZXh0LmFwcGVuZCh0ZXh0ZnJhZ21lbnQpXHJcblxyXG4gICAgICB0ZXh0LmNyZWF0ZUVsKFwicFwiKVxyXG4gICAgICB0ZXh0ZnJhZ21lbnQgPSAobmV3IFJhbmdlKCkpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChvcHRpb25zUGFyc2UudXJsKTtcclxuICAgICAgdGV4dC5hcHBlbmQodGV4dGZyYWdtZW50KVxyXG5cclxuICAgICAgdGV4dC5jcmVhdGVFbChcInBcIilcclxuICAgICAgdGV4dGZyYWdtZW50ID0gKG5ldyBSYW5nZSgpKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoU3RyaW5nKG9wdGlvbnNQYXJzZS5ib2R5KSk7XHJcbiAgICAgIHRleHQuYXBwZW5kKHRleHRmcmFnbWVudClcclxuICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKVxyXG4gICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcImJyXCIpXHJcbiAgICAgIHRoaXMuY29udGVudEVsLmFwcGVuZCh0ZXh0KVxyXG4gICAgfVxyXG4gICAgLy90aGlzLnNsQ29tbS5zbHZpZXcuc2hvd0Vycm9yKHRleHQpXHJcbiAgICAvL3Rocm93IGVcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsNkJBQUFBO0FBQUEsRUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQyxtQkFDTTs7O0FDRE4sSUFBQUMsbUJBQXlHOzs7QUNDbEcsSUFBTSxlQUFlO0FBQUEsRUFDM0IsTUFBTTtBQUFBLEVBQ04sT0FBTztBQUFBLEVBQ1AsVUFBVTtBQUFBLEVBQ1YsTUFBTTtBQUFBLEVBQ04sYUFBYTtBQUFBLEVBQ2IsT0FBTztBQUFBLEVBQ1AsU0FBUztBQUFBLEVBQ1QsYUFBYTtBQUFBLEVBQ2IsZUFBZTtBQUFBLEVBQ2YsUUFBUTtBQUFBLEVBQ1IsS0FBSztBQUFBLEVBQ0wsYUFBYTtBQUFBLEVBQ2Isd0JBQXdCO0FBQUEsRUFDeEIsVUFBVTtBQUFBLEVBQ1YsY0FBYztBQUFBLEVBQ2QsWUFBWTtBQUFBLEVBQ1osUUFBUTtBQUFBLEVBQ1IsYUFBYTtBQUVkO0FBRU8sSUFBTSxpQkFBaUI7QUFBQSxFQUM3QixnQkFBZ0I7QUFDakI7QUFJTyxJQUFJLG1CQUFtQjtBQUFBLEVBQzdCLGVBQWU7QUFBQSxFQUNmLGFBQWE7QUFB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QUFPLEtBQUssT0FBTyxPQUFPLFdBQVc7QUFBQSxJQUN0QztBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQU0saUJBQWlCO0FBRXRCLFFBQUksaUJBQWlCLFlBQVksS0FBSyxRQUFRLElBQUksYUFBYSxRQUFRLFVBQVUsS0FBSyxTQUFTLGFBQWEsS0FBSyxTQUFTLFdBQVc7QUFFckksUUFBSTtBQUNKLFFBQUksS0FBSyxTQUFTLGFBQWEsS0FBSyxTQUFTLFdBQVcsY0FBYyxLQUFLLFNBQVMsYUFBYSxLQUFLLFNBQVMsV0FBVyxVQUFVLElBQUk7QUFDdkkscUJBQWU7QUFBQSxRQUNkLEtBQUs7QUFBQSxRQUNMLFFBQVE7QUFBQSxRQUNSLFNBQVM7QUFBQSxVQUNSLGdCQUFnQjtBQUFBLFVBQ2hCLGlCQUFpQixXQUFXLEtBQUssS0FBSyxTQUFTLGFBQWEsS0FBSyxTQUFTLFdBQVcsU0FBUyxNQUFNLEtBQUssU0FBUyxhQUFhLEtBQUssU0FBUyxXQUFXLFVBQVU7QUFBQSxRQUNuSztBQUFBLE1BQ0Q7QUFBQSxJQUNELE9BQU87QUFDTixxQkFBZTtBQUFBLFFBQ2QsS0FBSztBQUFBLFFBQ0wsUUFBUTtBQUFBLFFBQ1IsU0FBUztBQUFBLFVBQ1IsZ0JBQWdCO0FBQUEsUUFDakI7QUFBQSxNQUNEO0FBQUEsSUFDRDtBQUVBLFFBQUksY0FBYyxZQUFZLHNCQUFzQjtBQUFFLG1CQUFhLEtBQUssT0FBTyxRQUFRLFlBQVk7QUFBQSxJQUFFO0FBQ3JHLFFBQUk7QUFDSCxZQUFNLGdCQUFnQixVQUFNLDZCQUFXLFlBQVk7QUFDbkQsVUFBSSxjQUFjLFlBQVksd0JBQXdCO0FBQUUsZ0JBQVEsSUFBSSxLQUFLLE9BQU8sUUFBUSxxQ0FBcUMsY0FBYyxPQUFPLFNBQVMsR0FBRztBQUFBLE1BQUU7QUFBQztBQUFBLElBQ2xLLFNBQ08sR0FBUDtBQUNDLGNBQVEsSUFBSSxLQUFLLE9BQU8sUUFBUSx1QkFBdUIsZ0JBQWdCO0FBQ3ZFLGNBQVEsSUFBSSxLQUFLLE9BQU8sUUFBUSxFQUFFLFNBQVMsQ0FBQztBQUFBLElBQzdDO0FBQUEsRUFDRDtBQUVEOyIsCiAgIm5hbWVzIjogWyJTZW1hTG9naWNQbHVnaW5Db21tIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImZpbHRlciIsICJyb3ciLCAiU2VtYUxvZ2ljVmlldyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X3ZpZXciLCAiYXBwIiwgIlNlbWFMb2dpY1BsdWdpbkNvbW0iLCAidmFsdWUiLCAibGVhZiIsICJTZW1hTG9naWNWaWV3Il0KfQo=
