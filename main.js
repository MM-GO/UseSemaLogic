/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  DebugLevel: () => DebugLevel,
  Default_profile: () => Default_profile,
  SemaLogicPluginComm: () => SemaLogicPluginComm3,
  default: () => SemaLogicPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/view.ts
var import_obsidian3 = require("obsidian");

// src/const.ts
var API_Defaults = {
  http: "http://",
  https: "https://",
  Base_URL: "service.semalogic.ddns.net",
  Port: "443",
  rules_parse: "/rules/parse",
  reset: "/reset",
  Version: "/APIVersion",
  PostDialect: "/dialect/define",
  RemoveDialect: "/dialect/remove",
  GetAPI: "/APIVersion",
  SID: "12345678",
  ShowContext: true,
  useUserPasswortforHTTP: true,
  HttpUser: "User",
  HttpPassword: "Password",
  viewheader: "SVG",
  AspUrl: "ASP-Service-URL.com/",
  AspEndpoint: "/plans/count"
};
var Value_Defaults = {
  updateInterval: 500
};
var semaLogicCommand = {
  command_start: "SemaLogic(",
  command_end: ")",
  showHelp: "show help",
  showVersion: "show version",
  getDialectwTemplate: "template",
  useDialect: "use ???dialectName???",
  define: "define",
  showParse: "show as",
  showFilter: "for",
  transfer: "transfer",
  transferEndpoint: "to endpoint",
  transferParam: "with param"
};
var semaLogicHelp = [
  [semaLogicCommand.command_start + "???" + semaLogicCommand.command_end, "You can define what SemaLogic should do for you by replacing ??? with one of the following SemaLogic commands:"],
  [semaLogicCommand.command_start + semaLogicCommand.showHelp + semaLogicCommand.command_end, "Show this help information"],
  [semaLogicCommand.command_start + semaLogicCommand.showVersion + semaLogicCommand.command_end, "Show the version of the SemaLogic-Service"],
  [semaLogicCommand.command_start + semaLogicCommand.define + semaLogicCommand.command_end, "After this inlinecommand and a space line comes e.g. a table that should be interpreted by SemaLogic (table, NTable, ZTable) with optional headerinterpretation- Expected format:\n(|Symbol||Level(n+1)|\n|---|---|\n|Level(1)|Level(n)|Value|)"],
  [`${semaLogicCommand.command_start + semaLogicCommand.showParse} %1 ${semaLogicCommand.showFilter} %2 ${semaLogicCommand.command_end}`, "show as - shows an output directly to the reading view ( with %1 you have to set the output type: 1|1 {picture, syemalogic, asp} and with %2 you could filter for an symbol by symbolname)"],
  [`${semaLogicCommand.command_start + semaLogicCommand.transfer} %1 ${semaLogicCommand.transferEndpoint} %2 ${semaLogicCommand.transferParam} %3 ${semaLogicCommand.command_end}`, "transfer - shows an (currently only) asp output directly to the asp.view from SemaLogicView ( with %1 you have to set the output type: 1|1 {asp} and with %2 you could set the endpoint and wuth %3 you could set queryparameter)"]
];
var rstypes_Semalogic = 0;
var rstypes_Picture = 3;
var rstypes_ASP = 6;
var rstypes_SemanticTree = 8;
var rulesettypesCommands = [
  ["SemaLogic", "SemaLogic"],
  ["technical", "SemaLogic"],
  ["semalogic", "SemaLogic"],
  ["Picture (SVG)", "SVG"],
  ["picture", "SVG"],
  ["SVG", "SVG"],
  ["ASP", "ASP.json"],
  ["asp", "ASP.json"],
  ["SemanticTree", "SemanticTree"]
];
var DebugLevelNames = [
  "DebugLevel_Off",
  "DebugLevel_Current_Dev",
  "DebugLevel_Important",
  "DebugLevel_Informative",
  "DebugLevel_Chatty",
  "DebugLevel_All"
];
var DebugLevMap = {
  "DebugLevel_Off": 0,
  "DebugLevel_Current_Dev": 1,
  "DebugLevel_Important": 2,
  "DebugLevel_Informative": 3,
  "DebugLevel_Chatty": 4,
  "DebugLevel_All": 5
};
var slTexts = {
  "HeaderSL": "SemaLogic.View"
};

// src/utils.ts
var import_obsidian = require("obsidian");
var import_obsidian2 = require("obsidian");
var searchForSemaLogicCommands = (el) => {
  for (let i = 0; i < el.childNodes.length; i++) {
    const child = el.childNodes[i];
    if (isSemaLogicCommand(child)) {
      return true;
    }
  }
  return false;
};
var isSemaLogicCommand = (n) => {
  var _a;
  return n.nodeType === Node.TEXT_NODE && Boolean((_a = n.textContent) == null ? void 0 : _a.startsWith(semaLogicCommand.command_start));
};
var replaceWithEmptyNode = (containerEl) => {
  const results = [];
  return results;
};
async function replaceWithCommandNode(containerEl, settings) {
  var _a, _b;
  let results = [];
  let found = false;
  let semaLogicCom = (_b = containerEl.textContent) == null ? void 0 : _b.substring(semaLogicCommand.command_start.length, (_a = containerEl.textContent) == null ? void 0 : _a.indexOf(semaLogicCommand.command_end)).toLowerCase();
  if (!found && (semaLogicCom == null ? void 0 : semaLogicCom.toString().substring(0, semaLogicCommand.showHelp.length)) == semaLogicCommand.showHelp) {
    results = await showHelp();
    found = true;
  }
  if (!found && (semaLogicCom == null ? void 0 : semaLogicCom.toString().substring(0, semaLogicCommand.showVersion.length)) == semaLogicCommand.showVersion) {
    results = await showVersion(settings);
    found = true;
  }
  if (!found && (semaLogicCom == null ? void 0 : semaLogicCom.toString().substring(0, semaLogicCommand.showParse.length)) == semaLogicCommand.showParse) {
    let rulesettype = "";
    let filter = "";
    for (let rule in rulesettypesCommands) {
      if (semaLogicCom.contains(rulesettypesCommands[rule][0])) {
        rulesettype = rulesettypesCommands[rule][1];
        const findfor = semaLogicCom.indexOf(semaLogicCommand.showFilter);
        if (findfor > 0) {
          filter = semaLogicCom.substring(findfor + semaLogicCommand.showFilter.length);
          filter = filter.trim();
        }
        found = true;
        break;
      }
    }
    if (!found) {
      results = await showHelp();
      found = true;
    }
    if (rulesettype != "") {
      results = await showParseWithFilter(filter, rulesettype, settings);
    }
    found = true;
  }
  if (!found) {
    results = replaceWithEmptyNode(containerEl);
  }
  return results;
}
var SemaLogicRenderedElement = class extends import_obsidian.MarkdownRenderChild {
  constructor({ containerEl, set }) {
    super(containerEl);
    this.mysettings = set;
  }
  async onload() {
    this.containerEl.setChildrenInPlace(
      await replaceWithCommandNode(this.containerEl, this.mysettings)
    );
  }
};
async function showHelp() {
  let results = [];
  let buildcontainerEl;
  if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
    console.log(semaLogicCommand.showHelp);
  }
  buildcontainerEl = createEl("table");
  let body = buildcontainerEl.createEl("body");
  let row = body.createEl("tr");
  row.createEl("td", { text: "SemaLogic-Commands-Help" });
  row.createEl("td", { text: "Description" });
  for (let i = 0; i < semaLogicHelp.length; i++) {
    const row2 = body.createEl("tr");
    row2.createEl("td", { text: semaLogicHelp[i][0] });
    row2.createEl("td", { text: semaLogicHelp[i][1] });
  }
  results.push(buildcontainerEl);
  return results;
}
async function showVersion(settings) {
  let results = [];
  let buildcontainerEl;
  let versiontext = "";
  if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
    console.log(semaLogicCommand.showVersion);
  }
  const version = await semaLogicGetVersion(settings).then(function(resultBuffer) {
    versiontext = resultBuffer;
  }).catch(
    function(resultBuffer) {
      versiontext = resultBuffer;
    }
  );
  if (DebugLevel >= DebugLevMap.DebugLevel_High) {
    console.log(`JSON-Text in Processor:${versiontext}`);
  }
  buildcontainerEl = createEl("table");
  const table = buildcontainerEl.createEl("table");
  const body = buildcontainerEl.createEl("body");
  const row = body.createEl("tr");
  row.createEl("td", { text: versiontext });
  results.push(buildcontainerEl);
  return results;
}
function sethttps(https) {
  let str;
  if (https) {
    str = API_Defaults.https;
  } else {
    str = API_Defaults.http;
  }
  return str;
}
function getHostPort(settings) {
  let adress = sethttps(settings.mySLSettings[settings.mySetting].myUseHttps);
  adress = adress + settings.mySLSettings[settings.mySetting].myBaseURL;
  if (settings.mySLSettings[settings.mySetting].myPort != "") {
    adress = adress + ":" + settings.mySLSettings[settings.mySetting].myPort;
  }
  if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
    console.log("getting SemaLogic-Adress: " + adress);
  }
  return adress;
}
function getHostAspPort(settings, parsedCommands) {
  let adress;
  if (parsedCommands.outputformat == rulesettypesCommands[rstypes_ASP][1]) {
    adress = sethttps(settings.mySLSettings[settings.mySetting].myUseHttps);
    adress = adress + settings.mySLSettings[settings.mySetting].myAspUrl;
    if (parsedCommands.endpoint != void 0) {
      if (parsedCommands.endpoint.indexOf("http") >= 0) {
        adress = parsedCommands.endpoint;
      } else {
        adress = adress + "/" + parsedCommands.endpoint;
      }
    }
  } else {
    adress = parsedCommands.endpoint;
  }
  if (parsedCommands.param != void 0) {
    adress = adress + "?" + parsedCommands.param;
  }
  if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
    console.log("getting asp-Adress: " + adress);
  }
  return adress;
}
async function semaLogicGetVersion(settings) {
  if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
    console.log("Start semaLogicGetVersion");
  }
  const myVersion = '{"version":"0","versiontext":"Text"}';
  let myJson = JSON.parse(myVersion);
  let jsonVersion = "";
  let vAPI_URL_Version = getHostPort(settings) + API_Defaults.Version;
  if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
    console.log(vAPI_URL_Version);
  }
  let options;
  if (settings.mySLSettings[settings.mySetting].myUseHttps && settings.mySLSettings[settings.mySetting].myUser != "") {
    options = {
      url: vAPI_URL_Version,
      method: "GET",
      headers: {
        "content-type": "application/json",
        "Authorization": "Basic " + btoa(settings.mySLSettings[settings.mySetting].myUser + ":" + settings.mySLSettings[settings.mySetting].myPassword)
      }
    };
  } else {
    options = {
      url: vAPI_URL_Version,
      method: "GET"
    };
  }
  let response;
  try {
    response = await (0, import_obsidian2.requestUrl)(options);
    myJson = JSON.parse(response.text);
    if (DebugLevel >= DebugLevMap.DebugLevel_All) {
      console.log(myJson.version);
    }
    jsonVersion = myJson.version;
    if (DebugLevel >= DebugLevMap.DebugLevel_All) {
      console.log(`JSON-Text in Request:${jsonVersion}`);
    }
    return jsonVersion;
  } catch (e) {
    console.log("Error: Catch of APIVersion" + e.toString());
    throw new Error();
  }
}
async function semaLogicPing(settings, lastUpdate) {
  let starttime = Date.now();
  if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
    console.log("GetVersionPing at ", Date.now(), "  for ", getHostPort(settings));
  }
  await semaLogicGetVersion(settings).then(function(resultBuffer) {
    if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
      console.log("SemaLogic GetVersionPing started at:", starttime, " Endtime: ", Date.now());
    }
  }).catch(
    function(e) {
      if (starttime < lastUpdate) {
        if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
          console.log(`There is no connection to SemaLogicService APIVersion`);
          console.log(getHostPort(settings));
        }
        app.workspace.iterateAllLeaves((leaf) => {
          let slView = leaf.view.getViewType();
          if (slView == SemaLogicViewType) {
            const container = leaf.view.containerEl.children[1];
            container.empty();
            container.createEl("h3", { text: "SemaLogic_Error" });
            container.createEl("b", { text: "There is no connection to SemaLogicService -> APIVersion" });
            container.createEl("b", { text: getHostPort(settings) });
            return false;
          }
        });
      } else {
        if (DebugLevel >= DebugLevMap.DebugLevel_High) {
          console.log("SemaLogic GetVersionPing failed and not used started:", starttime, " Endtime: ", Date.now());
        }
      }
    }
  );
  return true;
}
async function showParseWithFilter(filter, rulessettype, settings) {
  let results = [];
  let buildcontainerEl;
  let vAPI_URL = getHostPort(settings) + API_Defaults.rules_parse + "?sid=" + settings.mySLSettings[settings.mySetting].mySID;
  if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
    console.log(vAPI_URL);
  }
  ;
  let bodytext = "";
  let activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
  if (activeView == void 0) {
    if (DebugLevel >= DebugLevMap.DebugLevel_High) {
      console.log("Do not find an active view");
    }
    return results;
  }
  let dialectID = "default";
  let codeblock = false;
  let newCodeblock = false;
  if (activeView != null) {
    for (let i = 0; i < activeView.editor.lineCount(); i++) {
      if (DebugLevel >= DebugLevMap.DebugLevel_All) {
        console.log(i, ";", activeView.editor.getLine(i));
        console.log("Substring:", activeView.editor.getLine(i).substring(0, 2));
      }
      if (activeView.editor.getLine(i).substring(0, 3) == "```") {
        if (!codeblock) {
          codeblock = true;
          newCodeblock = true;
        } else {
          newCodeblock = false;
        }
      }
      if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
        console.log("Current line is Codeblock", codeblock);
      }
      if (!codeblock && !newCodeblock) {
        switch (activeView.editor.getLine(i)) {
          default:
            bodytext = bodytext.concat(activeView.editor.getLine(i) + "\n");
        }
      } else {
        switch (activeView.editor.getLine(i).substring(0, semaLogicCommand.useDialect.length)) {
          case semaLogicCommand.useDialect: {
            dialectID = activeView.editor.getLine(i).substring(semaLogicCommand.useDialect.length, activeView.editor.getLine(i).length - 1);
            dialectID = dialectID.trim();
            break;
          }
          default: {
          }
        }
      }
      if (i < activeView.editor.lineCount()) {
        if (activeView.editor.getLine(i).substring(0, 3) == "```") {
          if (codeblock && !newCodeblock) {
            codeblock = false;
          } else {
            newCodeblock = false;
          }
        }
      }
    }
  }
  if (bodytext == "") {
    bodytext = "";
  }
  if (dialectID == "") {
    dialectID = "default";
  }
  let result = "";
  if (filter != "") {
    let jsonwoFilter = {
      "text": [
        {
          "textID": "fly",
          "dialectID": dialectID,
          "rules": bodytext
        }
      ],
      "filter": {
        "dialectID": "default",
        "symbols": [
          {
            "symbol": filter
          }
        ]
      },
      "persistency": false,
      "rulesettype": rulessettype
    };
    var optionsParse = {
      url: vAPI_URL,
      method: "POST",
      headers: {
        "content-type": "application/json"
      },
      body: JSON.stringify(jsonwoFilter)
    };
  } else {
    let jsontestwthFilter = {
      "text": [
        {
          "textID": "fly",
          "dialectID": dialectID,
          "rules": bodytext
        }
      ],
      "filter": {},
      "persistency": false,
      "rulesettype": rulessettype
    };
    var optionsParse = {
      url: vAPI_URL,
      method: "POST",
      headers: {
        "content-type": "application/json"
      },
      body: JSON.stringify(jsontestwthFilter)
    };
  }
  let res;
  if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
    console.log(`Context: ${dialectID}, Bodytext: ${bodytext}`);
  }
  if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
    console.log(optionsParse);
  }
  try {
    const responseParse = await (0, import_obsidian2.requestUrl)(optionsParse);
    const remJson = responseParse.text;
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      console.log("SemaLogic: Parse with http-status " + responseParse.status.toString());
    }
    ;
    if (responseParse.status == 200) {
      let resulthttp = responseParse.text;
      const fragment = new Range().createContextualFragment(resulthttp);
      buildcontainerEl = createEl("p");
      buildcontainerEl.appendChild(fragment);
      results.push(buildcontainerEl);
      if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log(`Parseresult:${resulthttp}`);
      }
      return results;
    }
  } catch (e) {
    slconsolelog(void 0, `Catcherror of removing context ${vAPI_URL}`);
    slconsolelog(void 0, e.toString());
    throw e;
  }
  return results;
}
function slconsolelog(slview, message, ...optionalParams) {
  if (slview != void 0) {
    if (slview.getViewType() == SemaLogicViewType) {
      if (slview.getDebugInline() == true) {
        let logMessages = JSON.stringify(message);
        slview.appendDebugContent(logMessages);
      } else {
        console.log(message, ...optionalParams);
      }
    }
  } else {
    console.log(message, ...optionalParams);
  }
}

// src/view_utils.ts
var ViewUtils = class {
  getContent(contentEl, outPutFormat) {
    let content;
    if (contentEl.textContent == null) {
      content = "";
    } else {
      content = contentEl.textContent;
    }
    content = this.cleanContent(content, outPutFormat);
    content = this.cleanCommands(content);
    return content;
  }
  cleanContent(content, outPutFormat) {
    if (outPutFormat == rulesettypesCommands[rstypes_ASP][1]) {
      const firstJSONBracket = content.indexOf("{");
      content = content.substring(firstJSONBracket, content.length);
    }
    if (outPutFormat == rulesettypesCommands[rstypes_Semalogic][1]) {
      const headerString = "Semalogic Output";
      const firstheaderString = content.indexOf(headerString);
      content = content.substring(firstheaderString + headerString.length, content.length);
    }
    return content;
  }
  cleanCommands(content) {
    let contentCleaned = [];
    let contentArray = content.split("\n");
    contentArray.forEach((element) => {
      let row = element.trim();
      row = row.toLowerCase();
      if (DebugLevel == DebugLevMap.DebugLevel_Chatty) {
        console.log("Row before:" + row);
      }
      row = row.replaceAll(" ", "");
      if (DebugLevel == DebugLevMap.DebugLevel_Chatty) {
        console.log("Row after:" + row);
      }
      if (row.indexOf(semaLogicCommand.command_start.toLowerCase()) != 0) {
        contentCleaned.push(element);
      } else {
        if (DebugLevel == DebugLevMap.DebugLevel_Chatty) {
          console.log("Index Define:" + row.indexOf(semaLogicCommand.define).toString());
        }
        if (DebugLevel == DebugLevMap.DebugLevel_Chatty) {
          console.log("Length Start:" + semaLogicCommand.command_start.length.toString());
        }
        if (row.indexOf(semaLogicCommand.define) == semaLogicCommand.command_start.length) {
          contentCleaned.push(element);
        }
      }
    });
    content = "";
    contentCleaned.forEach((element) => {
      content = content + element + "\n";
    });
    return content;
  }
};

// src/view.ts
var SemaLogicViewType = "SemaLogicService";
var SemaLogicView2 = class extends import_obsidian3.ItemView {
  constructor(leaf) {
    super(leaf);
    this.scaleRatio = 100;
    this.view_utils = new ViewUtils();
    this.debugInline = false;
    this.debugContent = [];
  }
  getOutPutFormat() {
    return this.dropdownButton.getValue();
  }
  getDebugInline() {
    return this.debugInline;
  }
  getContent() {
    return this.view_utils.getContent(this.contentEl, this.getOutPutFormat());
  }
  appendDebugContent(text) {
    this.debugContent.push(text);
  }
  copyToCb() {
    const blobcontentText = (cont) => `${cont}`;
    let data = new ClipboardItem({
      "text/plain": new Blob([blobcontentText(this.currResult)], {
        type: "text/plain"
      })
    });
    navigator.clipboard.write([data]).then(() => {
      alert("successfully copied");
    }).catch(() => {
      alert("something went wrong");
    });
  }
  setComm(comm) {
    if (this.slComm != comm) {
      this.slComm = comm;
      this.setNewInitial(this.slComm.slPlugin.settings.mySLSettings[this.slComm.slPlugin.settings.mySetting].myOutputFormat);
    }
  }
  getViewType() {
    return SemaLogicViewType;
  }
  getDisplayText() {
    return SemaLogicViewType;
  }
  onload() {
    this.navigation = true;
    this.contentEl.contentEditable = "true";
    this.debugInline == false;
  }
  getDebugButtonText() {
    if (this.debugInline == true) {
      return "InlineDebug is on";
    } else {
      return "InlineDebug is off";
    }
  }
  createDropDownButtonForOutPutFormat(container, dropDownValue) {
    this.dropdownButton = new import_obsidian3.DropdownComponent(container).addOption(rulesettypesCommands[rstypes_Semalogic][1], rulesettypesCommands[rstypes_Semalogic][0]).addOption(rulesettypesCommands[rstypes_ASP][1], rulesettypesCommands[rstypes_ASP][0]).addOption(rulesettypesCommands[rstypes_Picture][1], rulesettypesCommands[rstypes_Picture][0]).addOption(rulesettypesCommands[rstypes_SemanticTree][1], rulesettypesCommands[rstypes_SemanticTree][0]).setValue(dropDownValue).onChange(async (value) => {
      if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
        slconsolelog(this.slComm.slview, "Set ViewOutputFormat: " + value);
      }
      this.slComm.slPlugin.updateOutstanding = true;
      dropDownValue = value;
      this.dropdownButton.setValue(value);
      this.getSemaLogicParse(this.slComm.slPlugin.settings, this.apiURL, this.dialectID, this.bodytext, false, value);
    });
    return container;
  }
  createCopyToClipboardButton(container) {
    this.copyButton = new import_obsidian3.ButtonComponent(container).setButtonText("Copy to Clipboard").onClick((mouse_event) => {
      this.copyToCb();
    });
    return container;
  }
  createDebugButton(container) {
    if (DebugLevel != DebugLevMap.DebugLevel_Off) {
      this.debugButton = new import_obsidian3.ButtonComponent(container).setButtonText(this.getDebugButtonText()).onClick((mouse_event) => {
        if (this.debugInline == true) {
          this.debugInline = false;
          this.debugContent = [];
        } else {
          this.debugInline = true;
        }
        if (this.slComm.slview != void 0) {
          if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
            slconsolelog(this.slComm.slview, "Set InlineDebugging: " + this.debugInline);
          }
        }
        this.updateView();
      });
    }
    return container;
  }
  createScaleButtons(container) {
    this.zoomIn = new import_obsidian3.ButtonComponent(container).setButtonText("-").onClick((mouse_event) => {
      this.scaleRatio = this.scaleRatio / 2;
      if (this.zoomRatio != null) {
        this.zoomRatio.setButtonText(String(this.scaleRatio));
      }
      if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
        slconsolelog(this.slComm.slview, "Set ScaleRatio to: " + this.scaleRatio);
      }
      this.updateView();
    });
    this.zoomRatio = new import_obsidian3.ButtonComponent(container).setButtonText(String(this.scaleRatio)).onClick((mouse_event) => {
      if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
        slconsolelog(this.slComm.slview, "ScaleRatio := " + this.scaleRatio);
      }
    });
    this.zoomOut = new import_obsidian3.ButtonComponent(container).setButtonText("+").onClick((mouse_event) => {
      this.scaleRatio = this.scaleRatio * 2;
      this.zoomRatio.setButtonText(String(this.scaleRatio));
      if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
        slconsolelog(this.slComm.slview, "Set ScaleRatio to: " + this.scaleRatio);
      }
      this.updateView();
    });
    return container;
  }
  checkContainerContent() {
    if (this.containerEl.children != void 0) {
      if (this.containerEl.children[1].textContent == slTexts["HeaderSL"]) {
        return true;
      } else {
        return false;
      }
    } else {
      return false;
    }
  }
  deleteContainerContent() {
    if (this.containerEl.children != void 0) {
      for (let i = 0; i < this.containerEl.children.length; i++) {
        if (this.containerEl.children[i].nodeName == "p") {
          while (this.containerEl.children[i] != void 0) {
            this.containerEl.children[i].empty;
          }
        }
      }
    }
  }
  setNewInitial(dropDownValue) {
    let container = this.contentEl;
    if (!this.checkContainerContent()) {
      container.empty();
      container.createEl("h4", { text: slTexts["HeaderSL"] });
      container = this.createDropDownButtonForOutPutFormat(container, dropDownValue);
      container = this.createCopyToClipboardButton(container);
      container = this.createDebugButton(container);
      if (dropDownValue == rulesettypesCommands[rstypes_Picture][1]) {
        container = this.createScaleButtons(container);
      }
      container.createEl("p");
    } else {
      this.deleteContainerContent();
    }
  }
  async onOpen() {
    this.setNewInitial(rulesettypesCommands[rstypes_Semalogic][1]);
  }
  async onClose() {
  }
  showError(fragment) {
    this.contentEl.appendChild(fragment);
  }
  onunload() {
    if (this.slComm.slPlugin != void 0) {
      this.slComm.slPlugin.activated = false;
      this.slComm.slPlugin.myStatus.setText("SemaLogic is off");
    }
  }
  createSemaLogicRequestBody(dialectID, bodytext, outPutFormat) {
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      slconsolelog(this.slComm.slview, "Context: " + dialectID + " Bodytext: " + bodytext);
    }
    let semaLogicJsonRequestBody = {
      "text": [
        {
          "textID": "ParsingOnTheFly",
          "dialectID": dialectID,
          "rules": bodytext
        }
      ],
      "filter": {},
      "persistency": false,
      "rulesettype": outPutFormat
    };
    return semaLogicJsonRequestBody;
  }
  createSemaLogicRequest(settings, vAPI_URL, semaLogicJsonRequestBody) {
    let request = {
      url: vAPI_URL,
      method: "POST",
      headers: {
        "content-type": "application/json"
      },
      body: JSON.stringify(semaLogicJsonRequestBody)
    };
    if (settings.mySLSettings[settings.mySetting].myUseHttps && settings.mySLSettings[settings.mySetting].myUser != "") {
      request = {
        url: vAPI_URL,
        method: "POST",
        headers: {
          "content-type": "application/json",
          "Authorization": "Basic " + btoa(settings.mySLSettings[settings.mySetting].myUser + ":" + settings.mySLSettings[settings.mySetting].myPassword)
        },
        body: JSON.stringify(semaLogicJsonRequestBody)
      };
    }
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      slconsolelog(this.slComm.slview, "Parsingsstring");
      slconsolelog(this.slComm.slview, request);
    }
    return request;
  }
  getRequestEmbed(content) {
    if (this.getOutPutFormat() == rulesettypesCommands[rstypes_Picture][1]) {
      let viewBoxString;
      const beginVB = content.indexOf("viewBox");
      if (beginVB > 0) {
        const endVB = content.indexOf('"', content.indexOf('"', beginVB) + 1);
        viewBoxString = content.substring(beginVB, endVB + 1);
      } else {
        viewBoxString = 'viewBox = "0 0 16 9"';
      }
      content = content.replace("<body>", "");
      content = content.replace("</body>", "");
      let header;
      header = "<svg  " + viewBoxString + ' width = "' + String(this.scaleRatio) + '%" xmlns = "http://www.w3.org/2000/svg" >\n';
      header = header + content;
      header = header + "</svg>";
      return header;
    } else {
      return content;
    }
  }
  getCurrResult() {
    return this.getRequestEmbed(this.currResult);
  }
  getCurrHTML() {
    let responseContent = this.contentEl.createEl("div");
    if (this.debugInline == true) {
      this.debugContent.forEach((value) => {
        const textline = responseContent.createEl("span", { text: value + "\n" });
        textline.style.cssText = "white-space: pre;";
      });
    } else {
      if (this.getOutPutFormat() == rulesettypesCommands[rstypes_ASP][1]) {
        let resulttextarray = this.getCurrResult().split("\n");
        resulttextarray.forEach((value) => {
          const textline = responseContent.createEl("span", { text: value + "\n" });
          textline.style.cssText = "white-space: pre;";
        });
      } else {
        responseContent.createEl("p", { text: " " });
        let div = document.createElement("div");
        div.innerHTML = this.getCurrResult();
        responseContent.appendChild(div);
      }
    }
  }
  updateView() {
    this.setNewInitial(this.getOutPutFormat());
    this.getCurrHTML();
  }
  async getSemaLogicParse(settings, vAPI_URL, dialectID, bodytext, parseOnTheFly, parsingFormat) {
    this.bodytext = bodytext;
    this.apiURL = vAPI_URL;
    this.dialectID = dialectID;
    let outPutFormat;
    if (parsingFormat !== void 0) {
      outPutFormat = parsingFormat;
    } else {
      outPutFormat = this.getOutPutFormat();
    }
    let semaLogicJsonRequestBody = this.createSemaLogicRequestBody(dialectID, bodytext, outPutFormat);
    let semaLogicRequest = this.createSemaLogicRequest(settings, vAPI_URL, semaLogicJsonRequestBody);
    try {
      const response = await (0, import_obsidian3.requestUrl)(semaLogicRequest);
      if (DebugLevel >= DebugLevMap.DebugLevel_High) {
        slconsolelog(this.slComm.slview, "SemaLogic: Parse with http-status " + response.status.toString());
      }
      ;
      if (response.status == 200) {
        var resulthttp = response.text;
        if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
          slconsolelog(this.slComm.slview, `Parseresult:${resulthttp}`);
        }
        if (this.debugInline == false && parseOnTheFly == false) {
          this.currResult = resulthttp;
        }
        if (!parseOnTheFly) {
          this.updateView();
        }
      }
      if (this.slComm.slaspview != void 0) {
      }
      return new Promise((resolve) => {
        resolve(resulthttp);
      });
    } catch (e) {
      if (DebugLevel >= DebugLevMap.DebugLevel_High) {
        slconsolelog(this.slComm.slview, `Catcherror of removing context ${vAPI_URL}`);
      }
      if (DebugLevel >= DebugLevMap.DebugLevel_High) {
        slconsolelog(this.slComm.slview, e.toString());
      }
      let text = new DocumentFragment();
      text.createEl("p");
      let textfragment = new Range().createContextualFragment(e.toString());
      text.appendChild(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment("See for information about the error-code of http: https://de.wikipedia.org/wiki/HTTP-Statuscode ");
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(semaLogicRequest.url);
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(String(semaLogicRequest.body));
      text.append(textfragment);
      this.showError(text);
      throw e;
    }
  }
};

// src/view_asp.ts
var import_obsidian4 = require("obsidian");
var ASPViewType = "TransferService";
var ASPView = class extends import_obsidian4.ItemView {
  constructor(leaf) {
    super(leaf);
    this.setNewASPInitial();
  }
  setComm(comm) {
    this.slComm = comm;
    this.setNewASPInitial();
  }
  getViewType() {
    return ASPViewType;
  }
  getDisplayText() {
    return ASPViewType;
  }
  onload() {
    this.navigation = true;
    this.contentEl.contentEditable = "true";
  }
  setNewASPInitial() {
    const container = this.contentEl;
    container.empty();
    container.createEl("h4", { text: "Transfer.View" });
    container.createEl("p");
  }
  async onOpen() {
    this.setNewASPInitial();
  }
  async onClose() {
  }
  showError(fragment) {
    this.contentEl.appendChild(fragment);
  }
  onunload() {
    if (this.slComm != void 0) {
      this.slComm.slPlugin.activated = false;
      this.slComm.slPlugin.myStatus.setText("Transfer is off");
    }
  }
  createRequest(comm, settings, apiUrl, method, contentType, withBasicAuth, body) {
    let request;
    let myHeader = {};
    contentType = contentType.toLowerCase();
    method = method.toUpperCase();
    switch (contentType.toLowerCase()) {
      case "json": {
        myHeader["Content-Type"] = "application/json";
        break;
      }
      case "asp": {
        myHeader["Content-Type"] = "application/json";
        break;
      }
      case "asp.json": {
        myHeader["Content-Type"] = "application/json";
        break;
      }
      case "text": {
        myHeader["Content-Type"] = "text/plain";
        break;
      }
      default: {
        myHeader["Content-Type"] = contentType;
        break;
      }
    }
    if (withBasicAuth) {
      myHeader["Authorization"] = "Basic " + btoa(settings.mySLSettings[settings.mySetting].myUser + ":" + settings.mySLSettings[settings.mySetting].myPassword);
    }
    request = {
      url: apiUrl,
      method,
      headers: myHeader,
      body
    };
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      console.log(request);
    }
    ;
    return request;
  }
  getASPCommands(slComm, settings) {
    let paramParsedCommand = {
      outputformat: "ASP.json",
      endpoint: settings.mySLSettings[settings.mySetting].myAspEndpoint,
      param: ""
    };
    let commands;
    if (slComm.slview != null) {
      const editortext = slComm.slUsedMDView.editor.getRange({ line: 0, ch: 0 }, { line: slComm.slUsedMDView.editor.lastLine(), ch: slComm.slUsedMDView.editor.lastLine.length });
      const rows = editortext.split("\n").filter((row) => row.length > 0);
      let myStrResult;
      let transferString;
      let endpointString = "";
      let paramString;
      rows.forEach((row) => {
        if (row.substring(0, semaLogicCommand.command_start.length) == semaLogicCommand.command_start) {
          const transfer = row.indexOf(semaLogicCommand.transfer);
          const endpoint = row.indexOf(semaLogicCommand.transferEndpoint);
          let param = row.indexOf(semaLogicCommand.transferParam);
          const endCommand = row.indexOf(semaLogicCommand.command_end);
          if (param < 0) {
            param = endCommand;
          }
          if (transfer <= 0) {
          } else {
            transferString = row.substring(transfer + semaLogicCommand.transfer.length + 1, endpoint);
            transferString = transferString.trimEnd();
            if (endpoint > 0) {
              endpointString = row.substring(endpoint + 1 + semaLogicCommand.transferEndpoint.length, param);
              endpointString = endpointString.trimEnd();
            }
            if (param > 0 && param != endCommand) {
              paramString = row.substring(param + 1 + semaLogicCommand.transferParam.length, endCommand);
              paramString = paramString.trimEnd();
            }
            paramParsedCommand = {
              outputformat: transferString,
              endpoint: endpointString,
              param: paramString
            };
          }
        }
      });
    }
    return paramParsedCommand;
  }
  async aspParse(slComm, settings, aspJsonParsedSemaLogic) {
    if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
      console.log("Start Transfer_Parse");
    }
    ;
    let vAPI_URL = "";
    const parseCommands = this.getASPCommands(slComm, settings);
    if (parseCommands.outputformat == rulesettypesCommands[rstypes_ASP][1] || parseCommands.outputformat == rulesettypesCommands[rstypes_ASP][0]) {
      vAPI_URL = getHostAspPort(settings, parseCommands);
    } else {
      vAPI_URL = parseCommands.endpoint;
      if (parseCommands.param != void 0) {
        if (parseCommands.param.length > 0) {
          vAPI_URL = vAPI_URL + "?" + parseCommands.param;
        }
      }
      if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Transfer URL: ", vAPI_URL);
      }
    }
    let optionsParse = this.createRequest(this.slComm, settings, vAPI_URL, "POST", "json", true, aspJsonParsedSemaLogic);
    try {
      if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("ASP: want to parse ", optionsParse);
      }
      ;
      const responseParse = await (0, import_obsidian4.requestUrl)(optionsParse);
      const remJson = responseParse.text;
      if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("ASP: Parse with http-status " + responseParse.status.toString());
      }
      ;
      if (responseParse.status == 200) {
        let resulthttp = responseParse.text;
        this.setNewASPInitial();
        resulthttp = resulthttp.replaceAll("[", "[\n");
        resulthttp = resulthttp.replaceAll("]", "\n]");
        resulthttp = resulthttp.replaceAll(",", ",\n");
        let resulthttpArray = resulthttp.split("\n");
        resulthttpArray.forEach((element) => {
          this.contentEl.append(element);
          this.contentEl.createEl("br");
        });
        if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
          console.log(`ASP-Parseresult:${resulthttp}`);
        }
      }
    } catch (e) {
      if (DebugLevel >= DebugLevMap.DebugLevel_High) {
        console.log(`Catcherror of removing context ${vAPI_URL}`);
      }
      if (DebugLevel >= DebugLevMap.DebugLevel_High) {
        console.log(e.toString());
      }
      let text = new DocumentFragment();
      text.createEl("p");
      let textfragment = new Range().createContextualFragment(e.toString());
      text.appendChild(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment("See for information about the error-code of http: https://de.wikipedia.org/wiki/HTTP-Statuscode ");
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(optionsParse.url);
      text.append(textfragment);
      text.createEl("p");
      textfragment = new Range().createContextualFragment(String(optionsParse.body));
      text.append(textfragment);
      this.contentEl.empty();
      this.contentEl.createEl("br");
      this.contentEl.append(text);
    }
  }
};

// main.ts
var import_view3 = require("@codemirror/view");
var DebugLevel = 0;
var Default_profile = {
  mySLSettings: [
    {
      myPort: API_Defaults.Port,
      myOutputFormat: "SemaLogic",
      myBaseURL: API_Defaults.Base_URL,
      myGetAPI: API_Defaults.GetAPI,
      mySID: API_Defaults.SID,
      myContext: API_Defaults.ShowContext,
      myUseHttps: API_Defaults.useUserPasswortforHTTP,
      myUser: API_Defaults.HttpUser,
      myPassword: API_Defaults.HttpPassword,
      myUpdateInterval: Value_Defaults.updateInterval,
      myAspUrl: API_Defaults.AspUrl,
      myAspEndpoint: API_Defaults.AspEndpoint
    },
    {
      myPort: API_Defaults.Port,
      myOutputFormat: "SemaLogic",
      myBaseURL: API_Defaults.Base_URL,
      myGetAPI: API_Defaults.GetAPI,
      mySID: API_Defaults.SID,
      myContext: API_Defaults.ShowContext,
      myUseHttps: API_Defaults.useUserPasswortforHTTP,
      myUser: API_Defaults.HttpUser,
      myPassword: API_Defaults.HttpPassword,
      myUpdateInterval: Value_Defaults.updateInterval,
      myAspUrl: API_Defaults.AspUrl,
      myAspEndpoint: API_Defaults.AspEndpoint
    },
    {
      myPort: API_Defaults.Port,
      myOutputFormat: "SemaLogic",
      myBaseURL: API_Defaults.Base_URL,
      myGetAPI: API_Defaults.GetAPI,
      mySID: API_Defaults.SID,
      myContext: API_Defaults.ShowContext,
      myUseHttps: API_Defaults.useUserPasswortforHTTP,
      myUser: API_Defaults.HttpUser,
      myPassword: API_Defaults.HttpPassword,
      myUpdateInterval: Value_Defaults.updateInterval,
      myAspUrl: API_Defaults.AspUrl,
      myAspEndpoint: API_Defaults.AspEndpoint
    }
  ],
  mySetting: 0,
  myDebugLevel: 0
};
var SemaLogicSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for SemaLogic:" });
    new import_obsidian5.Setting(containerEl).setName("General DebugLevel").setDesc("You can set a DebugLevel for Developmentinformation").addDropdown((dropDown) => dropDown.addOption("0", DebugLevelNames[0]).addOption("1", DebugLevelNames[1]).addOption("2", DebugLevelNames[2]).addOption("3", DebugLevelNames[3]).addOption("4", DebugLevelNames[4]).addOption("5", DebugLevelNames[5]).setValue(String(this.plugin.settings.myDebugLevel)).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Current_Dev) {
        console.log("Set DebugLevel: " + DebugLevelNames[parseInt(value)]);
      }
      ;
      this.plugin.settings.myDebugLevel = parseInt(value);
      DebugLevel = parseInt(value);
      await this.plugin.saveSettings();
      this.display();
    }));
    new import_obsidian5.Setting(containerEl).setName("Change your setting profile").setDesc("You can define different profiles for your SemaLogicService").addDropdown((dropDown) => dropDown.addOption("0", "Profile 1").addOption("1", "Profile 2").addOption("2", "Profile 3").setValue(this.plugin.settings.mySetting.toString()).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Current_Dev) {
        console.log("Set Profile: " + value);
      }
      ;
      this.plugin.settings.mySetting = parseInt(value);
      this.display();
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Port SemaLogic").setDesc("Enter the Port").addText((text) => text.setPlaceholder(API_Defaults.Port).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPort).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set to Port: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPort = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("OutputFormat").setDesc("Here you can set the outputformat for SemaLogic, which could be get from SemaLogicService").addDropdown((dropDown) => dropDown.addOption(rulesettypesCommands[rstypes_Semalogic][1], rulesettypesCommands[rstypes_Semalogic][0]).addOption(rulesettypesCommands[rstypes_ASP][1], rulesettypesCommands[rstypes_ASP][0]).addOption(rulesettypesCommands[rstypes_Picture][1], rulesettypesCommands[rstypes_Picture][0]).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myOutputFormat).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set Outputformat: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myOutputFormat = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("BaseUrl").setDesc("BaseURL for reaching SemaLogicService").addText((text) => text.setPlaceholder(API_Defaults.Base_URL).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myBaseURL).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set BaseURL: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myBaseURL = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Path to Get-API-Endpoints").setDesc("Path to Get-API for more Information about the Endpoints of used APIs").addText((text) => text.setPlaceholder(API_Defaults.GetAPI).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myGetAPI).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set to Get-API-Endpoint: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myGetAPI = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("SID").setDesc("SemaLogic SessionID").addText((text) => text.setPlaceholder(API_Defaults.SID).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].mySID).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set SID: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].mySID = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Show Context in Reading View").addToggle((setting) => setting.setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myContext).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set Context of Reading View: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myContext = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Standard updateinterval").addText((setting) => setting.setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUpdateInterval.toString()).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set Update Interval: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUpdateInterval = parseInt(value);
      window.clearInterval(this.plugin.interval);
      this.plugin.registerInterval(
        this.plugin.interval = window.setInterval(this.plugin.handleUpdate, this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUpdateInterval)
      );
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Secure HTTP-Request").setDesc("If you has to use User/Password for http-request to the SemaLogic service").addToggle((setting) => setting.setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttps).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set UserPasswordRequest: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttps = value;
      await this.plugin.saveSettings();
      this.display();
    }));
    if (this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUseHttps) {
      new import_obsidian5.Setting(containerEl).setName("HTTP-Request-User").setDesc("User to reach SemaLogic service").addText((text) => text.setPlaceholder(API_Defaults.HttpUser).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUser).onChange(async (value) => {
        if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
          console.log("Set HTTP-Request-User...");
        }
        ;
        this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myUser = value;
        await this.plugin.saveSettings();
      }));
      new import_obsidian5.Setting(containerEl).setName("HTTP-Request-Password").setDesc("Password to reach SemaLogic service").addText((text) => text.setPlaceholder(API_Defaults.HttpPassword).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPassword).onChange(async (value) => {
        if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
          console.log("Set HTTP-Request-Password...");
        }
        ;
        this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myPassword = value;
        await this.plugin.saveSettings();
      }));
    }
    new import_obsidian5.Setting(containerEl).setName("BaseUrl for ASP").setDesc("BaseURL for reaching ASP-Service").addText((text) => text.setPlaceholder(API_Defaults.AspUrl).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspUrl).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set ASPBaseURL: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspUrl = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian5.Setting(containerEl).setName("Path to Get-ASP-StandardAPI-Endpoint").setDesc("Path to ASP-Standard-API ").addText((text) => text.setPlaceholder(API_Defaults.AspEndpoint).setValue(this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspEndpoint).onChange(async (value) => {
      if (this.plugin.settings.myDebugLevel >= DebugLevMap.DebugLevel_Important) {
        console.log("Set to ASP-Standard-API-Endpoint: " + value);
      }
      ;
      this.plugin.settings.mySLSettings[this.plugin.settings.mySetting].myAspEndpoint = value;
      await this.plugin.saveSettings();
    }));
  }
};
var SemaLogicPluginComm3 = class {
  constructor() {
    this.activatedASP = false;
  }
  setSlView(view) {
    this.slview = view;
  }
  setSLClass(slclass) {
    this.slPlugin = slclass;
  }
  add(a, b) {
    return a + b;
  }
};
var SemaLogicPlugin = class extends import_obsidian5.Plugin {
  constructor() {
    super(...arguments);
    this.activated = false;
    this.updating = false;
    this.lastUpdate = 0;
    this.updateOutstanding = false;
    this.updateOutstandingSetting = false;
    this.waitingForResponse = false;
    this.UpdateProcessing = false;
    this.view_utils = new ViewUtils();
    this.handleUpdate = (update) => {
      if (this.statusSL) {
        if (DebugLevel >= DebugLevMap.DebugLevel_Current_Dev || DebugLevel >= DebugLevMap.DebugLevel_High) {
          const text = "Updatetime/" + String(Date.now()) + "/" + String(this.lastUpdate) + "/" + String(Date.now() - this.lastUpdate) + "/" + String(this.updateOutstanding) + "/" + String(this.waitingForResponse);
          slconsolelog(this.slComm.slview, text);
        }
        if (update == null) {
        } else {
          if (update.view) {
            if (!update.docChanged && !update.focusChanged) {
              return;
            } else {
              if (this.UpdateProcessing == false) {
                if (DebugLevel >= DebugLevMap.DebugLevel_Current_Dev || DebugLevel >= DebugLevMap.DebugLevel_All)
                  slconsolelog(this.slComm.slview, "Start Update docChanged, focuschanged, UpdProc  " + String(update.docChanged) + "/" + String(update.focusChanged) + "/" + String(this.UpdateProcessing));
                this.semaLogicUpdate();
              }
            }
          }
        }
        if (Date.now() - this.lastUpdate > this.settings.mySLSettings[this.settings.mySetting].myUpdateInterval && this.updateOutstanding == true && this.waitingForResponse == false) {
          if (DebugLevel >= DebugLevMap.DebugLevel_Current_Dev || DebugLevel >= DebugLevMap.DebugLevel_All)
            slconsolelog(this.slComm.slview, "Start Update PARSING");
          this.lastUpdate = Date.now();
          this.semaLogicUpdate();
        } else if (Date.now() - this.lastUpdate > this.settings.mySLSettings[this.settings.mySetting].myUpdateInterval && this.updateOutstanding == true && this.waitingForResponse == false) {
          semaLogicPing(this.settings, this.lastUpdate);
        }
      }
    };
  }
  getContextFromLine(mydialectID) {
    mydialectID = mydialectID.replace("SemaLogicContext\u2261", "SemaLogicDialect\u2261");
    let re = /\t/gi;
    mydialectID = mydialectID.replace(re, "");
    re = /\n/gi;
    mydialectID = mydialectID.replace(re, "");
    return { mydialectID };
  }
  getActiveView() {
    const activeView = app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
    if (activeView === null) {
      if (this.lastactiveView === null) {
        if (DebugLevel >= DebugLevMap.DebugLevel_High) {
          slconsolelog(this.slComm.slview, "ActiveView could not be defined through SemaLogic");
        }
        return;
      } else {
        return this.lastactiveView;
      }
    }
    this.lastactiveView = activeView;
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      slconsolelog(this.slComm.slview, this.lastactiveView.getDisplayText());
    }
    return this.lastactiveView;
  }
  setViews() {
    this.slComm.activatedASP = false;
    this.app.workspace.iterateAllLeaves((leaf) => {
      switch (leaf.view.getViewType()) {
        case ASPViewType: {
          this.slComm.slaspview = leaf.view;
          this.slComm.slaspview.setComm(this.slComm);
          this.slComm.slaspview.slComm.setSlView(this.slComm.slview);
          this.slComm.slaspview.slComm.slPlugin = this.slComm.slPlugin;
          this.slComm.activatedASP = true;
          this.statusTransfer = true;
        }
        case SemaLogicViewType: {
          this.slComm.slview = leaf.view;
          this.slComm.slview.setComm(this.slComm);
          this.slComm.slview.slComm.setSlView(this.slComm.slview);
          this.slComm.slview.slComm.slPlugin = this.slComm.slPlugin;
          this.activated = true;
          this.statusSL = true;
        }
      }
    });
    this.getActiveView();
  }
  async onload() {
    this.registerMarkdownPostProcessor((element, context) => {
      if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
        console.log(element, context);
      }
      element.querySelectorAll("p").forEach((el) => {
        if (searchForSemaLogicCommands(el)) {
          let set = this.settings;
          context.addChild(new SemaLogicRenderedElement({ containerEl: el, set }));
        }
      });
    });
    this.addSettingTab(new SemaLogicSettingTab(this.app, this));
    await this.loadSettings();
    DebugLevel = this.settings.myDebugLevel;
    this.myStatus = this.addStatusBarItem();
    this.slComm = new SemaLogicPluginComm3();
    this.slComm.setSLClass(this);
    this.activateView();
    await this.semaLogicReset();
    this.setViews();
    this.addRibbonIcon("book", "On/Off SemaLogic.View", () => {
      this.setViews();
      if (this.activated == false) {
        this.statusSL = true;
        if (!this.activated) {
          this.activateView();
        }
      } else {
        this.statusSL = false;
        this.deactivateView();
      }
    });
    this.addRibbonIcon("dice", "On/Off Transfer.View", () => {
      this.setViews();
      if (this.slComm != void 0) {
        if (this.slComm.activatedASP == false) {
          this.activateASPView();
        } else {
          this.deactivateASPView();
        }
      }
    });
    if (this.statusSL) {
      this.semaLogicReset();
      this.slComm.slview.setNewInitial(this.settings.mySLSettings[this.settings.mySetting].myOutputFormat);
      this.semaLogicParse();
    }
    this.registerInterval(
      this.interval = window.setInterval(this.handleUpdate, this.settings.mySLSettings[this.settings.mySetting].myUpdateInterval)
    );
    this.registerEditorExtension([import_view3.EditorView.updateListener.of(this.handleUpdate)]);
  }
  async semaLogicParse() {
    this.setViews();
    if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
      slconsolelog(this.slComm.slview, "Start SemaLogicParse");
    }
    ;
    let results = [];
    this.lastUpdate = Date.now();
    await semaLogicPing(this.settings, this.lastUpdate);
    let vAPI_URL = getHostPort(this.settings) + API_Defaults.rules_parse + "?sid=" + this.settings.mySLSettings[this.settings.mySetting].mySID;
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      slconsolelog(this.slComm.slview, vAPI_URL);
    }
    ;
    let bodytext = "";
    let activeView = this.getActiveView();
    if (activeView != void 0) {
      this.slComm.slUsedMDView = activeView;
    }
    let dialectID = "default";
    let codeblock = false;
    let newCodeblock = false;
    if (activeView != null) {
      if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
        slconsolelog(this.slComm.slview, "ActiveView is not NULL");
      }
      ;
      for (let i = 0; i < activeView.editor.lineCount(); i++) {
        if (DebugLevel >= DebugLevMap.DebugLevel_All) {
          slconsolelog(this.slComm.slview, i, ";", activeView.editor.getLine(i));
          slconsolelog(this.slComm.slview, "Substring:", activeView.editor.getLine(i).substring(0, 2));
        }
        if (activeView.editor.getLine(i).substring(0, 3) == "```") {
          if (!codeblock) {
            codeblock = true;
            newCodeblock = true;
          } else {
            newCodeblock = false;
          }
        }
        if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
          slconsolelog(this.slComm.slview, "Current line is Codeblock", codeblock);
        }
        if (!codeblock && !newCodeblock) {
          bodytext = bodytext.concat(activeView.editor.getLine(i) + "\n");
        } else {
          switch (activeView.editor.getLine(i).substring(0, semaLogicCommand.useDialect.length)) {
            case semaLogicCommand.useDialect: {
              dialectID = activeView.editor.getLine(i).substring(semaLogicCommand.useDialect.length, activeView.editor.getLine(i).length - 1);
              dialectID = dialectID.trim();
              break;
            }
            default: {
            }
          }
        }
        if (i < activeView.editor.lineCount()) {
          if (activeView.editor.getLine(i).substring(0, 3) == "```") {
            if (codeblock && !newCodeblock) {
              codeblock = false;
            } else {
              newCodeblock = false;
            }
          }
        }
      }
    }
    bodytext = this.view_utils.cleanCommands(bodytext);
    if (dialectID == "") {
      dialectID = "default";
    }
    if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
      console.log("Parsingresult for SemaLogicView");
    }
    const responseForSemaLogic = this.slComm.slview.getSemaLogicParse(this.settings, vAPI_URL, dialectID, bodytext, false);
    responseForSemaLogic.then((value) => {
      if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
        console.log(value);
      }
    });
    this.updateOutstanding = false;
    if (this.slComm.activatedASP) {
      if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
        console.log("Parsingresult for OnTheFly Transfer.view in SemaLogic");
      }
      const parseCommands = this.slComm.slaspview.getASPCommands(this.slComm, this.settings);
      let outputFormat = rulesettypesCommands[rstypes_ASP][1];
      if (parseCommands.outputformat != void 0 && parseCommands.outputformat != rulesettypesCommands[rstypes_ASP][0]) {
        outputFormat = parseCommands.outputformat;
      }
      const responseForASP = this.slComm.slview.getSemaLogicParse(this.settings, vAPI_URL, dialectID, bodytext, true, outputFormat);
      responseForASP.then((value) => {
        if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
          console.log(value);
        }
        const aspPromise = this.slComm.slaspview.aspParse(this.slComm, this.settings, value);
        aspPromise.then((value2) => {
          if (value2 != void 0) {
            slconsolelog(this.slComm.slview, value2);
          }
        });
      });
    }
    return results;
  }
  async activateASPView() {
    if (this.slComm.slaspview == void 0) {
      this.registerView(
        ASPViewType,
        (leaf2) => new ASPView(leaf2)
      );
    }
    const leaf = this.GetAspLeaf();
    if (leaf != void 0) {
      leaf.setViewState({
        type: ASPViewType,
        active: false
      });
      await this.semaLogicReset();
      this.app.workspace.revealLeaf(leaf);
    } else {
      if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
        console.log("ASP-Leaf not created");
      }
    }
    this.setViews();
    this.handlePing();
    this.statusTransfer = true;
    this.semaLogicUpdate();
    this.myStatus.setText("ASP is on");
  }
  async activateView() {
    if (this.slComm.slview == void 0) {
      this.registerView(
        SemaLogicViewType,
        (leaf2) => new SemaLogicView2(leaf2)
      );
    }
    const leaf = this.GetSemaLogicLeaf();
    if (leaf != void 0) {
      leaf.setViewState({
        type: SemaLogicViewType,
        active: false
      });
      await this.semaLogicReset();
      this.app.workspace.revealLeaf(leaf);
    } else {
      if (DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
        console.log("SemaLogic-Leaf not created");
      }
    }
    this.setViews();
    this.handlePing();
    this.semaLogicUpdate();
    this.myStatus.setText("SemaLogic is on");
  }
  async deactivateASPView() {
    this.app.workspace.detachLeavesOfType(ASPViewType);
    this.slComm.activatedASP = false;
    this.statusTransfer = true;
    this.myStatus.setText("ASP is off");
  }
  async deactivateView() {
    this.app.workspace.detachLeavesOfType(SemaLogicViewType);
    this.activated = false;
    this.slComm.slview.unload();
    this.myStatus.setText("SemaLogic is off");
  }
  GetAspLeaf() {
    let found = false;
    var slv = void 0;
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (!found) {
        switch (leaf.view.getViewType()) {
          case ASPViewType: {
            found = true;
            slv = leaf;
          }
        }
      }
    });
    if (!found) {
      if (DebugLevel >= DebugLevMap.DebugLevel_All) {
        console.log("Split");
      }
      slv = this.app.workspace.getLeaf("split");
      if (DebugLevel >= DebugLevMap.DebugLevel_All) {
        console.log(slv);
      }
    }
    return slv;
  }
  GetSemaLogicLeaf() {
    let found = false;
    var slv = void 0;
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (!found) {
        switch (leaf.view.getViewType()) {
          case SemaLogicViewType: {
            found = true;
            slv = leaf;
          }
        }
      }
    });
    if (!found) {
      if (DebugLevel >= DebugLevMap.DebugLevel_All) {
        console.log("Split");
      }
      slv = this.app.workspace.getLeaf("split");
      if (DebugLevel >= DebugLevMap.DebugLevel_All) {
        console.log(slv);
      }
    }
    return slv;
  }
  async onunload() {
    this.app.workspace.detachLeavesOfType(ASPViewType);
    this.app.workspace.detachLeavesOfType(SemaLogicViewType);
  }
  async loadSettings() {
    this.settings = Object.assign({}, Default_profile, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    if (this.slComm.slview != void 0) {
      this.slComm.slview.setNewInitial(this.settings.mySLSettings[this.settings.mySetting].myOutputFormat);
    }
    this.updateOutstanding = true;
  }
  handlePing() {
    semaLogicPing(this.settings, this.lastUpdate);
  }
  semaLogicUpdate(setView) {
    this.waitingForResponse = true;
    this.UpdateProcessing = true;
    if (setView == true || setView == void 0) {
      this.setViews();
    }
    if (DebugLevel >= DebugLevMap.DebugLevel_Current_Dev || DebugLevel >= DebugLevMap.DebugLevel_Chatty) {
      slconsolelog(this.slComm.slview, "Start SemaLogicUpdate");
    }
    ;
    this.setViews();
    let activeView = this.getActiveView();
    this.semaLogicParse();
    if (!this.updating) {
      this.updating = true;
      if (activeView != null) {
        const editortext = activeView.editor.getRange({ line: 0, ch: 0 }, { line: activeView.editor.lastLine(), ch: activeView.editor.lastLine.length });
        const addChar = " ";
        let cursor = activeView.editor.getCursor();
        for (let i = 0; i < activeView.editor.lastLine(); i++) {
          if (activeView.editor.getLine(i).substring(0, semaLogicCommand.command_start.length) == semaLogicCommand.command_start) {
            if (activeView.editor.getLine(i).substring(activeView.editor.getLine(i).length - 1, activeView.editor.getLine(i).length) == semaLogicCommand.command_end) {
              activeView.editor.setLine(i, activeView.editor.getLine(i).substring(0, activeView.editor.getLine(i).length) + addChar);
            } else {
              if (activeView.editor.getLine(i).substring(activeView.editor.getLine(i).length - 1, activeView.editor.getLine(i).length) == addChar) {
                activeView.editor.setLine(i, activeView.editor.getLine(i).substring(0, activeView.editor.getLine(i).length - 1));
              }
            }
          }
        }
        activeView.editor.setCursor(cursor);
      }
      this.updating = false;
    }
    this.UpdateProcessing = false;
    this.waitingForResponse = false;
  }
  getSemaLogicText() {
    if (this.slComm.slview.contentEl.textContent == null) {
      return "";
    } else {
      return this.slComm.slview.getContent();
    }
  }
  async semaLogicReset() {
    let vAPI_URL_Reset = getHostPort(this.settings) + API_Defaults.reset + "?sid=" + this.settings.mySLSettings[this.settings.mySetting].mySID;
    let optionsReset;
    if (this.settings.mySLSettings[this.settings.mySetting].myUseHttps && this.settings.mySLSettings[this.settings.mySetting].myUser != "") {
      optionsReset = {
        url: vAPI_URL_Reset,
        method: "POST",
        headers: {
          "content-type": "text/plain",
          "Authorization": "Basic " + btoa(this.settings.mySLSettings[this.settings.mySetting].myUser + ":" + this.settings.mySLSettings[this.settings.mySetting].myPassword)
        }
      };
    } else {
      optionsReset = {
        url: vAPI_URL_Reset,
        method: "POST",
        headers: {
          "content-type": "text/plain"
        }
      };
    }
    if (DebugLevel >= DebugLevMap.DebugLevel_Important) {
      slconsolelog(this.slComm.slview, optionsReset);
    }
    try {
      const responseReset = await (0, import_obsidian5.requestUrl)(optionsReset);
      if (DebugLevel >= DebugLevMap.DebugLevel_Informative) {
        console.log(this.slComm.slview, `SemaLogic: Reset with http-status ${responseReset.status.toString()}`);
      }
      ;
    } catch (e) {
      console.log(this.slComm.slview, `Catcherror by reset ${vAPI_URL_Reset}`);
      console.log(this.slComm.slview, e.toString());
    }
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJzcmMvdmlldy50cyIsICJzcmMvY29uc3QudHMiLCAic3JjL3V0aWxzLnRzIiwgInNyYy92aWV3X3V0aWxzLnRzIiwgInNyYy92aWV3X2FzcC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBNYXJrZG93blZpZXcsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgcmVxdWVzdFVybCwgU2V0dGluZywgV29ya3NwYWNlTGVhZiwgcmVuZGVyUmVzdWx0cywgUmVxdWVzdFVybFBhcmFtLCBSZXF1ZXN0VXJsUmVzcG9uc2UsIFJlcXVlc3RVcmxSZXNwb25zZVByb21pc2UsIEJ1dHRvbkNvbXBvbmVudCwgTWFya2Rvd25SZW5kZXJDaGlsZCwgTWFya2Rvd25QcmV2aWV3VmlldywgVmlldyB9XHJcblx0ZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBTZW1hTG9naWNWaWV3LCBTZW1hTG9naWNWaWV3VHlwZSB9IGZyb20gXCIuL3NyYy92aWV3XCI7XHJcbmltcG9ydCB7IEFTUFZpZXcsIEFTUFZpZXdUeXBlIH0gZnJvbSBcIi4vc3JjL3ZpZXdfYXNwXCI7XHJcbmltcG9ydCB7IFZpZXdVcGRhdGUsIEVkaXRvclZpZXcgfSBmcm9tIFwiQGNvZGVtaXJyb3Ivdmlld1wiO1xyXG5pbXBvcnQgeyBTZW1hTG9naWNSZW5kZXJlZEVsZW1lbnQsIHNlYXJjaEZvclNlbWFMb2dpY0NvbW1hbmRzLCBnZXRIb3N0UG9ydCwgc2VtYUxvZ2ljUGluZywgc2xjb25zb2xlbG9nIH0gZnJvbSBcIi4vc3JjL3V0aWxzXCI7XHJcbmltcG9ydCB7IEFQSV9EZWZhdWx0cywgVmFsdWVfRGVmYXVsdHMsIHNlbWFMb2dpY0NvbW1hbmQsIHJ1bGVzZXR0eXBlc0NvbW1hbmRzLCByc3R5cGVzX1NlbWFsb2dpYywgcnN0eXBlc19QaWN0dXJlLCByc3R5cGVzX0FTUCwgRGVidWdMZXZNYXAsIERlYnVnTGV2ZWxOYW1lcyB9IGZyb20gXCIuL3NyYy9jb25zdFwiXHJcbmltcG9ydCB7IFZpZXdVdGlscyB9IGZyb20gJ3NyYy92aWV3X3V0aWxzJztcclxuXHJcbmV4cG9ydCB2YXIgRGVidWdMZXZlbCA9IDA7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNMU2V0dGluZyB7XHJcblx0bXlQb3J0OiBzdHJpbmc7XHJcblx0bXlPdXRwdXRGb3JtYXQ6IHN0cmluZztcclxuXHRteUJhc2VVUkw6IHN0cmluZztcclxuXHRteUdldEFQSTogc3RyaW5nO1xyXG5cdG15U0lEOiBzdHJpbmc7XHJcblx0bXlDb250ZXh0OiBib29sZWFuO1xyXG5cdG15VXBkYXRlSW50ZXJ2YWw6IG51bWJlcjtcclxuXHRteVVzZUh0dHBzOiBib29sZWFuLFxyXG5cdG15VXNlcjogc3RyaW5nLFxyXG5cdG15UGFzc3dvcmQ6IHN0cmluZ1xyXG5cdG15QXNwVXJsOiBzdHJpbmcsXHJcblx0bXlBc3BFbmRwb2ludDogc3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3Mge1xyXG5cdG15U0xTZXR0aW5nczogU0xTZXR0aW5nW107XHJcblx0bXlTZXR0aW5nOiBudW1iZXI7XHJcblx0bXlEZWJ1Z0xldmVsOiBudW1iZXI7XHJcbn1cclxuZXhwb3J0IGNvbnN0IERlZmF1bHRfcHJvZmlsZTogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MgPSB7XHJcblx0bXlTTFNldHRpbmdzOiBbe1xyXG5cdFx0bXlQb3J0OiBBUElfRGVmYXVsdHMuUG9ydCxcclxuXHRcdG15T3V0cHV0Rm9ybWF0OiAnU2VtYUxvZ2ljJyxcclxuXHRcdG15QmFzZVVSTDogQVBJX0RlZmF1bHRzLkJhc2VfVVJMLFxyXG5cdFx0bXlHZXRBUEk6IEFQSV9EZWZhdWx0cy5HZXRBUEksXHJcblx0XHRteVNJRDogQVBJX0RlZmF1bHRzLlNJRCxcclxuXHRcdG15Q29udGV4dDogQVBJX0RlZmF1bHRzLlNob3dDb250ZXh0LFxyXG5cdFx0bXlVc2VIdHRwczogQVBJX0RlZmF1bHRzLnVzZVVzZXJQYXNzd29ydGZvckhUVFAsXHJcblx0XHRteVVzZXI6IEFQSV9EZWZhdWx0cy5IdHRwVXNlcixcclxuXHRcdG15UGFzc3dvcmQ6IEFQSV9EZWZhdWx0cy5IdHRwUGFzc3dvcmQsXHJcblx0XHRteVVwZGF0ZUludGVydmFsOiBWYWx1ZV9EZWZhdWx0cy51cGRhdGVJbnRlcnZhbCxcclxuXHRcdG15QXNwVXJsOiBBUElfRGVmYXVsdHMuQXNwVXJsLFxyXG5cdFx0bXlBc3BFbmRwb2ludDogQVBJX0RlZmF1bHRzLkFzcEVuZHBvaW50XHJcblx0fSxcclxuXHR7XHJcblx0XHRteVBvcnQ6IEFQSV9EZWZhdWx0cy5Qb3J0LFxyXG5cdFx0bXlPdXRwdXRGb3JtYXQ6ICdTZW1hTG9naWMnLFxyXG5cdFx0bXlCYXNlVVJMOiBBUElfRGVmYXVsdHMuQmFzZV9VUkwsXHJcblx0XHRteUdldEFQSTogQVBJX0RlZmF1bHRzLkdldEFQSSxcclxuXHRcdG15U0lEOiBBUElfRGVmYXVsdHMuU0lELFxyXG5cdFx0bXlDb250ZXh0OiBBUElfRGVmYXVsdHMuU2hvd0NvbnRleHQsXHJcblx0XHRteVVzZUh0dHBzOiBBUElfRGVmYXVsdHMudXNlVXNlclBhc3N3b3J0Zm9ySFRUUCxcclxuXHRcdG15VXNlcjogQVBJX0RlZmF1bHRzLkh0dHBVc2VyLFxyXG5cdFx0bXlQYXNzd29yZDogQVBJX0RlZmF1bHRzLkh0dHBQYXNzd29yZCxcclxuXHRcdG15VXBkYXRlSW50ZXJ2YWw6IFZhbHVlX0RlZmF1bHRzLnVwZGF0ZUludGVydmFsLFxyXG5cdFx0bXlBc3BVcmw6IEFQSV9EZWZhdWx0cy5Bc3BVcmwsXHJcblx0XHRteUFzcEVuZHBvaW50OiBBUElfRGVmYXVsdHMuQXNwRW5kcG9pbnRcclxuXHR9LFxyXG5cdHtcclxuXHRcdG15UG9ydDogQVBJX0RlZmF1bHRzLlBvcnQsXHJcblx0XHRteU91dHB1dEZvcm1hdDogJ1NlbWFMb2dpYycsXHJcblx0XHRteUJhc2VVUkw6IEFQSV9EZWZhdWx0cy5CYXNlX1VSTCxcclxuXHRcdG15R2V0QVBJOiBBUElfRGVmYXVsdHMuR2V0QVBJLFxyXG5cdFx0bXlTSUQ6IEFQSV9EZWZhdWx0cy5TSUQsXHJcblx0XHRteUNvbnRleHQ6IEFQSV9EZWZhdWx0cy5TaG93Q29udGV4dCxcclxuXHRcdG15VXNlSHR0cHM6IEFQSV9EZWZhdWx0cy51c2VVc2VyUGFzc3dvcnRmb3JIVFRQLFxyXG5cdFx0bXlVc2VyOiBBUElfRGVmYXVsdHMuSHR0cFVzZXIsXHJcblx0XHRteVBhc3N3b3JkOiBBUElfRGVmYXVsdHMuSHR0cFBhc3N3b3JkLFxyXG5cdFx0bXlVcGRhdGVJbnRlcnZhbDogVmFsdWVfRGVmYXVsdHMudXBkYXRlSW50ZXJ2YWwsXHJcblx0XHRteUFzcFVybDogQVBJX0RlZmF1bHRzLkFzcFVybCxcclxuXHRcdG15QXNwRW5kcG9pbnQ6IEFQSV9EZWZhdWx0cy5Bc3BFbmRwb2ludFxyXG5cdH0sXHJcblx0XSxcclxuXHRteVNldHRpbmc6IDAsXHJcblx0bXlEZWJ1Z0xldmVsOiAwLFxyXG59XHJcblxyXG5cclxuY29uc3QgZ2V0RGVidWdMZXZlbCA9IChEZWJ1Z0xldmVsTmFtZTogc3RyaW5nKTogbnVtYmVyID0+IHtcclxuXHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZygnR2V0IGZvciBEZWJ1Z0xldmVsTmFtZScsIERlYnVnTGV2ZWxOYW1lKSB9XHJcblx0RGVidWdMZXZlbE5hbWVzLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4ge1xyXG5cdFx0aWYgKHZhbHVlID09IERlYnVnTGV2ZWxOYW1lKSB7XHJcblx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IGNvbnNvbGUubG9nKCdGaW5kIERlYnVnTGV2ZWxJbmRleCcsIGluZGV4KSB9XHJcblx0XHRcdHJldHVybiBpbmRleFxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCkgeyBjb25zb2xlLmxvZygnTm8gRmluZGluZyBmb3IgRGVidWdMZXZlbE5hbWUnLCBEZWJ1Z0xldmVsTmFtZSkgfVxyXG5cdHJldHVybiAwXHJcbn1cclxuXHJcbi8vIFNldHRpbmdzIGZvciBTZW1hTG9naWNcclxuY2xhc3MgU2VtYUxvZ2ljU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG5cdHBsdWdpbjogU2VtYUxvZ2ljUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTZW1hTG9naWNQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHJcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcblx0XHQvLyBIZWFkbGluZSBmb3IgU2V0dGluZ3NUYWJcclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1NldHRpbmdzIGZvciBTZW1hTG9naWM6JyB9KTtcclxuXHJcblx0XHQvLyBHZW5lcmFsIERlYnVnIExldmVsXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ0dlbmVyYWwgRGVidWdMZXZlbCcpXHJcblx0XHRcdC5zZXREZXNjKCdZb3UgY2FuIHNldCBhIERlYnVnTGV2ZWwgZm9yIERldmVsb3BtZW50aW5mb3JtYXRpb24nKVxyXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcERvd24gPT4gZHJvcERvd25cclxuXHRcdFx0XHQuYWRkT3B0aW9uKCcwJywgRGVidWdMZXZlbE5hbWVzWzBdKVxyXG5cdFx0XHRcdC5hZGRPcHRpb24oJzEnLCBEZWJ1Z0xldmVsTmFtZXNbMV0pXHJcblx0XHRcdFx0LmFkZE9wdGlvbignMicsIERlYnVnTGV2ZWxOYW1lc1syXSlcclxuXHRcdFx0XHQuYWRkT3B0aW9uKCczJywgRGVidWdMZXZlbE5hbWVzWzNdKVxyXG5cdFx0XHRcdC5hZGRPcHRpb24oJzQnLCBEZWJ1Z0xldmVsTmFtZXNbNF0pXHJcblx0XHRcdFx0LmFkZE9wdGlvbignNScsIERlYnVnTGV2ZWxOYW1lc1s1XSlcclxuXHRcdFx0XHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCkpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0N1cnJlbnRfRGV2KSB7IGNvbnNvbGUubG9nKCdTZXQgRGVidWdMZXZlbDogJyArIERlYnVnTGV2ZWxOYW1lc1twYXJzZUludCh2YWx1ZSldKSB9O1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlEZWJ1Z0xldmVsID0gcGFyc2VJbnQodmFsdWUpO1xyXG5cdFx0XHRcdFx0RGVidWdMZXZlbCA9IHBhcnNlSW50KHZhbHVlKVxyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKVxyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHQvLyBEaXNwbGF5IFNldHRpbmdzIGZvciBTZW1hTG9naWNcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnQ2hhbmdlIHlvdXIgc2V0dGluZyBwcm9maWxlJylcclxuXHRcdFx0LnNldERlc2MoJ1lvdSBjYW4gZGVmaW5lIGRpZmZlcmVudCBwcm9maWxlcyBmb3IgeW91ciBTZW1hTG9naWNTZXJ2aWNlJylcclxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3BEb3duID0+IGRyb3BEb3duXHJcblx0XHRcdFx0LmFkZE9wdGlvbignMCcsICdQcm9maWxlIDEnKVxyXG5cdFx0XHRcdC5hZGRPcHRpb24oJzEnLCAnUHJvZmlsZSAyJylcclxuXHRcdFx0XHQuYWRkT3B0aW9uKCcyJywgJ1Byb2ZpbGUgMycpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZy50b1N0cmluZygpKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teURlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldikgeyBjb25zb2xlLmxvZygnU2V0IFByb2ZpbGU6ICcgKyB2YWx1ZSkgfTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZyA9IHBhcnNlSW50KHZhbHVlKTtcclxuXHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdC8vIFBvcnQgZm9yIHJlYWNoaW5nIFNlbWFMb2dpYyB3aXRoIFN0YW5kYXJkcGFyYW1ldGVyXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1BvcnQgU2VtYUxvZ2ljJylcclxuXHRcdFx0LnNldERlc2MoJ0VudGVyIHRoZSBQb3J0JylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5Qb3J0KVxyXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teVBvcnQpXHJcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZygnU2V0IHRvIFBvcnQ6ICcgKyB2YWx1ZSkgfTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15UG9ydCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdC8vIE91dHB1dEZvcm1hdHMgXHJcblx0XHQvLyBUb0RvOiBHZXQgZnJvbSBBUEkgd2hpY2ggT3V0cHV0Rm9ybWF0cyBhcmUgcG9zc2libGVcdFx0XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ091dHB1dEZvcm1hdCcpXHJcblx0XHRcdC5zZXREZXNjKCdIZXJlIHlvdSBjYW4gc2V0IHRoZSBvdXRwdXRmb3JtYXQgZm9yIFNlbWFMb2dpYywgd2hpY2ggY291bGQgYmUgZ2V0IGZyb20gU2VtYUxvZ2ljU2VydmljZScpXHJcblx0XHRcdC5hZGREcm9wZG93bihkcm9wRG93biA9PiBkcm9wRG93blxyXG5cdFx0XHRcdC5hZGRPcHRpb24ocnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19TZW1hbG9naWNdWzFdLCBydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX1NlbWFsb2dpY11bMF0pXHJcblx0XHRcdFx0LmFkZE9wdGlvbihydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX0FTUF1bMV0sIHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfQVNQXVswXSlcclxuXHRcdFx0XHQuYWRkT3B0aW9uKHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfUGljdHVyZV1bMV0sIHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfUGljdHVyZV1bMF0pXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15T3V0cHV0Rm9ybWF0KVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teURlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coJ1NldCBPdXRwdXRmb3JtYXQ6ICcgKyB2YWx1ZSkgfTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15T3V0cHV0Rm9ybWF0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblxyXG5cdFx0Ly8gQmFzZVVSTCBcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnQmFzZVVybCcpXHJcblx0XHRcdC5zZXREZXNjKCdCYXNlVVJMIGZvciByZWFjaGluZyBTZW1hTG9naWNTZXJ2aWNlJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5CYXNlX1VSTClcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlCYXNlVVJMKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teURlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coJ1NldCBCYXNlVVJMOiAnICsgdmFsdWUpIH07XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teUJhc2VVUkwgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1BhdGggdG8gR2V0LUFQSS1FbmRwb2ludHMnKVxyXG5cdFx0XHQuc2V0RGVzYygnUGF0aCB0byBHZXQtQVBJIGZvciBtb3JlIEluZm9ybWF0aW9uIGFib3V0IHRoZSBFbmRwb2ludHMgb2YgdXNlZCBBUElzJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5HZXRBUEkpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15R2V0QVBJKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teURlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coJ1NldCB0byBHZXQtQVBJLUVuZHBvaW50OiAnICsgdmFsdWUpIH07XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teUdldEFQSSA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHQvL3RoaXMuZGlzcGxheSgpXHJcblx0XHRcdFx0fSkpO1xyXG5cdFx0Ly8gU0lELUluZm9ybWF0aW9uXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1NJRCcpXHJcblx0XHRcdC5zZXREZXNjKCdTZW1hTG9naWMgU2Vzc2lvbklEJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5TSUQpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15U0lEKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teURlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coJ1NldCBTSUQ6ICcgKyB2YWx1ZSkgfTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15U0lEID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHR9KSk7XHJcblx0XHQvLyBTaG93IERpYWxlY3QgaW4gUmVhZGluZyBWaWV3XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1Nob3cgQ29udGV4dCBpbiBSZWFkaW5nIFZpZXcnKVxyXG5cdFx0XHQvLy5zZXREZXNjKCdTaG93IENvbnRleHQgaW4gUmVhZGluZyBWaWV3JylcclxuXHRcdFx0LmFkZFRvZ2dsZShzZXR0aW5nID0+IHNldHRpbmdcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlDb250ZXh0KVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teURlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coJ1NldCBDb250ZXh0IG9mIFJlYWRpbmcgVmlldzogJyArIHZhbHVlKSB9O1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlDb250ZXh0ID0gdmFsdWU7XHJcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxyXG5cdFx0XHRcdFx0Ly90aGlzLmRpc3BsYXkoKVxyXG5cdFx0XHRcdH0pKTtcclxuXHJcblx0XHQvLyBTaG93IFN0YW5kYXJkVXBkYXRlSW50ZXJ2YWxcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnU3RhbmRhcmQgdXBkYXRlaW50ZXJ2YWwnKVxyXG5cdFx0XHQvLy5zZXREZXNjKCdTZXQgc3RhbmRhcmQgdXBkYXRlaW50ZXJ2YWwnKVxyXG5cdFx0XHQuYWRkVGV4dChzZXR0aW5nID0+IHNldHRpbmdcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlVcGRhdGVJbnRlcnZhbC50b1N0cmluZygpKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teURlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coJ1NldCBVcGRhdGUgSW50ZXJ2YWw6ICcgKyB2YWx1ZSkgfTtcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15VXBkYXRlSW50ZXJ2YWwgPSBwYXJzZUludCh2YWx1ZSk7XHJcblx0XHRcdFx0XHR3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLnBsdWdpbi5pbnRlcnZhbClcclxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnJlZ2lzdGVySW50ZXJ2YWwoXHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLmludGVydmFsID0gd2luZG93LnNldEludGVydmFsKHRoaXMucGx1Z2luLmhhbmRsZVVwZGF0ZSwgdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlVcGRhdGVJbnRlcnZhbClcclxuXHRcdFx0XHRcdCk7XHJcblxyXG5cclxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXHJcblx0XHRcdFx0XHQvL3RoaXMuZGlzcGxheSgpXHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdC8vIEZvciBIVFRQLVJlcXVlc3Qgd2l0aCBVc2VyL1Bhc3N3b3JkIFx0XHRcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnU2VjdXJlIEhUVFAtUmVxdWVzdCcpXHJcblx0XHRcdC5zZXREZXNjKCdJZiB5b3UgaGFzIHRvIHVzZSBVc2VyL1Bhc3N3b3JkIGZvciBodHRwLXJlcXVlc3QgdG8gdGhlIFNlbWFMb2dpYyBzZXJ2aWNlJylcclxuXHRcdFx0LmFkZFRvZ2dsZShzZXR0aW5nID0+IHNldHRpbmdcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlVc2VIdHRwcylcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IGNvbnNvbGUubG9nKCdTZXQgVXNlclBhc3N3b3JkUmVxdWVzdDogJyArIHZhbHVlKSB9O1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlVc2VIdHRwcyA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcclxuXHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpXHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlVc2VIdHRwcykge1xyXG5cdFx0XHQvLyBSZXF1ZXN0LVVzZXJcclxuXHRcdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdFx0LnNldE5hbWUoJ0hUVFAtUmVxdWVzdC1Vc2VyJylcclxuXHRcdFx0XHQuc2V0RGVzYygnVXNlciB0byByZWFjaCBTZW1hTG9naWMgc2VydmljZScpXHJcblx0XHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoQVBJX0RlZmF1bHRzLkh0dHBVc2VyKVxyXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15VXNlcilcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZygnU2V0IEhUVFAtUmVxdWVzdC1Vc2VyLi4uJykgfTtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlVc2VyID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdFx0Ly8gUmVxdWVzdC1QYXNzd29yZFxyXG5cdFx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0XHQuc2V0TmFtZSgnSFRUUC1SZXF1ZXN0LVBhc3N3b3JkJylcclxuXHRcdFx0XHQuc2V0RGVzYygnUGFzc3dvcmQgdG8gcmVhY2ggU2VtYUxvZ2ljIHNlcnZpY2UnKVxyXG5cdFx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG5cdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5IdHRwUGFzc3dvcmQpXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlQYXNzd29yZClcclxuXHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm15RGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZygnU2V0IEhUVFAtUmVxdWVzdC1QYXNzd29yZC4uLicpIH07XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15UGFzc3dvcmQgPSB2YWx1ZTtcclxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQVNQQmFzZVVSTCBcclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZSgnQmFzZVVybCBmb3IgQVNQJylcclxuXHRcdFx0LnNldERlc2MoJ0Jhc2VVUkwgZm9yIHJlYWNoaW5nIEFTUC1TZXJ2aWNlJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5Bc3BVcmwpXHJcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNldHRpbmddLm15QXNwVXJsKVxyXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5teURlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coJ1NldCBBU1BCYXNlVVJMOiAnICsgdmFsdWUpIH07XHJcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teUFzcFVybCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHRcdC8vIFN0YW5kYXJkIEFTUEVuZHBvaW50XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoJ1BhdGggdG8gR2V0LUFTUC1TdGFuZGFyZEFQSS1FbmRwb2ludCcpXHJcblx0XHRcdC5zZXREZXNjKCdQYXRoIHRvIEFTUC1TdGFuZGFyZC1BUEkgJylcclxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKEFQSV9EZWZhdWx0cy5Bc3BFbmRwb2ludClcclxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlBc3BFbmRwb2ludClcclxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubXlEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IGNvbnNvbGUubG9nKCdTZXQgdG8gQVNQLVN0YW5kYXJkLUFQSS1FbmRwb2ludDogJyArIHZhbHVlKSB9O1xyXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZ10ubXlBc3BFbmRwb2ludCA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdFx0fSkpO1xyXG5cclxuXHR9XHJcbn1cclxuXHJcbi8vIENvbW11bmljYXRpb25DbGFzcyBmb3IgaW50ZXJhY3Rpb24gYmV0d2VlbiBTTHZpZXcgYW5kIGVkaXRvciB3aW5kb3dcclxuZXhwb3J0IGNsYXNzIFNlbWFMb2dpY1BsdWdpbkNvbW0ge1xyXG5cdHNsdmlldzogU2VtYUxvZ2ljVmlld1xyXG5cdHNsUGx1Z2luOiBTZW1hTG9naWNQbHVnaW5cclxuXHRzbGFzcHZpZXc6IEFTUFZpZXdcclxuXHRhY3RpdmF0ZWRBU1A6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHRzbFVzZWRNRFZpZXc6IE1hcmtkb3duVmlld1xyXG5cclxuXHRzZXRTbFZpZXcodmlldzogU2VtYUxvZ2ljVmlldykge1xyXG5cdFx0dGhpcy5zbHZpZXcgPSB2aWV3XHJcblx0fVxyXG5cclxuXHRzZXRTTENsYXNzKHNsY2xhc3M6IFNlbWFMb2dpY1BsdWdpbikge1xyXG5cdFx0dGhpcy5zbFBsdWdpbiA9IHNsY2xhc3NcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhZGQoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIGEgKyBiXHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZW1hTG9naWNQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cdHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncztcclxuXHRzZW1hTG9naWNWaWV3OiBTZW1hTG9naWNWaWV3O1xyXG5cdG15U3RhdHVzOiBIVE1MRWxlbWVudDtcclxuXHRzdGF0dXNUcmFuc2ZlcjogYm9vbGVhblxyXG5cdHN0YXR1c1NMOiBib29sZWFuO1xyXG5cclxuXHRhY3RpdmF0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHR1cGRhdGluZzogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdGxhc3RVcGRhdGU6IG51bWJlciA9IDA7XHJcblx0dXBkYXRlT3V0c3RhbmRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHR1cGRhdGVPdXRzdGFuZGluZ1NldHRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHR3YWl0aW5nRm9yUmVzcG9uc2UgPSBmYWxzZTtcclxuXHRVcGRhdGVQcm9jZXNzaW5nOiBib29sZWFuID0gZmFsc2U7XHJcblx0c2xDb21tOiBTZW1hTG9naWNQbHVnaW5Db21tO1xyXG5cdGxhc3RhY3RpdmVWaWV3OiBNYXJrZG93blZpZXc7XHJcblx0dmlld191dGlscyA9IG5ldyBWaWV3VXRpbHNcclxuXHRpbnRlcnZhbDogbnVtYmVyXHJcblxyXG5cdC8vIER1ZSB0byBjaGFuZ2UgaW4gU3ByaW50IDEvMjAyMyB0byBpbmxpbmUgZGlhbGVjdHMsIGRldGVjdGlvbiBvZiBjb250ZXh0cyB3aWxsIGJlIG5lZWRlZCBpbiBsYXRlciBzcHJpbnRzIFxyXG5cdHByaXZhdGUgZ2V0Q29udGV4dEZyb21MaW5lKG15ZGlhbGVjdElEOiBzdHJpbmcpIHtcclxuXHRcdC8vIFRvRG86IFJlcGxhY2Ugdm9uIFRva29ucyAtIGJpcyBkaWUgbmV1ZSBTZW1hTG9naWNWZXJzaW9uIGJ6Z2wuIGRlciBDb250ZXh0ZSB2ZXJmXHUwMEZDZ2JhciBpc3RcclxuXHRcdG15ZGlhbGVjdElEID0gbXlkaWFsZWN0SUQucmVwbGFjZSgnU2VtYUxvZ2ljQ29udGV4dFx1MjI2MScsICdTZW1hTG9naWNEaWFsZWN0XHUyMjYxJyk7XHJcblx0XHQvL215ZGlhbGVjdElEID0gbXlkaWFsZWN0SUQucmVwbGFjZShcImRpYWxlY3Q6PVwiLCBcIlwiKTtcclxuXHRcdGxldCByZSA9IC9cXHQvZ2k7XHJcblx0XHRteWRpYWxlY3RJRCA9IG15ZGlhbGVjdElELnJlcGxhY2UocmUsIFwiXCIpO1xyXG5cdFx0cmUgPSAvXFxuL2dpO1xyXG5cdFx0bXlkaWFsZWN0SUQgPSBteWRpYWxlY3RJRC5yZXBsYWNlKHJlLCBcIlwiKTtcclxuXHRcdHJldHVybiB7IG15ZGlhbGVjdElEIH07XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGdldEFjdGl2ZVZpZXcoKTogTWFya2Rvd25WaWV3IHwgdW5kZWZpbmVkIHtcclxuXHRcdGNvbnN0IGFjdGl2ZVZpZXcgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuXHRcdGlmIChhY3RpdmVWaWV3ID09PSBudWxsKSB7XHJcblx0XHRcdGlmICh0aGlzLmxhc3RhY3RpdmVWaWV3ID09PSBudWxsKSB7XHJcblx0XHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoKSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIFwiQWN0aXZlVmlldyBjb3VsZCBub3QgYmUgZGVmaW5lZCB0aHJvdWdoIFNlbWFMb2dpY1wiKSB9XHJcblx0XHRcdFx0cmV0dXJuXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMubGFzdGFjdGl2ZVZpZXc7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHRoaXMubGFzdGFjdGl2ZVZpZXcgPSBhY3RpdmVWaWV3XHJcblx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCB0aGlzLmxhc3RhY3RpdmVWaWV3LmdldERpc3BsYXlUZXh0KCkpIH1cclxuXHRcdHJldHVybiB0aGlzLmxhc3RhY3RpdmVWaWV3XHJcblx0fVxyXG5cclxuXHRzZXRWaWV3cygpOiB2b2lkIHtcclxuXHRcdHRoaXMuc2xDb21tLmFjdGl2YXRlZEFTUCA9IGZhbHNlXHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRzd2l0Y2ggKGxlYWYudmlldy5nZXRWaWV3VHlwZSgpKSB7XHJcblx0XHRcdFx0Y2FzZSBBU1BWaWV3VHlwZToge1xyXG5cdFx0XHRcdFx0dGhpcy5zbENvbW0uc2xhc3B2aWV3ID0gKGxlYWYudmlldyBhcyBBU1BWaWV3KVxyXG5cdFx0XHRcdFx0dGhpcy5zbENvbW0uc2xhc3B2aWV3LnNldENvbW0odGhpcy5zbENvbW0pXHJcblx0XHRcdFx0XHR0aGlzLnNsQ29tbS5zbGFzcHZpZXcuc2xDb21tLnNldFNsVmlldyh0aGlzLnNsQ29tbS5zbHZpZXcpXHJcblx0XHRcdFx0XHR0aGlzLnNsQ29tbS5zbGFzcHZpZXcuc2xDb21tLnNsUGx1Z2luID0gdGhpcy5zbENvbW0uc2xQbHVnaW5cclxuXHRcdFx0XHRcdHRoaXMuc2xDb21tLmFjdGl2YXRlZEFTUCA9IHRydWVcclxuXHRcdFx0XHRcdHRoaXMuc3RhdHVzVHJhbnNmZXIgPSB0cnVlXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGNhc2UgU2VtYUxvZ2ljVmlld1R5cGU6IHtcclxuXHRcdFx0XHRcdHRoaXMuc2xDb21tLnNsdmlldyA9IChsZWFmLnZpZXcgYXMgU2VtYUxvZ2ljVmlldylcclxuXHRcdFx0XHRcdHRoaXMuc2xDb21tLnNsdmlldy5zZXRDb21tKHRoaXMuc2xDb21tKVxyXG5cdFx0XHRcdFx0dGhpcy5zbENvbW0uc2x2aWV3LnNsQ29tbS5zZXRTbFZpZXcodGhpcy5zbENvbW0uc2x2aWV3KVxyXG5cdFx0XHRcdFx0dGhpcy5zbENvbW0uc2x2aWV3LnNsQ29tbS5zbFBsdWdpbiA9IHRoaXMuc2xDb21tLnNsUGx1Z2luXHJcblx0XHRcdFx0XHR0aGlzLmFjdGl2YXRlZCA9IHRydWVcclxuXHRcdFx0XHRcdHRoaXMuc3RhdHVzU0wgPSB0cnVlXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0dGhpcy5nZXRBY3RpdmVWaWV3KClcclxuXHRcdC8vdGhpcy5zZW1hTG9naWNVcGRhdGUoZmFsc2UpXHJcblx0fVxyXG5cclxuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKChlbGVtZW50LCBjb250ZXh0KSA9PiB7XHJcblx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coZWxlbWVudCwgY29udGV4dClcclxuXHRcdFx0fVxyXG5cdFx0XHRlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJwXCIpLmZvckVhY2goKGVsKSA9PiB7XHJcblx0XHRcdFx0aWYgKHNlYXJjaEZvclNlbWFMb2dpY0NvbW1hbmRzKGVsKSkge1xyXG5cdFx0XHRcdFx0bGV0IHNldCA9IHRoaXMuc2V0dGluZ3NcclxuXHRcdFx0XHRcdGNvbnRleHQuYWRkQ2hpbGQobmV3IFNlbWFMb2dpY1JlbmRlcmVkRWxlbWVudCh7IGNvbnRhaW5lckVsOiBlbCBhcyBIVE1MRWxlbWVudCwgc2V0IH0pKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSlcclxuXHJcblx0XHQvLyBUaGlzIGFkZHMgYSBzZXR0aW5ncyB0YWIgc28gdGhlIHVzZXIgY2FuIGNvbmZpZ3VyZSB2YXJpb3VzIGFzcGVjdHMgb2YgdGhlIHBsdWdpblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTZW1hTG9naWNTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cdFx0RGVidWdMZXZlbCA9IHRoaXMuc2V0dGluZ3MubXlEZWJ1Z0xldmVsXHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc3RhdHVzIGJhciBmb3IgaW5mb3JtYXRpb25zXHJcblx0XHR0aGlzLm15U3RhdHVzID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKClcclxuXHJcblx0XHR0aGlzLnNsQ29tbSA9IG5ldyBTZW1hTG9naWNQbHVnaW5Db21tXHJcblx0XHR0aGlzLnNsQ29tbS5zZXRTTENsYXNzKHRoaXMpXHJcblxyXG5cdFx0dGhpcy5hY3RpdmF0ZVZpZXcoKTtcclxuXHRcdC8vIENsZWFyIFNlbWFMb2dpYyB0byBzdGFydCB3aXRoIGEgY2xlYXIgc2VydmljZVxyXG5cdFx0YXdhaXQgdGhpcy5zZW1hTG9naWNSZXNldCgpO1xyXG5cdFx0dGhpcy5zZXRWaWV3cygpXHJcblxyXG5cdFx0Ly8gYWRkIGFuIFJpYmJvbkljb24gdG8gYWN0aXZjYXRlIGFuZCBkZWFjdGl2YXRlIHRoZSBTZW1hTG9naWNWaWV3XHJcblx0XHR0aGlzLmFkZFJpYmJvbkljb24oXCJib29rXCIsIFwiT24vT2ZmIFNlbWFMb2dpYy5WaWV3XCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5zZXRWaWV3cygpXHJcblx0XHRcdGlmICh0aGlzLmFjdGl2YXRlZCA9PSBmYWxzZSkge1xyXG5cdFx0XHRcdHRoaXMuc3RhdHVzU0wgPSB0cnVlXHJcblx0XHRcdFx0aWYgKCF0aGlzLmFjdGl2YXRlZCkge1xyXG5cdFx0XHRcdFx0dGhpcy5hY3RpdmF0ZVZpZXcoKVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnN0YXR1c1NMID0gZmFsc2VcclxuXHRcdFx0XHR0aGlzLmRlYWN0aXZhdGVWaWV3KCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHR9KTtcclxuXHRcdC8vIGFkZCBhbiBSaWJib25JY29uIHRvIGFjdGl2Y2F0ZSBhbmQgZGVhY3RpdmF0ZSB0aGUgU2VtYUxvZ2ljVmlld1xyXG5cdFx0dGhpcy5hZGRSaWJib25JY29uKFwiZGljZVwiLCBcIk9uL09mZiBUcmFuc2Zlci5WaWV3XCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5zZXRWaWV3cygpXHJcblx0XHRcdGlmICh0aGlzLnNsQ29tbSAhPSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRpZiAodGhpcy5zbENvbW0uYWN0aXZhdGVkQVNQID09IGZhbHNlKSB7XHJcblx0XHRcdFx0XHR0aGlzLmFjdGl2YXRlQVNQVmlldygpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0aGlzLmRlYWN0aXZhdGVBU1BWaWV3KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdGlmICh0aGlzLnN0YXR1c1NMKSB7XHJcblx0XHRcdHRoaXMuc2VtYUxvZ2ljUmVzZXQoKTtcclxuXHRcdFx0Ly8gRGVmYXVsdCBpcyB0aGF0IFNlbWFMb2dpY1ZpZXcgaXMgYWN0aXZhdGVkIGJ1dCBpdCBjYW4gYmUgZGVhY3RpdmF0ZWQgYnkgY2xpY2sgb24gUmliYm9uIEljb25cclxuXHRcdFx0dGhpcy5zbENvbW0uc2x2aWV3LnNldE5ld0luaXRpYWwodGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15T3V0cHV0Rm9ybWF0KTtcclxuXHRcdFx0dGhpcy5zZW1hTG9naWNQYXJzZSgpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5yZWdpc3RlckludGVydmFsKFxyXG5cdFx0XHR0aGlzLmludGVydmFsID0gd2luZG93LnNldEludGVydmFsKHRoaXMuaGFuZGxlVXBkYXRlLCB0aGlzLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnNldHRpbmdzLm15U2V0dGluZ10ubXlVcGRhdGVJbnRlcnZhbClcclxuXHRcdCk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyRWRpdG9yRXh0ZW5zaW9uKFtFZGl0b3JWaWV3LnVwZGF0ZUxpc3RlbmVyLm9mKHRoaXMuaGFuZGxlVXBkYXRlKV0pO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgc2VtYUxvZ2ljUGFyc2UoKTogUHJvbWlzZTxOb2RlW10+IHtcclxuXHJcblx0XHR0aGlzLnNldFZpZXdzKCk7XHJcblxyXG5cdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgJ1N0YXJ0IFNlbWFMb2dpY1BhcnNlJykgfTtcclxuXHRcdGxldCByZXN1bHRzOiBOb2RlW10gPSBbXTtcclxuXHJcblx0XHR0aGlzLmxhc3RVcGRhdGUgPSBEYXRlLm5vdygpXHJcblx0XHRhd2FpdCBzZW1hTG9naWNQaW5nKHRoaXMuc2V0dGluZ3MsIHRoaXMubGFzdFVwZGF0ZSlcclxuXHJcblx0XHRsZXQgdkFQSV9VUkwgPSBnZXRIb3N0UG9ydCh0aGlzLnNldHRpbmdzKSArIEFQSV9EZWZhdWx0cy5ydWxlc19wYXJzZSArIFwiP3NpZD1cIiArIHRoaXMuc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2V0dGluZ3MubXlTZXR0aW5nXS5teVNJRDtcclxuXHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIHZBUElfVVJMKSB9O1xyXG5cclxuXHRcdGxldCBib2R5dGV4dDogc3RyaW5nID0gXCJcIjtcclxuXHRcdGxldCBhY3RpdmVWaWV3ID0gdGhpcy5nZXRBY3RpdmVWaWV3KClcclxuXHRcdGlmIChhY3RpdmVWaWV3ICE9IHVuZGVmaW5lZCkgeyB0aGlzLnNsQ29tbS5zbFVzZWRNRFZpZXcgPSBhY3RpdmVWaWV3IH1cclxuXHJcblx0XHRsZXQgZGlhbGVjdElEOiBzdHJpbmcgPSBcImRlZmF1bHRcIlxyXG5cdFx0bGV0IGNvZGVibG9jazogYm9vbGVhbiA9IGZhbHNlO1xyXG5cdFx0bGV0IG5ld0NvZGVibG9jazogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHRcdGlmIChhY3RpdmVWaWV3ICE9IG51bGwpIHtcclxuXHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgJ0FjdGl2ZVZpZXcgaXMgbm90IE5VTEwnKSB9O1xyXG5cclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhY3RpdmVWaWV3LmVkaXRvci5saW5lQ291bnQoKTsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9BbGwpIHtcclxuXHRcdFx0XHRcdHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIGksICc7JywgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKSlcclxuXHRcdFx0XHRcdHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdTdWJzdHJpbmc6JywgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoMCwgMikpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoMCwgMykgPT0gXCJgYGBcIikge1xyXG5cdFx0XHRcdFx0aWYgKCFjb2RlYmxvY2spIHtcclxuXHRcdFx0XHRcdFx0Y29kZWJsb2NrID0gdHJ1ZVxyXG5cdFx0XHRcdFx0XHRuZXdDb2RlYmxvY2sgPSB0cnVlXHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRuZXdDb2RlYmxvY2sgPSBmYWxzZVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgJ0N1cnJlbnQgbGluZSBpcyBDb2RlYmxvY2snLCBjb2RlYmxvY2spIH1cclxuXHJcblx0XHRcdFx0aWYgKCghY29kZWJsb2NrKSAmJiAoIW5ld0NvZGVibG9jaykpIHtcclxuXHRcdFx0XHRcdC8vIENoZWNrIGlubGluZSBTdGF0ZW1lbnRzXHJcblx0XHRcdFx0XHRib2R5dGV4dCA9IGJvZHl0ZXh0LmNvbmNhdChhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpICsgJ1xcbicpXHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gUHJcdTAwRkNmZSBhdWYgenUgdmVyd2VuZGVuZGVuIERpYWxlY3RcclxuXHRcdFx0XHRcdHN3aXRjaCAoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoMCwgc2VtYUxvZ2ljQ29tbWFuZC51c2VEaWFsZWN0Lmxlbmd0aCkpIHtcclxuXHRcdFx0XHRcdFx0Y2FzZSBzZW1hTG9naWNDb21tYW5kLnVzZURpYWxlY3Q6IHtcclxuXHRcdFx0XHRcdFx0XHRkaWFsZWN0SUQgPSBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZyhzZW1hTG9naWNDb21tYW5kLnVzZURpYWxlY3QubGVuZ3RoLCBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLmxlbmd0aCAtIDEpXHJcblx0XHRcdFx0XHRcdFx0ZGlhbGVjdElEID0gZGlhbGVjdElELnRyaW0oKTtcclxuXHRcdFx0XHRcdFx0XHRicmVha1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdGRlZmF1bHQ6IHsgfVxyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKGkgPCBhY3RpdmVWaWV3LmVkaXRvci5saW5lQ291bnQoKSkge1xyXG5cdFx0XHRcdFx0aWYgKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIDMpID09IFwiYGBgXCIpIHtcclxuXHRcdFx0XHRcdFx0aWYgKChjb2RlYmxvY2spICYmICghbmV3Q29kZWJsb2NrKSkgeyBjb2RlYmxvY2sgPSBmYWxzZSB9IGVsc2UgeyBuZXdDb2RlYmxvY2sgPSBmYWxzZSB9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cclxuXHRcdGJvZHl0ZXh0ID0gdGhpcy52aWV3X3V0aWxzLmNsZWFuQ29tbWFuZHMoYm9keXRleHQpXHJcblx0XHRpZiAoZGlhbGVjdElEID09IFwiXCIpIHsgZGlhbGVjdElEID0gXCJkZWZhdWx0XCIgfVxyXG5cclxuXHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IGNvbnNvbGUubG9nKFwiUGFyc2luZ3Jlc3VsdCBmb3IgU2VtYUxvZ2ljVmlld1wiKSB9XHJcblx0XHRjb25zdCByZXNwb25zZUZvclNlbWFMb2dpYyA9IHRoaXMuc2xDb21tLnNsdmlldy5nZXRTZW1hTG9naWNQYXJzZSh0aGlzLnNldHRpbmdzLCB2QVBJX1VSTCwgZGlhbGVjdElELCBib2R5dGV4dCwgZmFsc2UpXHJcblx0XHRyZXNwb25zZUZvclNlbWFMb2dpYy50aGVuKHZhbHVlID0+IHtcclxuXHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgY29uc29sZS5sb2codmFsdWUpIH1cclxuXHRcdH0pXHJcblxyXG5cdFx0dGhpcy51cGRhdGVPdXRzdGFuZGluZyA9IGZhbHNlXHJcblxyXG5cdFx0aWYgKHRoaXMuc2xDb21tLmFjdGl2YXRlZEFTUCkge1xyXG5cdFx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZyhcIlBhcnNpbmdyZXN1bHQgZm9yIE9uVGhlRmx5IFRyYW5zZmVyLnZpZXcgaW4gU2VtYUxvZ2ljXCIpIH1cclxuXHRcdFx0Y29uc3QgcGFyc2VDb21tYW5kcyA9IHRoaXMuc2xDb21tLnNsYXNwdmlldy5nZXRBU1BDb21tYW5kcyh0aGlzLnNsQ29tbSwgdGhpcy5zZXR0aW5ncylcclxuXHRcdFx0bGV0IG91dHB1dEZvcm1hdDogc3RyaW5nID0gcnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19BU1BdWzFdXHJcblx0XHRcdGlmIChwYXJzZUNvbW1hbmRzLm91dHB1dGZvcm1hdCAhPSB1bmRlZmluZWQgJiYgcGFyc2VDb21tYW5kcy5vdXRwdXRmb3JtYXQgIT0gcnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19BU1BdWzBdKSB7IG91dHB1dEZvcm1hdCA9IHBhcnNlQ29tbWFuZHMub3V0cHV0Zm9ybWF0IH1cclxuXHRcdFx0Y29uc3QgcmVzcG9uc2VGb3JBU1AgPSB0aGlzLnNsQ29tbS5zbHZpZXcuZ2V0U2VtYUxvZ2ljUGFyc2UodGhpcy5zZXR0aW5ncywgdkFQSV9VUkwsIGRpYWxlY3RJRCwgYm9keXRleHQsIHRydWUsIG91dHB1dEZvcm1hdClcclxuXHRcdFx0cmVzcG9uc2VGb3JBU1AudGhlbih2YWx1ZSA9PiB7XHJcblx0XHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgY29uc29sZS5sb2codmFsdWUpIH1cclxuXHRcdFx0XHRjb25zdCBhc3BQcm9taXNlID0gdGhpcy5zbENvbW0uc2xhc3B2aWV3LmFzcFBhcnNlKHRoaXMuc2xDb21tLCB0aGlzLnNldHRpbmdzLCB2YWx1ZSlcclxuXHRcdFx0XHRhc3BQcm9taXNlLnRoZW4odmFsdWUgPT4geyBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIHZhbHVlKSB9IH0pXHJcblx0XHRcdH0pXHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0c1xyXG5cdH1cclxuXHJcblx0YXN5bmMgYWN0aXZhdGVBU1BWaWV3KCkge1xyXG5cdFx0Ly8gQWRkIHRoZSBBU1AgLSBWaWV3XHJcblx0XHQvLyBDaGVjayBpZiB0aGVyZSBpcyBhIEFTUFZpZXdcclxuXHRcdGlmICh0aGlzLnNsQ29tbS5zbGFzcHZpZXcgPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxyXG5cdFx0XHRcdEFTUFZpZXdUeXBlLFxyXG5cdFx0XHRcdGxlYWYgPT4gbmV3IEFTUFZpZXcobGVhZilcclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBsZWFmID0gdGhpcy5HZXRBc3BMZWFmKCk7XHJcblx0XHRpZiAobGVhZiAhPSB1bmRlZmluZWQpIHtcclxuXHRcdFx0bGVhZi5zZXRWaWV3U3RhdGUoe1xyXG5cdFx0XHRcdHR5cGU6IEFTUFZpZXdUeXBlLFxyXG5cdFx0XHRcdGFjdGl2ZTogZmFsc2UsXHJcblx0XHRcdH0pXHJcblx0XHRcdGF3YWl0IHRoaXMuc2VtYUxvZ2ljUmVzZXQoKVxyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJBU1AtTGVhZiBub3QgY3JlYXRlZFwiKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR0aGlzLnNldFZpZXdzKClcclxuXHRcdHRoaXMuaGFuZGxlUGluZygpXHJcblx0XHR0aGlzLnN0YXR1c1RyYW5zZmVyID0gdHJ1ZVxyXG5cdFx0dGhpcy5zZW1hTG9naWNVcGRhdGUoKVxyXG5cdFx0dGhpcy5teVN0YXR1cy5zZXRUZXh0KCdBU1AgaXMgb24nKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGFjdGl2YXRlVmlldygpIHtcclxuXHRcdC8vIEFkZCB0aGUgU2VtYUxvZ2ljIC0gVmlld1xyXG5cdFx0aWYgKHRoaXMuc2xDb21tLnNsdmlldyA9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0dGhpcy5yZWdpc3RlclZpZXcoXHJcblx0XHRcdFx0U2VtYUxvZ2ljVmlld1R5cGUsXHJcblx0XHRcdFx0bGVhZiA9PiBuZXcgU2VtYUxvZ2ljVmlldyhsZWFmKVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGxlYWYgPSB0aGlzLkdldFNlbWFMb2dpY0xlYWYoKTtcclxuXHRcdGlmIChsZWFmICE9IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRsZWFmLnNldFZpZXdTdGF0ZSh7XHJcblx0XHRcdFx0dHlwZTogU2VtYUxvZ2ljVmlld1R5cGUsXHJcblx0XHRcdFx0YWN0aXZlOiBmYWxzZSxcclxuXHRcdFx0fSlcclxuXHRcdFx0YXdhaXQgdGhpcy5zZW1hTG9naWNSZXNldCgpXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIlNlbWFMb2dpYy1MZWFmIG5vdCBjcmVhdGVkXCIpXHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHRoaXMuc2V0Vmlld3MoKVxyXG5cdFx0dGhpcy5oYW5kbGVQaW5nKClcclxuXHRcdHRoaXMuc2VtYUxvZ2ljVXBkYXRlKClcclxuXHRcdHRoaXMubXlTdGF0dXMuc2V0VGV4dCgnU2VtYUxvZ2ljIGlzIG9uJyk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBkZWFjdGl2YXRlQVNQVmlldygpIHtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoQVNQVmlld1R5cGUpO1xyXG5cdFx0dGhpcy5zbENvbW0uYWN0aXZhdGVkQVNQID0gZmFsc2VcclxuXHRcdHRoaXMuc3RhdHVzVHJhbnNmZXIgPSB0cnVlXHJcblx0XHR0aGlzLm15U3RhdHVzLnNldFRleHQoJ0FTUCBpcyBvZmYnKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGRlYWN0aXZhdGVWaWV3KCkge1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShTZW1hTG9naWNWaWV3VHlwZSk7XHJcblx0XHR0aGlzLmFjdGl2YXRlZCA9IGZhbHNlXHJcblx0XHR0aGlzLnNsQ29tbS5zbHZpZXcudW5sb2FkKClcclxuXHRcdHRoaXMubXlTdGF0dXMuc2V0VGV4dCgnU2VtYUxvZ2ljIGlzIG9mZicpO1xyXG5cdH1cclxuXHJcblx0R2V0QXNwTGVhZigpOiBXb3Jrc3BhY2VMZWFmIHwgdW5kZWZpbmVkIHtcclxuXHRcdGxldCBmb3VuZDogYm9vbGVhbiA9IGZhbHNlXHJcblx0XHR2YXIgc2x2OiBXb3Jrc3BhY2VMZWFmIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkXHJcblxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0aWYgKCFmb3VuZCkge1xyXG5cdFx0XHRcdHN3aXRjaCAobGVhZi52aWV3LmdldFZpZXdUeXBlKCkpIHtcclxuXHRcdFx0XHRcdGNhc2UgQVNQVmlld1R5cGU6IHtcclxuXHRcdFx0XHRcdFx0Zm91bmQgPSB0cnVlXHJcblx0XHRcdFx0XHRcdHNsdiA9IGxlYWZcclxuXHRcdFx0XHRcdFx0Ly9yZXR1cm4gc2x2XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0aWYgKCFmb3VuZCkge1xyXG5cdFx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0FsbCkgeyBjb25zb2xlLmxvZygnU3BsaXQnKSB9XHJcblx0XHRcdHNsdiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCdzcGxpdCcpO1xyXG5cdFx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0FsbCkgeyBjb25zb2xlLmxvZyhzbHYpIH1cclxuXHRcdH1cclxuXHRcdHJldHVybiBzbHZcclxuXHR9XHJcblxyXG5cdEdldFNlbWFMb2dpY0xlYWYoKTogV29ya3NwYWNlTGVhZiB8IHVuZGVmaW5lZCB7XHJcblx0XHRsZXQgZm91bmQ6IGJvb2xlYW4gPSBmYWxzZVxyXG5cdFx0dmFyIHNsdjogV29ya3NwYWNlTGVhZiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZFxyXG5cclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdGlmICghZm91bmQpIHtcclxuXHRcdFx0XHRzd2l0Y2ggKGxlYWYudmlldy5nZXRWaWV3VHlwZSgpKSB7XHJcblx0XHRcdFx0XHRjYXNlIFNlbWFMb2dpY1ZpZXdUeXBlOiB7XHJcblx0XHRcdFx0XHRcdGZvdW5kID0gdHJ1ZVxyXG5cdFx0XHRcdFx0XHRzbHYgPSBsZWFmXHJcblx0XHRcdFx0XHRcdC8vcmV0dXJuIHNsdlxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdGlmICghZm91bmQpIHtcclxuXHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9BbGwpIHsgY29uc29sZS5sb2coJ1NwbGl0JykgfVxyXG5cdFx0XHRzbHYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZignc3BsaXQnKTtcclxuXHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9BbGwpIHsgY29uc29sZS5sb2coc2x2KSB9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gc2x2XHJcblx0fVxyXG5cclxuXHJcblx0YXN5bmMgb251bmxvYWQoKSB7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKEFTUFZpZXdUeXBlKTtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoU2VtYUxvZ2ljVmlld1R5cGUpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERlZmF1bHRfcHJvZmlsZSwgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0XHRpZiAodGhpcy5zbENvbW0uc2x2aWV3ICE9IHVuZGVmaW5lZCkgeyB0aGlzLnNsQ29tbS5zbHZpZXcuc2V0TmV3SW5pdGlhbCh0aGlzLnNldHRpbmdzLm15U0xTZXR0aW5nc1t0aGlzLnNldHRpbmdzLm15U2V0dGluZ10ubXlPdXRwdXRGb3JtYXQpIH1cclxuXHRcdHRoaXMudXBkYXRlT3V0c3RhbmRpbmcgPSB0cnVlO1xyXG5cdFx0Ly90aGlzLnNlbWFMb2dpY1BhcnNlKCk7XHJcblx0fVxyXG5cclxuXHRoYW5kbGVQaW5nKCkge1xyXG5cdFx0c2VtYUxvZ2ljUGluZyh0aGlzLnNldHRpbmdzLCB0aGlzLmxhc3RVcGRhdGUpXHJcblx0fVxyXG5cclxuXHRoYW5kbGVVcGRhdGUgPSAodXBkYXRlOiBWaWV3VXBkYXRlKSA9PiB7XHJcblx0XHRpZiAodGhpcy5zdGF0dXNTTCkge1xyXG5cdFx0XHQvLyBUbyBhdm9pZCB0byBtdWNoIHBhcnNpbmcgdHJhZmZpYyBmb3IgdGVzdGluZyB3ZSB0cmllZCB0byBwYXJzZSBpdCBvbmx5IGV2ZXJ5IDUwMCBtcyB3aGVuIHRoZXJlIGlzIGFuIHVwZGF0ZVxyXG5cclxuXHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldiB8fCBEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCkge1xyXG5cdFx0XHRcdGNvbnN0IHRleHQgPSAnVXBkYXRldGltZScgKyAnLycgKyBTdHJpbmcoRGF0ZS5ub3coKSkgKyAnLycgKyBTdHJpbmcodGhpcy5sYXN0VXBkYXRlKSArICcvJyArIFN0cmluZyhEYXRlLm5vdygpIC0gdGhpcy5sYXN0VXBkYXRlKSArICcvJyArIFN0cmluZyh0aGlzLnVwZGF0ZU91dHN0YW5kaW5nKSArICcvJyArIFN0cmluZyh0aGlzLndhaXRpbmdGb3JSZXNwb25zZSlcclxuXHRcdFx0XHRzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCB0ZXh0KVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAodXBkYXRlID09IG51bGwpIHsgfVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRpZiAodXBkYXRlLnZpZXcpIHtcclxuXHRcdFx0XHRcdGlmICghdXBkYXRlLmRvY0NoYW5nZWQgJiYgIXVwZGF0ZS5mb2N1c0NoYW5nZWQpIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0aWYgKHRoaXMuVXBkYXRlUHJvY2Vzc2luZyA9PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0XHRcdC8vdGhpcy51cGRhdGVPdXRzdGFuZGluZyA9IHRydWVcclxuXHRcdFx0XHRcdFx0XHRpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0N1cnJlbnRfRGV2IHx8IERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9BbGwpIHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdTdGFydCBVcGRhdGUgZG9jQ2hhbmdlZCwgZm9jdXNjaGFuZ2VkLCBVcGRQcm9jICAnICsgU3RyaW5nKHVwZGF0ZS5kb2NDaGFuZ2VkKSArIFwiL1wiICsgU3RyaW5nKHVwZGF0ZS5mb2N1c0NoYW5nZWQpICsgXCIvXCIgKyBTdHJpbmcodGhpcy5VcGRhdGVQcm9jZXNzaW5nKSlcclxuXHRcdFx0XHRcdFx0XHR0aGlzLnNlbWFMb2dpY1VwZGF0ZSgpXHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICgoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFVwZGF0ZSA+IHRoaXMuc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2V0dGluZ3MubXlTZXR0aW5nXS5teVVwZGF0ZUludGVydmFsKSAmJiAodGhpcy51cGRhdGVPdXRzdGFuZGluZyA9PSB0cnVlKSAmJiAodGhpcy53YWl0aW5nRm9yUmVzcG9uc2UgPT0gZmFsc2UpKSB7XHJcblx0XHRcdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldiB8fCBEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQWxsKSBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCAnU3RhcnQgVXBkYXRlIFBBUlNJTkcnKVxyXG5cdFx0XHRcdHRoaXMubGFzdFVwZGF0ZSA9IERhdGUubm93KClcclxuXHRcdFx0XHR0aGlzLnNlbWFMb2dpY1VwZGF0ZSgpXHJcblx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdGlmICgoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFVwZGF0ZSA+IHRoaXMuc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2V0dGluZ3MubXlTZXR0aW5nXS5teVVwZGF0ZUludGVydmFsKSAmJiAodGhpcy51cGRhdGVPdXRzdGFuZGluZyA9PSB0cnVlKSAmJiAodGhpcy53YWl0aW5nRm9yUmVzcG9uc2UgPT0gZmFsc2UpKSB7XHJcblx0XHRcdFx0XHRzZW1hTG9naWNQaW5nKHRoaXMuc2V0dGluZ3MsIHRoaXMubGFzdFVwZGF0ZSlcclxuXHRcdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRzZW1hTG9naWNVcGRhdGUoc2V0Vmlldz86IGJvb2xlYW4pIHtcclxuXHJcblx0XHR0aGlzLndhaXRpbmdGb3JSZXNwb25zZSA9IHRydWVcclxuXHRcdHRoaXMuVXBkYXRlUHJvY2Vzc2luZyA9IHRydWVcclxuXHJcblx0XHRpZiAoc2V0VmlldyA9PSB0cnVlIHx8IHNldFZpZXcgPT0gdW5kZWZpbmVkKSB7IHRoaXMuc2V0Vmlld3MoKSB9XHJcblxyXG5cdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DdXJyZW50X0RldiB8fCBEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdTdGFydCBTZW1hTG9naWNVcGRhdGUnKSB9O1xyXG5cclxuXHRcdHRoaXMuc2V0Vmlld3MoKVxyXG5cdFx0bGV0IGFjdGl2ZVZpZXcgPSB0aGlzLmdldEFjdGl2ZVZpZXcoKVxyXG5cdFx0dGhpcy5zZW1hTG9naWNQYXJzZSgpO1xyXG5cclxuXHRcdGlmICghdGhpcy51cGRhdGluZykge1xyXG5cdFx0XHR0aGlzLnVwZGF0aW5nID0gdHJ1ZVxyXG5cdFx0XHRpZiAoYWN0aXZlVmlldyAhPSBudWxsKSB7XHJcblx0XHRcdFx0Y29uc3QgZWRpdG9ydGV4dCA9IGFjdGl2ZVZpZXcuZWRpdG9yLmdldFJhbmdlKHsgbGluZTogMCwgY2g6IDAgfSwgeyBsaW5lOiBhY3RpdmVWaWV3LmVkaXRvci5sYXN0TGluZSgpLCBjaDogYWN0aXZlVmlldy5lZGl0b3IubGFzdExpbmUubGVuZ3RoIH0pXHJcblx0XHRcdFx0Y29uc3QgYWRkQ2hhcjogc3RyaW5nID0gXCIgXCJcclxuXHRcdFx0XHRsZXQgY3Vyc29yID0gYWN0aXZlVmlldy5lZGl0b3IuZ2V0Q3Vyc29yKClcclxuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGFjdGl2ZVZpZXcuZWRpdG9yLmxhc3RMaW5lKCk7IGkrKykge1xyXG5cdFx0XHRcdFx0aWYgKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIHNlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydC5sZW5ndGgpID09IHNlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCkge1xyXG5cdFx0XHRcdFx0XHRpZiAoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5sZW5ndGggLSAxLCBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLmxlbmd0aCkgPT0gc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX2VuZCkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIHRlbXBvcmFybHkgYWRkIGEgY2hhciBmb3IgZm9yY2luZyBhbiB1cGRhdGUgb2YgaHRtbC12aWV3IFxyXG5cdFx0XHRcdFx0XHRcdGFjdGl2ZVZpZXcuZWRpdG9yLnNldExpbmUoaSwgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoMCwgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5sZW5ndGgpICsgYWRkQ2hhcilcclxuXHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkubGVuZ3RoIC0gMSwgYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5sZW5ndGgpID09IGFkZENoYXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdC8vIHRlbXBvcmFybHkgYWRkIGEgY2hhciBmb3IgZm9yY2luZyBhbiB1cGRhdGUgb2YgaHRtbC12aWV3IFxyXG5cdFx0XHRcdFx0XHRcdFx0YWN0aXZlVmlldy5lZGl0b3Iuc2V0TGluZShpLCBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZygwLCBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLmxlbmd0aCAtIDEpKVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBiYWNrIHRvIGN1cnNvclxyXG5cdFx0XHRcdGFjdGl2ZVZpZXcuZWRpdG9yLnNldEN1cnNvcihjdXJzb3IpXHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy51cGRhdGluZyA9IGZhbHNlXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5VcGRhdGVQcm9jZXNzaW5nID0gZmFsc2VcclxuXHRcdHRoaXMud2FpdGluZ0ZvclJlc3BvbnNlID0gZmFsc2VcclxuXHR9XHJcblxyXG5cclxuXHRnZXRTZW1hTG9naWNUZXh0KCk6IHN0cmluZyB7XHJcblx0XHRpZiAodGhpcy5zbENvbW0uc2x2aWV3LmNvbnRlbnRFbC50ZXh0Q29udGVudCA9PSBudWxsKSB7XHJcblx0XHRcdHJldHVybiBcIlwiXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zbENvbW0uc2x2aWV3LmdldENvbnRlbnQoKVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgc2VtYUxvZ2ljUmVzZXQoKSB7XHJcblx0XHQvLyBsZXQgdkFQSV9VUkxfUmVzZXQgPSBBUElfRGVmYXVsdHMuQmFzZV9VUkwgKyBcIjpcIiArIEFQSV9EZWZhdWx0cy5Qb3J0ICsgQVBJX0RlZmF1bHRzLnJlc2V0ICsgXCI/c2lkPVwiICsgQVBJX0RlZmF1bHRzLlNJRDtcclxuXHRcdGxldCB2QVBJX1VSTF9SZXNldCA9IGdldEhvc3RQb3J0KHRoaXMuc2V0dGluZ3MpICsgQVBJX0RlZmF1bHRzLnJlc2V0ICsgXCI/c2lkPVwiICsgdGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15U0lEO1xyXG5cclxuXHRcdGxldCBvcHRpb25zUmVzZXQ6IFJlcXVlc3RVcmxQYXJhbVxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzICYmIHRoaXMuc2V0dGluZ3MubXlTTFNldHRpbmdzW3RoaXMuc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZXIgIT0gJycpIHtcclxuXHRcdFx0b3B0aW9uc1Jlc2V0ID0ge1xyXG5cdFx0XHRcdHVybDogdkFQSV9VUkxfUmVzZXQsXHJcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRcdFx0aGVhZGVyczoge1xyXG5cdFx0XHRcdFx0XCJjb250ZW50LXR5cGVcIjogXCJ0ZXh0L3BsYWluXCIsXHJcblx0XHRcdFx0XHRcIkF1dGhvcml6YXRpb25cIjogXCJCYXNpYyBcIiArIGJ0b2EodGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15VXNlciArIFwiOlwiICsgdGhpcy5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zZXR0aW5ncy5teVNldHRpbmddLm15UGFzc3dvcmQpXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0b3B0aW9uc1Jlc2V0ID0ge1xyXG5cdFx0XHRcdHVybDogdkFQSV9VUkxfUmVzZXQsXHJcblx0XHRcdFx0bWV0aG9kOiAnUE9TVCcsXHJcblx0XHRcdFx0aGVhZGVyczoge1xyXG5cdFx0XHRcdFx0XCJjb250ZW50LXR5cGVcIjogXCJ0ZXh0L3BsYWluXCJcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgb3B0aW9uc1Jlc2V0KSB9XHJcblx0XHR0cnkge1xyXG5cdFx0XHRjb25zdCByZXNwb25zZVJlc2V0ID0gYXdhaXQgcmVxdWVzdFVybChvcHRpb25zUmVzZXQpXHJcblx0XHRcdGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUpIHsgY29uc29sZS5sb2codGhpcy5zbENvbW0uc2x2aWV3LCBgU2VtYUxvZ2ljOiBSZXNldCB3aXRoIGh0dHAtc3RhdHVzICR7cmVzcG9uc2VSZXNldC5zdGF0dXMudG9TdHJpbmcoKX1gKSB9O1xyXG5cdFx0fVxyXG5cdFx0Y2F0Y2ggKGUpIHtcclxuXHRcdFx0Y29uc29sZS5sb2codGhpcy5zbENvbW0uc2x2aWV3LCBgQ2F0Y2hlcnJvciBieSByZXNldCAke3ZBUElfVVJMX1Jlc2V0fWApXHJcblx0XHRcdGNvbnNvbGUubG9nKHRoaXMuc2xDb21tLnNsdmlldywgZS50b1N0cmluZygpKVxyXG5cdFx0fVxyXG5cdH1cclxuXHJcbn1cclxuXHJcbiIsICJpbXBvcnQgeyBEcm9wZG93bkNvbXBvbmVudCwgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIEJ1dHRvbkNvbXBvbmVudCwgUmVxdWVzdFVybFBhcmFtLCByZXF1ZXN0VXJsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IHNsVGV4dHMsIHJ1bGVzZXR0eXBlc0NvbW1hbmRzLCByc3R5cGVzX1NlbWFsb2dpYywgcnN0eXBlc19QaWN0dXJlLCByc3R5cGVzX0FTUCwgcnN0eXBlc19TZW1hbnRpY1RyZWUsIERlYnVnTGV2TWFwIH0gZnJvbSBcIi4vY29uc3RcIlxyXG5pbXBvcnQgeyBTZW1hTG9naWNQbHVnaW5Db21tLCBEZWJ1Z0xldmVsLCBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyB9IGZyb20gXCIuLi9tYWluXCJcclxuaW1wb3J0IHsgc2xjb25zb2xlbG9nIH0gZnJvbSAnLi91dGlscydcclxuaW1wb3J0IHsgVmlld1V0aWxzIH0gZnJvbSBcIi4vdmlld191dGlsc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IFNlbWFMb2dpY1ZpZXdUeXBlID0gXCJTZW1hTG9naWNTZXJ2aWNlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2VtYUxvZ2ljVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcclxuICB2aWV3X3V0aWxzOiBWaWV3VXRpbHNcclxuICBteUFjdGlvbjogSFRNTEVsZW1lbnRcclxuICBkcm9wZG93bkJ1dHRvbjogRHJvcGRvd25Db21wb25lbnRcclxuICBjb3B5QnV0dG9uOiBCdXR0b25Db21wb25lbnRcclxuICBkZWJ1Z0J1dHRvbjogQnV0dG9uQ29tcG9uZW50XHJcbiAgZGVidWdDb250ZW50OiBzdHJpbmdbXVxyXG4gIHpvb21JbjogQnV0dG9uQ29tcG9uZW50XHJcbiAgem9vbVJhdGlvOiBCdXR0b25Db21wb25lbnRcclxuICB6b29tT3V0OiBCdXR0b25Db21wb25lbnRcclxuICBzbENvbW06IFNlbWFMb2dpY1BsdWdpbkNvbW1cclxuICBzY2FsZVJhdGlvOiBudW1iZXJcclxuICBjdXJyUmVzdWx0OiBzdHJpbmdcclxuICBib2R5dGV4dDogc3RyaW5nXHJcbiAgYXBpVVJMOiBzdHJpbmdcclxuICBkaWFsZWN0SUQ6IHN0cmluZ1xyXG5cclxuICBwdWJsaWMgZGVidWdJbmxpbmU6IGJvb2xlYW5cclxuXHJcbiAgcHVibGljIGdldE91dFB1dEZvcm1hdCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuZHJvcGRvd25CdXR0b24uZ2V0VmFsdWUoKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIGdldERlYnVnSW5saW5lKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuZGVidWdJbmxpbmVcclxuICB9XHJcblxyXG4gIHB1YmxpYyBnZXRDb250ZW50KCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy52aWV3X3V0aWxzLmdldENvbnRlbnQodGhpcy5jb250ZW50RWwsIHRoaXMuZ2V0T3V0UHV0Rm9ybWF0KCkpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXBwZW5kRGVidWdDb250ZW50KHRleHQ6IHN0cmluZykge1xyXG4gICAgdGhpcy5kZWJ1Z0NvbnRlbnQucHVzaCh0ZXh0KVxyXG4gIH1cclxuXHJcbiAgY29weVRvQ2IoKSB7XHJcbiAgICBjb25zdCBibG9iY29udGVudFRleHQgPSAoY29udDogc3RyaW5nKSA9PiBgJHtjb250fWBcclxuXHJcbiAgICBsZXQgZGF0YSA9XHJcbiAgICAgIG5ldyBDbGlwYm9hcmRJdGVtKHtcclxuICAgICAgICBcInRleHQvcGxhaW5cIjogbmV3IEJsb2IoW2Jsb2Jjb250ZW50VGV4dCh0aGlzLmN1cnJSZXN1bHQpXSwge1xyXG4gICAgICAgICAgdHlwZTogXCJ0ZXh0L3BsYWluXCJcclxuICAgICAgICB9KVxyXG4gICAgICB9KVxyXG5cclxuICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGUoW2RhdGFdKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgYWxlcnQoXCJzdWNjZXNzZnVsbHkgY29waWVkXCIpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgIGFsZXJ0KFwic29tZXRoaW5nIHdlbnQgd3JvbmdcIik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZikge1xyXG4gICAgc3VwZXIobGVhZik7XHJcbiAgICB0aGlzLnNjYWxlUmF0aW8gPSAxMDBcclxuICAgIHRoaXMudmlld191dGlscyA9IG5ldyBWaWV3VXRpbHNcclxuICAgIHRoaXMuZGVidWdJbmxpbmUgPSBmYWxzZVxyXG4gICAgdGhpcy5kZWJ1Z0NvbnRlbnQgPSBbXVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldENvbW0oY29tbTogU2VtYUxvZ2ljUGx1Z2luQ29tbSkge1xyXG4gICAgaWYgKHRoaXMuc2xDb21tICE9IGNvbW0pIHtcclxuICAgICAgdGhpcy5zbENvbW0gPSBjb21tXHJcbiAgICAgIC8vdGhpcy5zbENvbW0uc2V0U2xWaWV3KHRoaXMpXHJcbiAgICAgIHRoaXMuc2V0TmV3SW5pdGlhbCh0aGlzLnNsQ29tbS5zbFBsdWdpbi5zZXR0aW5ncy5teVNMU2V0dGluZ3NbdGhpcy5zbENvbW0uc2xQbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nXS5teU91dHB1dEZvcm1hdClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGdldFZpZXdUeXBlKCkge1xyXG4gICAgcmV0dXJuIFNlbWFMb2dpY1ZpZXdUeXBlO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlzcGxheVRleHQoKSB7XHJcbiAgICByZXR1cm4gU2VtYUxvZ2ljVmlld1R5cGU7XHJcbiAgfVxyXG5cclxuICBvbmxvYWQoKTogdm9pZCB7XHJcbiAgICB0aGlzLm5hdmlnYXRpb24gPSB0cnVlXHJcbiAgICB0aGlzLmNvbnRlbnRFbC5jb250ZW50RWRpdGFibGUgPSAndHJ1ZSdcclxuICAgIHRoaXMuZGVidWdJbmxpbmUgPT0gZmFsc2VcclxuICB9XHJcblxyXG4gIGdldERlYnVnQnV0dG9uVGV4dCgpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRoaXMuZGVidWdJbmxpbmUgPT0gdHJ1ZSkge1xyXG4gICAgICByZXR1cm4gJ0lubGluZURlYnVnIGlzIG9uJ1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuICdJbmxpbmVEZWJ1ZyBpcyBvZmYnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjcmVhdGVEcm9wRG93bkJ1dHRvbkZvck91dFB1dEZvcm1hdChjb250YWluZXI6IEhUTUxFbGVtZW50LCBkcm9wRG93blZhbHVlOiBzdHJpbmcpOiBIVE1MRWxlbWVudCB7XHJcbiAgICB0aGlzLmRyb3Bkb3duQnV0dG9uID0gbmV3IERyb3Bkb3duQ29tcG9uZW50KGNvbnRhaW5lcilcclxuICAgICAgLmFkZE9wdGlvbihydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX1NlbWFsb2dpY11bMV0sIHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfU2VtYWxvZ2ljXVswXSlcclxuICAgICAgLmFkZE9wdGlvbihydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX0FTUF1bMV0sIHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfQVNQXVswXSlcclxuICAgICAgLmFkZE9wdGlvbihydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX1BpY3R1cmVdWzFdLCBydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX1BpY3R1cmVdWzBdKVxyXG4gICAgICAuYWRkT3B0aW9uKHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfU2VtYW50aWNUcmVlXVsxXSwgcnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19TZW1hbnRpY1RyZWVdWzBdKVxyXG4gICAgICAuc2V0VmFsdWUoZHJvcERvd25WYWx1ZSlcclxuICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgJ1NldCBWaWV3T3V0cHV0Rm9ybWF0OiAnICsgdmFsdWUpOyB9XHJcbiAgICAgICAgdGhpcy5zbENvbW0uc2xQbHVnaW4udXBkYXRlT3V0c3RhbmRpbmcgPSB0cnVlXHJcbiAgICAgICAgZHJvcERvd25WYWx1ZSA9IHZhbHVlXHJcbiAgICAgICAgdGhpcy5kcm9wZG93bkJ1dHRvbi5zZXRWYWx1ZSh2YWx1ZSlcclxuICAgICAgICB0aGlzLmdldFNlbWFMb2dpY1BhcnNlKHRoaXMuc2xDb21tLnNsUGx1Z2luLnNldHRpbmdzLCB0aGlzLmFwaVVSTCwgdGhpcy5kaWFsZWN0SUQsIHRoaXMuYm9keXRleHQsIGZhbHNlLCB2YWx1ZSlcclxuICAgICAgICAvL3RoaXMudXBkYXRlVmlldygpXHJcbiAgICAgIH0pXHJcbiAgICByZXR1cm4gY29udGFpbmVyXHJcbiAgfVxyXG4gIGNyZWF0ZUNvcHlUb0NsaXBib2FyZEJ1dHRvbihjb250YWluZXI6IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQge1xyXG4gICAgdGhpcy5jb3B5QnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChjb250YWluZXIpXHJcbiAgICAgIC5zZXRCdXR0b25UZXh0KCdDb3B5IHRvIENsaXBib2FyZCcpXHJcbiAgICAgIC5vbkNsaWNrKChtb3VzZV9ldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY29weVRvQ2IoKVxyXG4gICAgICB9KVxyXG4gICAgcmV0dXJuIGNvbnRhaW5lclxyXG4gIH1cclxuICBjcmVhdGVEZWJ1Z0J1dHRvbihjb250YWluZXI6IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQge1xyXG4gICAgaWYgKERlYnVnTGV2ZWwgIT0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9PZmYpIHtcclxuICAgICAgdGhpcy5kZWJ1Z0J1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQoY29udGFpbmVyKVxyXG4gICAgICAgIC5zZXRCdXR0b25UZXh0KHRoaXMuZ2V0RGVidWdCdXR0b25UZXh0KCkpXHJcbiAgICAgICAgLm9uQ2xpY2soKG1vdXNlX2V2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICBpZiAodGhpcy5kZWJ1Z0lubGluZSA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGVidWdJbmxpbmUgPSBmYWxzZVxyXG4gICAgICAgICAgICB0aGlzLmRlYnVnQ29udGVudCA9IFtdXHJcbiAgICAgICAgICB9IGVsc2UgeyB0aGlzLmRlYnVnSW5saW5lID0gdHJ1ZSB9XHJcbiAgICAgICAgICBpZiAodGhpcy5zbENvbW0uc2x2aWV3ICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0luZm9ybWF0aXZlKSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdTZXQgSW5saW5lRGVidWdnaW5nOiAnICsgdGhpcy5kZWJ1Z0lubGluZSk7IH1cclxuICAgICAgICAgICAgLy90aGlzLnNldE5ld0luaXRpYWwoZHJvcERvd25WYWx1ZSlcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHRoaXMudXBkYXRlVmlldygpXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiBjb250YWluZXJcclxuICB9XHJcblxyXG4gIGNyZWF0ZVNjYWxlQnV0dG9ucyhjb250YWluZXI6IEhUTUxFbGVtZW50KTogSFRNTEVsZW1lbnQge1xyXG4gICAgLy8gWm9vbSBpblxyXG4gICAgdGhpcy56b29tSW4gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lcilcclxuICAgICAgLnNldEJ1dHRvblRleHQoJy0nKVxyXG4gICAgICAub25DbGljaygobW91c2VfZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLnNjYWxlUmF0aW8gPSB0aGlzLnNjYWxlUmF0aW8gLyAyXHJcbiAgICAgICAgaWYgKHRoaXMuem9vbVJhdGlvICE9IG51bGwpIHsgdGhpcy56b29tUmF0aW8uc2V0QnV0dG9uVGV4dChTdHJpbmcodGhpcy5zY2FsZVJhdGlvKSkgfVxyXG4gICAgICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgJ1NldCBTY2FsZVJhdGlvIHRvOiAnICsgdGhpcy5zY2FsZVJhdGlvKTsgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlVmlldygpXHJcbiAgICAgIH0pXHJcblxyXG4gICAgdGhpcy56b29tUmF0aW8gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lcilcclxuICAgICAgLnNldEJ1dHRvblRleHQoU3RyaW5nKHRoaXMuc2NhbGVSYXRpbykpXHJcbiAgICAgIC5vbkNsaWNrKChtb3VzZV9ldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgJ1NjYWxlUmF0aW8gOj0gJyArIHRoaXMuc2NhbGVSYXRpbyk7IH1cclxuICAgICAgfSlcclxuXHJcbiAgICB0aGlzLnpvb21PdXQgPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRhaW5lcilcclxuICAgICAgLnNldEJ1dHRvblRleHQoJysnKVxyXG4gICAgICAub25DbGljaygobW91c2VfZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICB0aGlzLnNjYWxlUmF0aW8gPSB0aGlzLnNjYWxlUmF0aW8gKiAyXHJcbiAgICAgICAgdGhpcy56b29tUmF0aW8uc2V0QnV0dG9uVGV4dChTdHJpbmcodGhpcy5zY2FsZVJhdGlvKSlcclxuICAgICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0luZm9ybWF0aXZlKSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdTZXQgU2NhbGVSYXRpbyB0bzogJyArIHRoaXMuc2NhbGVSYXRpbyk7IH1cclxuICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKVxyXG4gICAgICB9KVxyXG5cclxuICAgIHJldHVybiBjb250YWluZXJcclxuICB9XHJcblxyXG4gIGNoZWNrQ29udGFpbmVyQ29udGVudCgpOiBib29sZWFuIHtcclxuICAgIGlmICh0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICBpZiAodGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXS50ZXh0Q29udGVudCA9PSBzbFRleHRzWydIZWFkZXJTTCddKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVDb250YWluZXJDb250ZW50KCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuY29udGFpbmVyRWwuY2hpbGRyZW4gIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5jb250YWluZXJFbC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRhaW5lckVsLmNoaWxkcmVuW2ldLm5vZGVOYW1lID09IFwicFwiKSB7XHJcbiAgICAgICAgICB3aGlsZSAodGhpcy5jb250YWluZXJFbC5jaGlsZHJlbltpXSAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jaGlsZHJlbltpXS5lbXB0eVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcblxyXG4gIHB1YmxpYyBzZXROZXdJbml0aWFsKGRyb3BEb3duVmFsdWU6IHN0cmluZykge1xyXG4gICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsXHJcbiAgICBpZiAoIXRoaXMuY2hlY2tDb250YWluZXJDb250ZW50KCkpIHtcclxuICAgICAgY29udGFpbmVyLmVtcHR5KClcclxuICAgICAgLy9jb250YWluZXIuY29udGVudEVkaXRhYmxlID0gJ3RydWUnXHJcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogc2xUZXh0c1snSGVhZGVyU0wnXSB9KTtcclxuXHJcbiAgICAgIGNvbnRhaW5lciA9IHRoaXMuY3JlYXRlRHJvcERvd25CdXR0b25Gb3JPdXRQdXRGb3JtYXQoY29udGFpbmVyLCBkcm9wRG93blZhbHVlKVxyXG4gICAgICBjb250YWluZXIgPSB0aGlzLmNyZWF0ZUNvcHlUb0NsaXBib2FyZEJ1dHRvbihjb250YWluZXIpXHJcbiAgICAgIGNvbnRhaW5lciA9IHRoaXMuY3JlYXRlRGVidWdCdXR0b24oY29udGFpbmVyKVxyXG4gICAgICBpZiAoZHJvcERvd25WYWx1ZSA9PSBydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX1BpY3R1cmVdWzFdKSB7XHJcbiAgICAgICAgY29udGFpbmVyID0gdGhpcy5jcmVhdGVTY2FsZUJ1dHRvbnMoY29udGFpbmVyKVxyXG4gICAgICB9XHJcbiAgICAgIGNvbnRhaW5lci5jcmVhdGVFbChcInBcIilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZGVsZXRlQ29udGFpbmVyQ29udGVudCgpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICB0aGlzLnNldE5ld0luaXRpYWwocnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19TZW1hbG9naWNdWzFdKVxyXG4gICAgLy8gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXS5hcHBlbmRUZXh0KFwibGV0J3MgYmVnaW5cIik7XHJcbiAgfVxyXG5cclxuICBhc3luYyBvbkNsb3NlKCkge1xyXG4gICAgLy8gTm90aGluZyB0byBjbGVhbiB1cC5cclxuICB9XHJcblxyXG4gIHNob3dFcnJvcihmcmFnbWVudDogRG9jdW1lbnRGcmFnbWVudCkge1xyXG4gICAgLy8gICB0aGlzLnNldEluaXRpYWwocnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19TZW1hbG9naWNdWzFdKVxyXG4gICAgdGhpcy5jb250ZW50RWwuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpXHJcbiAgfVxyXG4gIG9udW5sb2FkKCk6IHZvaWQge1xyXG5cclxuICAgIGlmICh0aGlzLnNsQ29tbS5zbFBsdWdpbiAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgdGhpcy5zbENvbW0uc2xQbHVnaW4uYWN0aXZhdGVkID0gZmFsc2VcclxuICAgICAgdGhpcy5zbENvbW0uc2xQbHVnaW4ubXlTdGF0dXMuc2V0VGV4dCgnU2VtYUxvZ2ljIGlzIG9mZicpO1xyXG4gICAgfVxyXG5cclxuICB9XHJcblxyXG4gIGNyZWF0ZVNlbWFMb2dpY1JlcXVlc3RCb2R5KGRpYWxlY3RJRDogc3RyaW5nLCBib2R5dGV4dDogc3RyaW5nLCBvdXRQdXRGb3JtYXQ6IHN0cmluZyk6IGFueSB7XHJcbiAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCAnQ29udGV4dDogJyArIGRpYWxlY3RJRCArICcgQm9keXRleHQ6ICcgKyBib2R5dGV4dCkgfVxyXG4gICAgbGV0IHNlbWFMb2dpY0pzb25SZXF1ZXN0Qm9keSA9IHtcclxuICAgICAgXCJ0ZXh0XCI6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcInRleHRJRFwiOiBcIlBhcnNpbmdPblRoZUZseVwiLFxyXG4gICAgICAgICAgXCJkaWFsZWN0SURcIjogZGlhbGVjdElELFxyXG4gICAgICAgICAgXCJydWxlc1wiOiBib2R5dGV4dFxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgXCJmaWx0ZXJcIjoge30sXHJcbiAgICAgIFwicGVyc2lzdGVuY3lcIjogZmFsc2UsXHJcbiAgICAgIFwicnVsZXNldHR5cGVcIjogb3V0UHV0Rm9ybWF0XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VtYUxvZ2ljSnNvblJlcXVlc3RCb2R5XHJcbiAgfVxyXG5cclxuICBjcmVhdGVTZW1hTG9naWNSZXF1ZXN0KHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncywgdkFQSV9VUkw6IHN0cmluZywgc2VtYUxvZ2ljSnNvblJlcXVlc3RCb2R5OiBhbnkpOiBSZXF1ZXN0VXJsUGFyYW0ge1xyXG4gICAgbGV0IHJlcXVlc3Q6IFJlcXVlc3RVcmxQYXJhbSA9IHtcclxuICAgICAgdXJsOiB2QVBJX1VSTCxcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzZW1hTG9naWNKc29uUmVxdWVzdEJvZHkpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15VXNlSHR0cHMgJiYgc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlVc2VyICE9ICcnKSB7XHJcbiAgICAgIHJlcXVlc3QgPSB7XHJcbiAgICAgICAgdXJsOiB2QVBJX1VSTCxcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJhc2ljIFwiICsgYnRvYShzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZXIgKyBcIjpcIiArIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15UGFzc3dvcmQpXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzZW1hTG9naWNKc29uUmVxdWVzdEJvZHkpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7XHJcbiAgICAgIHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsICdQYXJzaW5nc3N0cmluZycpXHJcbiAgICAgIHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIHJlcXVlc3QpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVxdWVzdFxyXG4gIH1cclxuXHJcbiAgZ2V0UmVxdWVzdEVtYmVkKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZiAodGhpcy5nZXRPdXRQdXRGb3JtYXQoKSA9PSBydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX1BpY3R1cmVdWzFdKSB7XHJcbiAgICAgIC8vIFpvb20gZm9yIFBpY3R1cmVcclxuICAgICAgLy8gdHJ5IHRvIGdldCBvcmlnaW5hbCB2aWV3Ym94IHNpemVcclxuICAgICAgbGV0IHZpZXdCb3hTdHJpbmc6IHN0cmluZ1xyXG4gICAgICBjb25zdCBiZWdpblZCID0gY29udGVudC5pbmRleE9mKCd2aWV3Qm94JylcclxuICAgICAgaWYgKGJlZ2luVkIgPiAwKSB7XHJcbiAgICAgICAgY29uc3QgZW5kVkIgPSBjb250ZW50LmluZGV4T2YoJ1xcXCInLCBjb250ZW50LmluZGV4T2YoJ1xcXCInLCBiZWdpblZCKSArIDEpXHJcbiAgICAgICAgdmlld0JveFN0cmluZyA9IGNvbnRlbnQuc3Vic3RyaW5nKGJlZ2luVkIsIGVuZFZCICsgMSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2aWV3Qm94U3RyaW5nID0gJ3ZpZXdCb3ggPSBcIjAgMCAxNiA5XCInXHJcbiAgICAgIH1cclxuICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShcIjxib2R5PlwiLCBcIlwiKVxyXG4gICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKFwiPC9ib2R5PlwiLCBcIlwiKVxyXG5cclxuICAgICAgbGV0IGhlYWRlcjogc3RyaW5nXHJcbiAgICAgIGhlYWRlciA9ICc8c3ZnICAnICsgdmlld0JveFN0cmluZyArICcgd2lkdGggPSBcIicgKyBTdHJpbmcodGhpcy5zY2FsZVJhdGlvKSArICclXCIgeG1sbnMgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgPlxcbidcclxuICAgICAgaGVhZGVyID0gaGVhZGVyICsgY29udGVudFxyXG4gICAgICBoZWFkZXIgPSBoZWFkZXIgKyAnPC9zdmc+J1xyXG4gICAgICByZXR1cm4gaGVhZGVyXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gY29udGVudFxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0Q3VyclJlc3VsdCgpOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVxdWVzdEVtYmVkKHRoaXMuY3VyclJlc3VsdClcclxuICB9XHJcblxyXG4gIGdldEN1cnJIVE1MKCk6IHZvaWQge1xyXG4gICAgbGV0IHJlc3BvbnNlQ29udGVudCA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnKTtcclxuXHJcbiAgICBpZiAodGhpcy5kZWJ1Z0lubGluZSA9PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMuZGVidWdDb250ZW50LmZvckVhY2godmFsdWUgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRleHRsaW5lID0gcmVzcG9uc2VDb250ZW50LmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IHZhbHVlICsgXCJcXG5cIiB9KVxyXG4gICAgICAgIHRleHRsaW5lLnN0eWxlLmNzc1RleHQgPSAnd2hpdGUtc3BhY2U6IHByZTsnIC8vOyB3aGl0ZS1zcGFjZTogcHJlLWxpbmU7J1xyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMuZ2V0T3V0UHV0Rm9ybWF0KCkgPT0gcnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19BU1BdWzFdKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdHRleHRhcnJheSA9IHRoaXMuZ2V0Q3VyclJlc3VsdCgpLnNwbGl0KCdcXG4nKVxyXG4gICAgICAgIHJlc3VsdHRleHRhcnJheS5mb3JFYWNoKHZhbHVlID0+IHtcclxuICAgICAgICAgIGNvbnN0IHRleHRsaW5lID0gcmVzcG9uc2VDb250ZW50LmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IHZhbHVlICsgXCJcXG5cIiB9KVxyXG4gICAgICAgICAgdGV4dGxpbmUuc3R5bGUuY3NzVGV4dCA9ICd3aGl0ZS1zcGFjZTogcHJlOycgLy87IHdoaXRlLXNwYWNlOiBwcmUtbGluZTsnXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXNwb25zZUNvbnRlbnQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCIgXCIgfSlcclxuICAgICAgICBsZXQgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgLy8gQWRkIHNvbWUgSFRNTCBjb250ZW50IHRvIHRoZSBkaXYgXHJcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IHRoaXMuZ2V0Q3VyclJlc3VsdCgpO1xyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgZGl2IHRvIHRoZSBkb2N1bWVudCBib2R5XHJcbiAgICAgICAgcmVzcG9uc2VDb250ZW50LmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vcmV0dXJuIHJlc3BvbnNlQ29udGVudFxyXG4gIH1cclxuXHJcbiAgdXBkYXRlVmlldygpOiB2b2lkIHtcclxuICAgIHRoaXMuc2V0TmV3SW5pdGlhbCh0aGlzLmdldE91dFB1dEZvcm1hdCgpKVxyXG4gICAgdGhpcy5nZXRDdXJySFRNTCgpXHJcbiAgfVxyXG5cclxuICBwdWJsaWMgYXN5bmMgZ2V0U2VtYUxvZ2ljUGFyc2Uoc2V0dGluZ3M6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzLCB2QVBJX1VSTDogc3RyaW5nLCBkaWFsZWN0SUQ6IHN0cmluZywgYm9keXRleHQ6IHN0cmluZywgcGFyc2VPblRoZUZseTogYm9vbGVhbiwgcGFyc2luZ0Zvcm1hdD86IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICB0aGlzLmJvZHl0ZXh0ID0gYm9keXRleHRcclxuICAgIHRoaXMuYXBpVVJMID0gdkFQSV9VUkxcclxuICAgIHRoaXMuZGlhbGVjdElEID0gZGlhbGVjdElEXHJcbiAgICBsZXQgb3V0UHV0Rm9ybWF0OiBzdHJpbmdcclxuICAgIGlmIChwYXJzaW5nRm9ybWF0ICE9PSB1bmRlZmluZWQpIHsgb3V0UHV0Rm9ybWF0ID0gcGFyc2luZ0Zvcm1hdCB9IGVsc2UgeyBvdXRQdXRGb3JtYXQgPSB0aGlzLmdldE91dFB1dEZvcm1hdCgpIH1cclxuICAgIGxldCBzZW1hTG9naWNKc29uUmVxdWVzdEJvZHkgPSB0aGlzLmNyZWF0ZVNlbWFMb2dpY1JlcXVlc3RCb2R5KGRpYWxlY3RJRCwgYm9keXRleHQsIG91dFB1dEZvcm1hdClcclxuICAgIGxldCBzZW1hTG9naWNSZXF1ZXN0ID0gdGhpcy5jcmVhdGVTZW1hTG9naWNSZXF1ZXN0KHNldHRpbmdzLCB2QVBJX1VSTCwgc2VtYUxvZ2ljSnNvblJlcXVlc3RCb2R5KVxyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybChzZW1hTG9naWNSZXF1ZXN0KVxyXG5cclxuICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoKSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIFwiU2VtYUxvZ2ljOiBQYXJzZSB3aXRoIGh0dHAtc3RhdHVzIFwiICsgcmVzcG9uc2Uuc3RhdHVzLnRvU3RyaW5nKCkpIH07XHJcbiAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgdmFyIHJlc3VsdGh0dHAgPSByZXNwb25zZS50ZXh0O1xyXG4gICAgICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IHNsY29uc29sZWxvZyh0aGlzLnNsQ29tbS5zbHZpZXcsIGBQYXJzZXJlc3VsdDoke3Jlc3VsdGh0dHB9YCkgfVxyXG4gICAgICAgIGlmICgodGhpcy5kZWJ1Z0lubGluZSA9PSBmYWxzZSkgJiYgKHBhcnNlT25UaGVGbHkgPT0gZmFsc2UpKSB7XHJcbiAgICAgICAgICB0aGlzLmN1cnJSZXN1bHQgPSByZXN1bHRodHRwXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghcGFyc2VPblRoZUZseSkge1xyXG4gICAgICAgICAgdGhpcy51cGRhdGVWaWV3KClcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICh0aGlzLnNsQ29tbS5zbGFzcHZpZXcgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgLy90aGlzLnNsQ29tbS5zbGFzcHZpZXcuYXNwUGFyc2UodGhpcy5zbENvbW0sIHNldHRpbmdzLCB0aGlzLmdldFNlbWFMb2dpY1RleHQoKSlcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICByZXNvbHZlKHJlc3VsdGh0dHApO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCkgeyBzbGNvbnNvbGVsb2codGhpcy5zbENvbW0uc2x2aWV3LCBgQ2F0Y2hlcnJvciBvZiByZW1vdmluZyBjb250ZXh0ICR7dkFQSV9VUkx9YCkgfVxyXG4gICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0hpZ2gpIHsgc2xjb25zb2xlbG9nKHRoaXMuc2xDb21tLnNsdmlldywgZS50b1N0cmluZygpKSB9XHJcbiAgICAgIGxldCB0ZXh0ID0gbmV3IERvY3VtZW50RnJhZ21lbnQoKVxyXG4gICAgICB0ZXh0LmNyZWF0ZUVsKFwicFwiKVxyXG4gICAgICBsZXQgdGV4dGZyYWdtZW50ID0gKG5ldyBSYW5nZSgpKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoZS50b1N0cmluZygpKTtcclxuICAgICAgdGV4dC5hcHBlbmRDaGlsZCh0ZXh0ZnJhZ21lbnQpXHJcbiAgICAgIHRleHQuY3JlYXRlRWwoXCJwXCIpXHJcbiAgICAgIHRleHRmcmFnbWVudCA9IChuZXcgUmFuZ2UoKSkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KFwiU2VlIGZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3ItY29kZSBvZiBodHRwOiBodHRwczovL2RlLndpa2lwZWRpYS5vcmcvd2lraS9IVFRQLVN0YXR1c2NvZGUgXCIpO1xyXG4gICAgICB0ZXh0LmFwcGVuZCh0ZXh0ZnJhZ21lbnQpXHJcbiAgICAgIHRleHQuY3JlYXRlRWwoXCJwXCIpXHJcbiAgICAgIHRleHRmcmFnbWVudCA9IChuZXcgUmFuZ2UoKSkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHNlbWFMb2dpY1JlcXVlc3QudXJsKTtcclxuICAgICAgdGV4dC5hcHBlbmQodGV4dGZyYWdtZW50KVxyXG4gICAgICB0ZXh0LmNyZWF0ZUVsKFwicFwiKVxyXG4gICAgICB0ZXh0ZnJhZ21lbnQgPSAobmV3IFJhbmdlKCkpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChTdHJpbmcoc2VtYUxvZ2ljUmVxdWVzdC5ib2R5KSk7XHJcbiAgICAgIHRleHQuYXBwZW5kKHRleHRmcmFnbWVudClcclxuICAgICAgdGhpcy5zaG93RXJyb3IodGV4dClcclxuICAgICAgdGhyb3cgZVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG4iLCAiLy8gVG9EbyAoUHJpbyAzKTogR2V0dGluZyBEZWZhdWx0LUFQSS1VUkwgYnkgQVBJLURlc2NyaXB0aW9uXHJcbmV4cG9ydCBjb25zdCBBUElfRGVmYXVsdHMgPSB7XHJcblx0aHR0cDogXCJodHRwOi8vXCIsXHJcblx0aHR0cHM6IFwiaHR0cHM6Ly9cIixcclxuXHRCYXNlX1VSTDogXCJzZXJ2aWNlLnNlbWFsb2dpYy5kZG5zLm5ldFwiLFxyXG5cdFBvcnQ6IFwiNDQzXCIsXHJcblx0cnVsZXNfcGFyc2U6IFwiL3J1bGVzL3BhcnNlXCIsXHJcblx0cmVzZXQ6IFwiL3Jlc2V0XCIsXHJcblx0VmVyc2lvbjogXCIvQVBJVmVyc2lvblwiLFxyXG5cdFBvc3REaWFsZWN0OiBcIi9kaWFsZWN0L2RlZmluZVwiLFxyXG5cdFJlbW92ZURpYWxlY3Q6IFwiL2RpYWxlY3QvcmVtb3ZlXCIsXHJcblx0R2V0QVBJOiBcIi9BUElWZXJzaW9uXCIsXHJcblx0U0lEOiBcIjEyMzQ1Njc4XCIsXHJcblx0U2hvd0NvbnRleHQ6IHRydWUsXHJcblx0dXNlVXNlclBhc3N3b3J0Zm9ySFRUUDogdHJ1ZSxcclxuXHRIdHRwVXNlcjogXCJVc2VyXCIsXHJcblx0SHR0cFBhc3N3b3JkOiBcIlBhc3N3b3JkXCIsXHJcblx0dmlld2hlYWRlcjogXCJTVkdcIixcclxuXHRBc3BVcmw6IFwiQVNQLVNlcnZpY2UtVVJMLmNvbS9cIixcclxuXHRBc3BFbmRwb2ludDogXCIvcGxhbnMvY291bnRcIlxyXG5cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IFZhbHVlX0RlZmF1bHRzID0ge1xyXG5cdHVwZGF0ZUludGVydmFsOiA1MDBcclxufVxyXG5cclxuXHJcbi8vIFRvRG86IDIueCBPcHRpbWl6ZWQgYXJyYXkgc3RydWN0IC8gbWV0aG9kcyBmb3IgY29tbWFuZHMgXHJcbmV4cG9ydCB2YXIgc2VtYUxvZ2ljQ29tbWFuZCA9IHtcclxuXHRjb21tYW5kX3N0YXJ0OiBcIlNlbWFMb2dpYyhcIixcclxuXHRjb21tYW5kX2VuZDogXCIpXCIsXHJcblx0c2hvd0hlbHA6IFwic2hvdyBoZWxwXCIsXHJcblx0c2hvd1ZlcnNpb246IFwic2hvdyB2ZXJzaW9uXCIsXHJcblx0Z2V0RGlhbGVjdHdUZW1wbGF0ZTogXCJ0ZW1wbGF0ZVwiLCAvLyBUb0RvOiBHZXQgVGVtcGxhdGUgcGxhbmVkIGZvciB2ZXJzaW9uIDIueFxyXG5cdHVzZURpYWxlY3Q6IFwidXNlID8/P2RpYWxlY3ROYW1lPz8/XCIsXHJcblx0ZGVmaW5lOiBcImRlZmluZVwiLCAvLyBEZWZpbmUgaXMgbm90IGZvciBvYnNpZGlhbiAtIGl0IGlzIGZvciBkZWZpbmluZyBTZW1hTG9naWMtSW50ZXJwcmV0YXRpb25cclxuXHRzaG93UGFyc2U6IFwic2hvdyBhc1wiLFxyXG5cdHNob3dGaWx0ZXI6IFwiZm9yXCIsXHJcblx0dHJhbnNmZXI6IFwidHJhbnNmZXJcIixcclxuXHR0cmFuc2ZlckVuZHBvaW50OiBcInRvIGVuZHBvaW50XCIsXHJcblx0dHJhbnNmZXJQYXJhbTogXCJ3aXRoIHBhcmFtXCJcclxufVxyXG5cclxuZXhwb3J0IHZhciBzeW10b2tlbiA9IFwiU3ltVG9rZW5cIlxyXG5cclxuZXhwb3J0IGNvbnN0IHNlbWFMb2dpY0hlbHA6IHN0cmluZ1tdW10gPSBbXHJcblx0W3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCArIFwiPz8/XCIgKyBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfZW5kLCBcIllvdSBjYW4gZGVmaW5lIHdoYXQgU2VtYUxvZ2ljIHNob3VsZCBkbyBmb3IgeW91IGJ5IHJlcGxhY2luZyA/Pz8gd2l0aCBvbmUgb2YgdGhlIGZvbGxvd2luZyBTZW1hTG9naWMgY29tbWFuZHM6XCJdLFxyXG5cdFtzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQgKyBzZW1hTG9naWNDb21tYW5kLnNob3dIZWxwICsgc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX2VuZCwgXCJTaG93IHRoaXMgaGVscCBpbmZvcm1hdGlvblwiXSxcclxuXHRbc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0ICsgc2VtYUxvZ2ljQ29tbWFuZC5zaG93VmVyc2lvbiArIHNlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9lbmQsIFwiU2hvdyB0aGUgdmVyc2lvbiBvZiB0aGUgU2VtYUxvZ2ljLVNlcnZpY2VcIl0sXHJcblx0W3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCArIHNlbWFMb2dpY0NvbW1hbmQuZGVmaW5lICsgc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX2VuZCwgXCJBZnRlciB0aGlzIGlubGluZWNvbW1hbmQgYW5kIGEgc3BhY2UgbGluZSBjb21lcyBlLmcuIGEgdGFibGUgdGhhdCBzaG91bGQgYmUgaW50ZXJwcmV0ZWQgYnkgU2VtYUxvZ2ljICh0YWJsZSwgTlRhYmxlLCBaVGFibGUpIHdpdGggb3B0aW9uYWwgaGVhZGVyaW50ZXJwcmV0YXRpb24tIEV4cGVjdGVkIGZvcm1hdDpcXG4ofFN5bWJvbHx8TGV2ZWwobisxKXxcXG58LS0tfC0tLXxcXG58TGV2ZWwoMSl8TGV2ZWwobil8VmFsdWV8KVwiXSxcclxuXHRbYCR7c2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0ICsgc2VtYUxvZ2ljQ29tbWFuZC5zaG93UGFyc2V9ICUxICR7c2VtYUxvZ2ljQ29tbWFuZC5zaG93RmlsdGVyfSAlMiAke3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9lbmR9YCwgXCJzaG93IGFzIC0gc2hvd3MgYW4gb3V0cHV0IGRpcmVjdGx5IHRvIHRoZSByZWFkaW5nIHZpZXcgKCB3aXRoICUxIHlvdSBoYXZlIHRvIHNldCB0aGUgb3V0cHV0IHR5cGU6IDF8MSB7cGljdHVyZSwgc3llbWFsb2dpYywgYXNwfSBhbmQgd2l0aCAlMiB5b3UgY291bGQgZmlsdGVyIGZvciBhbiBzeW1ib2wgYnkgc3ltYm9sbmFtZSlcIl0sXHJcblx0W2Ake3NlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCArIHNlbWFMb2dpY0NvbW1hbmQudHJhbnNmZXJ9ICUxICR7c2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlckVuZHBvaW50fSAlMiAke3NlbWFMb2dpY0NvbW1hbmQudHJhbnNmZXJQYXJhbX0gJTMgJHtzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfZW5kfWAsIFwidHJhbnNmZXIgLSBzaG93cyBhbiAoY3VycmVudGx5IG9ubHkpIGFzcCBvdXRwdXQgZGlyZWN0bHkgdG8gdGhlIGFzcC52aWV3IGZyb20gU2VtYUxvZ2ljVmlldyAoIHdpdGggJTEgeW91IGhhdmUgdG8gc2V0IHRoZSBvdXRwdXQgdHlwZTogMXwxIHthc3B9IGFuZCB3aXRoICUyIHlvdSBjb3VsZCBzZXQgdGhlIGVuZHBvaW50IGFuZCB3dXRoICUzIHlvdSBjb3VsZCBzZXQgcXVlcnlwYXJhbWV0ZXIpXCJdLFxyXG5dXHJcblxyXG4vLyBydWxlc2V0dHlwZSA6IHR5cGUsIE5hbWluZ1xyXG5leHBvcnQgY29uc3QgcnN0eXBlc19TZW1hbG9naWMgPSAwXHJcbmV4cG9ydCBjb25zdCByc3R5cGVzX1BpY3R1cmUgPSAzXHJcbmV4cG9ydCBjb25zdCByc3R5cGVzX0FTUCA9IDZcclxuZXhwb3J0IGNvbnN0IHJzdHlwZXNfU2VtYW50aWNUcmVlID0gOFxyXG5cclxuZXhwb3J0IGNvbnN0IHJ1bGVzZXR0eXBlc0NvbW1hbmRzOiBzdHJpbmdbXVtdID0gW1xyXG5cdFtcIlNlbWFMb2dpY1wiLCBcIlNlbWFMb2dpY1wiXSxcclxuXHRbXCJ0ZWNobmljYWxcIiwgXCJTZW1hTG9naWNcIl0sXHJcblx0W1wic2VtYWxvZ2ljXCIsIFwiU2VtYUxvZ2ljXCJdLFxyXG5cdFtcIlBpY3R1cmUgKFNWRylcIiwgXCJTVkdcIl0sXHJcblx0W1wicGljdHVyZVwiLCBcIlNWR1wiXSxcclxuXHRbXCJTVkdcIiwgXCJTVkdcIl0sXHJcblx0W1wiQVNQXCIsIFwiQVNQLmpzb25cIl0sXHJcblx0W1wiYXNwXCIsIFwiQVNQLmpzb25cIl0sXHJcblx0W1wiU2VtYW50aWNUcmVlXCIsIFwiU2VtYW50aWNUcmVlXCJdLFxyXG5dXHJcblxyXG5leHBvcnQgY29uc3QgRGVidWdMZXZlbE5hbWVzOiBzdHJpbmdbXSA9XHJcblx0WydEZWJ1Z0xldmVsX09mZicsXHJcblx0XHQnRGVidWdMZXZlbF9DdXJyZW50X0RldicsXHJcblx0XHQnRGVidWdMZXZlbF9JbXBvcnRhbnQnLFxyXG5cdFx0J0RlYnVnTGV2ZWxfSW5mb3JtYXRpdmUnLFxyXG5cdFx0J0RlYnVnTGV2ZWxfQ2hhdHR5JyxcclxuXHRcdCdEZWJ1Z0xldmVsX0FsbCdcclxuXHRdXHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IERlYnVnTGV2TWFwOiBEZWJ1Z0xldmVsX0kgPSB7XHJcblx0J0RlYnVnTGV2ZWxfT2ZmJzogMCxcclxuXHQnRGVidWdMZXZlbF9DdXJyZW50X0Rldic6IDEsXHJcblx0J0RlYnVnTGV2ZWxfSW1wb3J0YW50JzogMixcclxuXHQnRGVidWdMZXZlbF9JbmZvcm1hdGl2ZSc6IDMsXHJcblx0J0RlYnVnTGV2ZWxfQ2hhdHR5JzogNCxcclxuXHQnRGVidWdMZXZlbF9BbGwnOiA1XHJcbn1cclxuXHJcbmludGVyZmFjZSBEZWJ1Z0xldmVsX0kge1xyXG5cdFtMZXZlbG5hbWU6IHN0cmluZ106IG51bWJlclxyXG59XHJcblxyXG50eXBlIE1hcFR5cGUgPSB7XHJcblx0W2lkOiBzdHJpbmddOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzbFRleHRzOiBNYXBUeXBlID0ge1xyXG5cdFwiSGVhZGVyU0xcIjogXCJTZW1hTG9naWMuVmlld1wiXHJcbn0iLCAiaW1wb3J0IHsgTWFya2Rvd25SZW5kZXJDaGlsZCwgTWFya2Rvd25WaWV3IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyByZXF1ZXN0VXJsLCBSZXF1ZXN0VXJsUGFyYW0sIFJlcXVlc3RVcmxSZXNwb25zZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgRGVidWdMZXZlbCwgU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi4vbWFpblwiO1xyXG5pbXBvcnQgeyBBUElfRGVmYXVsdHMsIHNlbWFMb2dpY0NvbW1hbmQsIHNlbWFMb2dpY0hlbHAsIHJ1bGVzZXR0eXBlc0NvbW1hbmRzLCBEZWJ1Z0xldmVsTmFtZXMsIERlYnVnTGV2TWFwLCByc3R5cGVzX0FTUCwgcnN0eXBlc19TZW1hbG9naWMgfSBmcm9tIFwiLi9jb25zdFwiXHJcbmltcG9ydCB7IFNlbWFMb2dpY1ZpZXcsIFNlbWFMb2dpY1ZpZXdUeXBlIH0gZnJvbSBcIi4vdmlld1wiO1xyXG5pbXBvcnQgeyBwYXJzZUNvbW1hbmQgfSBmcm9tICdzcmMvdmlld191dGlscyc7XHJcblxyXG5leHBvcnQgY29uc3Qgc2VhcmNoRm9yU2VtYUxvZ2ljQ29tbWFuZHMgPSAoZWw6IEVsZW1lbnQpOiBib29sZWFuID0+IHtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGVsLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IGNoaWxkID0gZWwuY2hpbGROb2Rlc1tpXTtcclxuICAgIGlmIChpc1NlbWFMb2dpY0NvbW1hbmQoY2hpbGQpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaXNTZW1hTG9naWNDb21tYW5kID0gKG46IE5vZGUpOiBib29sZWFuID0+XHJcbiAgbi5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUgJiYgQm9vbGVhbihuLnRleHRDb250ZW50Py5zdGFydHNXaXRoKHNlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydCkpO1xyXG5cclxuXHJcbi8vIGNoZWNrIGlmIHRoZSBub2RlIGhhcyB0byBiZSByZXBsYWNlZCBtdXN0IGJlIGRvIGJlZm9yZSBcclxuZXhwb3J0IGNvbnN0IHJlcGxhY2VXaXRoRW1wdHlOb2RlID0gKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCk6IE5vZGVbXSA9PiB7XHJcbiAgY29uc3QgcmVzdWx0czogTm9kZVtdID0gW107XHJcbiAgcmV0dXJuIHJlc3VsdHNcclxufTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXBsYWNlV2l0aENvbW1hbmROb2RlKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgc2V0dGluZ3M6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzKTogUHJvbWlzZTxOb2RlW10+IHtcclxuICBsZXQgcmVzdWx0czogTm9kZVtdID0gW11cclxuICBsZXQgZm91bmQ6IGJvb2xlYW4gPSBmYWxzZVxyXG5cclxuICBsZXQgc2VtYUxvZ2ljQ29tID0gY29udGFpbmVyRWwudGV4dENvbnRlbnQ/LnN1YnN0cmluZyhzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQubGVuZ3RoLCBjb250YWluZXJFbC50ZXh0Q29udGVudD8uaW5kZXhPZihzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfZW5kKSkudG9Mb3dlckNhc2UoKVxyXG5cclxuICBpZiAoKCFmb3VuZCkgJiYgKChzZW1hTG9naWNDb20/LnRvU3RyaW5nKCkuc3Vic3RyaW5nKDAsIHNlbWFMb2dpY0NvbW1hbmQuc2hvd0hlbHAubGVuZ3RoKSkgPT0gc2VtYUxvZ2ljQ29tbWFuZC5zaG93SGVscCkpIHsvL3NlbWFMb2dpY0NvbW1hbmQuc2hvd0hlbHAudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgIC8vIE1ha2UgdGFibGUgd2l0aCBoZWxwLUFycmF5XHJcbiAgICByZXN1bHRzID0gYXdhaXQgc2hvd0hlbHAoKVxyXG4gICAgZm91bmQgPSB0cnVlXHJcbiAgfVxyXG5cclxuICBpZiAoKCFmb3VuZCkgJiYgKChzZW1hTG9naWNDb20/LnRvU3RyaW5nKCkuc3Vic3RyaW5nKDAsIHNlbWFMb2dpY0NvbW1hbmQuc2hvd1ZlcnNpb24ubGVuZ3RoKSkgPT0gc2VtYUxvZ2ljQ29tbWFuZC5zaG93VmVyc2lvbikpIHsvLyBzZW1hTG9naWNDb21tYW5kLnNob3dWZXJzaW9uLnRvTG93ZXJDYXNlKCkpKSB7XHJcbiAgICByZXN1bHRzID0gYXdhaXQgc2hvd1ZlcnNpb24oc2V0dGluZ3MpXHJcbiAgICBmb3VuZCA9IHRydWVcclxuICB9XHJcblxyXG4gIGlmICgoIWZvdW5kKSAmJiAoKHNlbWFMb2dpY0NvbT8udG9TdHJpbmcoKS5zdWJzdHJpbmcoMCwgc2VtYUxvZ2ljQ29tbWFuZC5zaG93UGFyc2UubGVuZ3RoKSkgPT0gc2VtYUxvZ2ljQ29tbWFuZC5zaG93UGFyc2UpKSB7Ly8gc2VtYUxvZ2ljQ29tbWFuZC5zaG93UGFyc2UudG9Mb3dlckNhc2UoKSkpIHtcclxuICAgIC8vIHNlYXJjaCBmb3IgcnVsZXNzZXR0eXBlXHJcbiAgICBsZXQgcnVsZXNldHR5cGU6IHN0cmluZyA9IFwiXCIgLy8gc28gZmFyIGFzIHRoZXJlIGlzIG5vIG91dHB1dGZvcm1hdCAtIG5vdGhpbmcgdG8gZG9cclxuICAgIGxldCBmaWx0ZXI6IHN0cmluZyA9IFwiXCJcclxuXHJcbiAgICBmb3IgKGxldCBydWxlIGluIHJ1bGVzZXR0eXBlc0NvbW1hbmRzKSB7XHJcbiAgICAgIC8vIHNlYXJjaCBmb3IgdGhlIHJ1bGVzc2V0dHlwZSB3aGljaCBpcyB0byBzaG93IGlubGluZVxyXG4gICAgICBpZiAoc2VtYUxvZ2ljQ29tLmNvbnRhaW5zKHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3J1bGVdWzBdKSkge1xyXG4gICAgICAgIHJ1bGVzZXR0eXBlID0gcnVsZXNldHR5cGVzQ29tbWFuZHNbcnVsZV1bMV1cclxuICAgICAgICAvLyBzZWFyY2ggZm9yIGEgZ2l2ZW4gZmlsdGVyXHJcbiAgICAgICAgY29uc3QgZmluZGZvciA9IHNlbWFMb2dpY0NvbS5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQuc2hvd0ZpbHRlcilcclxuICAgICAgICBpZiAoZmluZGZvciA+IDApIHtcclxuICAgICAgICAgIGZpbHRlciA9IHNlbWFMb2dpY0NvbS5zdWJzdHJpbmcoZmluZGZvciArIHNlbWFMb2dpY0NvbW1hbmQuc2hvd0ZpbHRlci5sZW5ndGgpXHJcbiAgICAgICAgICBmaWx0ZXIgPSBmaWx0ZXIudHJpbSgpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvdW5kID0gdHJ1ZVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWZvdW5kKSB7IC8vIERlZmF1bHRcclxuICAgICAgLy8gTWFrZSB0YWJsZSB3aXRoIGhlbHAtQXJyYXlcclxuICAgICAgcmVzdWx0cyA9IGF3YWl0IHNob3dIZWxwKClcclxuICAgICAgZm91bmQgPSB0cnVlXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGlmIChydWxlc2V0dHlwZSAhPSBcIlwiKSB7XHJcbiAgICAgIHJlc3VsdHMgPSBhd2FpdCBzaG93UGFyc2VXaXRoRmlsdGVyKGZpbHRlciwgcnVsZXNldHR5cGUsIHNldHRpbmdzKVxyXG4gICAgfVxyXG4gICAgZm91bmQgPSB0cnVlXHJcbiAgfVxyXG5cclxuICBpZiAoIWZvdW5kKSB7XHJcbiAgICByZXN1bHRzID0gcmVwbGFjZVdpdGhFbXB0eU5vZGUoY29udGFpbmVyRWwpXHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzdWx0c1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2VtYUxvZ2ljUmVuZGVyZWRFbGVtZW50IGV4dGVuZHMgTWFya2Rvd25SZW5kZXJDaGlsZCB7XHJcbiAgbXlzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3M7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHsgY29udGFpbmVyRWwsIHNldCB9OiB7IGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgc2V0OiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyB9KSB7XHJcbiAgICBzdXBlcihjb250YWluZXJFbCk7XHJcbiAgICB0aGlzLm15c2V0dGluZ3MgPSBzZXRcclxuICB9XHJcbiAgYXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5jb250YWluZXJFbC5zZXRDaGlsZHJlbkluUGxhY2UoXHJcbiAgICAgIGF3YWl0IHJlcGxhY2VXaXRoQ29tbWFuZE5vZGUodGhpcy5jb250YWluZXJFbCwgdGhpcy5teXNldHRpbmdzKVxyXG4gICAgICAvL3JlcGxhY2VXaXRoRW1wdHlOb2RlKHRoaXMuY29udGFpbmVyRWwpXHJcbiAgICApO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gc2hvd0hlbHAoKTogUHJvbWlzZTxOb2RlW10+IHtcclxuICBsZXQgcmVzdWx0czogTm9kZVtdID0gW107XHJcbiAgbGV0IGJ1aWxkY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xyXG5cclxuICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0luZm9ybWF0aXZlKSB7IGNvbnNvbGUubG9nKHNlbWFMb2dpY0NvbW1hbmQuc2hvd0hlbHApOyB9XHJcblxyXG4gIGJ1aWxkY29udGFpbmVyRWwgPSBjcmVhdGVFbCgndGFibGUnKTtcclxuICBsZXQgYm9keSA9IGJ1aWxkY29udGFpbmVyRWwuY3JlYXRlRWwoXCJib2R5XCIpO1xyXG4gIGxldCByb3cgPSBib2R5LmNyZWF0ZUVsKFwidHJcIik7XHJcbiAgcm93LmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiBcIlNlbWFMb2dpYy1Db21tYW5kcy1IZWxwXCIgfSk7XHJcbiAgcm93LmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZW1hTG9naWNIZWxwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCByb3cgPSBib2R5LmNyZWF0ZUVsKFwidHJcIik7XHJcbiAgICByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IHNlbWFMb2dpY0hlbHBbaV1bMF0gfSk7XHJcbiAgICByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IHNlbWFMb2dpY0hlbHBbaV1bMV0gfSk7XHJcbiAgfVxyXG5cclxuICByZXN1bHRzLnB1c2goYnVpbGRjb250YWluZXJFbCk7XHJcbiAgcmV0dXJuIHJlc3VsdHM7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHNob3dWZXJzaW9uKHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyk6IFByb21pc2U8Tm9kZVtdPiB7XHJcbiAgbGV0IHJlc3VsdHM6IE5vZGVbXSA9IFtdO1xyXG4gIGxldCBidWlsZGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcclxuICBsZXQgdmVyc2lvbnRleHQ6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUpIHsgY29uc29sZS5sb2coc2VtYUxvZ2ljQ29tbWFuZC5zaG93VmVyc2lvbik7IH1cclxuXHJcbiAgY29uc3QgdmVyc2lvbiA9IGF3YWl0IHNlbWFMb2dpY0dldFZlcnNpb24oc2V0dGluZ3MpXHJcbiAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0QnVmZmVyOiBhbnkpIHtcclxuICAgICAgdmVyc2lvbnRleHQgPSByZXN1bHRCdWZmZXI7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGZ1bmN0aW9uIChyZXN1bHRCdWZmZXI6IGFueSkgeyB2ZXJzaW9udGV4dCA9IHJlc3VsdEJ1ZmZlcjsgfVxyXG4gICAgKVxyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCkgeyBjb25zb2xlLmxvZyhgSlNPTi1UZXh0IGluIFByb2Nlc3Nvcjoke3ZlcnNpb250ZXh0fWApIH1cclxuXHJcbiAgLy8gVmVyc2lvbiBpcyBzaG93biBpbiBhIHRhYmxlIGxpbmVcclxuICBidWlsZGNvbnRhaW5lckVsID0gY3JlYXRlRWwoJ3RhYmxlJyk7XHJcbiAgY29uc3QgdGFibGUgPSBidWlsZGNvbnRhaW5lckVsLmNyZWF0ZUVsKCd0YWJsZScpO1xyXG4gIGNvbnN0IGJvZHkgPSBidWlsZGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiYm9keVwiKTtcclxuICBjb25zdCByb3cgPSBib2R5LmNyZWF0ZUVsKFwidHJcIik7XHJcbiAgcm93LmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiB2ZXJzaW9udGV4dCB9KTtcclxuXHJcbiAgcmVzdWx0cy5wdXNoKGJ1aWxkY29udGFpbmVyRWwpO1xyXG4gIHJldHVybiByZXN1bHRzO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBzaG93UGFyc2VTVkcoRmlsdGVyOiBzdHJpbmcpOiBQcm9taXNlPE5vZGVbXT4ge1xyXG4gIGxldCByZXN1bHRzOiBOb2RlW10gPSBbXTtcclxuICBsZXQgYnVpbGRjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW5mb3JtYXRpdmUpIHsgY29uc29sZS5sb2coc2VtYUxvZ2ljQ29tbWFuZC5zaG93SGVscCk7IH1cclxuXHJcblxyXG4gIGJ1aWxkY29udGFpbmVyRWwgPSBjcmVhdGVFbCgndGFibGUnKTtcclxuICBsZXQgYm9keSA9IGJ1aWxkY29udGFpbmVyRWwuY3JlYXRlRWwoXCJib2R5XCIpO1xyXG4gIGxldCByb3cgPSBib2R5LmNyZWF0ZUVsKFwidHJcIik7XHJcbiAgcm93LmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiBcIlNlbWFMb2dpYy1Db21tYW5kcy1IZWxwXCIgfSk7XHJcbiAgcm93LmNyZWF0ZUVsKFwidGRcIiwgeyB0ZXh0OiBcIkRlc2NyaXB0aW9uXCIgfSk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZW1hTG9naWNIZWxwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zdCByb3cgPSBib2R5LmNyZWF0ZUVsKFwidHJcIik7XHJcbiAgICByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IHNlbWFMb2dpY0hlbHBbaV1bMF0gfSk7XHJcbiAgICByb3cuY3JlYXRlRWwoXCJ0ZFwiLCB7IHRleHQ6IHNlbWFMb2dpY0hlbHBbaV1bMV0gfSk7XHJcbiAgfVxyXG5cclxuICByZXN1bHRzLnB1c2goYnVpbGRjb250YWluZXJFbCk7XHJcbiAgcmV0dXJuIHJlc3VsdHM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldGh0dHBzKGh0dHBzOiBib29sZWFuKTogc3RyaW5nIHtcclxuICBsZXQgc3RyOiBzdHJpbmdcclxuICAvLyBodHRwcyA/XHJcbiAgaWYgKGh0dHBzKSB7XHJcbiAgICBzdHIgPSBBUElfRGVmYXVsdHMuaHR0cHNcclxuICB9IGVsc2Uge1xyXG4gICAgc3RyID0gQVBJX0RlZmF1bHRzLmh0dHBcclxuICB9XHJcbiAgcmV0dXJuIHN0clxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0SG9zdFBvcnQoc2V0dGluZ3M6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzKTogc3RyaW5nIHtcclxuICBsZXQgYWRyZXNzID0gc2V0aHR0cHMoc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlVc2VIdHRwcylcclxuICBhZHJlc3MgPSBhZHJlc3MgKyBzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teUJhc2VVUkxcclxuXHJcbiAgaWYgKHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15UG9ydCAhPSAnJykge1xyXG4gICAgYWRyZXNzID0gYWRyZXNzICsgJzonICsgc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlQb3J0XHJcbiAgfVxyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSB7IGNvbnNvbGUubG9nKCdnZXR0aW5nIFNlbWFMb2dpYy1BZHJlc3M6ICcgKyBhZHJlc3MpIH1cclxuICByZXR1cm4gYWRyZXNzXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRIb3N0QXNwUG9ydChzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MsIHBhcnNlZENvbW1hbmRzOiBwYXJzZUNvbW1hbmQpOiBzdHJpbmcge1xyXG4gIGxldCBhZHJlc3M6IHN0cmluZ1xyXG4gIGlmIChwYXJzZWRDb21tYW5kcy5vdXRwdXRmb3JtYXQgPT0gcnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19BU1BdWzFdKSB7XHJcbiAgICBhZHJlc3MgPSBzZXRodHRwcyhzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZUh0dHBzKVxyXG4gICAgYWRyZXNzID0gYWRyZXNzICsgc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlBc3BVcmxcclxuICAgIGlmIChwYXJzZWRDb21tYW5kcy5lbmRwb2ludCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgaWYgKHBhcnNlZENvbW1hbmRzLmVuZHBvaW50LmluZGV4T2YoXCJodHRwXCIpID49IDApIHtcclxuICAgICAgICBhZHJlc3MgPSBwYXJzZWRDb21tYW5kcy5lbmRwb2ludFxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFkcmVzcyA9IGFkcmVzcyArIFwiL1wiICsgcGFyc2VkQ29tbWFuZHMuZW5kcG9pbnRcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyB1bmRlZmluZGVkIG5ldyB0cmFuc2ZlciBlbmRwb2ludFxyXG4gICAgYWRyZXNzID0gcGFyc2VkQ29tbWFuZHMuZW5kcG9pbnRcclxuICB9XHJcbiAgaWYgKHBhcnNlZENvbW1hbmRzLnBhcmFtICE9IHVuZGVmaW5lZCkgeyBhZHJlc3MgPSBhZHJlc3MgKyBcIj9cIiArIHBhcnNlZENvbW1hbmRzLnBhcmFtIH1cclxuICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZygnZ2V0dGluZyBhc3AtQWRyZXNzOiAnICsgYWRyZXNzKSB9XHJcbiAgcmV0dXJuIGFkcmVzc1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VtYUxvZ2ljR2V0VmVyc2lvbihzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MpOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cclxuICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZyhcIlN0YXJ0IHNlbWFMb2dpY0dldFZlcnNpb25cIikgfVxyXG5cclxuICAvLyBQcmVwYXJlIEpTT04tRm9ybWF0XHJcbiAgY29uc3QgbXlWZXJzaW9uID0gJ3tcInZlcnNpb25cIjpcIjBcIixcInZlcnNpb250ZXh0XCI6XCJUZXh0XCJ9JztcclxuICBsZXQgbXlKc29uID0gSlNPTi5wYXJzZShteVZlcnNpb24pO1xyXG4gIGxldCBqc29uVmVyc2lvbjogc3RyaW5nID0gXCJcIjtcclxuXHJcbiAgLy8gQ3JlYXRlIFVybCBmb3IgR2V0IFZlcnNpb25cclxuICBsZXQgdkFQSV9VUkxfVmVyc2lvbiA9IGdldEhvc3RQb3J0KHNldHRpbmdzKSArIEFQSV9EZWZhdWx0cy5WZXJzaW9uO1xyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IGNvbnNvbGUubG9nKHZBUElfVVJMX1ZlcnNpb24pIH1cclxuXHJcbiAgbGV0IG9wdGlvbnM6IFJlcXVlc3RVcmxQYXJhbVxyXG5cclxuICBpZiAoc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlVc2VIdHRwcyAmJiBzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZXIgIT0gJycpIHtcclxuICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgIHVybDogdkFQSV9VUkxfVmVyc2lvbixcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgIFwiQXV0aG9yaXphdGlvblwiOiBcIkJhc2ljIFwiICsgYnRvYShzZXR0aW5ncy5teVNMU2V0dGluZ3Nbc2V0dGluZ3MubXlTZXR0aW5nXS5teVVzZXIgKyBcIjpcIiArIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15UGFzc3dvcmQpXHJcbiAgICAgIH0sXHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIG9wdGlvbnMgPSB7XHJcbiAgICAgIHVybDogdkFQSV9VUkxfVmVyc2lvbixcclxuICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgIH1cclxuICB9XHJcbiAgbGV0IHJlc3BvbnNlOiBSZXF1ZXN0VXJsUmVzcG9uc2U7XHJcblxyXG4gIC8vIEdldCBpbmZvcm1hdGlvbiBhYm91dCB2ZXJzaW9uIGZyb20gdGhlIHJlcXVlc3QgXHJcbiAgdHJ5IHtcclxuICAgIHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybChvcHRpb25zKVxyXG4gICAgbXlKc29uID0gSlNPTi5wYXJzZShyZXNwb25zZS50ZXh0KTtcclxuICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQWxsKSB7IGNvbnNvbGUubG9nKG15SnNvbi52ZXJzaW9uKSB9XHJcbiAgICBqc29uVmVyc2lvbiA9IG15SnNvbi52ZXJzaW9uO1xyXG4gICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9BbGwpIHsgY29uc29sZS5sb2coYEpTT04tVGV4dCBpbiBSZXF1ZXN0OiR7anNvblZlcnNpb259YCkgfVxyXG4gICAgcmV0dXJuIGpzb25WZXJzaW9uO1xyXG4gIH1cclxuICBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5sb2coJ0Vycm9yOiBDYXRjaCBvZiBBUElWZXJzaW9uJyArIGUudG9TdHJpbmcoKSlcclxuICAgIHRocm93IG5ldyBFcnJvcigpXHJcbiAgICAvL3JldHVybiAnRXJyb3I6IENhdGNoIG9mIEFQSVZlcnNpb24nXHJcbiAgfVxyXG59XHJcblxyXG4vLyBzZW1hTG9naWNQaW5nIHRyaWVzIHRvIHRlc3Qgc3RhbmRhcmRWZXJzaW9uQVBJIC0gaWYgaXQgY2FuJ3QgYmUgY29ubmVjdGVkIC0gc2hvdyBtZWFuaW5nZnVsIGVycm9yIHN0YXRlXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW1hTG9naWNQaW5nKHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncywgbGFzdFVwZGF0ZTogbnVtYmVyKTogUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgbGV0IHN0YXJ0dGltZSA9IERhdGUubm93KClcclxuICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZygnR2V0VmVyc2lvblBpbmcgYXQgJywgRGF0ZS5ub3coKSwgJyAgZm9yICcsIGdldEhvc3RQb3J0KHNldHRpbmdzKSkgfVxyXG4gIGF3YWl0IHNlbWFMb2dpY0dldFZlcnNpb24oc2V0dGluZ3MpXHJcbiAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0QnVmZmVyOiBhbnkpIHtcclxuICAgICAgLy8gbm90aGluZyB0byBkb1xyXG4gICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZygnU2VtYUxvZ2ljIEdldFZlcnNpb25QaW5nIHN0YXJ0ZWQgYXQ6Jywgc3RhcnR0aW1lLCAnIEVuZHRpbWU6ICcsIERhdGUubm93KCkpIH1cclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZnVuY3Rpb24gKGU6IEVycm9yKSB7XHJcbiAgICAgIC8vIElmIGl0IGlzIGFuIG9sZCBlcnJvciAobG9uZyB0aW1lIGFnbyBzZW50KSwgdGhlbiB0ZWhlcmUgaXMgbm90aGluZyB0byBkb1xyXG4gICAgICBpZiAoc3RhcnR0aW1lIDwgbGFzdFVwZGF0ZSkge1xyXG4gICAgICAgIC8vIHRpbWUgdG8gc2hvdyBhbiBlcnJvciBcclxuICAgICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYFRoZXJlIGlzIG5vIGNvbm5lY3Rpb24gdG8gU2VtYUxvZ2ljU2VydmljZSBBUElWZXJzaW9uYClcclxuICAgICAgICAgIGNvbnNvbGUubG9nKGdldEhvc3RQb3J0KHNldHRpbmdzKSlcclxuICAgICAgICB9XHJcbiAgICAgICAgYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmOiBhbnkpID0+IHtcclxuICAgICAgICAgIGxldCBzbFZpZXcgPSBsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKVxyXG4gICAgICAgICAgaWYgKHNsVmlldyA9PSBTZW1hTG9naWNWaWV3VHlwZSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBsZWFmLnZpZXcuY29udGFpbmVyRWwuY2hpbGRyZW5bMV07XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiU2VtYUxvZ2ljX0Vycm9yXCIgfSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbChcImJcIiwgeyB0ZXh0OiBcIlRoZXJlIGlzIG5vIGNvbm5lY3Rpb24gdG8gU2VtYUxvZ2ljU2VydmljZSAtPiBBUElWZXJzaW9uXCIgfSk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbChcImJcIiwgeyB0ZXh0OiBnZXRIb3N0UG9ydChzZXR0aW5ncykgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9IaWdoKSB7IGNvbnNvbGUubG9nKCdTZW1hTG9naWMgR2V0VmVyc2lvblBpbmcgZmFpbGVkIGFuZCBub3QgdXNlZCBzdGFydGVkOicsIHN0YXJ0dGltZSwgJyBFbmR0aW1lOiAnLCBEYXRlLm5vdygpKSB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIClcclxuICByZXR1cm4gdHJ1ZVxyXG59XHJcblxyXG4vLyBUb0RvOiBQYXJzZSBpc3QgZHVyY2ggZGVuIGFrdHVlbGxlbiBVbWJhdSBpbSBQcmVQcm9jZXNzb3Igbm9jaG1hbCBhbnp1cGFzc2VuXHJcbmFzeW5jIGZ1bmN0aW9uIHNob3dQYXJzZVdpdGhGaWx0ZXIoZmlsdGVyOiBzdHJpbmcsIHJ1bGVzc2V0dHlwZTogc3RyaW5nLCBzZXR0aW5nczogU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MpOiBQcm9taXNlPE5vZGVbXT4ge1xyXG4gIC8vIFRvRG86IENoYW5nZSBmcm9tIGNvbnNvbGUtbG9nIHRvIHNsY29uc29sZWxvZyB3aXRoIFNMY29tLU9iamVjdFxyXG4gIGxldCByZXN1bHRzOiBOb2RlW10gPSBbXTtcclxuICBsZXQgYnVpbGRjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XHJcblxyXG4gIGxldCB2QVBJX1VSTCA9IGdldEhvc3RQb3J0KHNldHRpbmdzKSArIEFQSV9EZWZhdWx0cy5ydWxlc19wYXJzZSArIFwiP3NpZD1cIiArIHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15U0lEO1xyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IGNvbnNvbGUubG9nKHZBUElfVVJMKSB9O1xyXG5cclxuICBsZXQgYm9keXRleHQ6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gIGxldCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcclxuICBpZiAoYWN0aXZlVmlldyA9PSB1bmRlZmluZWQpIHtcclxuICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCkgeyBjb25zb2xlLmxvZyhcIkRvIG5vdCBmaW5kIGFuIGFjdGl2ZSB2aWV3XCIpIH1cclxuICAgIHJldHVybiByZXN1bHRzXHJcbiAgfVxyXG5cclxuICBsZXQgZGlhbGVjdElEOiBzdHJpbmcgPSBcImRlZmF1bHRcIlxyXG5cclxuICBsZXQgY29kZWJsb2NrOiBib29sZWFuID0gZmFsc2U7XHJcbiAgbGV0IG5ld0NvZGVibG9jazogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBpZiAoYWN0aXZlVmlldyAhPSBudWxsKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdGl2ZVZpZXcuZWRpdG9yLmxpbmVDb3VudCgpOyBpKyspIHtcclxuICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9BbGwpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhpLCAnOycsIGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkpXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1N1YnN0cmluZzonLCBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZygwLCAyKSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIDMpID09IFwiYGBgXCIpIHtcclxuICAgICAgICBpZiAoIWNvZGVibG9jaykge1xyXG4gICAgICAgICAgY29kZWJsb2NrID0gdHJ1ZVxyXG4gICAgICAgICAgbmV3Q29kZWJsb2NrID0gdHJ1ZVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBuZXdDb2RlYmxvY2sgPSBmYWxzZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgIH1cclxuICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgY29uc29sZS5sb2coJ0N1cnJlbnQgbGluZSBpcyBDb2RlYmxvY2snLCBjb2RlYmxvY2spIH1cclxuXHJcbiAgICAgIGlmICgoIWNvZGVibG9jaykgJiYgKCFuZXdDb2RlYmxvY2spKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaW5saW5lIFN0YXRlbWVudHNcclxuICAgICAgICBzd2l0Y2ggKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkpIHtcclxuICAgICAgICAgIGRlZmF1bHQ6IGJvZHl0ZXh0ID0gYm9keXRleHQuY29uY2F0KGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkgKyAnXFxuJylcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgLy8gUHJcdTAwRkNmZSBhdWYgenUgdmVyd2VuZGVuZGVuIERpYWxlY3RcclxuICAgICAgICBzd2l0Y2ggKGFjdGl2ZVZpZXcuZWRpdG9yLmdldExpbmUoaSkuc3Vic3RyaW5nKDAsIHNlbWFMb2dpY0NvbW1hbmQudXNlRGlhbGVjdC5sZW5ndGgpKSB7XHJcbiAgICAgICAgICBjYXNlIHNlbWFMb2dpY0NvbW1hbmQudXNlRGlhbGVjdDoge1xyXG4gICAgICAgICAgICBkaWFsZWN0SUQgPSBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLnN1YnN0cmluZyhzZW1hTG9naWNDb21tYW5kLnVzZURpYWxlY3QubGVuZ3RoLCBhY3RpdmVWaWV3LmVkaXRvci5nZXRMaW5lKGkpLmxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgIGRpYWxlY3RJRCA9IGRpYWxlY3RJRC50cmltKCk7XHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBkZWZhdWx0OiB7IH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICB9XHJcbiAgICAgIGlmIChpIDwgYWN0aXZlVmlldy5lZGl0b3IubGluZUNvdW50KCkpIHtcclxuICAgICAgICBpZiAoYWN0aXZlVmlldy5lZGl0b3IuZ2V0TGluZShpKS5zdWJzdHJpbmcoMCwgMykgPT0gXCJgYGBcIikge1xyXG4gICAgICAgICAgaWYgKChjb2RlYmxvY2spICYmICghbmV3Q29kZWJsb2NrKSkgeyBjb2RlYmxvY2sgPSBmYWxzZSB9IGVsc2UgeyBuZXdDb2RlYmxvY2sgPSBmYWxzZSB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIGlmIChib2R5dGV4dCA9PSBcIlwiKSB7IGJvZHl0ZXh0ID0gXCJcIiB9XHJcbiAgaWYgKGRpYWxlY3RJRCA9PSBcIlwiKSB7IGRpYWxlY3RJRCA9IFwiZGVmYXVsdFwiIH1cclxuICBsZXQgcmVzdWx0ID0gXCJcIjtcclxuICBpZiAoZmlsdGVyICE9IFwiXCIpIHtcclxuICAgIGxldCBqc29ud29GaWx0ZXIgPSB7XHJcbiAgICAgIFwidGV4dFwiOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgXCJ0ZXh0SURcIjogXCJmbHlcIixcclxuICAgICAgICAgIFwiZGlhbGVjdElEXCI6IGRpYWxlY3RJRCxcclxuICAgICAgICAgIFwicnVsZXNcIjogYm9keXRleHRcclxuICAgICAgICB9XHJcbiAgICAgIF0sXHJcbiAgICAgIFwiZmlsdGVyXCI6IHtcclxuICAgICAgICBcImRpYWxlY3RJRFwiOiBcImRlZmF1bHRcIixcclxuICAgICAgICBcInN5bWJvbHNcIjogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBcInN5bWJvbFwiOiBmaWx0ZXJcclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgIFwicGVyc2lzdGVuY3lcIjogZmFsc2UsXHJcbiAgICAgIFwicnVsZXNldHR5cGVcIjogcnVsZXNzZXR0eXBlIC8vc2V0dGluZ3MubXlPdXRwdXRGb3JtYXRcclxuICAgIH1cclxuICAgIHZhciBvcHRpb25zUGFyc2U6IFJlcXVlc3RVcmxQYXJhbSA9IHtcclxuICAgICAgdXJsOiB2QVBJX1VSTCxcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShqc29ud29GaWx0ZXIpXHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGxldCBqc29udGVzdHd0aEZpbHRlciA9IHtcclxuICAgICAgXCJ0ZXh0XCI6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICBcInRleHRJRFwiOiBcImZseVwiLFxyXG4gICAgICAgICAgXCJkaWFsZWN0SURcIjogZGlhbGVjdElELFxyXG4gICAgICAgICAgXCJydWxlc1wiOiBib2R5dGV4dFxyXG4gICAgICAgIH1cclxuICAgICAgXSxcclxuICAgICAgXCJmaWx0ZXJcIjoge30sXHJcbiAgICAgIFwicGVyc2lzdGVuY3lcIjogZmFsc2UsXHJcbiAgICAgIFwicnVsZXNldHR5cGVcIjogcnVsZXNzZXR0eXBlIC8vc2V0dGluZ3MubXlPdXRwdXRGb3JtYXRcclxuICAgIH1cclxuICAgIHZhciBvcHRpb25zUGFyc2U6IFJlcXVlc3RVcmxQYXJhbSA9IHtcclxuICAgICAgdXJsOiB2QVBJX1VSTCxcclxuICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShqc29udGVzdHd0aEZpbHRlcilcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGxldCByZXM6IHN0cmluZztcclxuICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkge1xyXG4gICAgY29uc29sZS5sb2coYENvbnRleHQ6ICR7ZGlhbGVjdElEfSwgQm9keXRleHQ6ICR7Ym9keXRleHR9YClcclxuICB9XHJcblxyXG4gIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSW1wb3J0YW50KSB7IGNvbnNvbGUubG9nKG9wdGlvbnNQYXJzZSkgfVxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCByZXNwb25zZVBhcnNlID0gYXdhaXQgcmVxdWVzdFVybChvcHRpb25zUGFyc2UpXHJcbiAgICBjb25zdCByZW1Kc29uID0gcmVzcG9uc2VQYXJzZS50ZXh0O1xyXG4gICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coXCJTZW1hTG9naWM6IFBhcnNlIHdpdGggaHR0cC1zdGF0dXMgXCIgKyByZXNwb25zZVBhcnNlLnN0YXR1cy50b1N0cmluZygpKSB9O1xyXG4gICAgaWYgKHJlc3BvbnNlUGFyc2Uuc3RhdHVzID09IDIwMCkge1xyXG4gICAgICBsZXQgcmVzdWx0aHR0cCA9IHJlc3BvbnNlUGFyc2UudGV4dDtcclxuICAgICAgY29uc3QgZnJhZ21lbnQgPSAobmV3IFJhbmdlKCkpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChyZXN1bHRodHRwKTtcclxuICAgICAgLy9idWlsZGNvbnRhaW5lckVsID0gY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IEFQSV9EZWZhdWx0cy52aWV3aGVhZGVyIH0pO1xyXG4gICAgICBidWlsZGNvbnRhaW5lckVsID0gY3JlYXRlRWwoXCJwXCIpXHJcbiAgICAgIGJ1aWxkY29udGFpbmVyRWwuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xyXG4gICAgICByZXN1bHRzLnB1c2goYnVpbGRjb250YWluZXJFbClcclxuICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhgUGFyc2VyZXN1bHQ6JHtyZXN1bHRodHRwfWApO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZXN1bHRzXHJcbiAgICB9XHJcbiAgfVxyXG4gIGNhdGNoIChlKSB7XHJcbiAgICBzbGNvbnNvbGVsb2codW5kZWZpbmVkLCBgQ2F0Y2hlcnJvciBvZiByZW1vdmluZyBjb250ZXh0ICR7dkFQSV9VUkx9YClcclxuICAgIC8vY29uc29sZS5sb2coYENhdGNoZXJyb3Igb2YgcmVtb3ZpbmcgY29udGV4dCAke3ZBUElfVVJMfWApXHJcbiAgICBzbGNvbnNvbGVsb2codW5kZWZpbmVkLCBlLnRvU3RyaW5nKCkpXHJcbiAgICAvL2NvbnNvbGUubG9nKGUudG9TdHJpbmcoKSlcclxuICAgIHRocm93IGVcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHRzXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzbGNvbnNvbGVsb2coc2x2aWV3PzogU2VtYUxvZ2ljVmlldyB8IHVuZGVmaW5lZCwgbWVzc2FnZT86IGFueSwgLi4ub3B0aW9uYWxQYXJhbXM6IGFueVtdKSB7XHJcblxyXG4gIGlmIChzbHZpZXcgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICBpZiAoc2x2aWV3LmdldFZpZXdUeXBlKCkgPT0gU2VtYUxvZ2ljVmlld1R5cGUpIHtcclxuICAgICAgaWYgKHNsdmlldy5nZXREZWJ1Z0lubGluZSgpID09IHRydWUpIHtcclxuICAgICAgICBsZXQgbG9nTWVzc2FnZXMgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlKVxyXG4gICAgICAgIHNsdmlldy5hcHBlbmREZWJ1Z0NvbnRlbnQobG9nTWVzc2FnZXMpXHJcbiAgICAgIH0gZWxzZSB7IGNvbnNvbGUubG9nKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKSB9XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UsIC4uLm9wdGlvbmFsUGFyYW1zKVxyXG4gIH1cclxufVxyXG5cclxuIiwgImltcG9ydCB7IERlYnVnTGV2TWFwLCByc3R5cGVzX0FTUCwgcnN0eXBlc19TZW1hbG9naWMsIHJ1bGVzZXR0eXBlc0NvbW1hbmRzLCBzZW1hTG9naWNDb21tYW5kIH0gZnJvbSBcInNyYy9jb25zdFwiXHJcbmltcG9ydCB7IERlYnVnTGV2ZWwgfSBmcm9tIFwiLi4vbWFpblwiXHJcbmltcG9ydCB7IHNsY29uc29sZWxvZyB9IGZyb20gXCJzcmMvdXRpbHNcIlxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBwYXJzZUNvbW1hbmQge1xyXG4gICAgb3V0cHV0Zm9ybWF0OiBzdHJpbmcsXHJcbiAgICBlbmRwb2ludDogc3RyaW5nLFxyXG4gICAgcGFyYW06IHN0cmluZ1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgVmlld1V0aWxzIHtcclxuXHJcbiAgICBwdWJsaWMgZ2V0Q29udGVudChjb250ZW50RWw6IEhUTUxFbGVtZW50LCBvdXRQdXRGb3JtYXQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQ6IHN0cmluZ1xyXG4gICAgICAgIGlmIChjb250ZW50RWwudGV4dENvbnRlbnQgPT0gbnVsbCkgeyBjb250ZW50ID0gXCJcIiB9IGVsc2UgeyBjb250ZW50ID0gY29udGVudEVsLnRleHRDb250ZW50IH1cclxuICAgICAgICBjb250ZW50ID0gdGhpcy5jbGVhbkNvbnRlbnQoY29udGVudCwgb3V0UHV0Rm9ybWF0KVxyXG4gICAgICAgIGNvbnRlbnQgPSB0aGlzLmNsZWFuQ29tbWFuZHMoY29udGVudClcclxuICAgICAgICByZXR1cm4gY29udGVudFxyXG4gICAgfVxyXG5cclxuICAgIGNsZWFuQ29udGVudChjb250ZW50OiBzdHJpbmcsIG91dFB1dEZvcm1hdDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICAvLyBUZXh0bWFuaXB1bGF0aW9uIGZvciBzcGVjaWFsIG91dGNvbWVzXHJcbiAgICAgICAgaWYgKG91dFB1dEZvcm1hdCA9PSBydWxlc2V0dHlwZXNDb21tYW5kc1tyc3R5cGVzX0FTUF1bMV0pIHtcclxuICAgICAgICAgICAgY29uc3QgZmlyc3RKU09OQnJhY2tldCA9IGNvbnRlbnQuaW5kZXhPZihcIntcIilcclxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuc3Vic3RyaW5nKGZpcnN0SlNPTkJyYWNrZXQsIGNvbnRlbnQubGVuZ3RoKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob3V0UHV0Rm9ybWF0ID09IHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfU2VtYWxvZ2ljXVsxXSkge1xyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJTdHJpbmcgPSBcIlNlbWFsb2dpYyBPdXRwdXRcIlxyXG4gICAgICAgICAgICBjb25zdCBmaXJzdGhlYWRlclN0cmluZyA9IGNvbnRlbnQuaW5kZXhPZihoZWFkZXJTdHJpbmcpXHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZyhmaXJzdGhlYWRlclN0cmluZyArIGhlYWRlclN0cmluZy5sZW5ndGgsIGNvbnRlbnQubGVuZ3RoKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29udGVudFxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBjbGVhbkNvbW1hbmRzKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IGNvbnRlbnRDbGVhbmVkOiBzdHJpbmdbXSA9IFtdXHJcbiAgICAgICAgbGV0IGNvbnRlbnRBcnJheSA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpXHJcblxyXG4gICAgICAgIGNvbnRlbnRBcnJheS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcm93ID0gZWxlbWVudC50cmltKClcclxuICAgICAgICAgICAgcm93ID0gcm93LnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgaWYgKERlYnVnTGV2ZWwgPT0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9DaGF0dHkpIHsgY29uc29sZS5sb2coXCJSb3cgYmVmb3JlOlwiICsgcm93KSB9XHJcbiAgICAgICAgICAgIHJvdyA9IHJvdy5yZXBsYWNlQWxsKFwiIFwiLCBcIlwiKVxyXG4gICAgICAgICAgICBpZiAoRGVidWdMZXZlbCA9PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZyhcIlJvdyBhZnRlcjpcIiArIHJvdykgfVxyXG4gICAgICAgICAgICBpZiAocm93LmluZGV4T2Yoc2VtYUxvZ2ljQ29tbWFuZC5jb21tYW5kX3N0YXJ0LnRvTG93ZXJDYXNlKCkpICE9IDApIHsgLy8gTm8gc3RhcnRpbmcgU2VtYUxvZ2ljLUNvbW1hbmRcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRDbGVhbmVkLnB1c2goZWxlbWVudClcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFN0YXJ0aW5nIFNlbWFMb2dpY0NvbW1hbmRcclxuICAgICAgICAgICAgICAgIC8vIFRlc3QgZm9yIFNlbWFMb2dpY0NvbW1hbmRzIHdoaWNoIHNob3VsZCBiZSBpbnRlcnByZXRhdGVkIGJ5IFNlbWFMb2dpY1NlcnZpY2UgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoRGVidWdMZXZlbCA9PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZyhcIkluZGV4IERlZmluZTpcIiArIHJvdy5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQuZGVmaW5lKS50b1N0cmluZygpKSB9XHJcbiAgICAgICAgICAgICAgICBpZiAoRGVidWdMZXZlbCA9PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZyhcIkxlbmd0aCBTdGFydDpcIiArIHNlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9zdGFydC5sZW5ndGgudG9TdHJpbmcoKSkgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJvdy5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQuZGVmaW5lKSA9PSBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudENsZWFuZWQucHVzaChlbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBjb250ZW50ID0gXCJcIlxyXG4gICAgICAgIGNvbnRlbnRDbGVhbmVkLmZvckVhY2goZWxlbWVudCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50ICsgZWxlbWVudCArIFwiXFxuXCJcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gY29udGVudFxyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBSZXF1ZXN0VXJsUGFyYW0sIHJlcXVlc3RVcmwgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgcnVsZXNldHR5cGVzQ29tbWFuZHMsIHJzdHlwZXNfQVNQLCBEZWJ1Z0xldk1hcCwgc2VtYUxvZ2ljQ29tbWFuZCB9IGZyb20gXCIuL2NvbnN0XCJcclxuaW1wb3J0IHsgU2VtYUxvZ2ljUGx1Z2luQ29tbSwgRGVidWdMZXZlbCwgU2VtYUxvZ2ljUGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi4vbWFpblwiXHJcbmltcG9ydCB7IGdldEhvc3RBc3BQb3J0IH0gZnJvbSAnLi91dGlscydcclxuaW1wb3J0IHsgcGFyc2VDb21tYW5kIH0gZnJvbSBcInNyYy92aWV3X3V0aWxzXCI7XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IEFTUFZpZXdUeXBlID0gJ1RyYW5zZmVyU2VydmljZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgQVNQVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcclxuXHJcbiAgbXlBY3Rpb246IEhUTUxFbGVtZW50XHJcbiAgc2xDb21tOiBTZW1hTG9naWNQbHVnaW5Db21tXHJcblxyXG4gIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYpIHtcclxuICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgLy90aGlzLm5hdmlnYXRpb24gPSB0cnVlXHJcbiAgICB0aGlzLnNldE5ld0FTUEluaXRpYWwoKVxyXG4gIH1cclxuXHJcbiAgcHVibGljIHNldENvbW0oY29tbTogU2VtYUxvZ2ljUGx1Z2luQ29tbSkge1xyXG4gICAgdGhpcy5zbENvbW0gPSBjb21tXHJcbiAgICAvL3RoaXMuc2xDb21tLnNldFNsVmlldyh0aGlzKVxyXG4gICAgdGhpcy5zZXROZXdBU1BJbml0aWFsKClcclxuICB9XHJcblxyXG4gIGdldFZpZXdUeXBlKCkge1xyXG4gICAgcmV0dXJuIEFTUFZpZXdUeXBlO1xyXG4gIH1cclxuXHJcbiAgZ2V0RGlzcGxheVRleHQoKSB7XHJcbiAgICByZXR1cm4gQVNQVmlld1R5cGU7XHJcbiAgfVxyXG5cclxuICBvbmxvYWQoKTogdm9pZCB7XHJcbiAgICB0aGlzLm5hdmlnYXRpb24gPSB0cnVlXHJcbiAgICB0aGlzLmNvbnRlbnRFbC5jb250ZW50RWRpdGFibGUgPSAndHJ1ZSdcclxuICB9XHJcblxyXG5cclxuICBwdWJsaWMgc2V0TmV3QVNQSW5pdGlhbCgpIHtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsXHJcbiAgICBjb250YWluZXIuZW1wdHkoKVxyXG4gICAgY29udGFpbmVyLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIlRyYW5zZmVyLlZpZXdcIiB9KTtcclxuICAgIGNvbnRhaW5lci5jcmVhdGVFbChcInBcIilcclxuICB9XHJcblxyXG4gIGFzeW5jIG9uT3BlbigpIHtcclxuICAgIHRoaXMuc2V0TmV3QVNQSW5pdGlhbCgpXHJcbiAgfVxyXG5cclxuICBhc3luYyBvbkNsb3NlKCkge1xyXG4gICAgLy8gTm90aGluZyB0byBjbGVhbiB1cC5cclxuICB9XHJcblxyXG4gIHNob3dFcnJvcihmcmFnbWVudDogRG9jdW1lbnRGcmFnbWVudCkge1xyXG4gICAgLy8gICB0aGlzLnNldEluaXRpYWwocnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19TZW1hbG9naWNdWzFdKVxyXG4gICAgdGhpcy5jb250ZW50RWwuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpXHJcbiAgfVxyXG4gIG9udW5sb2FkKCk6IHZvaWQge1xyXG4gICAgaWYgKHRoaXMuc2xDb21tICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICB0aGlzLnNsQ29tbS5zbFBsdWdpbi5hY3RpdmF0ZWQgPSBmYWxzZVxyXG4gICAgICB0aGlzLnNsQ29tbS5zbFBsdWdpbi5teVN0YXR1cy5zZXRUZXh0KCdUcmFuc2ZlciBpcyBvZmYnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNyZWF0ZVJlcXVlc3QoY29tbTogU2VtYUxvZ2ljUGx1Z2luQ29tbSwgc2V0dGluZ3M6IFNlbWFMb2dpY1BsdWdpblNldHRpbmdzLCBhcGlVcmw6IHN0cmluZywgbWV0aG9kOiBzdHJpbmcsIGNvbnRlbnRUeXBlOiBzdHJpbmcsIHdpdGhCYXNpY0F1dGg6IGJvb2xlYW4sIGJvZHk/OiBzdHJpbmcpOiBSZXF1ZXN0VXJsUGFyYW0ge1xyXG4gICAgbGV0IHJlcXVlc3Q6IFJlcXVlc3RVcmxQYXJhbVxyXG4gICAgdHlwZSByZXF1ZXN0SGVhZGVyID0gUmVjb3JkPHN0cmluZywgc3RyaW5nPlxyXG4gICAgbGV0IG15SGVhZGVyOiByZXF1ZXN0SGVhZGVyID0ge31cclxuXHJcbiAgICBjb250ZW50VHlwZSA9IGNvbnRlbnRUeXBlLnRvTG93ZXJDYXNlKClcclxuICAgIG1ldGhvZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpXHJcblxyXG4gICAgc3dpdGNoIChjb250ZW50VHlwZS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgIGNhc2UgKFwianNvblwiKToge1xyXG4gICAgICAgIG15SGVhZGVyW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIChcImFzcFwiKToge1xyXG4gICAgICAgIG15SGVhZGVyW1wiQ29udGVudC1UeXBlXCJdID0gXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIChcImFzcC5qc29uXCIpOiB7XHJcbiAgICAgICAgbXlIZWFkZXJbXCJDb250ZW50LVR5cGVcIl0gPSBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgKFwidGV4dFwiKToge1xyXG4gICAgICAgIG15SGVhZGVyW1wiQ29udGVudC1UeXBlXCJdID0gXCJ0ZXh0L3BsYWluXCJcclxuICAgICAgICBicmVha1xyXG4gICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICBteUhlYWRlcltcIkNvbnRlbnQtVHlwZVwiXSA9IGNvbnRlbnRUeXBlXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh3aXRoQmFzaWNBdXRoKSB7XHJcbiAgICAgIG15SGVhZGVyW1wiQXV0aG9yaXphdGlvblwiXSA9IFwiQmFzaWMgXCIgKyBidG9hKHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15VXNlciArIFwiOlwiICsgc2V0dGluZ3MubXlTTFNldHRpbmdzW3NldHRpbmdzLm15U2V0dGluZ10ubXlQYXNzd29yZClcclxuICAgIH1cclxuXHJcbiAgICByZXF1ZXN0ID0ge1xyXG4gICAgICB1cmw6IGFwaVVybCxcclxuICAgICAgbWV0aG9kOiBtZXRob2QsXHJcbiAgICAgIGhlYWRlcnM6IG15SGVhZGVyLFxyXG4gICAgICBib2R5OiBib2R5XHJcbiAgICB9XHJcbiAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZyhyZXF1ZXN0KSB9O1xyXG5cclxuICAgIHJldHVybiByZXF1ZXN0XHJcbiAgfVxyXG5cclxuICBnZXRBU1BDb21tYW5kcyhzbENvbW06IFNlbWFMb2dpY1BsdWdpbkNvbW0sIHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncyk6IHBhcnNlQ29tbWFuZCB7XHJcbiAgICBsZXQgcGFyYW1QYXJzZWRDb21tYW5kID0ge1xyXG4gICAgICBvdXRwdXRmb3JtYXQ6IFwiQVNQLmpzb25cIixcclxuICAgICAgZW5kcG9pbnQ6IHNldHRpbmdzLm15U0xTZXR0aW5nc1tzZXR0aW5ncy5teVNldHRpbmddLm15QXNwRW5kcG9pbnQsXHJcbiAgICAgIHBhcmFtOiBcIlwiXHJcbiAgICB9XHJcblxyXG4gICAgbGV0IGNvbW1hbmRzOiBwYXJzZUNvbW1hbmRcclxuXHJcbiAgICBpZiAoc2xDb21tLnNsdmlldyAhPSBudWxsKSB7XHJcblxyXG4gICAgICBjb25zdCBlZGl0b3J0ZXh0ID0gc2xDb21tLnNsVXNlZE1EVmlldy5lZGl0b3IuZ2V0UmFuZ2UoeyBsaW5lOiAwLCBjaDogMCB9LCB7IGxpbmU6IHNsQ29tbS5zbFVzZWRNRFZpZXcuZWRpdG9yLmxhc3RMaW5lKCksIGNoOiBzbENvbW0uc2xVc2VkTURWaWV3LmVkaXRvci5sYXN0TGluZS5sZW5ndGggfSlcclxuICAgICAgY29uc3Qgcm93cyA9IGVkaXRvcnRleHQuc3BsaXQoXCJcXG5cIikuZmlsdGVyKChyb3cpID0+IHJvdy5sZW5ndGggPiAwKTtcclxuXHJcbiAgICAgIGxldCBteVN0clJlc3VsdDogc3RyaW5nO1xyXG4gICAgICBsZXQgdHJhbnNmZXJTdHJpbmc6IHN0cmluZztcclxuICAgICAgbGV0IGVuZHBvaW50U3RyaW5nOiBzdHJpbmcgPSAnJztcclxuICAgICAgbGV0IHBhcmFtU3RyaW5nOiBzdHJpbmc7XHJcblxyXG4gICAgICByb3dzLmZvckVhY2gocm93ID0+IHtcclxuICAgICAgICBpZiAocm93LnN1YnN0cmluZygwLCBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQubGVuZ3RoKSA9PSBzZW1hTG9naWNDb21tYW5kLmNvbW1hbmRfc3RhcnQpIHtcclxuICAgICAgICAgIGNvbnN0IHRyYW5zZmVyID0gcm93LmluZGV4T2Yoc2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlcilcclxuICAgICAgICAgIGNvbnN0IGVuZHBvaW50ID0gcm93LmluZGV4T2Yoc2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlckVuZHBvaW50KVxyXG4gICAgICAgICAgbGV0IHBhcmFtID0gcm93LmluZGV4T2Yoc2VtYUxvZ2ljQ29tbWFuZC50cmFuc2ZlclBhcmFtKVxyXG4gICAgICAgICAgY29uc3QgZW5kQ29tbWFuZCA9IHJvdy5pbmRleE9mKHNlbWFMb2dpY0NvbW1hbmQuY29tbWFuZF9lbmQpXHJcbiAgICAgICAgICBpZiAocGFyYW0gPCAwKSB7IHBhcmFtID0gZW5kQ29tbWFuZCB9XHJcblxyXG4gICAgICAgICAgaWYgKHRyYW5zZmVyIDw9IDApIHsgfSBlbHNlIHtcclxuICAgICAgICAgICAgdHJhbnNmZXJTdHJpbmcgPSByb3cuc3Vic3RyaW5nKHRyYW5zZmVyICsgc2VtYUxvZ2ljQ29tbWFuZC50cmFuc2Zlci5sZW5ndGggKyAxLCBlbmRwb2ludClcclxuICAgICAgICAgICAgdHJhbnNmZXJTdHJpbmcgPSB0cmFuc2ZlclN0cmluZy50cmltRW5kKClcclxuICAgICAgICAgICAgaWYgKGVuZHBvaW50ID4gMCkge1xyXG4gICAgICAgICAgICAgIGVuZHBvaW50U3RyaW5nID0gcm93LnN1YnN0cmluZyhlbmRwb2ludCArIDEgKyBzZW1hTG9naWNDb21tYW5kLnRyYW5zZmVyRW5kcG9pbnQubGVuZ3RoLCBwYXJhbSlcclxuICAgICAgICAgICAgICBlbmRwb2ludFN0cmluZyA9IGVuZHBvaW50U3RyaW5nLnRyaW1FbmQoKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJhbSA+IDAgJiYgcGFyYW0gIT0gZW5kQ29tbWFuZCkge1xyXG4gICAgICAgICAgICAgIHBhcmFtU3RyaW5nID0gcm93LnN1YnN0cmluZyhwYXJhbSArIDEgKyBzZW1hTG9naWNDb21tYW5kLnRyYW5zZmVyUGFyYW0ubGVuZ3RoLCBlbmRDb21tYW5kKVxyXG4gICAgICAgICAgICAgIHBhcmFtU3RyaW5nID0gcGFyYW1TdHJpbmcudHJpbUVuZCgpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBhcmFtUGFyc2VkQ29tbWFuZCA9IHtcclxuICAgICAgICAgICAgICBvdXRwdXRmb3JtYXQ6IHRyYW5zZmVyU3RyaW5nLFxyXG4gICAgICAgICAgICAgIGVuZHBvaW50OiBlbmRwb2ludFN0cmluZyxcclxuICAgICAgICAgICAgICBwYXJhbTogcGFyYW1TdHJpbmdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiBwYXJhbVBhcnNlZENvbW1hbmRcclxuICB9XHJcblxyXG4gIHB1YmxpYyBhc3luYyBhc3BQYXJzZShzbENvbW06IFNlbWFMb2dpY1BsdWdpbkNvbW0sIHNldHRpbmdzOiBTZW1hTG9naWNQbHVnaW5TZXR0aW5ncywgYXNwSnNvblBhcnNlZFNlbWFMb2dpYzogc3RyaW5nKSB7XHJcbiAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0NoYXR0eSkgeyBjb25zb2xlLmxvZygnU3RhcnQgVHJhbnNmZXJfUGFyc2UnKSB9O1xyXG5cclxuICAgIGxldCB2QVBJX1VSTDogc3RyaW5nID0gXCJcIlxyXG4gICAgY29uc3QgcGFyc2VDb21tYW5kcyA9IHRoaXMuZ2V0QVNQQ29tbWFuZHMoc2xDb21tLCBzZXR0aW5ncylcclxuXHJcbiAgICBpZiAocGFyc2VDb21tYW5kcy5vdXRwdXRmb3JtYXQgPT0gcnVsZXNldHR5cGVzQ29tbWFuZHNbcnN0eXBlc19BU1BdWzFdIHx8IHBhcnNlQ29tbWFuZHMub3V0cHV0Zm9ybWF0ID09IHJ1bGVzZXR0eXBlc0NvbW1hbmRzW3JzdHlwZXNfQVNQXVswXSkge1xyXG4gICAgICB2QVBJX1VSTCA9IGdldEhvc3RBc3BQb3J0KHNldHRpbmdzLCBwYXJzZUNvbW1hbmRzKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdkFQSV9VUkwgPSBwYXJzZUNvbW1hbmRzLmVuZHBvaW50XHJcbiAgICAgIGlmIChwYXJzZUNvbW1hbmRzLnBhcmFtICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGlmIChwYXJzZUNvbW1hbmRzLnBhcmFtLmxlbmd0aCA+IDApIHsgdkFQSV9VUkwgPSB2QVBJX1VSTCArIFwiP1wiICsgcGFyc2VDb21tYW5kcy5wYXJhbSB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coXCJUcmFuc2ZlciBVUkw6IFwiLCB2QVBJX1VSTCkgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBvcHRpb25zUGFyc2UgPSB0aGlzLmNyZWF0ZVJlcXVlc3QodGhpcy5zbENvbW0sIHNldHRpbmdzLCB2QVBJX1VSTCwgJ1BPU1QnLCAnanNvbicsIHRydWUsIGFzcEpzb25QYXJzZWRTZW1hTG9naWMpXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgaWYgKERlYnVnTGV2ZWwgPj0gRGVidWdMZXZNYXAuRGVidWdMZXZlbF9JbXBvcnRhbnQpIHsgY29uc29sZS5sb2coXCJBU1A6IHdhbnQgdG8gcGFyc2UgXCIsIG9wdGlvbnNQYXJzZSkgfTtcclxuICAgICAgY29uc3QgcmVzcG9uc2VQYXJzZSA9IGF3YWl0IHJlcXVlc3RVcmwob3B0aW9uc1BhcnNlKVxyXG4gICAgICBjb25zdCByZW1Kc29uID0gcmVzcG9uc2VQYXJzZS50ZXh0O1xyXG4gICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0ltcG9ydGFudCkgeyBjb25zb2xlLmxvZyhcIkFTUDogUGFyc2Ugd2l0aCBodHRwLXN0YXR1cyBcIiArIHJlc3BvbnNlUGFyc2Uuc3RhdHVzLnRvU3RyaW5nKCkpIH07XHJcbiAgICAgIGlmIChyZXNwb25zZVBhcnNlLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICBsZXQgcmVzdWx0aHR0cCA9IHJlc3BvbnNlUGFyc2UudGV4dDtcclxuICAgICAgICB0aGlzLnNldE5ld0FTUEluaXRpYWwoKVxyXG4gICAgICAgIC8vIHRlbXBvcmFyeSBwcmV0dHkgcHJpbnQgZm9yIG5vdCBmb3JtYXR0ZWQganNvbi1vdXRwdXQgLSB3aWxsIGJlIGNoYW5nZWQgaW4gcmVsIDIueFxyXG4gICAgICAgIHJlc3VsdGh0dHAgPSByZXN1bHRodHRwLnJlcGxhY2VBbGwoXCJbXCIsIFwiW1xcblwiKVxyXG4gICAgICAgIHJlc3VsdGh0dHAgPSByZXN1bHRodHRwLnJlcGxhY2VBbGwoXCJdXCIsIFwiXFxuXVwiKVxyXG4gICAgICAgIHJlc3VsdGh0dHAgPSByZXN1bHRodHRwLnJlcGxhY2VBbGwoXCIsXCIsIFwiLFxcblwiKVxyXG4gICAgICAgIGxldCByZXN1bHRodHRwQXJyYXkgPSByZXN1bHRodHRwLnNwbGl0KCdcXG4nKVxyXG4gICAgICAgIHJlc3VsdGh0dHBBcnJheS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgdGhpcy5jb250ZW50RWwuYXBwZW5kKGVsZW1lbnQpXHJcbiAgICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbChcImJyXCIpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfQ2hhdHR5KSkgeyBjb25zb2xlLmxvZyhgQVNQLVBhcnNlcmVzdWx0OiR7cmVzdWx0aHR0cH1gKSB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgIGlmIChEZWJ1Z0xldmVsID49IERlYnVnTGV2TWFwLkRlYnVnTGV2ZWxfSGlnaCkgeyBjb25zb2xlLmxvZyhgQ2F0Y2hlcnJvciBvZiByZW1vdmluZyBjb250ZXh0ICR7dkFQSV9VUkx9YCkgfVxyXG4gICAgICBpZiAoRGVidWdMZXZlbCA+PSBEZWJ1Z0xldk1hcC5EZWJ1Z0xldmVsX0hpZ2gpIHsgY29uc29sZS5sb2coZS50b1N0cmluZygpKSB9XHJcblxyXG4gICAgICBsZXQgdGV4dCA9IG5ldyBEb2N1bWVudEZyYWdtZW50KClcclxuICAgICAgdGV4dC5jcmVhdGVFbChcInBcIilcclxuICAgICAgbGV0IHRleHRmcmFnbWVudCA9IChuZXcgUmFuZ2UoKSkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGUudG9TdHJpbmcoKSk7XHJcbiAgICAgIHRleHQuYXBwZW5kQ2hpbGQodGV4dGZyYWdtZW50KVxyXG5cclxuICAgICAgdGV4dC5jcmVhdGVFbChcInBcIilcclxuICAgICAgdGV4dGZyYWdtZW50ID0gKG5ldyBSYW5nZSgpKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoXCJTZWUgZm9yIGluZm9ybWF0aW9uIGFib3V0IHRoZSBlcnJvci1jb2RlIG9mIGh0dHA6IGh0dHBzOi8vZGUud2lraXBlZGlhLm9yZy93aWtpL0hUVFAtU3RhdHVzY29kZSBcIik7XHJcbiAgICAgIHRleHQuYXBwZW5kKHRleHRmcmFnbWVudClcclxuXHJcbiAgICAgIHRleHQuY3JlYXRlRWwoXCJwXCIpXHJcbiAgICAgIHRleHRmcmFnbWVudCA9IChuZXcgUmFuZ2UoKSkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KG9wdGlvbnNQYXJzZS51cmwpO1xyXG4gICAgICB0ZXh0LmFwcGVuZCh0ZXh0ZnJhZ21lbnQpXHJcblxyXG4gICAgICB0ZXh0LmNyZWF0ZUVsKFwicFwiKVxyXG4gICAgICB0ZXh0ZnJhZ21lbnQgPSAobmV3IFJhbmdlKCkpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChTdHJpbmcob3B0aW9uc1BhcnNlLmJvZHkpKTtcclxuICAgICAgdGV4dC5hcHBlbmQodGV4dGZyYWdtZW50KVxyXG4gICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpXHJcbiAgICAgIHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKFwiYnJcIilcclxuICAgICAgdGhpcy5jb250ZW50RWwuYXBwZW5kKHRleHQpXHJcbiAgICB9XHJcbiAgICAvL3RoaXMuc2xDb21tLnNsdmlldy5zaG93RXJyb3IodGV4dClcclxuICAgIC8vdGhyb3cgZVxyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSw2QkFBQUE7QUFBQSxFQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFDLG1CQUNNOzs7QUNETixJQUFBQyxtQkFBeUc7OztBQ0NsRyxJQUFNLGVBQWU7QUFBQSxFQUMzQixNQUFNO0FBQUEsRUFDTixPQUFPO0FBQUEsRUFDUCxVQUFVO0FBQUEsRUFDVixNQUFNO0FBQUEs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ZCxLQUFLO0FBQUEsUUFDTCxRQUFRO0FBQUEsUUFDUixTQUFTO0FBQUEsVUFDUixnQkFBZ0I7QUFBQSxRQUNqQjtBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBRUEsUUFBSSxjQUFjLFlBQVksc0JBQXNCO0FBQUUsbUJBQWEsS0FBSyxPQUFPLFFBQVEsWUFBWTtBQUFBLElBQUU7QUFDckcsUUFBSTtBQUNILFlBQU0sZ0JBQWdCLFVBQU0sNkJBQVcsWUFBWTtBQUNuRCxVQUFJLGNBQWMsWUFBWSx3QkFBd0I7QUFBRSxnQkFBUSxJQUFJLEtBQUssT0FBTyxRQUFRLHFDQUFxQyxjQUFjLE9BQU8sU0FBUyxHQUFHO0FBQUEsTUFBRTtBQUFDO0FBQUEsSUFDbEssU0FDTyxHQUFQO0FBQ0MsY0FBUSxJQUFJLEtBQUssT0FBTyxRQUFRLHVCQUF1QixnQkFBZ0I7QUFDdkUsY0FBUSxJQUFJLEtBQUssT0FBTyxRQUFRLEVBQUUsU0FBUyxDQUFDO0FBQUEsSUFDN0M7QUFBQSxFQUNEO0FBRUQ7IiwKICAibmFtZXMiOiBbIlNlbWFMb2dpY1BsdWdpbkNvbW0iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAicm93IiwgIlNlbWFMb2dpY1ZpZXciLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF92aWV3IiwgImFwcCIsICJTZW1hTG9naWNQbHVnaW5Db21tIiwgInZhbHVlIiwgImxlYWYiLCAiU2VtYUxvZ2ljVmlldyJdCn0K
